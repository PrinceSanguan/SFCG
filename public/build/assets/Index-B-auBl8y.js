import{r as x,m as w,j as e,$ as h}from"./app-CCJlN86-.js";import{S as C,H as S}from"./sidebar-BNwurjZB.js";import{C as p,b as j,c as g,a as f}from"./card-B4s1nGUl.js";import{B as r}from"./button-DW6hxA7u.js";import{I as k}from"./input-BD5jDkC3.js";import{B as U}from"./badge-BoE9IMT-.js";import{P as _}from"./PasswordResetModal-sV7IsLnP.js";import{S as z}from"./search-hr5pbMbe.js";import{U as D}from"./users-BEIQlztf.js";import{E as P}from"./eye-DSbHEZ63.js";import{S as $}from"./square-pen-cbjzQcoy.js";import{K as T}from"./key-CEJdP_8M.js";import{T as E}from"./trash-2-DtV_i49w.js";/* empty css            */import"./dropdown-menu-pX84g8wd.js";import"./Combination-CAHCWGXH.js";import"./index-Cf-1VLXX.js";import"./separator-QBM470AX.js";import"./chevron-right-Btj-8RSw.js";import"./crown-DM8OxwI6.js";import"./building-2-VPSVk1jv.js";import"./user-cog-fos9jN0h.js";import"./book-open-kASudkuc.js";import"./user-check-Cfz0o-C8.js";import"./graduation-cap-Q6zicJf4.js";import"./notebook-B6aIz0jf.js";import"./chart-no-axes-column-increasing-DmvJu4hh.js";import"./label-6fBwkNh0.js";import"./alert-Cu7wYVry.js";import"./dialog-DVMpIbh_.js";import"./rotate-ccw-x1V6-w7U.js";import"./eye-off-DUzZoOts.js";function pe({user:o,users:t,filters:d,roles:M,currentRole:a,yearLevel:i}){const[l,n]=x.useState(null),[c,m]=x.useState(null),{delete:u}=w(),N=s=>{n(s)},y=s=>{m(s)},v=()=>{if(l){let s;a&&a!=="student"?s=route(`registrar.${a}s.destroy`,l.id):i?s=route("registrar.students.destroy",l.id):s=route("registrar.users.destroy",l.id),u(s,{onSuccess:()=>{n(null)}})}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(C,{user:o}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(S,{user:o}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:i?`${i.charAt(0).toUpperCase()+i.slice(1).replace("_"," ")} Students`:a?`${a.charAt(0).toUpperCase()+a.slice(1)} Management`:"User Management"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:i?`Manage ${i.replace("_"," ")} student accounts.`:"Manage user accounts and permissions."})]}),e.jsxs(p,{children:[e.jsx(j,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Search & Filters"]})}),e.jsx(f,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(k,{placeholder:"Search users by name or email...",defaultValue:(d==null?void 0:d.search)||""})}),e.jsx(r,{children:"Search"})]})})]}),e.jsxs(p,{children:[e.jsx(j,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Users (",t.total,")"]})}),e.jsxs(f,{children:[e.jsxs("div",{className:"space-y-4",children:[t.data.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),s.year_level&&e.jsx("p",{className:"text-xs text-gray-400 capitalize",children:s.year_level.replace("_"," ")})]}),e.jsx(U,{variant:"secondary",children:s.user_role})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{href:route("registrar.users.show",s.id),children:e.jsxs(r,{variant:"outline",size:"sm",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"View"]})}),e.jsx(h,{href:route("registrar.users.edit",s.id),children:e.jsxs(r,{variant:"outline",size:"sm",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Edit"]})}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>y(s),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Reset Password"]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>N(s),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]},s.id)),t.data.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No users found."})})]}),t.last_page>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("div",{className:"flex gap-2",children:Array.from({length:t.last_page},(s,b)=>b+1).map(s=>e.jsx(r,{variant:s===t.current_page?"default":"outline",size:"sm",children:s},s))})})]})]})]})})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Confirm Delete"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",e.jsx("strong",{children:l.name}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(r,{variant:"outline",onClick:()=>n(null),children:"Cancel"}),e.jsx(r,{variant:"destructive",onClick:v,children:"Delete User"})]})]})}),c&&e.jsx(_,{user:c,isOpen:!!c,onClose:()=>m(null),routeName:a?`registrar.${a}s.reset-password`:"registrar.users.reset-password"})]})}export{pe as default};
