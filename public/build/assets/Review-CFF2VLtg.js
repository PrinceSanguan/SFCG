import{j as e,r as G,m as H,$ as I,C as k}from"./app-UQ7gFYkn.js";import{H as P}from"./header-DilCizu8.js";import{S as T}from"./sidebar-BiholkFs.js";import{C as i,b as n,c as l,a as c}from"./card-OQypK_El.js";import{B as o}from"./badge-IgKZVqMI.js";import{B as t}from"./button-B4qDo9F3.js";import{T as z}from"./textarea-CWnJ3CSv.js";import{L as r}from"./label-NpvLk_cv.js";import{A as E}from"./arrow-left-BypObnlb.js";import{G as h}from"./graduation-cap-BffXGCF5.js";import{C as R}from"./circle-x-D571JzIy.js";import{C as $}from"./clock-DMdoZaDS.js";/* empty css            */import"./dropdown-menu-CnXDpmmf.js";import"./Combination-Db_bS9fT.js";import"./index-DXaO-Nbq.js";import"./separator-197hD1SO.js";import"./user-check-BZCdjyZg.js";import"./chevron-right-DbjeqPZu.js";import"./book-open-C16vuBve.js";import"./award-BjyT-Pcg.js";import"./chart-no-axes-column-increasing-BGmkhYsj.js";import"./trending-up-BoiaWjOz.js";import"./building-2-CLOCTYUM.js";import"./log-out-Bg77S40J.js";function he({user:d,grade:s}){var f,g,v,N,b,y,_,w,C;if(!d)return e.jsx("div",{children:"Loading..."});const[A,m]=G.useState(!1),{data:x,setData:j,post:u,processing:a,errors:p}=H({return_reason:""}),S=()=>{u(route("chairperson.final-averages.approve",s.id))},F=()=>{x.return_reason.trim()&&(u(route("chairperson.final-averages.return",s.id)),m(!1),j("return_reason",""))},B=()=>s.is_returned?e.jsx(o,{variant:"destructive",children:"Returned"}):s.is_approved?e.jsx(o,{variant:"default",children:"Approved"}):e.jsx(o,{variant:"secondary",children:"Pending"}),L=()=>s.is_returned?e.jsx(R,{className:"h-5 w-5 text-red-500"}):s.is_approved?e.jsx(k,{className:"h-5 w-5 text-green-500"}):e.jsx($,{className:"h-5 w-5 text-yellow-500"});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(T,{user:d}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(P,{user:d}),e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 dark:bg-gray-900 p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(t,{asChild:!0,variant:"outline",size:"sm",children:e.jsxs(I,{href:route("chairperson.final-averages.index"),children:[e.jsx(E,{className:"h-4 w-4"}),"Back to Final Averages"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Review Final Average"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Review and approve final average grade"})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(i,{children:[e.jsx(n,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"Student Information"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Student Name"}),e.jsx("p",{className:"text-lg font-semibold",children:(f=s.student)==null?void 0:f.name})]}),((g=s.student)==null?void 0:g.student_number)&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Student Number"}),e.jsx("p",{className:"text-lg",children:s.student.student_number})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Academic Level"}),e.jsx("p",{className:"text-lg",children:(v=s.academic_level)==null?void 0:v.name})]})]})]}),e.jsxs(i,{children:[e.jsx(n,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"Subject Information"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Subject Name"}),e.jsx("p",{className:"text-lg font-semibold",children:(N=s.subject)==null?void 0:N.name})]}),((b=s.subject)==null?void 0:b.code)&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Subject Code"}),e.jsx("p",{className:"text-lg",children:s.subject.code})]}),((y=s.subject)==null?void 0:y.course)&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Course"}),e.jsx("p",{className:"text-lg",children:s.subject.course.name})]})]})]})]}),e.jsxs(i,{children:[e.jsx(n,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"Final Average Details"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Final Average"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.grade})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"School Year"}),e.jsx("p",{className:"text-lg",children:s.school_year})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[L(),B()]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Grading Period"}),e.jsx("p",{className:"text-lg",children:(_=s.grading_period)==null?void 0:_.name})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Submitted At"}),e.jsx("p",{className:"text-lg",children:s.submitted_at?new Date(s.submitted_at).toLocaleString():"Not submitted"})]})]}),s.is_returned&&s.return_reason&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Return Reason"}),e.jsx("div",{className:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-red-800 dark:text-red-200",children:s.return_reason})})]})]})]}),!s.is_approved&&!s.is_returned&&e.jsxs(i,{children:[e.jsx(n,{children:e.jsx(l,{children:"Actions"})}),e.jsx(c,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(t,{onClick:S,disabled:a,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Approve Final Average"]}),e.jsxs(t,{variant:"destructive",onClick:()=>m(!0),disabled:a,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Return for Correction"]})]})})]})]})})})]}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Return Final Average for Correction"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Returning final average for ",e.jsx("strong",{children:(w=s.student)==null?void 0:w.name})," in ",e.jsx("strong",{children:(C=s.subject)==null?void 0:C.name})]}),e.jsx(r,{htmlFor:"return_reason",children:"Reason for Return"}),e.jsx(z,{id:"return_reason",value:x.return_reason,onChange:D=>j("return_reason",D.target.value),placeholder:"Please provide a reason for returning this final average...",className:"mt-2",rows:4}),p.return_reason&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:p.return_reason})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(t,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(t,{variant:"destructive",onClick:F,disabled:a||!x.return_reason.trim(),children:a?"Returning...":"Return Final Average"})]})]})})]})}export{he as default};
