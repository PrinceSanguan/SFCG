import{r as g,m as Z,j as e,C as ee}from"./app-DSZQfnm7.js";import{H as ae}from"./header-ryT4_DAz.js";import{S as se}from"./sidebar-DvL0mbsf.js";import{C as k,b as T,c as A,a as H}from"./card-D1gZMjhf.js";import{B as d}from"./button-CZ7Coqpo.js";import{I as t}from"./input-Pl7cG8BK.js";import{L as r}from"./label-_hDdIkx7.js";import{S as q,a as E,b as M,c as $,d as f}from"./select-CvbcPKAD.js";import{C as z}from"./checkbox-BCvvcNif.js";import{B as G}from"./badge-D91qH0dx.js";import{A as re,a as ne}from"./alert-4jFvaS9v.js";import{A as ie}from"./arrow-left-Dn73pYAC.js";import{P as B}from"./plus-DJTrZGLu.js";import{T as N}from"./trophy-BFgqyIgA.js";/* empty css            */import"./dropdown-menu-BOr8hag3.js";import"./Combination-BBzj80KB.js";import"./index-BAbkNUiq.js";import"./separator-Bv-_BkiJ.js";import"./users-PSMzHJnY.js";import"./chevron-right-CJSz5GLV.js";import"./crown-Cwq-EUuT.js";import"./building-2-Hs83XjRV.js";import"./user-cog-0heQw9Rv.js";import"./book-open--zfXQa9t.js";import"./user-check-CdRpIeQL.js";import"./graduation-cap-Bpc-uA0i.js";import"./notebook-DcczKtWs.js";import"./chart-no-axes-column-increasing-BTHb3nS_.js";import"./shield-B6qi-d-b.js";import"./index-B0d7Ap_L.js";import"./index-DA1uJnl7.js";import"./check-CGkqtIeh.js";function Ue({user:P,honorTypes:C,criteria:b,schoolYears:u}){const[w,o]=g.useState(null),[j,S]=g.useState(null),[s,c]=g.useState({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),[L,F]=g.useState(!1),[D,y]=g.useState(!1),[p,v]=g.useState({name:"",key:"",scope:"basic"}),{data:m,setData:h,post:O,processing:I,errors:R,reset:K}=Z({academic_level_id:"1",honor_type_id:"",school_year:"2024-2025",min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),V=a=>{a.preventDefault(),O("/admin/academic/honors/criteria",{onSuccess:()=>{o({type:"success",text:"Criteria saved successfully!"}),K(),F(!1),window.location.reload()},onError:()=>o({type:"error",text:"Failed to save criteria."})})},J=a=>{var l;a.preventDefault(),fetch("/admin/academic/honors/types",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify(p)}).then(n=>n.json()).then(n=>{n.success?(o({type:"success",text:"Honor type created successfully!"}),v({name:"",key:"",scope:"basic"}),y(!1),window.location.reload()):o({type:"error",text:"Failed to create honor type."})}).catch(()=>o({type:"error",text:"Failed to create honor type."}))},X=a=>{var l,n,x,_,i,U;S(a),c({min_gpa:((l=a.min_gpa)==null?void 0:l.toString())||"",max_gpa:((n=a.max_gpa)==null?void 0:n.toString())||"",min_grade:((x=a.min_grade)==null?void 0:x.toString())||"",min_grade_all:((_=a.min_grade_all)==null?void 0:_.toString())||"",min_year:((i=a.min_year)==null?void 0:i.toString())||"",max_year:((U=a.max_year)==null?void 0:U.toString())||"",require_consistent_honor:a.require_consistent_honor})},Y=()=>{S(null),c({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1})},Q=a=>{var n;const l={...j,min_gpa:parseFloat(s.min_gpa)||null,max_gpa:parseFloat(s.max_gpa)||null,min_grade:parseFloat(s.min_grade)||null,min_grade_all:parseFloat(s.min_grade_all)||null,min_year:parseInt(s.min_year)||null,max_year:parseInt(s.max_year)||null,require_consistent_honor:s.require_consistent_honor};fetch(`/admin/academic/honors/criteria/${a}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""},body:JSON.stringify(l)}).then(x=>{if(!x.ok)throw new Error(`HTTP ${x.status}`);return x.json()}).then(()=>{o({type:"success",text:"Criteria updated successfully!"}),S(null),window.location.reload()}).catch(()=>o({type:"error",text:"Failed to update criteria."}))},W=a=>{var l;window.confirm("Are you sure you want to delete this criterion?")&&fetch(`/admin/academic/honors/criteria/${a}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""}}).then(n=>{if(!n.ok)throw new Error(`HTTP ${n.status}`);return n.json()}).then(()=>{o({type:"success",text:"Criteria deleted successfully!"}),window.location.reload()}).catch(()=>o({type:"error",text:"Failed to delete criteria."}))};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(se,{user:P}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(ae,{user:P}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),"Back"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Elementary Honor Criteria"})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage honor criteria and types specifically for Elementary level students."})]})}),w&&e.jsxs(re,{className:w.type==="success"?"border-green-500":"border-red-500",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx(ne,{children:w.text})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(d,{variant:"outline",onClick:()=>y(!0),className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Add Honor Type"]}),e.jsxs(d,{onClick:()=>F(!0),className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Add New Criteria"]})]}),L&&e.jsxs(k,{children:[e.jsx(T,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Add Honor Criteria"]})}),e.jsx(H,{children:e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(r,{htmlFor:"honor_type_id",children:"Honor Type"}),e.jsx(d,{type:"button",variant:"outline",size:"sm",onClick:()=>y(!0),className:"text-xs",children:"+ Add New"})]}),C&&C.length>0?e.jsxs(q,{value:m.honor_type_id||"",onValueChange:a=>h("honor_type_id",a),children:[e.jsx(E,{children:e.jsx(M,{placeholder:"Select honor type"})}),e.jsx($,{children:C.filter(a=>a.scope==="basic"||a.scope==="advanced").map(a=>e.jsxs(f,{value:a.id.toString(),children:[a.name," (",a.scope,")"]},a.id))})]}):e.jsx("div",{className:"p-2 text-sm text-gray-500 bg-gray-100 rounded border",children:"Loading honor types..."}),R.honor_type_id&&e.jsx("p",{className:"text-sm text-red-500",children:R.honor_type_id})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"school_year",children:"School Year"}),e.jsxs(q,{value:m.school_year||"",onValueChange:a=>h("school_year",a),children:[e.jsx(E,{children:e.jsx(M,{placeholder:"Select school year"})}),e.jsx($,{children:(u!=null&&u.length?u:["2024-2025"]).filter(a=>a&&a.trim()!=="").map(a=>e.jsx(f,{value:a,children:a},a))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"min_gpa",children:"Min GPA"}),e.jsx(t,{id:"min_gpa",type:"number",step:"0.01",value:m.min_gpa,onChange:a=>h("min_gpa",a.target.value),placeholder:"e.g., 90.0"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"max_gpa",children:"Max GPA"}),e.jsx(t,{id:"max_gpa",type:"number",step:"0.01",value:m.max_gpa,onChange:a=>h("max_gpa",a.target.value),placeholder:"e.g., 97.0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"min_grade",children:"Min Grade (any)"}),e.jsx(t,{id:"min_grade",type:"number",value:m.min_grade,onChange:a=>h("min_grade",a.target.value),placeholder:"e.g., 90"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"min_grade_all",children:"Min Grade (all)"}),e.jsx(t,{id:"min_grade_all",type:"number",value:m.min_grade_all,onChange:a=>h("min_grade_all",a.target.value),placeholder:"e.g., 93"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"min_year",children:"Min Year"}),e.jsx(t,{id:"min_year",type:"number",value:m.min_year,onChange:a=>h("min_year",a.target.value),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"max_year",children:"Max Year"}),e.jsx(t,{id:"max_year",type:"number",value:m.max_year,onChange:a=>h("max_year",a.target.value),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{id:"require_consistent_honor",checked:!!m.require_consistent_honor,onCheckedChange:a=>h("require_consistent_honor",a)}),e.jsx(r,{htmlFor:"require_consistent_honor",children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{type:"submit",disabled:I,children:"Save Criteria"}),e.jsx(d,{type:"button",variant:"outline",onClick:()=>F(!1),children:"Cancel"})]})]})})]}),D&&e.jsxs(k,{children:[e.jsx(T,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Add New Honor Type"]})}),e.jsx(H,{children:e.jsxs("form",{onSubmit:J,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"honor_type_name",children:"Honor Type Name"}),e.jsx(t,{id:"honor_type_name",type:"text",value:p.name,onChange:a=>v({...p,name:a.target.value}),placeholder:"e.g., Academic Excellence",required:!0})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"honor_type_key",children:"Key (URL-friendly)"}),e.jsx(t,{id:"honor_type_key",type:"text",value:p.key,onChange:a=>v({...p,key:a.target.value.toLowerCase().replace(/[^a-z0-9]/g,"_")}),placeholder:"e.g., academic_excellence",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"honor_type_scope",children:"Scope"}),e.jsxs(q,{value:p.scope,onValueChange:a=>v({...p,scope:a}),children:[e.jsx(E,{children:e.jsx(M,{placeholder:"Select scope"})}),e.jsxs($,{children:[e.jsx(f,{value:"basic",children:"Basic (Elementary/JHS/SHS)"}),e.jsx(f,{value:"advanced",children:"Advanced (SHS/College)"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{type:"submit",children:"Create Honor Type"}),e.jsx(d,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"})]})]})})]}),e.jsxs(k,{children:[e.jsx(T,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Existing Criteria (",b.length,")"]})}),e.jsx(H,{children:b.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(N,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No honor criteria set for Elementary"}),e.jsx("p",{className:"text-sm",children:'Use the "Add New Criteria" button to create criteria for this level.'})]}):e.jsx("div",{className:"grid gap-4",children:b.map(a=>{var l,n,x,_;return e.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:(j==null?void 0:j.id)===a.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:((l=a.honorType)==null?void 0:l.name)||"Unknown Honor Type"}),e.jsx(G,{variant:"secondary",children:((n=a.honorType)==null?void 0:n.scope)||"Unknown"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:`edit_min_gpa_${a.id}`,children:"Min GPA"}),e.jsx(t,{id:`edit_min_gpa_${a.id}`,type:"number",step:"0.01",value:s.min_gpa,onChange:i=>c({...s,min_gpa:i.target.value}),placeholder:"e.g., 90.0"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:`edit_max_gpa_${a.id}`,children:"Max GPA"}),e.jsx(t,{id:`edit_max_gpa_${a.id}`,type:"number",step:"0.01",value:s.max_gpa,onChange:i=>c({...s,max_gpa:i.target.value}),placeholder:"e.g., 97.0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:`edit_min_grade_${a.id}`,children:"Min Grade (any)"}),e.jsx(t,{id:`edit_min_grade_${a.id}`,type:"number",value:s.min_grade,onChange:i=>c({...s,min_grade:i.target.value}),placeholder:"e.g., 90"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:`edit_min_grade_all_${a.id}`,children:"Min Grade (all)"}),e.jsx(t,{id:`edit_min_grade_all_${a.id}`,type:"number",value:s.min_grade_all,onChange:i=>c({...s,min_grade_all:i.target.value}),placeholder:"e.g., 93"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:`edit_min_year_${a.id}`,children:"Min Year"}),e.jsx(t,{id:`edit_min_year_${a.id}`,type:"number",value:s.min_year,onChange:i=>c({...s,min_year:i.target.value}),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:`edit_max_year_${a.id}`,children:"Max Year"}),e.jsx(t,{id:`edit_max_year_${a.id}`,type:"number",value:s.max_year,onChange:i=>c({...s,max_year:i.target.value}),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{id:`edit_require_consistent_${a.id}`,checked:s.require_consistent_honor,onCheckedChange:i=>c({...s,require_consistent_honor:i})}),e.jsx(r,{htmlFor:`edit_require_consistent_${a.id}`,children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:Y,children:"Cancel"}),e.jsx(d,{size:"sm",onClick:()=>Q(a.id),children:"Update Criteria"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:((x=a.honorType)==null?void 0:x.name)||"Unknown Honor Type"}),e.jsx(G,{variant:"secondary",children:((_=a.honorType)==null?void 0:_.scope)||"Unknown"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[a.min_gpa&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Min GPA:"})," ",a.min_gpa]}),a.max_gpa&&e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Max GPA:"})," ",a.max_gpa]}),a.min_grade&&e.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-yellow-700",children:"Min Grade:"})," ",a.min_grade]}),a.min_grade_all&&e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Min Grade (All):"})," ",a.min_grade_all]}),a.min_year&&a.max_year&&e.jsxs("div",{className:"bg-indigo-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-indigo-700",children:"Years:"})," ",a.min_year,"-",a.max_year]}),a.require_consistent_honor&&e.jsx("div",{className:"col-span-2",children:e.jsx(G,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:"Requires Consistent Honor Standing"})})]}),e.jsxs("div",{className:"flex justify-end mt-4 gap-2",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>X(a),children:"Edit"}),e.jsx(d,{variant:"destructive",size:"sm",onClick:()=>W(a.id),children:"Delete"})]})]})},a.id)})})})]})]})})]})]})}export{Ue as default};
