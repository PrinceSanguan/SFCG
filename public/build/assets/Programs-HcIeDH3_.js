import{r as i,j as e,$ as te,S as o}from"./app-BLpCIPlm.js";import{S as ie,H as ce}from"./sidebar-NYuFFyRZ.js";import{C as ne,b as oe,c as me,a as he}from"./card-DOxVrz_X.js";import{B as r}from"./button-DhX-RdVG.js";import{I as d}from"./input-srmO_gVx.js";import{L as a}from"./label-Cg3Aq2JO.js";import{S as v,a as g,b as N,c as S,d as m}from"./select-75WNd_R_.js";import{T as xe,a as je,b as V,c as z}from"./tabs-VWIw6Bth.js";import{D as f,a as O,b as C,c as b,d as _,f as y}from"./dialog-DLPvIjp9.js";import{A as ue,a as pe}from"./alert-Cm__ojYp.js";import{A as ve}from"./arrow-left-BWOnvZaE.js";import{P as B}from"./plus-5kASMS1i.js";/* empty css            */import"./dropdown-menu-DarAmEMq.js";import"./Combination-G1g2XF09.js";import"./index-DSzTBsdo.js";import"./separator-DtNW8rAR.js";import"./users-qWO7L20t.js";import"./chevron-right-DoYhJIcy.js";import"./crown-CpZyhGhW.js";import"./building-2--UJSzHQU.js";import"./user-cog-ByhxBAN_.js";import"./book-open-B_S6VV71.js";import"./user-check-B42cJFt8.js";import"./graduation-cap-5XyuasFs.js";import"./notebook-D_BMfuU0.js";import"./chart-no-axes-column-increasing-DzWgLAxz.js";import"./index-5vTJNLpr.js";import"./index-2Dy34izM.js";import"./check-Cyn5T6SC.js";function Ke({user:$,academicLevels:k=[],departments:D=[],tracks:L=[],formErrors:w}){var G;const[U,R]=i.useState("strands"),[c,u]=i.useState({name:"",code:"",academic_level_id:"",track_id:""}),[q,H]=i.useState(!1),[t,h]=i.useState(null),J=()=>{const s=k.find(l=>l.key==="senior_highschool");s&&u({name:"",code:"",academic_level_id:s.id.toString(),track_id:""}),H(!0)},[A,E]=i.useState({name:"",code:""}),[K,I]=i.useState(!1),[x,T]=i.useState(null),[j,F]=i.useState({name:"",code:"",department_id:""}),[Q,P]=i.useState(!1),[n,p]=i.useState(null),W=()=>{o.post(route("registrar.academic.strands.store"),c,{preserveScroll:!0,onSuccess:()=>{u({name:"",code:"",academic_level_id:"",track_id:""}),H(!1)}})},X=s=>{const l={name:s.name,code:s.code,academic_level_id:s.academic_level_id,track_id:s.track_id};o.put(route("registrar.academic.strands.update",s.id),l,{preserveScroll:!0,onSuccess:()=>h(null)})},Y=s=>{confirm(`Delete strand ${s.name}?`)&&o.delete(route("registrar.academic.strands.destroy",s.id),{preserveScroll:!0})},Z=()=>{o.post(route("registrar.academic.departments.store"),A,{preserveScroll:!0,onSuccess:()=>{E({name:"",code:""}),I(!1)}})},ee=s=>{const l={name:s.name,code:s.code};o.put(route("registrar.academic.departments.update",s.id),l,{preserveScroll:!0,onSuccess:()=>T(null)})},se=s=>{confirm(`Delete department ${s.name}?`)&&o.delete(route("registrar.academic.departments.destroy",s.id),{preserveScroll:!0})},ae=()=>{o.post(route("registrar.academic.courses.store"),j,{preserveScroll:!0,onSuccess:()=>{F({name:"",code:"",department_id:""}),P(!1)}})},re=s=>{const l={name:s.name,code:s.code,department_id:s.department_id};o.put(route("registrar.academic.courses.update",s.id),l,{preserveScroll:!0,onSuccess:()=>p(null)})},le=s=>{confirm(`Delete course ${s.name}?`)&&o.delete(route("registrar.academic.courses.destroy",s.id),{preserveScroll:!0})};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(ie,{user:$}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(ce,{user:$}),e.jsxs("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:[e.jsx("div",{className:"mb-4",children:e.jsx(te,{href:route("registrar.academic.index"),children:e.jsxs(r,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"})," Back to Academic & Curriculum"]})})}),e.jsxs(ne,{children:[e.jsx(oe,{children:e.jsx(me,{children:"Manage strands, courses, and departments"})}),e.jsx(he,{children:e.jsxs(xe,{value:U,onValueChange:R,children:[e.jsxs(je,{className:"grid w-full grid-cols-3",children:[e.jsx(V,{value:"strands",children:"Strands"}),e.jsx(V,{value:"departments",children:"Departments"}),e.jsx(V,{value:"courses",children:"Courses"})]}),e.jsxs(z,{value:"strands",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Academic Strands"}),e.jsxs(f,{open:q,onOpenChange:H,children:[e.jsx(O,{asChild:!0,children:e.jsxs(r,{onClick:J,className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Add Strand"]})}),e.jsxs(C,{children:[e.jsx(b,{children:e.jsx(_,{children:"Add new strand"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Strands are only available for Senior High School students as academic tracks (STEM, ABM, HUMSS, GAS)."]})}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"strand-name",children:"Name"}),e.jsx(d,{id:"strand-name",value:c.name,onChange:s=>u({...c,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"strand-code",children:"Code"}),e.jsx(d,{id:"strand-code",value:c.code,onChange:s=>u({...c,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"strand-track",children:"Track"}),e.jsxs(v,{value:c.track_id,onValueChange:s=>u({...c,track_id:s}),children:[e.jsx(g,{children:e.jsx(N,{placeholder:"Select track (optional)"})}),e.jsxs(S,{children:[e.jsx(m,{value:"",children:"No Track"}),L.map(s=>e.jsx(m,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tracks are optional groupings for strands"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"strand-level",children:"Academic Level"}),e.jsxs(v,{value:c.academic_level_id,onValueChange:s=>u({...c,academic_level_id:s}),disabled:!0,children:[e.jsx(g,{children:e.jsx(N,{placeholder:"Select academic level"})}),e.jsx(S,{children:k.filter(s=>s.key==="senior_highschool").map(s=>e.jsx(m,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Strands are automatically assigned to Senior High School"}),(w==null?void 0:w.academic_level_id)&&e.jsx(ue,{variant:"destructive",children:e.jsx(pe,{children:w.academic_level_id})})]})]}),e.jsx(y,{children:e.jsx(r,{onClick:W,children:"Save"})})]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Track"}),e.jsx("th",{className:"text-left p-3",children:"Academic Level"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:k.flatMap(s=>s.strands).map(s=>{var l,M;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:((l=s.track)==null?void 0:l.name)||"-"}),e.jsx("td",{className:"p-3",children:((M=k.find(de=>de.id===s.academic_level_id))==null?void 0:M.name)||"-"}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>h(s),children:"Edit"}),e.jsx(r,{variant:"destructive",size:"sm",onClick:()=>Y(s),children:"Delete"})]})})]},s.id)})})]})})]}),e.jsxs(z,{value:"departments",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Departments"}),e.jsxs(f,{open:K,onOpenChange:I,children:[e.jsx(O,{asChild:!0,children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"})," Add Department"]})}),e.jsxs(C,{children:[e.jsx(b,{children:e.jsx(_,{children:"Add new department"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"dept-name",children:"Name"}),e.jsx(d,{id:"dept-name",value:A.name,onChange:s=>E({...A,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"dept-code",children:"Code"}),e.jsx(d,{id:"dept-code",value:A.code,onChange:s=>E({...A,code:s.target.value})})]})]}),e.jsx(y,{children:e.jsx(r,{onClick:Z,children:"Save"})})]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:D.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>T(s),children:"Edit"}),e.jsx(r,{variant:"destructive",size:"sm",onClick:()=>se(s),children:"Delete"})]})})]},s.id))})]})})]}),e.jsxs(z,{value:"courses",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Courses"}),e.jsxs(f,{open:Q,onOpenChange:P,children:[e.jsx(O,{asChild:!0,children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"})," Add Course"]})}),e.jsxs(C,{children:[e.jsx(b,{children:e.jsx(_,{children:"Add new course"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"course-name",children:"Name"}),e.jsx(d,{id:"course-name",value:j.name,onChange:s=>F({...j,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"course-code",children:"Code"}),e.jsx(d,{id:"course-code",value:j.code,onChange:s=>F({...j,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"course-dept",children:"Department"}),e.jsxs(v,{value:j.department_id,onValueChange:s=>F({...j,department_id:s}),children:[e.jsx(g,{children:e.jsx(N,{placeholder:"Select department"})}),e.jsx(S,{children:D.map(s=>e.jsx(m,{value:s.id.toString(),children:s.name},s.id))})]})]})]}),e.jsx(y,{children:e.jsx(r,{onClick:ae,children:"Save"})})]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Department"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:D.flatMap(s=>s.courses).map(s=>{var l;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:((l=D.find(M=>M.id===s.department_id))==null?void 0:l.name)||"-"}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>p(s),children:"Edit"}),e.jsx(r,{variant:"destructive",size:"sm",onClick:()=>le(s),children:"Delete"})]})})]},s.id)})})]})})]})]})})]}),t&&e.jsx(f,{open:!!t,onOpenChange:s=>!s&&h(null),children:e.jsxs(C,{children:[e.jsx(b,{children:e.jsx(_,{children:"Edit strand"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Strands are only available for Senior High School students as academic tracks (STEM, ABM, HUMSS, GAS)."]})}),e.jsxs("div",{children:[e.jsx(a,{children:"Name"}),e.jsx(d,{value:t.name,onChange:s=>h({...t,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Code"}),e.jsx(d,{value:t.code,onChange:s=>h({...t,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Track"}),e.jsxs(v,{value:((G=t.track_id)==null?void 0:G.toString())||"",onValueChange:s=>h({...t,track_id:s?Number(s):void 0}),children:[e.jsx(g,{children:e.jsx(N,{placeholder:"Select track (optional)"})}),e.jsxs(S,{children:[e.jsx(m,{value:"",children:"No Track"}),L.map(s=>e.jsx(m,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tracks are optional groupings for strands"})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Academic Level"}),e.jsxs(v,{value:t.academic_level_id.toString(),onValueChange:s=>h({...t,academic_level_id:Number(s)}),disabled:!0,children:[e.jsx(g,{children:e.jsx(N,{})}),e.jsx(S,{children:k.filter(s=>s.key==="senior_highschool").map(s=>e.jsx(m,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Strands are automatically assigned to Senior High School"})]})]}),e.jsx(y,{children:e.jsx(r,{onClick:()=>X(t),children:"Save"})})]})}),x&&e.jsx(f,{open:!!x,onOpenChange:s=>!s&&T(null),children:e.jsxs(C,{children:[e.jsx(b,{children:e.jsx(_,{children:"Edit department"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(a,{children:"Name"}),e.jsx(d,{value:x.name,onChange:s=>T({...x,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Code"}),e.jsx(d,{value:x.code,onChange:s=>T({...x,code:s.target.value})})]})]}),e.jsx(y,{children:e.jsx(r,{onClick:()=>ee(x),children:"Save"})})]})}),n&&e.jsx(f,{open:!!n,onOpenChange:s=>!s&&p(null),children:e.jsxs(C,{children:[e.jsx(b,{children:e.jsx(_,{children:"Edit course"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(a,{children:"Name"}),e.jsx(d,{value:n.name,onChange:s=>p({...n,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Code"}),e.jsx(d,{value:n.code,onChange:s=>p({...n,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Department"}),e.jsxs(v,{value:n.department_id.toString(),onValueChange:s=>p({...n,department_id:Number(s)}),children:[e.jsx(g,{children:e.jsx(N,{})}),e.jsx(S,{children:D.map(s=>e.jsx(m,{value:s.id.toString(),children:s.name},s.id))})]})]})]}),e.jsx(y,{children:e.jsx(r,{onClick:()=>re(n),children:"Save"})})]})})]})]})]})}export{Ke as default};
