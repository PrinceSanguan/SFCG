import{r as q,K as se,m as T,j as e,$ as ae}from"./app-D6JUU4GY.js";import{B as F}from"./button-CPmyIEn_.js";import{C as j,a as u,b as G,c as D}from"./card-BfNO1C18.js";import{L as i}from"./label-DFWr2CLi.js";import{S as n,a as o,b as m,c as h,d as r}from"./select-CiHGWHIv.js";import{T as re,a as le,b as R,c as P}from"./tabs-D50Tn48F.js";import{C as A}from"./checkbox-CH2Rq1Qi.js";import{S as ie,H as ce}from"./sidebar-m-AMw-5J.js";import{U as de}from"./users-BeqyrJmJ.js";import{G as te}from"./graduation-cap-2j-UG51c.js";import{A as V}from"./award-e5cMZx7_.js";import{F as S}from"./file-text-BIfNdYsi.js";import{A as H,F as I,a as ne}from"./file-x-C-jjY2nN.js";import{D as K}from"./download-DnHzYGZb.js";/* empty css            */import"./index-CvmzyqZ3.js";import"./Combination-BPBnXyIy.js";import"./index-BE1X7sAi.js";import"./index-C0jtsgAp.js";import"./check-DgcNiDQL.js";import"./dropdown-menu-Btl_oA4B.js";import"./separator-DuMKPWn4.js";import"./chevron-right-BAAm8A5j.js";import"./crown-C-HZ3i41.js";import"./building-2-DALFbnhw.js";import"./user-cog-m6r9Xns9.js";import"./book-open-DVql7Eay.js";import"./user-check-Iu9Dg4mQ.js";import"./notebook-SD6h3e9g.js";import"./chart-no-axes-column-increasing-DRUZIMyD.js";function Le({user:B,academicLevels:E,schoolYears:g,gradingPeriods:X,honorTypes:z,stats:w}){var $;const[J,M]=q.useState("grade-reports"),{props:Q}=se(),f=Q.csrf_token||(($=document.querySelector('meta[name="csrf-token"]'))==null?void 0:$.content)||"",[v,N]=q.useState(!1),{data:x,setData:y,processing:L}=T({academic_level_id:"all",grading_period_id:"all",school_year:g[0]||"",format:"pdf",include_statistics:"1"}),{data:b,setData:k,processing:O}=T({academic_level_id:"all",school_year:g[0]||"",honor_type_id:"all",format:"pdf"}),{data:p,setData:_,processing:U}=T({academic_level_id:"",school_year:g[0]||"",include_grades:"1",include_honors:"1",include_certificates:"1",format:"excel"}),W=s=>{if(s.preventDefault(),!f){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}N(!0);let l=document.getElementById("download-iframe");l||(l=document.createElement("iframe"),l.id="download-iframe",l.style.display="none",document.body.appendChild(l));const a=document.createElement("form");a.method="POST",a.action=route("registrar.reports.grade-report"),a.target="download-iframe";const c=document.createElement("input");c.type="hidden",c.name="_token",c.value=f,a.appendChild(c),Object.entries(x).forEach(([C,t])=>{const d=document.createElement("input");d.type="hidden",d.name=C,d.value=(t==null?void 0:t.toString())||"",a.appendChild(d)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>N(!1),2e3)},Z=s=>{if(s.preventDefault(),!f){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}N(!0);let l=document.getElementById("download-iframe");l||(l=document.createElement("iframe"),l.id="download-iframe",l.style.display="none",document.body.appendChild(l));const a=document.createElement("form");a.method="POST",a.action=route("registrar.reports.honor-statistics"),a.target="download-iframe";const c=document.createElement("input");c.type="hidden",c.name="_token",c.value=f,a.appendChild(c),Object.entries(b).forEach(([C,t])=>{const d=document.createElement("input");d.type="hidden",d.name=C,d.value=(t==null?void 0:t.toString())||"",a.appendChild(d)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>N(!1),2e3)},Y=s=>{if(s.preventDefault(),!f){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}N(!0);let l=document.getElementById("download-iframe");l||(l=document.createElement("iframe"),l.id="download-iframe",l.style.display="none",document.body.appendChild(l));const a=document.createElement("form");a.method="POST",a.action=route("registrar.reports.archive-records"),a.target="download-iframe";const c=document.createElement("input");c.type="hidden",c.name="_token",c.value=f,a.appendChild(c),Object.entries(p).forEach(([C,t])=>{const d=document.createElement("input");d.type="hidden",d.name=C,d.value=(t==null?void 0:t.toString())||"",a.appendChild(d)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>N(!1),2e3)},ee=X.filter(s=>s.academic_level_id.toString()===x.academic_level_id||x.academic_level_id==="all");return e.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(ie,{user:B}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(ce,{user:B}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 min-h-0",children:e.jsxs("div",{className:"flex flex-col gap-6 pb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Reports & Archiving"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Generate comprehensive reports and archive academic records."})]}),e.jsx(ae,{href:route("registrar.dashboard"),children:e.jsx(F,{variant:"outline",children:"Back to Dashboard"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(j,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(de,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:w.total_students})]})]})})}),e.jsx(j,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(te,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Periods"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:w.active_periods})]})]})})}),e.jsx(j,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(V,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Honors"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:w.total_honors})]})]})})}),e.jsx(j,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900 rounded-lg",children:e.jsx(S,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Certificates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:w.total_certificates})]})]})})})]}),e.jsxs(re,{value:J,onValueChange:M,className:"w-full",children:[e.jsxs(le,{className:"grid w-full grid-cols-3",children:[e.jsxs(R,{value:"grade-reports",className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),"Grade Reports"]}),e.jsxs(R,{value:"honor-statistics",className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Honor Statistics"]}),e.jsxs(R,{value:"archiving",className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"Archiving"]})]}),e.jsx(P,{value:"grade-reports",className:"mt-6",children:e.jsxs(j,{children:[e.jsx(G,{children:e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Generate Grade Reports"]})}),e.jsx(u,{children:e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"academic_level",children:"Academic Level"}),e.jsxs(n,{value:x.academic_level_id,onValueChange:s=>y("academic_level_id",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select academic level"})}),e.jsxs(h,{children:[e.jsx(r,{value:"all",children:"All Levels"}),E.map(s=>e.jsx(r,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"grading_period",children:"Grading Period"}),e.jsxs(n,{value:x.grading_period_id,onValueChange:s=>y("grading_period_id",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select grading period"})}),e.jsxs(h,{children:[e.jsx(r,{value:"all",children:"All Periods"}),ee.map(s=>e.jsx(r,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"school_year",children:"School Year"}),e.jsxs(n,{value:x.school_year,onValueChange:s=>y("school_year",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select school year"})}),e.jsx(h,{children:g.map(s=>e.jsx(r,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"format",children:"Format"}),e.jsxs(n,{value:x.format,onValueChange:s=>y("format",s),children:[e.jsx(o,{children:e.jsx(m,{})}),e.jsxs(h,{children:[e.jsx(r,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),"PDF"]})}),e.jsx(r,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Excel"]})})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:"include_statistics",checked:x.include_statistics==="1",onCheckedChange:s=>y("include_statistics",s===!0?"1":"0")}),e.jsx(i,{htmlFor:"include_statistics",children:"Include statistical analysis"})]}),e.jsx(F,{type:"submit",disabled:L||v,className:"w-full md:w-auto",children:L||v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating Report..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Generate Grade Report"]})})]})})]})}),e.jsx(P,{value:"honor-statistics",className:"mt-6",children:e.jsxs(j,{children:[e.jsx(G,{children:e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"}),"Generate Honor Statistics"]})}),e.jsx(u,{children:e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"honor_academic_level",children:"Academic Level"}),e.jsxs(n,{value:b.academic_level_id,onValueChange:s=>k("academic_level_id",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select academic level"})}),e.jsxs(h,{children:[e.jsx(r,{value:"all",children:"All Levels"}),E.map(s=>e.jsx(r,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"honor_school_year",children:"School Year"}),e.jsxs(n,{value:b.school_year,onValueChange:s=>k("school_year",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select school year"})}),e.jsx(h,{children:g.map(s=>e.jsx(r,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"honor_type",children:"Honor Type"}),e.jsxs(n,{value:b.honor_type_id,onValueChange:s=>k("honor_type_id",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select honor type"})}),e.jsxs(h,{children:[e.jsx(r,{value:"all",children:"All Types"}),z.map(s=>e.jsx(r,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"honor_format",children:"Format"}),e.jsxs(n,{value:b.format,onValueChange:s=>k("format",s),children:[e.jsx(o,{children:e.jsx(m,{})}),e.jsxs(h,{children:[e.jsx(r,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),"PDF"]})}),e.jsx(r,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Excel"]})})]})]})]})]}),e.jsx(F,{type:"submit",disabled:O||v,className:"w-full md:w-auto",children:O||v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating Statistics..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Generate Honor Statistics"]})})]})})]})}),e.jsx(P,{value:"archiving",className:"mt-6",children:e.jsxs(j,{children:[e.jsx(G,{children:e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Archive Academic Records"]})}),e.jsxs(u,{children:[e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Note:"})," Archiving will create a backup of academic records for the specified period. This process helps maintain system performance while preserving historical data."]})}),e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"archive_academic_level",children:"Academic Level"}),e.jsxs(n,{value:p.academic_level_id,onValueChange:s=>_("academic_level_id",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select academic level"})}),e.jsx(h,{children:E.map(s=>e.jsx(r,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"archive_school_year",children:"School Year"}),e.jsxs(n,{value:p.school_year,onValueChange:s=>_("school_year",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select school year"})}),e.jsx(h,{children:g.map(s=>e.jsx(r,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Include in Archive"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:"include_grades",checked:p.include_grades==="1",onCheckedChange:s=>_("include_grades",s===!0?"1":"0")}),e.jsx(i,{htmlFor:"include_grades",children:"Student Grades"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:"include_honors",checked:p.include_honors==="1",onCheckedChange:s=>_("include_honors",s===!0?"1":"0")}),e.jsx(i,{htmlFor:"include_honors",children:"Honor Records"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:"include_certificates",checked:p.include_certificates==="1",onCheckedChange:s=>_("include_certificates",s===!0?"1":"0")}),e.jsx(i,{htmlFor:"include_certificates",children:"Certificates"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"archive_format",children:"Archive Format"}),e.jsxs(n,{value:p.format,onValueChange:s=>_("format",s),children:[e.jsx(o,{children:e.jsx(m,{})}),e.jsxs(h,{children:[e.jsx(r,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Excel"]})}),e.jsx(r,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"CSV"]})})]})]})]}),e.jsx(F,{type:"submit",disabled:U||v,className:"w-full md:w-auto",children:U||v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Archiving Records..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Archive Records"]})})]})]})]})})]})]})})]})]})}export{Le as default};
