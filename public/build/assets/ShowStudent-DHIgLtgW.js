import{j as e,$ as O}from"./app-CuHdXwVM.js";import{C as A,b as _,c as S,a as w}from"./card-BTLlGdAX.js";import{B as T}from"./button-B3FQa-ko.js";import{B as p}from"./badge-BXwkg7Jn.js";import{S as V,H}from"./sidebar-CT0XTBXQ.js";import{A as q}from"./arrow-left-DBwtXc97.js";import{U as C}from"./user-Wo7v_JnN.js";import{M as J}from"./mail-DwkB2yhV.js";import{B as P}from"./book-open-C56YDAyt.js";import{G as U}from"./graduation-cap-CDjXjcir.js";import{C as E}from"./calendar-Ih7A0ydr.js";import{A as Q}from"./award-w_6p0O_f.js";import{P as Y}from"./plus-DNwym2vm.js";import{S as z}from"./square-pen-DDVyInMU.js";/* empty css            */import"./dropdown-menu-2sVsYT8r.js";import"./Combination-DlrZ3lXm.js";import"./index-D2WF1OSh.js";import"./log-out-CzOrDvDi.js";import"./upload-BaD4pjVn.js";import"./crown-DBzedbXD.js";function pe({user:L,student:h,subject:u,academicLevel:v,grades:g,gradingPeriods:f}){console.log("ðŸ” [COMPONENT INIT] ShowStudent Component Loaded"),console.log("ðŸ” [COMPONENT INIT] Student:",{id:h.id,name:h.name,student_number:h.student_number}),console.log("ðŸ” [COMPONENT INIT] Subject:",{id:u.id,name:u.name,code:u.code}),console.log("ðŸ” [COMPONENT INIT] Academic Level:",{id:v.id,name:v.name,key:v.key}),console.log("ðŸ” [COMPONENT INIT] Grades:",{count:g.length,grades:g.map(r=>{var i,a;return{id:r.id,grade:r.grade,grading_period_id:r.grading_period_id,period_name:(i=r.gradingPeriod)==null?void 0:i.name,period_parent_id:(a=r.gradingPeriod)==null?void 0:a.parent_id,school_year:r.school_year}})}),console.log("ðŸ” [COMPONENT INIT] Grading Periods:",{count:f.length,periods:f.map(r=>({id:r.id,name:r.name,code:r.code,parent_id:r.parent_id,type:r.type,period_type:r.period_type,is_active:r.is_active}))});const G=(r,i)=>i==="college"||i==="senior_highschool"?r<=1.5?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":r<=2.5?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":r<=3?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":r>=95?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":r>=90?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":r>=85?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":r>=75?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",$=(r,i)=>i==="college"||i==="senior_highschool"?r<=1.5?"Superior":r<=2?"Very Good":r<=2.5?"Good":r<=3?"Satisfactory":"Not Qualified":r>=95?"Outstanding":r>=90?"Very Good":r>=85?"Good":r>=80?"Satisfactory":r>=75?"Fair":"Not Qualified",b=g.length>0?g[0]:null,x=v.key,F=v.name,j=(()=>{console.log("ðŸ” DEBUG - getSemesterStructure called with:",{academicLevelKey:x,allGradingPeriods:f.map(a=>({id:a.id,name:a.name,code:a.code}))});let r=f.filter(a=>{const d=x,c=a.name.toLowerCase(),t=a.code.toLowerCase(),o=[d.toLowerCase(),d.toLowerCase().replace("_",""),d.toLowerCase().replace("_"," ")];d==="college"&&o.push("tertiary","university","higher"),d==="senior_highschool"&&o.push("senior high","shs","senior_high","seniorhigh");const s=o.some(n=>t.includes(n)||c.includes(n));return console.log(`ðŸ” Period "${a.name}" (${a.code}) relevant for ${d}:`,s),s});if(r.length===0&&(console.log("ðŸ” No level-specific periods found, using all active periods as fallback"),r=f.filter(a=>a.is_active)),console.log("ðŸ” DEBUG - Relevant periods after filtering:",r.map(a=>({id:a.id,name:a.name,code:a.code}))),["senior_highschool","college"].includes(x)){const a={},d=[],c=r.filter(s=>s.parent_id===null&&s.type==="semester");console.log("ðŸ” [FIXED] Parent semesters found:",c.map(s=>({id:s.id,name:s.name}))),r.forEach(s=>{if(s.parent_id===null&&s.type==="semester"){console.log(`ðŸ” [FIXED] Skipping parent semester: "${s.name}"`);return}if(s.period_type==="final"||s.name.toLowerCase().includes("average")||s.name.toLowerCase().includes("final")){console.log(`ðŸ” [FIXED] Skipping final/average period: "${s.name}"`);return}const l=s.parent_id;if(!l){console.log(`âœ… [FIXED] Period "${s.name}" has no parent_id, adding to flat list`),d.push({id:s.id,name:s.name,code:s.code,gradingPeriodId:s.id,originalPeriod:s});return}const m=c.find(I=>I.id===l);if(!m){console.log(`âš ï¸ [FIXED] No parent semester found for period "${s.name}" (parent_id: ${l}), adding to flat list`),d.push({id:s.id,name:s.name,code:s.code,gradingPeriodId:s.id,originalPeriod:s});return}const N=c.findIndex(I=>I.id===l)+1;console.log(`ðŸ” [FIXED] Period "${s.name}" (${s.code}) assigned to Semester ${N} (parent: ${m.name})`),a[N]||(a[N]={name:m.name,periods:[]}),a[N].periods.push({id:s.id,name:s.name,code:s.code,gradingPeriodId:s.id})}),console.log(`ðŸ” [FIXED] Periods without parent: ${d.length}`,d.map(s=>({id:s.id,name:s.name})));let t=Object.keys(a).map(s=>({semesterNumber:parseInt(s),...a[s]}));if(d.length>0)if(console.log(`âœ… [FIXED] Creating semester structure from ${d.length} flat periods`),t.length===0||t.every(s=>s.periods.length===0)){console.log("âœ… [FIXED] No hierarchical structure, creating from flat periods");const s=d.filter(l=>l.name.toLowerCase().includes("first")||l.code.toLowerCase().includes("1")||l.code.toLowerCase().includes("q1")||l.code.toLowerCase().includes("q2")),n=d.filter(l=>l.name.toLowerCase().includes("second")||l.code.toLowerCase().includes("2")||l.code.toLowerCase().includes("q3")||l.code.toLowerCase().includes("q4"));if(s.length===0&&n.length===0){const l=Math.ceil(d.length/2);t=[],d.length>1?(t.push({semesterNumber:1,name:"First Semester",periods:d.slice(0,l)}),t.push({semesterNumber:2,name:"Second Semester",periods:d.slice(l)})):t.push({semesterNumber:1,name:"Semester",periods:d})}else t=[],s.length>0&&t.push({semesterNumber:1,name:"First Semester",periods:s}),n.length>0&&t.push({semesterNumber:2,name:"Second Semester",periods:n});console.log("âœ… [FIXED] Created structure:",t.map(l=>({semester:l.name,periodCount:l.periods.length,periods:l.periods.map(m=>m.name)})))}else console.log(`âœ… [FIXED] Adding ${d.length} orphan periods to existing structure`),t.length>0&&t[0].periods.push(...d);let o=t;if(o.length===0||o.every(s=>s.periods.length===0)){console.log("âš ï¸ [FIXED] No periods in structure after fixes, creating final fallback");const s=r.filter(n=>{const l=n.name.toLowerCase(),m=n.parent_id===null&&n.type==="semester"||l==="first semester"||l==="second semester",N=n.name.toLowerCase().includes("final average")||n.name.toLowerCase().includes("final")||n.code.includes("FA")||n.code.toLowerCase().includes("_fa");return!m&&!N});if(console.log("ðŸ” [FIXED] All input periods for final fallback:",s.map(n=>({id:n.id,name:n.name,code:n.code,parent_id:n.parent_id}))),s.length>0)if(s.length>=2){const n=Math.ceil(s.length/2);o=[{semesterNumber:1,name:"First Semester",periods:s.slice(0,n).map(l=>({id:l.id,name:l.name,code:l.code,gradingPeriodId:l.id}))},{semesterNumber:2,name:"Second Semester",periods:s.slice(n).map(l=>({id:l.id,name:l.name,code:l.code,gradingPeriodId:l.id}))}].filter(l=>l.periods.length>0)}else o=[{semesterNumber:1,name:"Semester",periods:s.map(n=>({id:n.id,name:n.name,code:n.code,gradingPeriodId:n.id}))}]}return console.log("âœ… [FIXED] Final semester structure (semester-based):",o.map(s=>({semester:s.name,semesterNum:s.semesterNumber,periodCount:s.periods.length,periods:s.periods.map(n=>({id:n.id,name:n.name,gradingPeriodId:n.gradingPeriodId}))}))),o}else{const a=[{semesterNumber:1,name:"Academic Year",periods:r.filter(d=>{const c=d.name.toLowerCase(),t=c==="first semester"||c==="second semester",o=d.name.toLowerCase().includes("final average")||d.code.includes("FA")||d.code.toLowerCase().includes("_fa");return!t&&!o}).sort((d,c)=>d.id-c.id).map(d=>({id:d.id,name:d.name,code:d.code,gradingPeriodId:d.id}))}];return console.log("ðŸ” Final quarter structure:",a),a}})();console.log("ðŸ” DEBUG - ShowStudent component data:",{academicLevelKey:x,academicLevel:v,gradingPeriods:f.map(r=>({id:r.id,name:r.name,code:r.code})),semesterStructure:j,totalGradingPeriods:f.length,semesterStructureLength:j.length,totalPeriodsInStructure:j.reduce((r,i)=>r+i.periods.length,0)});const M=()=>{console.log("ðŸ” [CALCULATION] ========== CALCULATING SEMESTER AVERAGES =========="),console.log("ðŸ” [CALCULATION] Academic Level:",x),console.log("ðŸ” [CALCULATION] Total Grades:",g.length),console.log("ðŸ” [CALCULATION] Grades Data:",g.map(s=>{var n,l;return{id:s.id,grade:s.grade,period_id:s.grading_period_id,period_name:(n=s.gradingPeriod)==null?void 0:n.name,period_parent_id:(l=s.gradingPeriod)==null?void 0:l.parent_id}}));const r=["college","senior_highschool"].includes(x);if(console.log("ðŸ” [CALCULATION] Is Semester Based:",r),!r){const s=g.filter(n=>n.grade!==null&&n.grade!==void 0).map(n=>n.grade);if(console.log("ðŸ” [CALCULATION] Valid Grades (Elementary/JHS):",s),s.length>0){const n=s.reduce((l,m)=>l+m,0)/s.length;return console.log("ðŸ” [CALCULATION] Overall Average (Elementary/JHS):",n),{semester1Average:null,semester2Average:null,overallAverage:n}}return console.log("ðŸ” [CALCULATION] No valid grades found"),{semester1Average:null,semester2Average:null,overallAverage:null}}const i=f.filter(s=>s.parent_id===null&&s.type==="semester");console.log("ðŸ” [CALCULATION] Parent semesters found:",i.map(s=>({id:s.id,name:s.name})));const a={};i.forEach(s=>{console.log(`ðŸ” [CALCULATION] Processing semester: "${s.name}" (ID: ${s.id})`);const n=g.filter(l=>{const m=f.find(X=>X.id===l.grading_period_id),N=m&&m.parent_id===s.id,I=m&&m.period_type!=="final",k=l.grade!==null&&l.grade!==void 0;return console.log(`ðŸ” [CALCULATION]   Grade ID ${l.id}: period=${l.grading_period_id}, isChild=${N}, notFinal=${I}, hasGrade=${k}, grade=${l.grade}`),N&&I&&k});if(console.log(`ðŸ” [CALCULATION] Found ${n.length} grades for semester "${s.name}":`,n.map(l=>{var m;return{id:l.id,grade:l.grade,period:(m=l.gradingPeriod)==null?void 0:m.name}})),n.length>0){const l=n.reduce((m,N)=>m+parseFloat(N.grade.toString()),0)/n.length;a[s.id]=l,console.log(`âœ… [CALCULATION] Semester "${s.name}" (ID: ${s.id}) average: ${l.toFixed(2)} (from ${n.length} grades)`)}else a[s.id]=null,console.log(`âš ï¸ [CALCULATION] Semester "${s.name}" (ID: ${s.id}) has NO GRADES`)});const d=i[0]?a[i[0].id]:null,c=i[1]?a[i[1].id]:null;console.log("ðŸ” [CALCULATION] Semester 1 Average:",d),console.log("ðŸ” [CALCULATION] Semester 2 Average:",c);let t=null;const o=Object.values(a).filter(s=>s!==null);return console.log("ðŸ” [CALCULATION] Valid Semester Averages:",o),o.length>0?(t=o.reduce((s,n)=>s+n,0)/o.length,console.log(`âœ… [CALCULATION] Overall Average: ${t.toFixed(2)} (from ${o.length} semester averages)`)):console.log("âš ï¸ [CALCULATION] NO VALID SEMESTER AVERAGES FOUND - Overall Average is NULL"),console.log("ðŸ” [CALCULATION] Final Result:",{semester1Average:d,semester2Average:c,overallAverage:t,allSemesterAverages:a}),console.log("ðŸ” [CALCULATION] ========== END CALCULATION =========="),{semester1Average:d,semester2Average:c,overallAverage:t}},{semester1Average:B,semester2Average:R,overallAverage:D}=M(),y=D;return console.log("ðŸ” FINAL CALCULATION RESULT:",{grades:g.map(r=>{var i,a;return{id:r.id,grade:r.grade,period_id:r.grading_period_id,period_code:(i=r.gradingPeriod)==null?void 0:i.code,period_name:(a=r.gradingPeriod)==null?void 0:a.name}}),semester1Average:B,semester2Average:R,overallAverage:D,finalGrade:y}),j.reduce((r,i)=>r+i.periods.length,0),e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(V,{user:L}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(H,{user:L}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(O,{href:route("teacher.grades.index"),children:e.jsxs(T,{variant:"outline",size:"sm",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Back to Grades"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Student Details"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["View and manage grades for ",h.name]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(A,{className:"bg-white shadow-sm",children:[e.jsx(_,{children:e.jsxs(S,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(C,{className:"h-5 w-5 text-gray-600"}),"Personal Information"]})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-100",children:e.jsx(C,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:h.name})]})]}),h.student_number&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-purple-100",children:e.jsx(C,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Student ID"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:h.student_number})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-green-100",children:e.jsx(J,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:h.email})]})]})]})]}),e.jsxs(A,{className:"bg-white shadow-sm",children:[e.jsx(_,{children:e.jsxs(S,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(P,{className:"h-5 w-5 text-gray-600"}),"Subject & Course Information"]})}),e.jsx(w,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-purple-100",children:e.jsx(P,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Subject"}),e.jsxs("p",{className:"text-base font-semibold text-gray-900",children:[u.name," (",u.code,")"]})]})]}),u.course&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-100",children:e.jsx(U,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Course"}),e.jsxs("p",{className:"text-base font-semibold text-gray-900",children:[u.course.name," (",u.course.code,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-orange-100",children:e.jsx(U,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Academic Level"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:F})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-yellow-100",children:e.jsx(E,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"School Year"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:(b==null?void 0:b.school_year)||"N/A"})]})]})]})})]}),f.length>0&&e.jsxs(A,{className:"bg-white shadow-sm",children:[e.jsxs(_,{children:[e.jsxs(S,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(E,{className:"h-5 w-5 text-gray-600"}),"Grading Periods"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Available grading periods for ",F]})]}),e.jsx(w,{children:e.jsx("div",{className:"space-y-4",children:f.filter(r=>{const i=x;return r.code.toLowerCase().includes(i.toLowerCase())}).map(r=>e.jsxs("div",{className:"relative border rounded-lg p-4 bg-gray-50",children:[e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(p,{variant:"outline",className:"text-xs bg-gray-100 text-gray-600",children:r.code})}),e.jsx("h4",{className:"font-medium mb-2 text-gray-900",children:r.name}),r.start_date&&r.end_date&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[new Date(r.start_date).toLocaleDateString()," - ",new Date(r.end_date).toLocaleDateString()]}),e.jsx(p,{variant:r.is_active?"default":"secondary",className:"text-xs",children:r.is_active?"Active":"Inactive"})]},r.id))})})]}),e.jsxs(A,{className:"bg-white shadow-sm",children:[e.jsx(_,{children:e.jsxs(S,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Q,{className:"h-5 w-5 text-gray-600"}),"Grade Summary"]})}),e.jsx(w,{children:(()=>{if(g.filter(i=>i.grade!==null&&i.grade!==void 0).length>0||j.length>0){const i=y||0,a=i>0?$(i,x):"No Grade",d=j.flatMap(t=>t.periods.map(o=>({...o,semesterName:t.name}))),c=["bg-blue-500 text-white","bg-green-500 text-white","bg-orange-500 text-white","bg-purple-500 text-white","bg-pink-500 text-white","bg-indigo-500 text-white"];return console.log("ðŸ” [GRADE MATCHING] Attempting to match grades to periods",{allPeriodsCount:d.length,allPeriods:d.map(t=>({id:t.id,name:t.name,gradingPeriodId:t.gradingPeriodId})),gradesCount:g.length,gradesPeriodIds:g.map(t=>({gradeId:t.id,periodId:t.grading_period_id,grade:t.grade}))}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:d.map((t,o)=>{const s=g.find(l=>l.grading_period_id===t.gradingPeriodId);console.log(s?`âœ… [GRADE MATCHING] Grade found for period "${t.name}": ${s.grade}`:`âš ï¸ [GRADE MATCHING] No grade found for period "${t.name}" (gradingPeriodId: ${t.gradingPeriodId})`);const n=c[o%c.length];return e.jsxs("div",{className:`${n} rounded-lg p-4 text-center`,children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:s?s.grade:"-"}),e.jsx("div",{className:"text-sm opacity-90",children:t.name})]},t.id)})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"bg-gray-100 rounded-lg p-6 text-center min-w-48",children:[e.jsx("div",{className:"text-4xl font-bold text-gray-800 mb-2",children:i>0?i.toFixed(2):"-"}),e.jsx("div",{className:"text-gray-600 mb-2",children:"Overall Average"}),i>0&&e.jsx(p,{className:`${["Superior","Very Good","Good","Satisfactory","Fair","Outstanding"].includes(a)?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:a})]})})]})}else return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"h-16 w-16 text-gray-400 mx-auto mb-4",children:"ðŸ“Š"}),e.jsx("p",{className:"text-gray-500",children:"No grades recorded yet"})]})})()})]}),["senior_highschool","college"].includes(x)&&j.length>1?j.map(a=>{if(a.periods.length===0)return null;const d=a.periods.map(t=>{const o=g.find(s=>s.grading_period_id===t.gradingPeriodId);return o==null?void 0:o.grade}).filter(t=>t!=null),c=d.length>0?d.reduce((t,o)=>t+o,0)/d.length:null;return e.jsxs(A,{className:"bg-white shadow-sm",children:[e.jsx(_,{children:e.jsxs(S,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(E,{className:"h-5 w-5 text-gray-600"}),a.name]})}),e.jsx(w,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-900 text-white",children:[e.jsx("th",{className:"p-2 border-r border-gray-600",children:"Student ID"}),e.jsx("th",{className:"p-2 border-r border-gray-600",children:"Subject"}),e.jsx("th",{className:"p-2 border-r border-gray-600",children:"Faculty"}),a.periods.map(t=>e.jsx("th",{className:"text-center p-2 border-r border-gray-600",children:t.name},t.id)),e.jsxs("th",{className:"p-2 border-r border-gray-600",children:["SEM",a.semesterNumber," Average"]}),e.jsx("th",{className:"p-2",children:"Grade Status"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"border-b bg-white hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 border-r border-gray-200 font-medium",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-2 text-gray-400"}),h.student_number||h.id]})}),e.jsx("td",{className:"p-3 border-r border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:u.name}),e.jsx("div",{className:"text-sm text-gray-500",children:u.code})]})]})}),e.jsx("td",{className:"p-3 border-r border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-600",children:L.name})]})}),a.periods.map(t=>{const o=g.find(s=>s.grading_period_id===t.gradingPeriodId);return console.log(o?`âœ… [TABLE] Grade ${o.grade} matched for "${t.name}" (ID: ${t.gradingPeriodId})`:`âš ï¸ [TABLE] No grade for "${t.name}" (ID: ${t.gradingPeriodId}) - Available: [${g.map(s=>s.grading_period_id).join(", ")}]`),e.jsx("td",{className:"p-3 border-r border-gray-200 text-center",children:o?e.jsx(p,{className:G(o.grade,x),children:o.grade}):e.jsx("span",{className:"text-gray-400",children:"-"})},t.id)}),e.jsx("td",{className:"p-3 border-r border-gray-200 text-center",children:c?e.jsx(p,{className:`text-lg px-3 py-1 ${G(c,x)}`,children:c.toFixed(2)}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3 text-center",children:c?(()=>{const t=$(c,x);return e.jsx(p,{className:`${["Superior","Very Good","Good","Satisfactory","Fair","Outstanding"].includes(t)?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:t})})():e.jsx("span",{className:"text-gray-400",children:"No Grade"})})]})})]})})})]},a.semesterNumber)}):e.jsxs(A,{className:"bg-white shadow-sm",children:[e.jsx(_,{children:e.jsxs(S,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(E,{className:"h-5 w-5 text-gray-600"}),"Detailed Grades"]})}),e.jsx(w,{children:g.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800 text-white",children:[e.jsx("th",{className:"text-left p-3 font-medium border-r border-gray-700",children:"Student ID"}),e.jsx("th",{className:"text-left p-3 font-medium border-r border-gray-700",children:"Subject"}),e.jsx("th",{className:"text-left p-3 font-medium border-r border-gray-700",children:"Faculty"}),j.flatMap(a=>a.periods).map(a=>e.jsx("th",{className:"text-center p-3 font-medium border-r border-gray-700",children:a.name},a.id)),e.jsx("th",{className:"text-center p-3 font-medium border-r border-gray-700",children:"AVERAGE"}),e.jsx("th",{className:"text-center p-3 font-medium",children:"Grade Status"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"border-b bg-white hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 border-r border-gray-200 font-medium",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-2 text-gray-400"}),h.student_number||h.id]})}),e.jsx("td",{className:"p-3 border-r border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:u.name}),e.jsx("div",{className:"text-sm text-gray-500",children:u.code})]})]})}),e.jsx("td",{className:"p-3 border-r border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-600",children:L.name})]})}),j.flatMap(a=>a.periods).map(a=>{const d=g.find(c=>c.grading_period_id===a.gradingPeriodId);return e.jsx("td",{className:"p-3 border-r border-gray-200 text-center",children:d?e.jsx(p,{className:G(d.grade,x),children:d.grade}):e.jsx("span",{className:"text-gray-400",children:"-"})},a.id)}),e.jsx("td",{className:"p-3 border-r border-gray-200 text-center",children:y?e.jsx(p,{className:`text-lg px-3 py-1 ${G(y,x)}`,children:y.toFixed(2)}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3 text-center",children:y?(()=>{const a=$(y,x);return e.jsx(p,{className:`${["Superior","Very Good","Good","Satisfactory","Fair","Outstanding"].includes(a)?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:a})})():e.jsx("span",{className:"text-gray-400",children:"No Grade"})})]})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"h-16 w-16 text-gray-400 mx-auto mb-4",children:"ðŸ“Š"}),e.jsx("p",{className:"text-gray-500",children:"No grade history available"})]})})]})]}),e.jsx(A,{children:e.jsx(w,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(O,{href:route("teacher.grades.create",{student_id:h.id,subject_id:u.id,academic_level_id:v.id,academic_level_key:x,school_year:(b==null?void 0:b.school_year)||"2024-2025"}),className:"flex-1",children:e.jsxs(T,{className:"w-full",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Input New Grade"]})}),b&&e.jsx(O,{href:route("teacher.grades.edit",b.id),className:"flex-1",children:e.jsxs(T,{variant:"outline",className:"w-full",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Edit Current Grade"]})})]})})})]})})]})]})}export{pe as default};
