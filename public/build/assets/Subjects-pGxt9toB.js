import{r as p,j as e,S as y}from"./app-CRB7Vkow.js";import{S as $,H as K}from"./sidebar-BNRfPlIv.js";import{C as E,a as H}from"./card-B3X3XlfX.js";import{B as t}from"./button-Cg4mH40A.js";import{I as d}from"./input-v05ZLmeZ.js";import{L as l}from"./label-DkvBXY46.js";import{S as u,a as g,b as N,c as v,d as _}from"./select-DDBDqe2r.js";import{B as o}from"./badge-BUCgrGlw.js";import{D as z,a as Q,b as B,c as L,d as M,e as U}from"./dialog-DLZRF86v.js";import{T as X,a as Y,b as f,c as b}from"./tabs-DwztGZIf.js";import{A as Z}from"./arrow-left-DcYoUJKG.js";import{B as ee}from"./book-open-DnXSirf0.js";import{P as se}from"./plus-S1cpMdsE.js";/* empty css            */import"./dropdown-menu-C-HXr_Hi.js";import"./Combination-CAawp2Lb.js";import"./index-9EEPBnTe.js";import"./separator-8Uc9AAVt.js";import"./users-ByfpQJpD.js";import"./chevron-right-BM7hkrJx.js";import"./crown-BDavmclC.js";import"./user-check-CQoDSUmN.js";import"./user-cog-LXm_epGx.js";import"./graduation-cap-BGaNdPc5.js";import"./chart-no-axes-column-increasing-BhpeRP0R.js";import"./index-SyVjcTXi.js";import"./index-XV-t6QwA.js";function De({user:A,subjects:C=[],academicLevels:S=[],gradingPeriods:V=[],courses:W=[]}){var T,F;const[P,I]=p.useState("all"),[a,c]=p.useState({name:"",code:"",description:"",academic_level_id:"",grading_period_id:"",course_id:"",units:0,hours_per_week:0,is_core:!1,is_active:!0}),[G,w]=p.useState(!1),[i,r]=p.useState(null),[O,n]=p.useState(!1),k=s=>C.filter(j=>j.academic_level.key===s),D=s=>V.filter(j=>j.academic_level_id===s),q=()=>{y.post(route("registrar.academic.subjects.store"),a,{preserveScroll:!0,onSuccess:()=>{c({name:"",code:"",description:"",academic_level_id:"",grading_period_id:"",course_id:"",units:0,hours_per_week:0,is_core:!1,is_active:!0}),w(!1)}})},J=s=>{const j={name:s.name,code:s.code,description:s.description||"",academic_level_id:s.academic_level_id,grading_period_id:s.grading_period_id||"",units:s.units,hours_per_week:s.hours_per_week,is_core:s.is_core,is_active:s.is_active};y.put(route("registrar.academic.subjects.update",s.id),j,{preserveScroll:!0,onSuccess:()=>n(!1)})},h=s=>{confirm(`Delete subject ${s.name}?`)&&y.delete(route("registrar.academic.subjects.destroy",s.id),{preserveScroll:!0})},x=s=>s?e.jsx(o,{className:"bg-green-100 text-green-800",children:"Active"}):e.jsx(o,{className:"bg-red-100 text-red-800",children:"Inactive"}),m=s=>s?e.jsx(o,{className:"bg-blue-100 text-blue-800",children:"Core"}):e.jsx(o,{className:"bg-gray-100 text-gray-800",children:"Elective"}),R=()=>{c({name:"",code:"",description:"",academic_level_id:"",grading_period_id:"",course_id:"",units:0,hours_per_week:0,is_core:!1,is_active:!0})};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx($,{user:A}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(K,{user:A}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(t,{variant:"ghost",size:"sm",onClick:()=>y.get("/registrar/academic"),className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:"Back to Academic Management"})]})}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Manage Subjects per Level"})})]}),e.jsx(E,{className:"bg-indigo-50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-800",children:e.jsx(H,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ee,{className:"h-5 w-5 text-indigo-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-indigo-900 dark:text-indigo-100",children:"Subject Management"}),e.jsx("p",{className:"text-indigo-700 dark:text-indigo-300 text-sm mt-1",children:"Configure subjects for each academic level and strand. Define core and elective subjects with units and hours per week."})]})]})})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Subjects"}),e.jsxs(o,{variant:"secondary",children:[C.length," subjects"]})]}),e.jsxs(z,{open:G,onOpenChange:w,children:[e.jsx(Q,{asChild:!0,children:e.jsxs(t,{onClick:()=>{w(!0),R()},children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Add Subject"]})}),e.jsxs(B,{className:"max-w-md",children:[e.jsx(L,{children:e.jsx(M,{children:"Add new subject"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"subject-name",children:"Name"}),e.jsx(d,{id:"subject-name",value:a.name,onChange:s=>c({...a,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"subject-code",children:"Code"}),e.jsx(d,{id:"subject-code",value:a.code,onChange:s=>c({...a,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"subject-description",children:"Description"}),e.jsx(d,{id:"subject-description",value:a.description,onChange:s=>c({...a,description:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"subject-level",children:"Academic Level"}),e.jsxs(u,{value:a.academic_level_id,onValueChange:s=>c({...a,academic_level_id:s}),children:[e.jsx(g,{children:e.jsx(N,{placeholder:"Select academic level"})}),e.jsx(v,{children:S.map(s=>e.jsx(_,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"subject-grading",children:"Grading Period"}),e.jsxs(u,{value:a.grading_period_id,onValueChange:s=>c({...a,grading_period_id:s}),children:[e.jsx(g,{children:e.jsx(N,{placeholder:"Select grading period (optional)"})}),e.jsx(v,{children:a.academic_level_id&&D(Number(a.academic_level_id)).map(s=>e.jsx(_,{value:s.id.toString(),children:s.name},s.id))})]})]}),a.academic_level_id&&((T=S.find(s=>s.id.toString()===a.academic_level_id))==null?void 0:T.key)==="college"&&e.jsxs("div",{children:[e.jsx(l,{htmlFor:"subject-course",children:"Course"}),e.jsxs(u,{value:a.course_id,onValueChange:s=>c({...a,course_id:s}),children:[e.jsx(g,{children:e.jsx(N,{placeholder:"Select course (required for college subjects)"})}),e.jsx(v,{children:W.map(s=>e.jsxs(_,{value:s.id.toString(),children:[s.code," - ",s.name]},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"subject-units",children:"Units"}),e.jsx(d,{id:"subject-units",type:"number",min:"0",step:"0.5",value:a.units,onChange:s=>c({...a,units:Number(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"subject-hours",children:"Hours/Week"}),e.jsx(d,{id:"subject-hours",type:"number",min:"0",step:"0.5",value:a.hours_per_week,onChange:s=>c({...a,hours_per_week:Number(s.target.value)})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"subject-core",checked:a.is_core,onChange:s=>c({...a,is_core:s.target.checked}),className:"rounded border-gray-300"}),e.jsx(l,{htmlFor:"subject-core",children:"Core Subject"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"subject-active",checked:a.is_active,onChange:s=>c({...a,is_active:s.target.checked}),className:"rounded border-gray-300"}),e.jsx(l,{htmlFor:"subject-active",children:"Active"})]})]}),e.jsx(U,{children:e.jsx(t,{onClick:q,children:"Save"})})]})]})]}),e.jsx(E,{children:e.jsx(H,{className:"pt-6",children:e.jsxs(X,{value:P,onValueChange:I,children:[e.jsxs(Y,{className:"grid w-full grid-cols-5",children:[e.jsx(f,{value:"all",children:"All Subjects"}),e.jsx(f,{value:"elementary",children:"Elementary"}),e.jsx(f,{value:"junior_highschool",children:"Junior High"}),e.jsx(f,{value:"senior_highschool",children:"Senior High"}),e.jsx(f,{value:"college",children:"College"})]}),e.jsx(b,{value:"all",className:"space-y-4",children:e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Level"}),e.jsx("th",{className:"text-left p-3",children:"Course"}),e.jsx("th",{className:"text-left p-3",children:"Units"}),e.jsx("th",{className:"text-left p-3",children:"Hours/Week"}),e.jsx("th",{className:"text-left p-3",children:"Type"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:C.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 font-mono",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:s.academic_level.name}),e.jsx("td",{className:"p-3",children:s.course?e.jsx(o,{variant:"outline",className:"bg-blue-100 text-blue-800",children:s.course.code}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3",children:s.units}),e.jsx("td",{className:"p-3",children:s.hours_per_week}),e.jsx("td",{className:"p-3",children:m(s.is_core)}),e.jsx("td",{className:"p-3",children:x(s.is_active)}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{variant:"outline",size:"sm",onClick:()=>{r(s),n(!0)},children:"Edit"}),e.jsx(t,{variant:"destructive",size:"sm",onClick:()=>h(s),children:"Delete"})]})})]},s.id))})]})})}),e.jsx(b,{value:"elementary",className:"space-y-4",children:e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Units"}),e.jsx("th",{className:"text-left p-3",children:"Hours/Week"}),e.jsx("th",{className:"text-left p-3",children:"Type"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:k("elementary").map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 font-mono",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:s.units}),e.jsx("td",{className:"p-3",children:s.hours_per_week}),e.jsx("td",{className:"p-3",children:m(s.is_core)}),e.jsx("td",{className:"p-3",children:x(s.is_active)}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{variant:"outline",size:"sm",onClick:()=>{r(s),n(!0)},children:"Edit"}),e.jsx(t,{variant:"destructive",size:"sm",onClick:()=>h(s),children:"Delete"})]})})]},s.id))})]})})}),e.jsx(b,{value:"junior_highschool",className:"space-y-4",children:e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Units"}),e.jsx("th",{className:"text-left p-3",children:"Hours/Week"}),e.jsx("th",{className:"text-left p-3",children:"Type"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:k("junior_highschool").map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 font-mono",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:s.units}),e.jsx("td",{className:"p-3",children:s.hours_per_week}),e.jsx("td",{className:"p-3",children:m(s.is_core)}),e.jsx("td",{className:"p-3",children:x(s.is_active)}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{variant:"outline",size:"sm",onClick:()=>{r(s),n(!0)},children:"Edit"}),e.jsx(t,{variant:"destructive",size:"sm",onClick:()=>h(s),children:"Delete"})]})})]},s.id))})]})})}),e.jsx(b,{value:"senior_highschool",className:"space-y-4",children:e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Units"}),e.jsx("th",{className:"text-left p-3",children:"Hours/Week"}),e.jsx("th",{className:"text-left p-3",children:"Type"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:k("senior_highschool").map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 font-mono",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:s.units}),e.jsx("td",{className:"p-3",children:s.hours_per_week}),e.jsx("td",{className:"p-3",children:m(s.is_core)}),e.jsx("td",{className:"p-3",children:x(s.is_active)}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{variant:"outline",size:"sm",onClick:()=>{r(s),n(!0)},children:"Edit"}),e.jsx(t,{variant:"destructive",size:"sm",onClick:()=>h(s),children:"Delete"})]})})]},s.id))})]})})}),e.jsx(b,{value:"college",className:"space-y-4",children:e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Units"}),e.jsx("th",{className:"text-left p-3",children:"Hours/Week"}),e.jsx("th",{className:"text-left p-3",children:"Type"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:k("college").map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 font-mono",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:s.units}),e.jsx("td",{className:"p-3",children:s.hours_per_week}),e.jsx("td",{className:"p-3",children:m(s.is_core)}),e.jsx("td",{className:"p-3",children:x(s.is_active)}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{variant:"outline",size:"sm",onClick:()=>{r(s),n(!0)},children:"Edit"}),e.jsx(t,{variant:"destructive",size:"sm",onClick:()=>h(s),children:"Delete"})]})})]},s.id))})]})})})]})})}),i&&e.jsx(z,{open:O,onOpenChange:n,children:e.jsxs(B,{className:"max-w-md",children:[e.jsx(L,{children:e.jsx(M,{children:"Edit subject"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Name"}),e.jsx(d,{value:i.name,onChange:s=>r({...i,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Code"}),e.jsx(d,{value:i.code,onChange:s=>r({...i,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Description"}),e.jsx(d,{value:i.description||"",onChange:s=>r({...i,description:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Academic Level"}),e.jsxs(u,{value:i.academic_level_id.toString(),onValueChange:s=>r({...i,academic_level_id:Number(s)}),children:[e.jsx(g,{children:e.jsx(N,{})}),e.jsx(v,{children:S.map(s=>e.jsx(_,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Grading Period"}),e.jsxs(u,{value:((F=i.grading_period_id)==null?void 0:F.toString())||"",onValueChange:s=>r({...i,grading_period_id:s?Number(s):void 0}),children:[e.jsx(g,{children:e.jsx(N,{placeholder:"Select grading period (optional)"})}),e.jsx(v,{children:D(i.academic_level_id).map(s=>e.jsx(_,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Units"}),e.jsx(d,{type:"number",min:"0",step:"0.5",value:i.units,onChange:s=>r({...i,units:Number(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Hours/Week"}),e.jsx(d,{type:"number",min:"0",step:"0.5",value:i.hours_per_week,onChange:s=>r({...i,hours_per_week:Number(s.target.value)})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:i.is_core,onChange:s=>r({...i,is_core:s.target.checked}),className:"rounded border-gray-300"}),e.jsx(l,{children:"Core Subject"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:i.is_active,onChange:s=>r({...i,is_active:s.target.checked}),className:"rounded border-gray-300"}),e.jsx(l,{children:"Active"})]})]}),e.jsx(U,{children:e.jsx(t,{onClick:()=>J(i),children:"Save"})})]})})]})})]})]})}export{De as default};
