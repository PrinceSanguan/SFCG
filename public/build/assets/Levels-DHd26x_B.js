import{r as c,j as e,$ as E,S as j}from"./app-Dx1SMQx2.js";import{H as B}from"./header-CwzRDpJP.js";import{S as F}from"./sidebar-B6paEd1u.js";import{C as M,b as O,c as T,a as $}from"./card-9go3GCLh.js";import{B as d}from"./button-BMSLlibz.js";import{I as t}from"./input-De4gOnZ0.js";import{C as p}from"./checkbox-BMNjRVwW.js";import{L as m}from"./label-BKRGNydM.js";import{D as N,a as H,b as y,c as C,d as b,f as k}from"./dialog-DcZcggc3.js";import{A as z}from"./arrow-left-DWa37pet.js";import{P as K}from"./plus-C0nowI2v.js";import{A as I,a as P}from"./arrow-up-Ct1bjnIy.js";import{T as R}from"./trash-2-BwHzXP6R.js";import{S as U}from"./save-0f1UI3v6.js";/* empty css            */import"./dropdown-menu-moJO61D9.js";import"./Combination-Cc0sQ3xl.js";import"./index-BgjEcbCf.js";import"./separator--4xyZcsD.js";import"./users-BHrFzUaQ.js";import"./chevron-right-BWQ3Pm6q.js";import"./crown-BXjQ_I8d.js";import"./building-2-GzRLd-Ou.js";import"./user-cog-M9Cqtx7p.js";import"./book-open-DUfRk0-3.js";import"./user-check-wcs0I_Bj.js";import"./graduation-cap-ZwcQlNCd.js";import"./notebook-C3Mio5Mt.js";import"./chart-no-axes-column-increasing-DcOICOUk.js";import"./shield-TuavHXm6.js";import"./index-dtBCCdfF.js";import"./check-BjWljo-6.js";function be({user:u,levels:_=[]}){const[l,x]=c.useState({key:"",name:"",sort_order:0,is_active:!0}),[w,g]=c.useState(!1),[a,n]=c.useState(null),[r,o]=c.useState(()=>_.reduce((s,i)=>(s[i.id]={...i},s),{})),[h,S]=c.useState(""),v=c.useMemo(()=>Object.values(r).sort((s,i)=>s.sort_order-i.sort_order),[r]),f=c.useMemo(()=>v.filter(s=>`${s.key} ${s.name}`.toLowerCase().includes(h.toLowerCase())),[v,h]),A=()=>{j.post(route("admin.academic.levels.store"),l,{preserveScroll:!0,onSuccess:()=>{x({key:"",name:"",sort_order:0,is_active:!0}),g(!1)}})},D=s=>{j.put(route("admin.academic.levels.update",s.id),{key:s.key,name:s.name,sort_order:s.sort_order,is_active:s.is_active},{preserveScroll:!0,onSuccess:()=>n(null)})},L=s=>{confirm(`Delete ${s.name}?`)&&j.delete(route("admin.academic.levels.destroy",s.id),{preserveScroll:!0})};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(F,{user:u}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(B,{user:u}),e.jsxs("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:[e.jsx("div",{className:"mb-4",children:e.jsx(E,{href:route("admin.academic.index"),children:e.jsxs(d,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"})," Back to Academic & Curriculum"]})})}),e.jsxs(M,{children:[e.jsx(O,{children:e.jsx(T,{children:"Define academic levels"})}),e.jsx($,{children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold",children:"Levels"}),e.jsxs(N,{open:w,onOpenChange:g,children:[e.jsx(H,{asChild:!0,children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"})," Add Level"]})}),e.jsxs(y,{children:[e.jsx(C,{children:e.jsx(b,{children:"Add new level"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"level-key",children:"Key"}),e.jsx(t,{id:"level-key",placeholder:"e.g., senior_highschool",value:l.key,onChange:s=>x({...l,key:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"level-name",children:"Name"}),e.jsx(t,{id:"level-name",placeholder:"Name",value:l.name,onChange:s=>x({...l,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"level-sort",children:"Sort order"}),e.jsx(t,{id:"level-sort",placeholder:"0",type:"number",min:0,value:l.sort_order,onChange:s=>x({...l,sort_order:Number(s.target.value)})})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx(p,{checked:l.is_active,onCheckedChange:s=>x({...l,is_active:!!s})})," Active"]})]}),e.jsx(k,{children:e.jsx(d,{onClick:A,children:"Save"})})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold",children:"Existing levels"}),e.jsx("div",{className:"w-64",children:e.jsx(t,{placeholder:"Search by key or name",value:h,onChange:s=>S(s.target.value)})})]}),e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 w-[22%]",children:"Key"}),e.jsx("th",{className:"text-left p-3 w-[28%]",children:"Name"}),e.jsx("th",{className:"text-left p-3 w-[14%]",children:"Sort"}),e.jsx("th",{className:"text-left p-3 w-[14%]",children:"Active"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsxs("tbody",{children:[f.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 align-middle",children:e.jsx(t,{value:r[s.id].key,onChange:i=>o({...r,[s.id]:{...r[s.id],key:i.target.value}})})}),e.jsx("td",{className:"p-3 align-middle",children:e.jsx(t,{value:r[s.id].name,onChange:i=>o({...r,[s.id]:{...r[s.id],name:i.target.value}})})}),e.jsx("td",{className:"p-3 align-middle",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",size:"icon",onClick:()=>o({...r,[s.id]:{...r[s.id],sort_order:Math.max(0,r[s.id].sort_order-1)}}),children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx(t,{className:"w-16",type:"number",min:0,value:r[s.id].sort_order,onChange:i=>o({...r,[s.id]:{...r[s.id],sort_order:Number(i.target.value)}})}),e.jsx(d,{variant:"outline",size:"icon",onClick:()=>o({...r,[s.id]:{...r[s.id],sort_order:r[s.id].sort_order+1}}),children:e.jsx(P,{className:"h-4 w-4"})})]})}),e.jsx("td",{className:"p-3 align-middle",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx(p,{checked:r[s.id].is_active,onCheckedChange:i=>o({...r,[s.id]:{...r[s.id],is_active:!!i}})})," Active"]})}),e.jsx("td",{className:"p-3 align-middle",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",className:"flex items-center gap-2",onClick:()=>n(r[s.id]),children:"Edit"}),e.jsxs(d,{variant:"destructive",className:"flex items-center gap-2",onClick:()=>L(s),children:[e.jsx(R,{className:"h-4 w-4"})," Delete"]})]})})]},s.id)),f.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-4 text-sm text-gray-500",children:"No levels match your search."})})]})]})})]})]})})]}),e.jsx(N,{open:!!a,onOpenChange:s=>!s&&n(null),children:e.jsxs(y,{children:[e.jsx(C,{children:e.jsx(b,{children:"Edit level"})}),a&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Key"}),e.jsx(t,{value:a.key,onChange:s=>n({...a,key:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Name"}),e.jsx(t,{value:a.name,onChange:s=>n({...a,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Sort order"}),e.jsx(t,{type:"number",min:0,value:a.sort_order,onChange:s=>n({...a,sort_order:Number(s.target.value)})})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx(p,{checked:a.is_active,onCheckedChange:s=>n({...a,is_active:!!s})})," Active"]})]}),e.jsx(k,{children:a&&e.jsxs(d,{onClick:()=>D(a),className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"})," Save"]})})]})})]})]})]})}export{be as default};
