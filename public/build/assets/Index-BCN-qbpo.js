import{r as S,m as D,j as e,$ as re}from"./app-CQ5AN36T.js";import{H as ie}from"./header-hJvOAfYQ.js";import{S as te}from"./sidebar-S_SdlTaq.js";import{C as f,a as v,b as H,c as R}from"./card-BcNwggYn.js";import{B as F}from"./button-BoV6fehk.js";import{L as n}from"./label-BvWAHqS9.js";import{S as o,a as m,b as h,c as x,d as l}from"./select-DFWmA3qt.js";import{T as ce,a as ne,b as I,c as P}from"./tabs-B_ZklFP1.js";import{C as T}from"./checkbox-DYPq_6k-.js";import{U as de}from"./users-DAGgHsxk.js";import{F as G}from"./file-text-CayCAAmS.js";import{A as W}from"./award-C04apzC3.js";import{C as oe}from"./calendar-BkDqntTt.js";import{C as me}from"./chart-column-C_fIGAGY.js";import{F as O,a as z,A as U}from"./file-x-BYNZOOKH.js";import{D as $}from"./download-yHjUeJPr.js";import{T as he}from"./trending-up-D8u7RMw8.js";import{G as xe}from"./graduation-cap-BI_umQGg.js";/* empty css            */import"./dropdown-menu-B9ID4uZa.js";import"./Combination-Bv5JKoUl.js";import"./index-BJGmqfEw.js";import"./separator-KkNsoK9X.js";import"./chevron-right-CL5Xu3_p.js";import"./crown-D4u4mVSD.js";import"./building-2-D1AOWfMX.js";import"./user-cog-BjukDI6x.js";import"./book-open-BQ9M9GEn.js";import"./user-check-BC8zVlEI.js";import"./notebook-BDG4ZxvU.js";import"./chart-no-axes-column-increasing-CS4wLZSp.js";import"./shield-B9h0HhEE.js";import"./index-Dmza9R4_.js";import"./index-B0gH_oYL.js";import"./check-De3kUHn_.js";function Ye({user:B,academicLevels:b,schoolYears:_,currentSchoolYear:E,gradingPeriods:V,honorTypes:X,stats:w}){const[Z,J]=S.useState("grade-reports"),[y,j]=S.useState(!1),[A,L]=S.useState(""),[K,q]=S.useState([]),{data:d,setData:u,post:pe,processing:Q}=D({academic_level_id:"all",semester_id:"",grading_period_id:"all",school_year:E||_[0]||"",format:"pdf",include_statistics:!0}),{data:C,setData:k,post:je,processing:Y}=D({academic_level_id:"all",school_year:E||_[0]||"",honor_type_id:"all",format:"pdf"}),{data:g,setData:N,post:ue,processing:ee}=D({academic_level_id:"",school_year:E||_[0]||"",include_grades:!0,include_honors:!0,include_certificates:!0,format:"excel"});S.useEffect(()=>{if(d.academic_level_id&&d.academic_level_id!=="all"){const s=parseInt(d.academic_level_id);let a=V.filter(i=>i.academic_level_id===s);if(A){const i=parseInt(A);a=a.filter(p=>p.id===i||p.parent_id===i)}q(a)}else q([])},[d.academic_level_id,A,V]);const se=s=>{var p;s.preventDefault(),j(!0);const a=document.createElement("form");a.method="POST",a.action=route("admin.reports.grade-report");const i=(p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content");if(i){const r=document.createElement("input");r.type="hidden",r.name="_token",r.value=i,a.appendChild(r)}else{console.error("CSRF token not found"),j(!1);return}Object.entries(d).forEach(([r,t])=>{const c=document.createElement("input");c.type="hidden",c.name=r,typeof t=="boolean"?c.value=t?"1":"0":c.value=(t==null?void 0:t.toString())||"",a.appendChild(c)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>j(!1),2e3)},ae=s=>{var p;s.preventDefault(),j(!0);const a=document.createElement("form");a.method="POST",a.action=route("admin.reports.honor-statistics");const i=(p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content");if(i){const r=document.createElement("input");r.type="hidden",r.name="_token",r.value=i,a.appendChild(r)}else{console.error("CSRF token not found"),j(!1);return}Object.entries(C).forEach(([r,t])=>{const c=document.createElement("input");c.type="hidden",c.name=r,typeof t=="boolean"?c.value=t?"1":"0":c.value=(t==null?void 0:t.toString())||"",a.appendChild(c)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>j(!1),2e3)},le=s=>{var p;s.preventDefault(),j(!0);const a=document.createElement("form");a.method="POST",a.action=route("admin.reports.archive-records");const i=(p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content");if(i){const r=document.createElement("input");r.type="hidden",r.name="_token",r.value=i,a.appendChild(r)}else{console.error("CSRF token not found"),j(!1);return}Object.entries(g).forEach(([r,t])=>{const c=document.createElement("input");c.type="hidden",c.name=r,typeof t=="boolean"?c.value=t?"1":"0":c.value=(t==null?void 0:t.toString())||"",a.appendChild(c)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>j(!1),2e3)},M=(()=>{if(d.academic_level_id&&d.academic_level_id!=="all"){const s=parseInt(d.academic_level_id),a=b.find(i=>i.id===s);if(a&&(a.key==="college"||a.key==="senior_highschool"))return V.filter(i=>i.academic_level_id===s&&i.parent_id===null&&i.type==="semester")}return[]})();return e.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(te,{user:B}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(ie,{user:B}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 min-h-0",children:e.jsxs("div",{className:"flex flex-col gap-6 pb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Reports & Archiving"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Generate comprehensive reports and archive academic records."})]}),e.jsx(re,{href:route("admin.dashboard"),children:e.jsx(F,{variant:"outline",children:"Back to Dashboard"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(f,{children:e.jsxs(v,{className:"flex items-center p-6",children:[e.jsx(de,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.total_students})]})]})}),e.jsx(f,{children:e.jsxs(v,{className:"flex items-center p-6",children:[e.jsx(G,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Certificates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.total_certificates})]})]})}),e.jsx(f,{children:e.jsxs(v,{className:"flex items-center p-6",children:[e.jsx(W,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Honor Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.total_honors})]})]})}),e.jsx(f,{children:e.jsxs(v,{className:"flex items-center p-6",children:[e.jsx(oe,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Periods"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.active_periods})]})]})})]}),e.jsxs(ce,{value:Z,onValueChange:J,className:"w-full",children:[e.jsxs(ne,{className:"grid w-full grid-cols-3",children:[e.jsx(I,{value:"grade-reports",children:"Grade Reports"}),e.jsx(I,{value:"honor-statistics",children:"Honor Statistics"}),e.jsx(I,{value:"archive-records",children:"Archive Records"})]}),e.jsx(P,{value:"grade-reports",className:"space-y-6",children:e.jsxs(f,{children:[e.jsxs(H,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),"Generate Grade Reports"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate comprehensive grade reports with optional statistics and analysis."})]}),e.jsx(v,{children:e.jsxs("form",{onSubmit:se,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Academic Level"}),e.jsxs(o,{value:d.academic_level_id,onValueChange:s=>{u("academic_level_id",s),u("semester_id",""),u("grading_period_id","all"),L("")},children:[e.jsx(m,{children:e.jsx(h,{placeholder:"All levels"})}),e.jsxs(x,{children:[e.jsx(l,{value:"all",children:"All Levels"}),b.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]})]}),M.length>0&&e.jsxs("div",{children:[e.jsx(n,{children:"Semester"}),e.jsxs(o,{value:A,onValueChange:s=>{L(s),u("semester_id",s),u("grading_period_id","all")},children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select semester"})}),e.jsxs(x,{children:[e.jsx(l,{value:"",children:"All Semesters"}),M.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx(n,{children:"Grading Period"}),e.jsxs(o,{value:d.grading_period_id,onValueChange:s=>u("grading_period_id",s),disabled:d.academic_level_id==="all",children:[e.jsx(m,{children:e.jsx(h,{placeholder:"All periods"})}),e.jsxs(x,{children:[e.jsx(l,{value:"all",children:"All Periods"}),K.filter(s=>s.parent_id!==null).map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"School Year"}),e.jsxs(o,{value:d.school_year,onValueChange:s=>u("school_year",s),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select year"})}),e.jsx(x,{children:_.map(s=>e.jsx(l,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Export Format"}),e.jsxs(o,{value:d.format,onValueChange:s=>u("format",s),children:[e.jsx(m,{children:e.jsx(h,{})}),e.jsxs(x,{children:[e.jsx(l,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"PDF Report"]})}),e.jsx(l,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Excel Spreadsheet"]})}),e.jsx(l,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"CSV File"]})})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{id:"include_statistics",checked:d.include_statistics,onCheckedChange:s=>u("include_statistics",s===!0)}),e.jsx(n,{htmlFor:"include_statistics",children:"Include statistical analysis and grade distribution"})]}),e.jsx(F,{type:"submit",disabled:Q||y,className:"flex items-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"h-4 w-4"}),"Generate Grade Report"]})})]})})]})}),e.jsx(P,{value:"honor-statistics",className:"space-y-6",children:e.jsxs(f,{children:[e.jsxs(H,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5"}),"Generate Honor Statistics"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate comprehensive honor roll statistics and distribution analysis."})]}),e.jsx(v,{children:e.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Academic Level"}),e.jsxs(o,{value:C.academic_level_id,onValueChange:s=>k("academic_level_id",s),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"All levels"})}),e.jsxs(x,{children:[e.jsx(l,{value:"all",children:"All Levels"}),b.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Honor Type"}),e.jsxs(o,{value:C.honor_type_id,onValueChange:s=>k("honor_type_id",s),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"All types"})}),e.jsxs(x,{children:[e.jsx(l,{value:"all",children:"All Types"}),X.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"School Year"}),e.jsxs(o,{value:C.school_year,onValueChange:s=>k("school_year",s),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select year"})}),e.jsx(x,{children:_.map(s=>e.jsx(l,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Export Format"}),e.jsxs(o,{value:C.format,onValueChange:s=>k("format",s),children:[e.jsx(m,{children:e.jsx(h,{})}),e.jsxs(x,{children:[e.jsx(l,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"PDF Report"]})}),e.jsx(l,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Excel Spreadsheet"]})}),e.jsx(l,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"CSV File"]})})]})]})]})]}),e.jsx(F,{type:"submit",disabled:Y||y,className:"flex items-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"h-4 w-4"}),"Generate Honor Statistics"]})})]})})]})}),e.jsx(P,{value:"archive-records",className:"space-y-6",children:e.jsxs(f,{children:[e.jsxs(H,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),"Archive Academic Records"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create comprehensive archives of academic records for specific levels and years."})]}),e.jsx(v,{children:e.jsxs("form",{onSubmit:le,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Academic Level *"}),e.jsxs(o,{value:g.academic_level_id,onValueChange:s=>N("academic_level_id",s),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select level"})}),e.jsx(x,{children:b.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Academic level is required for archiving"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"School Year *"}),e.jsxs(o,{value:g.school_year,onValueChange:s=>N("school_year",s),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select year"})}),e.jsx(x,{children:_.map(s=>e.jsx(l,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Include in Archive"}),e.jsxs("div",{className:"space-y-3 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{id:"include_grades",checked:g.include_grades,onCheckedChange:s=>N("include_grades",s===!0)}),e.jsxs(n,{htmlFor:"include_grades",className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),"Student grades and academic records"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{id:"include_honors",checked:g.include_honors,onCheckedChange:s=>N("include_honors",s===!0)}),e.jsxs(n,{htmlFor:"include_honors",className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"Honor roll and academic achievements"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{id:"include_certificates",checked:g.include_certificates,onCheckedChange:s=>N("include_certificates",s===!0)}),e.jsxs(n,{htmlFor:"include_certificates",className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"Certificates and recognitions"]})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Export Format"}),e.jsxs(o,{value:g.format,onValueChange:s=>N("format",s),children:[e.jsx(m,{children:e.jsx(h,{})}),e.jsxs(x,{children:[e.jsx(l,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Excel Workbook (Multiple Sheets)"]})}),e.jsx(l,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"CSV Files (Zip Archive)"]})})]})]})]}),e.jsxs(F,{type:"submit",disabled:ee||!g.academic_level_id||!g.school_year,className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),y?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Archive..."]}):"Create Academic Archive"]})]})})]})})]})]})})]})]})}export{Ye as default};
