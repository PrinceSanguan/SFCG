import{r as c,j as e,$ as E,S as j}from"./app-B58dIJ_9.js";import{S as B,H as F}from"./sidebar-_TX-0ifq.js";import{C as M,b as O,c as T,a as $}from"./card-VstMChII.js";import{B as d}from"./button-Bow67jzH.js";import{I as t}from"./input-CkKl1OXa.js";import{C as p}from"./checkbox-DvB8SQpF.js";import{L as m}from"./label-CSyzxPPD.js";import{D as N,a as H,b as y,c as C,d as b,e as k}from"./dialog-C93iGyA9.js";import{A as z}from"./arrow-left-C7TGgH7T.js";import{P as K}from"./plus-yom0offr.js";import{A as I,a as P}from"./arrow-up-CxBgYCX3.js";import{T as R}from"./trash-2-CSBwZwnu.js";import{S as U}from"./save-DYw5lUtW.js";/* empty css            */import"./dropdown-menu-DYX1jlJ3.js";import"./Combination-LY2Se20E.js";import"./index-D9lkSlcr.js";import"./separator-AlfWsL3o.js";import"./users-DLeCCyfS.js";import"./chevron-right-BIFjEENi.js";import"./crown-L4GRn9K9.js";import"./user-cog-cY-SlnzM.js";import"./book-open-BLDxyhg9.js";import"./graduation-cap-CGW8uNwq.js";import"./chart-no-axes-column-increasing-sdmNfrWG.js";import"./shield-DJyHA4Wx.js";import"./index-Dhwzh_ML.js";function ve({user:u,levels:_=[]}){const[l,x]=c.useState({key:"",name:"",sort_order:0,is_active:!0}),[w,g]=c.useState(!1),[r,n]=c.useState(null),[a,o]=c.useState(()=>_.reduce((s,i)=>(s[i.id]={...i},s),{})),[h,S]=c.useState(""),v=c.useMemo(()=>Object.values(a).sort((s,i)=>s.sort_order-i.sort_order),[a]),f=c.useMemo(()=>v.filter(s=>`${s.key} ${s.name}`.toLowerCase().includes(h.toLowerCase())),[v,h]),A=()=>{j.post(route("admin.academic.levels.store"),l,{preserveScroll:!0,onSuccess:()=>{x({key:"",name:"",sort_order:0,is_active:!0}),g(!1)}})},D=s=>{j.put(route("admin.academic.levels.update",s.id),{key:s.key,name:s.name,sort_order:s.sort_order,is_active:s.is_active},{preserveScroll:!0,onSuccess:()=>n(null)})},L=s=>{confirm(`Delete ${s.name}?`)&&j.delete(route("admin.academic.levels.destroy",s.id),{preserveScroll:!0})};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(B,{user:u}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(F,{user:u}),e.jsxs("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:[e.jsx("div",{className:"mb-4",children:e.jsx(E,{href:route("admin.academic.index"),children:e.jsxs(d,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"})," Back to Academic & Curriculum"]})})}),e.jsxs(M,{children:[e.jsx(O,{children:e.jsx(T,{children:"Define academic levels"})}),e.jsx($,{children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold",children:"Levels"}),e.jsxs(N,{open:w,onOpenChange:g,children:[e.jsx(H,{asChild:!0,children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"})," Add Level"]})}),e.jsxs(y,{children:[e.jsx(C,{children:e.jsx(b,{children:"Add new level"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"level-key",children:"Key"}),e.jsx(t,{id:"level-key",placeholder:"e.g., senior_highschool",value:l.key,onChange:s=>x({...l,key:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"level-name",children:"Name"}),e.jsx(t,{id:"level-name",placeholder:"Name",value:l.name,onChange:s=>x({...l,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"level-sort",children:"Sort order"}),e.jsx(t,{id:"level-sort",placeholder:"0",type:"number",min:0,value:l.sort_order,onChange:s=>x({...l,sort_order:Number(s.target.value)})})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx(p,{checked:l.is_active,onCheckedChange:s=>x({...l,is_active:!!s})})," Active"]})]}),e.jsx(k,{children:e.jsx(d,{onClick:A,children:"Save"})})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold",children:"Existing levels"}),e.jsx("div",{className:"w-64",children:e.jsx(t,{placeholder:"Search by key or name",value:h,onChange:s=>S(s.target.value)})})]}),e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 w-[22%]",children:"Key"}),e.jsx("th",{className:"text-left p-3 w-[28%]",children:"Name"}),e.jsx("th",{className:"text-left p-3 w-[14%]",children:"Sort"}),e.jsx("th",{className:"text-left p-3 w-[14%]",children:"Active"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsxs("tbody",{children:[f.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 align-middle",children:e.jsx(t,{value:a[s.id].key,onChange:i=>o({...a,[s.id]:{...a[s.id],key:i.target.value}})})}),e.jsx("td",{className:"p-3 align-middle",children:e.jsx(t,{value:a[s.id].name,onChange:i=>o({...a,[s.id]:{...a[s.id],name:i.target.value}})})}),e.jsx("td",{className:"p-3 align-middle",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",size:"icon",onClick:()=>o({...a,[s.id]:{...a[s.id],sort_order:Math.max(0,a[s.id].sort_order-1)}}),children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx(t,{className:"w-16",type:"number",min:0,value:a[s.id].sort_order,onChange:i=>o({...a,[s.id]:{...a[s.id],sort_order:Number(i.target.value)}})}),e.jsx(d,{variant:"outline",size:"icon",onClick:()=>o({...a,[s.id]:{...a[s.id],sort_order:a[s.id].sort_order+1}}),children:e.jsx(P,{className:"h-4 w-4"})})]})}),e.jsx("td",{className:"p-3 align-middle",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx(p,{checked:a[s.id].is_active,onCheckedChange:i=>o({...a,[s.id]:{...a[s.id],is_active:!!i}})})," Active"]})}),e.jsx("td",{className:"p-3 align-middle",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",className:"flex items-center gap-2",onClick:()=>n(a[s.id]),children:"Edit"}),e.jsxs(d,{variant:"destructive",className:"flex items-center gap-2",onClick:()=>L(s),children:[e.jsx(R,{className:"h-4 w-4"})," Delete"]})]})})]},s.id)),f.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-4 text-sm text-gray-500",children:"No levels match your search."})})]})]})})]})]})})]}),e.jsx(N,{open:!!r,onOpenChange:s=>!s&&n(null),children:e.jsxs(y,{children:[e.jsx(C,{children:e.jsx(b,{children:"Edit level"})}),r&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Key"}),e.jsx(t,{value:r.key,onChange:s=>n({...r,key:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Name"}),e.jsx(t,{value:r.name,onChange:s=>n({...r,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Sort order"}),e.jsx(t,{type:"number",min:0,value:r.sort_order,onChange:s=>n({...r,sort_order:Number(s.target.value)})})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx(p,{checked:r.is_active,onCheckedChange:s=>n({...r,is_active:!!s})})," Active"]})]}),e.jsx(k,{children:r&&e.jsxs(d,{onClick:()=>D(r),className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"})," Save"]})})]})})]})]})]})}export{ve as default};
