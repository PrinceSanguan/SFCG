import{r as D,K as ne,m as G,j as e,$ as oe}from"./app-DFUXXT4p.js";import{B as F}from"./button-C7JIuDLX.js";import{C as v,a as _,b as P,c as V}from"./card-zBYgmH_3.js";import{L as c}from"./label-CN6EqliD.js";import{S as n,a as o,b as m,c as h,d as l}from"./select-DV5QNv10.js";import{T as me,a as he,b as I,c as H}from"./tabs-UKHAvHBz.js";import{C as E}from"./checkbox-BLfCvVKO.js";import{S as xe,H as pe}from"./sidebar--QF_4wSY.js";import{U as B}from"./users-BTMwhFen.js";import{G as je}from"./graduation-cap--XK0Jr-A.js";import{A as L}from"./award-C50G1q_t.js";import{F as C}from"./file-text-DstUZYkH.js";import{A as $,F as O,a as ue}from"./file-x-DxGdp0RV.js";import{D as U}from"./download-DJCJJWZ3.js";/* empty css            */import"./index-DYgvyQgK.js";import"./Combination-BcCJHn62.js";import"./index-Bye8lU_g.js";import"./index-BIv8Q4_g.js";import"./check-GF9LwRT4.js";import"./dropdown-menu-CrX8lNVt.js";import"./separator-IBS94rFG.js";import"./chevron-right-CFBNGpS9.js";import"./crown-2cbm9Av8.js";import"./building-2-CWIhaoP-.js";import"./user-cog-DApQMwS1.js";import"./book-open-DGVyQ1FS.js";import"./user-check-DcEtTVw9.js";import"./notebook-b2RQJizy.js";import"./chart-no-axes-column-increasing-DT4412Z5.js";function ze({user:q,academicLevels:A,schoolYears:p,gradingPeriods:Z,honorTypes:Y,sections:K,stats:T}){var W;const[ee,se]=D.useState("grade-reports"),[ae,X]=D.useState([]),{props:re}=ne(),j=re.csrf_token||((W=document.querySelector('meta[name="csrf-token"]'))==null?void 0:W.content)||"",[u,g]=D.useState(!1),{data:f,setData:w,processing:z}=G({academic_level_id:"all",grading_period_id:"all",school_year:p[0]||"",format:"pdf",include_statistics:"1"}),{data:k,setData:R,processing:J}=G({academic_level_id:"all",school_year:p[0]||"",honor_type_id:"all",format:"pdf"}),{data:N,setData:b,processing:M}=G({academic_level_id:"",school_year:p[0]||"",include_grades:"1",include_honors:"1",include_certificates:"1",format:"excel"}),{data:x,setData:S,processing:Q}=G({academic_level_id:"",section_id:"all",school_year:p[0]||"",include_grades:!1,format:"pdf"}),le=s=>{if(s.preventDefault(),!j){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}g(!0);let r=document.getElementById("download-iframe");r||(r=document.createElement("iframe"),r.id="download-iframe",r.style.display="none",document.body.appendChild(r));const a=document.createElement("form");a.method="POST",a.action=route("registrar.reports.grade-report"),a.target="download-iframe";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=j,a.appendChild(i),Object.entries(f).forEach(([y,t])=>{const d=document.createElement("input");d.type="hidden",d.name=y,d.value=(t==null?void 0:t.toString())||"",a.appendChild(d)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>g(!1),2e3)},ce=s=>{if(s.preventDefault(),!j){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}g(!0);let r=document.getElementById("download-iframe");r||(r=document.createElement("iframe"),r.id="download-iframe",r.style.display="none",document.body.appendChild(r));const a=document.createElement("form");a.method="POST",a.action=route("registrar.reports.honor-statistics"),a.target="download-iframe";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=j,a.appendChild(i),Object.entries(k).forEach(([y,t])=>{const d=document.createElement("input");d.type="hidden",d.name=y,d.value=(t==null?void 0:t.toString())||"",a.appendChild(d)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>g(!1),2e3)},ie=s=>{if(s.preventDefault(),!j){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}g(!0);let r=document.getElementById("download-iframe");r||(r=document.createElement("iframe"),r.id="download-iframe",r.style.display="none",document.body.appendChild(r));const a=document.createElement("form");a.method="POST",a.action=route("registrar.reports.archive-records"),a.target="download-iframe";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=j,a.appendChild(i),Object.entries(N).forEach(([y,t])=>{const d=document.createElement("input");d.type="hidden",d.name=y,d.value=(t==null?void 0:t.toString())||"",a.appendChild(d)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>g(!1),2e3)},de=s=>{if(s.preventDefault(),!j){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}g(!0);let r=document.getElementById("download-iframe");r||(r=document.createElement("iframe"),r.id="download-iframe",r.style.display="none",document.body.appendChild(r));const a=document.createElement("form");a.method="POST",a.action=route("registrar.reports.class-section-report"),a.target="download-iframe";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=j,a.appendChild(i),Object.entries(x).forEach(([y,t])=>{const d=document.createElement("input");d.type="hidden",d.name=y,d.value=(t==null?void 0:t.toString())||"",a.appendChild(d)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>g(!1),2e3)};D.useEffect(()=>{if(x.academic_level_id){const s=parseInt(x.academic_level_id),r=K.filter(a=>a.academic_level_id===s);X(r)}else X([])},[x.academic_level_id,K]);const te=Z.filter(s=>s.academic_level_id.toString()===f.academic_level_id||f.academic_level_id==="all");return e.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(xe,{user:q}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(pe,{user:q}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 min-h-0",children:e.jsxs("div",{className:"flex flex-col gap-6 pb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Reports & Archiving"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Generate comprehensive reports and archive academic records."})]}),e.jsx(oe,{href:route("registrar.dashboard"),children:e.jsx(F,{variant:"outline",children:"Back to Dashboard"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(v,{children:e.jsx(_,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(B,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:T.total_students})]})]})})}),e.jsx(v,{children:e.jsx(_,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(je,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Periods"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:T.active_periods})]})]})})}),e.jsx(v,{children:e.jsx(_,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(L,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Honors"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:T.total_honors})]})]})})}),e.jsx(v,{children:e.jsx(_,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900 rounded-lg",children:e.jsx(C,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Certificates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:T.total_certificates})]})]})})})]}),e.jsxs(me,{value:ee,onValueChange:se,className:"w-full",children:[e.jsxs(he,{className:"grid w-full grid-cols-4",children:[e.jsxs(I,{value:"grade-reports",className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"Grade Reports"]}),e.jsxs(I,{value:"honor-statistics",className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"Honor Statistics"]}),e.jsxs(I,{value:"archiving",className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Archiving"]}),e.jsxs(I,{value:"class-section-reports",className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Class Section Reports"]})]}),e.jsx(H,{value:"grade-reports",className:"mt-6",children:e.jsxs(v,{children:[e.jsx(P,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Generate Grade Reports"]})}),e.jsx(_,{children:e.jsxs("form",{onSubmit:le,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"academic_level",children:"Academic Level"}),e.jsxs(n,{value:f.academic_level_id,onValueChange:s=>w("academic_level_id",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select academic level"})}),e.jsxs(h,{children:[e.jsx(l,{value:"all",children:"All Levels"}),A.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"grading_period",children:"Grading Period"}),e.jsxs(n,{value:f.grading_period_id,onValueChange:s=>w("grading_period_id",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select grading period"})}),e.jsxs(h,{children:[e.jsx(l,{value:"all",children:"All Periods"}),te.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"school_year",children:"School Year"}),e.jsxs(n,{value:f.school_year,onValueChange:s=>w("school_year",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select school year"})}),e.jsx(h,{children:p.map(s=>e.jsx(l,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"format",children:"Format"}),e.jsxs(n,{value:f.format,onValueChange:s=>w("format",s),children:[e.jsx(o,{children:e.jsx(m,{})}),e.jsxs(h,{children:[e.jsx(l,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"PDF"]})}),e.jsx(l,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Excel"]})})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:"include_statistics",checked:f.include_statistics==="1",onCheckedChange:s=>w("include_statistics",s===!0?"1":"0")}),e.jsx(c,{htmlFor:"include_statistics",children:"Include statistical analysis"})]}),e.jsx(F,{type:"submit",disabled:z||u,className:"w-full md:w-auto",children:z||u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating Report..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Generate Grade Report"]})})]})})]})}),e.jsx(H,{value:"honor-statistics",className:"mt-6",children:e.jsxs(v,{children:[e.jsx(P,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"}),"Generate Honor Statistics"]})}),e.jsx(_,{children:e.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"honor_academic_level",children:"Academic Level"}),e.jsxs(n,{value:k.academic_level_id,onValueChange:s=>R("academic_level_id",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select academic level"})}),e.jsxs(h,{children:[e.jsx(l,{value:"all",children:"All Levels"}),A.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"honor_school_year",children:"School Year"}),e.jsxs(n,{value:k.school_year,onValueChange:s=>R("school_year",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select school year"})}),e.jsx(h,{children:p.map(s=>e.jsx(l,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"honor_type",children:"Honor Type"}),e.jsxs(n,{value:k.honor_type_id,onValueChange:s=>R("honor_type_id",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select honor type"})}),e.jsxs(h,{children:[e.jsx(l,{value:"all",children:"All Types"}),Y.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"honor_format",children:"Format"}),e.jsxs(n,{value:k.format,onValueChange:s=>R("format",s),children:[e.jsx(o,{children:e.jsx(m,{})}),e.jsxs(h,{children:[e.jsx(l,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"PDF"]})}),e.jsx(l,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Excel"]})})]})]})]})]}),e.jsx(F,{type:"submit",disabled:J||u,className:"w-full md:w-auto",children:J||u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating Statistics..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Generate Honor Statistics"]})})]})})]})}),e.jsx(H,{value:"archiving",className:"mt-6",children:e.jsxs(v,{children:[e.jsx(P,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Archive Academic Records"]})}),e.jsxs(_,{children:[e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Note:"})," Archiving will create a backup of academic records for the specified period. This process helps maintain system performance while preserving historical data."]})}),e.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"archive_academic_level",children:"Academic Level"}),e.jsxs(n,{value:N.academic_level_id,onValueChange:s=>b("academic_level_id",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select academic level"})}),e.jsx(h,{children:A.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"archive_school_year",children:"School Year"}),e.jsxs(n,{value:N.school_year,onValueChange:s=>b("school_year",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select school year"})}),e.jsx(h,{children:p.map(s=>e.jsx(l,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Include in Archive"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:"include_grades",checked:N.include_grades==="1",onCheckedChange:s=>b("include_grades",s===!0?"1":"0")}),e.jsx(c,{htmlFor:"include_grades",children:"Student Grades"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:"include_honors",checked:N.include_honors==="1",onCheckedChange:s=>b("include_honors",s===!0?"1":"0")}),e.jsx(c,{htmlFor:"include_honors",children:"Honor Records"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:"include_certificates",checked:N.include_certificates==="1",onCheckedChange:s=>b("include_certificates",s===!0?"1":"0")}),e.jsx(c,{htmlFor:"include_certificates",children:"Certificates"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"archive_format",children:"Archive Format"}),e.jsxs(n,{value:N.format,onValueChange:s=>b("format",s),children:[e.jsx(o,{children:e.jsx(m,{})}),e.jsxs(h,{children:[e.jsx(l,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Excel"]})}),e.jsx(l,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),"CSV"]})})]})]})]}),e.jsx(F,{type:"submit",disabled:M||u,className:"w-full md:w-auto",children:M||u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Archiving Records..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Archive Records"]})})]})]})]})}),e.jsx(H,{value:"class-section-reports",className:"mt-6",children:e.jsxs(v,{children:[e.jsx(P,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Generate Class Section Reports"]})}),e.jsx(_,{children:e.jsxs("form",{onSubmit:de,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"section_academic_level",children:"Academic Level"}),e.jsxs(n,{value:x.academic_level_id,onValueChange:s=>{S("academic_level_id",s),S("section_id","all")},children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select academic level"})}),e.jsx(h,{children:A.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"section",children:"Section"}),e.jsxs(n,{value:x.section_id,onValueChange:s=>S("section_id",s),disabled:!x.academic_level_id,children:[e.jsx(o,{children:e.jsx(m,{placeholder:x.academic_level_id?"All sections":"Select level first"})}),e.jsxs(h,{children:[e.jsx(l,{value:"all",children:"All Sections"}),ae.map(s=>e.jsxs(l,{value:s.id.toString(),children:[s.name," ",s.specific_year_level?`(${s.specific_year_level})`:""]},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"section_school_year",children:"School Year"}),e.jsxs(n,{value:x.school_year,onValueChange:s=>S("school_year",s),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select school year"})}),e.jsx(h,{children:p.map(s=>e.jsx(l,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"section_format",children:"Format"}),e.jsxs(n,{value:x.format,onValueChange:s=>S("format",s),children:[e.jsx(o,{children:e.jsx(m,{})}),e.jsxs(h,{children:[e.jsx(l,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"PDF"]})}),e.jsx(l,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Excel"]})})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:"include_grades_section",checked:x.include_grades,onCheckedChange:s=>S("include_grades",s===!0)}),e.jsx(c,{htmlFor:"include_grades_section",children:"Include student average grades in the report"})]}),e.jsx(F,{type:"submit",disabled:Q||!x.academic_level_id||!x.school_year||u,className:"w-full md:w-auto",children:Q||u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating Report..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Generate Class Section Report"]})})]})})]})})]})]})})]})]})}export{ze as default};
