import{r as x,j as e,$,S as z}from"./app-BfFCM0wk.js";import{S as O,H as K}from"./sidebar-Dg7GkgqB.js";import{C as o,a as d,b as y,c as S}from"./card-Bk-IUr-X.js";import{B as h}from"./button-BCBNNKUD.js";import{B as j}from"./badge-CXxuETxY.js";import{I as w}from"./input-A3yv7CFZ.js";import{S as C,a as _,b as P,c as k,d as g}from"./select-YNVr55R6.js";import{A as q}from"./arrow-left-Ce4oMPLZ.js";import{B as G}from"./book-open-CFvCHk92.js";import{C as R}from"./chart-no-axes-column-increasing-DL7BvrXL.js";import{T as J}from"./trending-up-GEJn_CKC.js";import{U as M}from"./users-u2RQp8Su.js";import{F as Q}from"./filter-UjIVNRxM.js";import{S as W}from"./search-CN2sBj-m.js";import{D as f}from"./download-fc6inhoK.js";/* empty css            */import"./dropdown-menu-DPg08PCc.js";import"./Combination-eHEumoou.js";import"./index-BGWfPz9P.js";import"./separator-B07ZZr6g.js";import"./chevron-down-D7jPamMq.js";import"./user-cog-CvHC_OFv.js";import"./award-DTebB8FQ.js";import"./chevron-right-CPWnI47y.js";import"./file-text-DYLeZjxQ.js";import"./index-BvV4LZpe.js";import"./index-Bos6R9Wh.js";import"./check-XJp12byK.js";function we({user:v,grades:p,stats:i,filters:r,principalAcademicLevel:a,strands:m,gradingPeriods:F}){const[u,E]=x.useState(""),[t,B]=x.useState(r.strand_id||""),[n,T]=x.useState(r.year||""),[l,U]=x.useState(r.period||"");x.useEffect(()=>{console.log("[Principal Reports] Academic Performance - Component Render",{principalAcademicLevel:a,academicLevelKey:a==null?void 0:a.key,academicLevelName:a==null?void 0:a.name,shouldShowStrand:(a==null?void 0:a.key)==="senior_highschool",strandsCount:(m==null?void 0:m.length)||0})},[a,m]);const b=(a==null?void 0:a.key)==="senior_highschool",N=p.data.filter(s=>{const c=s.student.name.toLowerCase().includes(u.toLowerCase())||s.subject.name.toLowerCase().includes(u.toLowerCase()),I=!t||t==="all"||s.subject.course.id.toString()===t,V=!n||s.school_year===n,Y=!l||l==="all"||s.gradingPeriod.id.toString()===l;return c&&I&&V&&Y}),D=s=>s>=90?"text-green-600":s>=80?"text-blue-600":s>=75?"text-yellow-600":"text-red-600",H=s=>s>=90?e.jsx(j,{variant:"default",className:"bg-green-100 text-green-800",children:"Excellent"}):s>=80?e.jsx(j,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"Good"}):s>=75?e.jsx(j,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:"Passing"}):e.jsx(j,{variant:"destructive",children:"Failing"});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(O,{user:v}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(K,{user:v}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{href:route("principal.reports.index"),children:e.jsxs(h,{variant:"outline",size:"sm",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Back to Reports"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Academic Performance Report"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Comprehensive analysis of student academic performance across all levels and courses."})]})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[e.jsx(o,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Grades"}),e.jsx("p",{className:"text-2xl font-bold",children:i.total_grades})]})]})})}),e.jsx(o,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Grade"}),e.jsx("p",{className:"text-2xl font-bold",children:i.average_grade.toFixed(2)})]})]})})}),e.jsx(o,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Highest Grade"}),e.jsx("p",{className:"text-2xl font-bold",children:i.highest_grade})]})]})})}),e.jsx(o,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"h-8 w-8 text-red-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lowest Grade"}),e.jsx("p",{className:"text-2xl font-bold",children:i.lowest_grade})]})]})})}),e.jsx(o,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Passing Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[i.passing_rate.toFixed(1),"%"]})]})]})})})]}),e.jsxs(o,{children:[e.jsx(y,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(d,{children:e.jsxs("div",{className:`grid gap-4 ${b?"md:grid-cols-2 lg:grid-cols-5":"md:grid-cols-2 lg:grid-cols-4"}`,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(w,{placeholder:"Search students or subjects...",value:u,onChange:s=>E(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Academic Level"}),e.jsx("div",{className:"flex h-10 w-full items-center rounded-md border border-input bg-gray-50 px-3 py-2 text-sm",children:(a==null?void 0:a.name)||"Not Assigned"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Reports are filtered by your assigned academic level"})]}),b&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Strand"}),e.jsxs(C,{value:t,onValueChange:B,children:[e.jsx(_,{children:e.jsx(P,{placeholder:"All strands"})}),e.jsxs(k,{children:[e.jsx(g,{value:"all",children:"All strands"}),m.map(s=>e.jsx(g,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"School Year"}),e.jsx(w,{placeholder:"e.g., 2024-2025",value:n,onChange:s=>T(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Grading Period"}),e.jsxs(C,{value:l,onValueChange:U,children:[e.jsx(_,{children:e.jsx(P,{placeholder:"All periods"})}),e.jsxs(k,{children:[e.jsx(g,{value:"all",children:"All periods"}),F.map(s=>e.jsx(g,{value:s.id.toString(),children:s.name},s.id))]})]})]})]})})]}),e.jsxs(o,{children:[e.jsx(y,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"Export Options"]})}),e.jsx(d,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(h,{className:"flex items-center gap-2",onClick:()=>{const s=new URLSearchParams;t&&t!=="all"&&s.append("strand_id",t),n&&s.append("year",n),l&&l!=="all"&&s.append("period",l),window.location.href=route("principal.reports.academic-performance.export",{format:"pdf"})+"?"+s.toString()},children:[e.jsx(f,{className:"h-4 w-4"}),"Export to PDF"]}),e.jsxs(h,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{const s=new URLSearchParams;t&&t!=="all"&&s.append("strand_id",t),n&&s.append("year",n),l&&l!=="all"&&s.append("period",l),window.location.href=route("principal.reports.academic-performance.export",{format:"excel"})+"?"+s.toString()},children:[e.jsx(f,{className:"h-4 w-4"}),"Export to Excel"]}),e.jsxs(h,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{const s=new URLSearchParams;t&&t!=="all"&&s.append("strand_id",t),n&&s.append("year",n),l&&l!=="all"&&s.append("period",l),window.location.href=route("principal.reports.academic-performance.export",{format:"csv"})+"?"+s.toString()},children:[e.jsx(f,{className:"h-4 w-4"}),"Export to CSV"]})]})})]}),e.jsxs(o,{children:[e.jsx(y,{children:e.jsxs(S,{children:["Grade Details (",N.length,")"]})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[N.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium",children:s.student.name}),e.jsx("span",{className:`text-lg font-bold ${D(s.grade)}`,children:s.grade}),H(s.grade)]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.subject.name," - ",s.subject.course.name]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.academicLevel.name," - ",s.gradingPeriod.name," - ",s.school_year]})]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(j,{variant:"outline",children:s.year_of_study})})]},s.id)),N.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(G,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"No Grades Available"}),e.jsxs("p",{className:"text-gray-500",children:["No approved grades found for ",a.name,"."]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your filters or check back later."})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"No Academic Level Assigned"}),e.jsx("p",{className:"text-gray-500",children:"Please contact the administrator to assign an academic level to your account."})]})]})]})})]}),p.last_page>1&&e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"flex gap-2",children:Array.from({length:p.last_page},(s,c)=>c+1).map(s=>e.jsx(h,{variant:s===p.current_page?"default":"outline",size:"sm",onClick:()=>{const c=new URLSearchParams;r!=null&&r.strand_id&&c.set("strand_id",r.strand_id),r!=null&&r.year&&c.set("year",r.year),r!=null&&r.period&&c.set("period",r.period),c.set("page",s.toString()),z.visit(route("principal.reports.academic-performance")+"?"+c.toString(),{preserveState:!0,preserveScroll:!1})},children:s},s))})})]})})]})]})}export{we as default};
