import{r as f,u as _e,j as e,$ as ve,S as P}from"./app-Cqi6brbp.js";import{H as fe}from"./header-jjzZwSEL.js";import{S as Ne}from"./sidebar-L3L4lBGr.js";import{C as H,a as L,b as X,c as Z}from"./card-CE1h_MHu.js";import{B as j}from"./button-CDjIv_Os.js";import{I as v}from"./input-DfVUzVMd.js";import{L as d}from"./label-CkbLV2DH.js";import{S as n,a as o,b as h,c as x,d as m}from"./select-CvfOrcEi.js";import{B as p}from"./badge-D9kUThTf.js";import{D as ee,a as ye,b as se,c as ae,d as le,f as be,e as re}from"./dialog-O75uHoQD.js";import{T as Se,a as ke,b,c as ie}from"./tabs-BgsAJzVM.js";import{A as Ce}from"./arrow-left-DlecbLQ2.js";import{P as I}from"./plus-Ciu71Er0.js";import{B as G}from"./book-open-B14UEo37.js";import{S as z}from"./square-pen-DjmhXcGO.js";import{T as M}from"./trash-2-BjodbJXH.js";import{H as we}from"./hash-BYGS32fk.js";import{C as Fe}from"./clock-BI56xD5h.js";/* empty css            */import"./dropdown-menu-BMbtQDRk.js";import"./Combination-FbFP6wus.js";import"./index-DJYg2hJW.js";import"./separator-3ry1QnoU.js";import"./users-DSgwJ23R.js";import"./chevron-right-BdweiHp4.js";import"./crown-k3UxZ03d.js";import"./building-2-mueuy65Y.js";import"./user-cog-fxwDWnhl.js";import"./user-check-BXkJeZ7b.js";import"./graduation-cap-C3Tof3MR.js";import"./notebook-D8VNMFfP.js";import"./chart-no-axes-column-increasing-tplT3Tki.js";import"./shield-B7cwcZOo.js";import"./index-D43-hj7a.js";import"./index-CeryOuhG.js";import"./check-WfpiGiRs.js";function hs({user:O,subjects:A=[],academicLevels:g=[],gradingPeriods:S=[],courses:Y=[],departments:de=[],yearLevels:ce={},shsYearLevels:te={},tracks:ne=[],strands:oe=[]}){var R,K,Q;const[he,xe]=f.useState("all"),[N,$]=f.useState(null),{addToast:_}=_e(),[l,t]=f.useState({name:"",code:"",description:"",academic_level_id:"",grade_levels:[],grading_period_id:"",department_id:"",course_id:"",semester_id:"",units:0,hours_per_week:0,is_core:!1,is_active:!0,track_id:"",strand_id:"",shs_year_level:"",jhs_year_level:""}),[me,y]=f.useState(!1),[i,u]=f.useState(null),[je,k]=f.useState(!1),C=s=>A.filter(a=>a.academic_level.key===s),T=s=>{const a=C("elementary");return s?a.filter(r=>!r.grade_levels||r.grade_levels.length===0||r.grade_levels.includes(s)):a},q=s=>S.filter(a=>a.academic_level_id===s),U=s=>S.filter(a=>a.academic_level_id===s&&a.parent_id==null&&(a.type==="semester"||/semester/i.test(a.name))),J=s=>S.filter(a=>{var r;return s&&((r=a.parent_id)==null?void 0:r.toString())===s}),w=[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}],W=()=>{if(!l.academic_level_id)return!1;const s=g.find(a=>a.id.toString()===l.academic_level_id);return(s==null?void 0:s.key)==="elementary"},ue=()=>{if(console.log("Form submission started:",l),!l.name||!l.code||!l.academic_level_id){console.log("Validation failed: Missing required fields"),_("Please fill in all required fields (Name, Code, and Academic Level).","error");return}if(W()&&l.grade_levels.length===0){console.log("Validation failed: No grade levels selected for elementary"),_("Please select at least one grade level for elementary subjects.","error");return}console.log("Form validation passed, submitting..."),console.log("Form data being sent:",JSON.stringify(l,null,2));const s={...l,description:l.description||null,grading_period_id:l.grading_period_id||null,course_id:l.course_id||null};P.post(route("admin.academic.subjects.store"),s,{preserveScroll:!0,onSuccess:a=>{console.log("Subject created successfully:",a),_("Subject created successfully!","success"),t({name:"",code:"",description:"",academic_level_id:"",grade_levels:[],grading_period_id:"",department_id:"",course_id:"",semester_id:"",units:0,hours_per_week:0,is_core:!1,is_active:!0,track_id:"",strand_id:"",shs_year_level:"",jhs_year_level:""}),y(!1)},onError:a=>{if(console.log("Subject creation failed:",a),console.log("Error details:",JSON.stringify(a,null,2)),a.code){const r=`${l.code}_${Date.now().toString().slice(-4)}`;_(`Subject code "${l.code}" already exists. Try "${r}" instead.`,"error"),t(c=>({...c,code:r}))}else a.name?_(`Subject name error: ${a.name}`,"error"):_("Failed to create subject. Please check the form and try again.","error")}})},ge=s=>{const a={name:s.name,code:s.code,description:s.description||"",academic_level_id:s.academic_level_id,grade_levels:s.grade_levels||[],grading_period_id:s.grading_period_id||"",course_id:s.course_id||"",units:s.units,hours_per_week:s.hours_per_week,is_core:s.is_core,is_active:s.is_active};P.put(route("admin.academic.subjects.update",s.id),a,{preserveScroll:!0,onSuccess:()=>{_("Subject updated successfully!","success"),k(!1)},onError:()=>{_("Failed to update subject. Please check the form and try again.","error")}})},V=s=>{confirm(`Delete subject ${s.name}?`)&&P.delete(route("admin.academic.subjects.destroy",s.id),{preserveScroll:!0,onSuccess:()=>{_("Subject deleted successfully!","success")},onError:()=>{_("Failed to delete subject. Please try again.","error")}})},D=s=>{u(s),k(!0)},E=s=>s?e.jsx(p,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"}):e.jsx(p,{variant:"secondary",children:"Inactive"}),B=s=>s?e.jsx(p,{variant:"default",className:"bg-blue-100 text-blue-800",children:"Core"}):e.jsx(p,{variant:"outline",children:"Elective"}),F=s=>{switch(s){case"elementary":return"ðŸŽ“";case"junior_highschool":return"ðŸ“š";case"senior_highschool":return"ðŸŽ¯";case"college":return"ðŸ›ï¸";default:return"ðŸ“–"}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(Ne,{user:O}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(fe,{user:O}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"mb-4",children:e.jsx(ve,{href:route("admin.academic.index"),children:e.jsxs(j,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Back to Academic & Curriculum"]})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Manage Subjects per Level"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Create and manage subjects for each academic level with appropriate grading periods."})]}),e.jsx(H,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold",children:"Subjects"}),e.jsxs(ee,{open:me,onOpenChange:y,children:[e.jsx(ye,{asChild:!0,children:e.jsxs(j,{onClick:()=>t({name:"",code:"",description:"",academic_level_id:"",grade_levels:[],grading_period_id:"",department_id:"",course_id:"",semester_id:"",units:0,hours_per_week:0,is_core:!1,is_active:!0,track_id:"",strand_id:"",shs_year_level:"",jhs_year_level:""}),className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Add Subject"]})}),e.jsxs(se,{className:"w-[95vw] max-w-[900px] max-h-[85vh] overflow-y-auto",children:[e.jsxs(ae,{children:[e.jsx(le,{children:"Add New Subject"}),e.jsx(be,{children:"Create a new subject and assign it to specific grade levels for elementary students."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-name",children:"Name"}),e.jsx(v,{id:"subject-name",placeholder:"e.g., Mathematics, English, Science",value:l.name,onChange:s=>t({...l,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-code",children:"Code"}),e.jsx(v,{id:"subject-code",placeholder:"e.g., MATH101, ENG101",value:l.code,onChange:s=>t({...l,code:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-description",children:"Description"}),e.jsx(v,{id:"subject-description",placeholder:"Brief description of the subject",value:l.description,onChange:s=>t({...l,description:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-level",children:"Academic Level"}),e.jsxs(n,{value:l.academic_level_id,onValueChange:s=>t({...l,academic_level_id:s,grading_period_id:"",course_id:""}),children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select academic level"})}),e.jsx(x,{children:g.map(s=>e.jsx(m,{value:s.id.toString(),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:F(s.key)}),s.name]})},s.id))})]})]}),(()=>{const s=g.find(r=>r.id.toString()===l.academic_level_id),a=(s==null?void 0:s.key)==="elementary"||(s==null?void 0:s.key)==="junior_highschool";return console.log("Debug - Generic Period - Selected Level:",s),console.log("Debug - Generic Period - Should Show:",a),a?e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-grading",children:"Grading Period"}),e.jsxs(n,{value:l.grading_period_id,onValueChange:r=>t({...l,grading_period_id:r}),disabled:!l.academic_level_id,children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select grading period"})}),e.jsx(x,{children:l.academic_level_id&&q(parseInt(l.academic_level_id)).filter(r=>r.parent_id==null).map(r=>e.jsxs(m,{value:r.id.toString(),children:[r.name," (",r.code,")"]},r.id))})]})]}):null})()]}),W()&&e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-grade-levels",children:"Grade Levels"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:w.map(s=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:l.grade_levels.includes(s.value),onChange:a=>{a.target.checked?t({...l,grade_levels:[...l.grade_levels,s.value]}):t({...l,grade_levels:l.grade_levels.filter(r=>r!==s.value)})},className:"rounded border-gray-300"}),e.jsx("span",{className:"text-sm",children:s.label})]},s.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select which grade levels this subject applies to"})]}),(()=>{const s=g.find(r=>r.id.toString()===l.academic_level_id);if((s==null?void 0:s.key)!=="junior_highschool")return null;const a=[{value:"first_year",label:"1st Year"},{value:"second_year",label:"2nd Year"},{value:"third_year",label:"3rd Year"},{value:"fourth_year",label:"4th Year"}];return e.jsxs("div",{children:[e.jsx(d,{htmlFor:"jhs-year",children:"Year Level"}),e.jsxs(n,{value:l.jhs_year_level,onValueChange:r=>t(c=>({...c,jhs_year_level:r})),children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select year level"})}),e.jsx(x,{children:a.map(r=>e.jsx(m,{value:r.value,children:r.label},r.value))})]})]})})(),(()=>{const s=g.find(r=>r.id.toString()===l.academic_level_id),a=(s==null?void 0:s.key)==="college";return console.log("Debug - Selected Level:",s),console.log("Debug - Is College:",a),console.log("Debug - Academic Level ID:",l.academic_level_id),a})()&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-dept",children:"Department"}),e.jsxs(n,{value:l.department_id,onValueChange:s=>t({...l,department_id:s,course_id:"",semester_id:"",grading_period_id:""}),children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select department"})}),e.jsx(x,{children:de.map(s=>e.jsx(m,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-course",children:"Course"}),e.jsxs(n,{value:l.course_id,onValueChange:s=>t({...l,course_id:s}),disabled:!l.department_id,children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select course (required for college subjects)"})}),e.jsx(x,{children:Y.filter(s=>{var a;return!l.department_id||((a=s.department_id)==null?void 0:a.toString())===l.department_id}).map(s=>e.jsxs(m,{value:s.id.toString(),children:[s.code," - ",s.name]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-year-level",children:"Year Level"}),e.jsxs(n,{value:l.year_level||"",onValueChange:s=>t({...l,year_level:s}),children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select year level (optional)"})}),e.jsx(x,{children:Object.entries(ce).map(([s,a])=>e.jsx(m,{value:s,children:a},s))})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-semester",children:"Semester"}),e.jsxs(n,{value:l.semester_id,onValueChange:s=>t({...l,semester_id:s,grading_period_id:""}),children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select semester (optional)"})}),e.jsx(x,{children:l.academic_level_id&&U(parseInt(l.academic_level_id)).map(s=>e.jsx(m,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-period",children:"Period"}),e.jsxs(n,{value:l.grading_period_id,onValueChange:s=>t({...l,grading_period_id:s}),disabled:!l.semester_id,children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select period (optional)"})}),e.jsx(x,{children:J(l.semester_id).map(s=>e.jsx(m,{value:s.id.toString(),children:s.name},s.id))})]})]})]}),l.academic_level_id&&((R=g.find(s=>s.id.toString()===l.academic_level_id))==null?void 0:R.key)==="senior_highschool"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-shs-year",children:"Year Level"}),e.jsxs(n,{value:l.shs_year_level,onValueChange:s=>t(a=>({...a,shs_year_level:s})),children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select year level"})}),e.jsx(x,{children:Object.entries(te).map(([s,a])=>e.jsx(m,{value:s,children:a},s))})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-period",children:"Grading Period"}),e.jsxs(n,{value:l.grading_period_id,onValueChange:s=>t({...l,grading_period_id:s}),children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select period (optional)"})}),e.jsx(x,{children:l.academic_level_id&&S.filter(s=>s.academic_level_id===parseInt(l.academic_level_id)).filter(s=>s.parent_id!=null).map(s=>e.jsx(m,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-track",children:"Track"}),e.jsxs(n,{value:l.track_id,onValueChange:s=>t(a=>({...a,track_id:s,strand_id:""})),children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select track"})}),e.jsx(x,{children:(ne||[]).map(s=>e.jsxs(m,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-strand",children:"Strand"}),e.jsxs(n,{value:l.strand_id,onValueChange:s=>t(a=>({...a,strand_id:s})),disabled:!l.track_id,children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select strand"})}),e.jsx(x,{children:oe.filter(s=>l.track_id&&s.track_id.toString()===String(l.track_id)).map(s=>e.jsxs(m,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-units",children:"Units"}),e.jsx(v,{id:"subject-units",type:"number",min:"0",step:"0.5",value:l.units,onChange:s=>t({...l,units:parseFloat(s.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subject-hours",children:"Hours per Week"}),e.jsx(v,{id:"subject-hours",type:"number",min:"0",value:l.hours_per_week,onChange:s=>t({...l,hours_per_week:parseInt(s.target.value)||0})})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx("input",{id:"subject-core",type:"checkbox",checked:l.is_core,onChange:s=>t({...l,is_core:s.target.checked}),className:"rounded border-gray-300"}),e.jsx(d,{htmlFor:"subject-core",children:"Core Subject"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"subject-active",type:"checkbox",checked:l.is_active,onChange:s=>t({...l,is_active:s.target.checked}),className:"rounded border-gray-300"}),e.jsx(d,{htmlFor:"subject-active",children:"Active"})]})]}),e.jsxs(re,{children:[e.jsx(j,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(j,{onClick:ue,children:"Create Subject"})]})]})]})]})})}),e.jsxs(Se,{value:he,onValueChange:xe,className:"w-full",children:[e.jsxs(ke,{className:"grid w-full grid-cols-5",children:[e.jsx(b,{value:"all",children:"All Subjects"}),e.jsx(b,{value:"elementary",children:"Elementary"}),e.jsx(b,{value:"junior_highschool",children:"Junior High"}),e.jsx(b,{value:"senior_highschool",children:"Senior High"}),e.jsx(b,{value:"college",children:"College"})]}),e.jsx(ie,{value:"all",className:"space-y-4",children:e.jsxs(H,{children:[e.jsx(X,{children:e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),"All Subjects (",A.length,")"]})}),e.jsx(L,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Level"}),e.jsx("th",{className:"text-left p-3",children:"Grade Levels"}),e.jsx("th",{className:"text-left p-3",children:"Period"}),e.jsx("th",{className:"text-left p-3",children:"Course"}),e.jsx("th",{className:"text-left p-3",children:"Units"}),e.jsx("th",{className:"text-left p-3",children:"Hours"}),e.jsx("th",{className:"text-left p-3",children:"Type"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:A.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:e.jsx(p,{variant:"outline",className:"font-mono",children:s.code})}),e.jsx("td",{className:"p-3 font-medium",children:s.name}),e.jsx("td",{className:"p-3",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:F(s.academic_level.key)}),s.academic_level.name]})}),e.jsx("td",{className:"p-3",children:s.academic_level.key==="elementary"&&s.grade_levels&&s.grade_levels.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:s.grade_levels.map(a=>{var r;return e.jsx(p,{variant:"secondary",className:"text-xs",children:((r=w.find(c=>c.value===a))==null?void 0:r.label)||a},a)})}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3",children:s.grading_period?e.jsx(p,{variant:"outline",children:s.grading_period.name}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3",children:s.course?e.jsx(p,{variant:"outline",className:"bg-blue-100 text-blue-800",children:s.course.code}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3",children:s.units}),e.jsx("td",{className:"p-3",children:s.hours_per_week}),e.jsx("td",{className:"p-3",children:B(s.is_core)}),e.jsx("td",{className:"p-3",children:E(s.is_active)}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"outline",size:"sm",onClick:()=>D(s),children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>V(s),className:"text-red-600 hover:text-red-700",children:e.jsx(M,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})}),g.map(s=>e.jsx(ie,{value:s.key,className:"space-y-4",children:e.jsxs(H,{children:[e.jsx(X,{children:e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx("span",{children:F(s.key)}),s.name," Subjects (",s.key==="elementary"?T(N||void 0).length:C(s.key).length,")"]})}),e.jsx(L,{children:s.key==="elementary"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx(d,{className:"text-sm font-medium",children:"Filter by Grade Level:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(j,{variant:N===null?"default":"outline",size:"sm",onClick:()=>$(null),children:"All Grades"}),w.map(a=>e.jsx(j,{variant:N===a.value?"default":"outline",size:"sm",onClick:()=>$(a.value),children:a.label},a.value))]})]}),T(N||void 0).length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(G,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No subjects defined"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:["Get started by creating the first subject for ",s.name,"."]}),e.jsxs(j,{variant:"outline",onClick:()=>{t({...l,academic_level_id:s.id.toString()}),y(!0)},className:"border-blue-300 text-blue-600 hover:bg-blue-50",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Add First Subject"]})]}):e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Grade Levels"}),e.jsx("th",{className:"text-left p-3",children:"Units"}),e.jsx("th",{className:"text-left p-3",children:"Hours/Week"}),e.jsx("th",{className:"text-left p-3",children:"Type"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:T(N||void 0).map(a=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 font-mono",children:a.code}),e.jsx("td",{className:"p-3",children:a.name}),e.jsx("td",{className:"p-3",children:a.grade_levels&&a.grade_levels.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:a.grade_levels.map(r=>{var c;return e.jsx(p,{variant:"secondary",className:"text-xs",children:((c=w.find(pe=>pe.value===r))==null?void 0:c.label)||r},r)})}):e.jsx(p,{variant:"outline",className:"text-xs text-gray-500",children:"All Grades"})}),e.jsx("td",{className:"p-3",children:a.units}),e.jsx("td",{className:"p-3",children:a.hours_per_week}),e.jsx("td",{className:"p-3",children:B(a.is_core)}),e.jsx("td",{className:"p-3",children:E(a.is_active)}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"outline",size:"sm",onClick:()=>D(a),children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>V(a),className:"text-red-600 hover:text-red-700",children:e.jsx(M,{className:"h-4 w-4"})})]})})]},a.id))})]})})]}):e.jsx(e.Fragment,{children:C(s.key).length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(G,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No subjects defined"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:["Get started by creating the first subject for ",s.name,"."]}),e.jsxs(j,{variant:"outline",onClick:()=>{t({...l,academic_level_id:s.id.toString()}),y(!0)},className:"border-blue-300 text-blue-600 hover:bg-blue-50",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Add First Subject"]})]}):e.jsx("div",{className:"grid gap-4",children:C(s.key).map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50 dark:bg-gray-800",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(G,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:a.name}),e.jsxs(p,{variant:"outline",className:"text-xs font-mono bg-gray-100 dark:bg-gray-600",children:[e.jsx(we,{className:"h-3 w-3 mr-1"}),a.code]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[a.grading_period&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Fe,{className:"h-3 w-3"}),a.grading_period.name]}),e.jsxs("span",{children:[a.units," units"]}),e.jsxs("span",{children:[a.hours_per_week," hrs/week"]})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[B(a.is_core),E(a.is_active),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{variant:"outline",size:"sm",onClick:()=>D(a),children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>V(a),className:"text-red-600 hover:text-red-700",children:e.jsx(M,{className:"h-4 w-4"})})]})]})]},a.id))})})})]})},s.key))]})]})})]}),e.jsx(ee,{open:je,onOpenChange:k,children:e.jsxs(se,{className:"max-w-2xl",children:[e.jsx(ae,{children:e.jsx(le,{children:"Edit Subject"})}),i&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Name"}),e.jsx(v,{value:i.name,onChange:s=>u({...i,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Code"}),e.jsx(v,{value:i.code,onChange:s=>u({...i,code:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Description"}),e.jsx(v,{value:i.description||"",onChange:s=>u({...i,description:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Academic Level"}),e.jsxs(n,{value:i.academic_level_id.toString(),onValueChange:s=>u({...i,academic_level_id:Number(s),grading_period_id:void 0,course_id:void 0}),children:[e.jsx(o,{children:e.jsx(h,{})}),e.jsx(x,{children:g.map(s=>e.jsx(m,{value:s.id.toString(),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:F(s.key)}),s.name]})},s.id))})]})]}),(()=>{var r;const s=g.find(c=>c.id===i.academic_level_id);return(s==null?void 0:s.key)==="college"||(s==null?void 0:s.key)==="senior_highschool"?null:e.jsxs("div",{children:[e.jsx(d,{children:"Grading Period"}),e.jsxs(n,{value:((r=i.grading_period_id)==null?void 0:r.toString())||"",onValueChange:c=>u({...i,grading_period_id:Number(c)}),children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select grading period"})}),e.jsx(x,{children:q(i.academic_level_id).map(c=>e.jsxs(m,{value:c.id.toString(),children:[c.name," (",c.code,")"]},c.id))})]})]})})()]}),(()=>{var r;const s=g.find(c=>c.id===i.academic_level_id);return(s==null?void 0:s.key)==="college"||(s==null?void 0:s.key)==="senior_highschool"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Semester"}),e.jsxs(n,{value:i.semester_id||"",onValueChange:c=>u({...i,semester_id:c,grading_period_id:void 0}),children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select semester"})}),e.jsx(x,{children:U(i.academic_level_id).map(c=>e.jsx(m,{value:c.id.toString(),children:c.name},c.id))})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Period"}),e.jsxs(n,{value:((r=i.grading_period_id)==null?void 0:r.toString())||"",onValueChange:c=>u({...i,grading_period_id:Number(c)}),disabled:!i.semester_id,children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select period"})}),e.jsx(x,{children:J(i.semester_id).map(c=>e.jsx(m,{value:c.id.toString(),children:c.name},c.id))})]})]})]}):null})(),i.academic_level_id&&((K=g.find(s=>s.id===i.academic_level_id))==null?void 0:K.key)==="college"&&e.jsxs("div",{children:[e.jsx(d,{children:"Course"}),e.jsxs(n,{value:((Q=i.course_id)==null?void 0:Q.toString())||"",onValueChange:s=>u({...i,course_id:Number(s)}),children:[e.jsx(o,{children:e.jsx(h,{placeholder:"Select course (required for college subjects)"})}),e.jsx(x,{children:Y.map(s=>e.jsxs(m,{value:s.id.toString(),children:[s.code," - ",s.name]},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Units"}),e.jsx(v,{type:"number",min:"0",step:"0.5",value:i.units,onChange:s=>u({...i,units:parseFloat(s.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Hours per Week"}),e.jsx(v,{type:"number",min:"0",value:i.hours_per_week,onChange:s=>u({...i,hours_per_week:parseInt(s.target.value)||0})})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx("input",{type:"checkbox",checked:i.is_core,onChange:s=>u({...i,is_core:s.target.checked}),className:"rounded border-gray-300"}),e.jsx(d,{children:"Core Subject"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:i.is_active,onChange:s=>u({...i,is_active:s.target.checked}),className:"rounded border-gray-300"}),e.jsx(d,{children:"Active"})]})]}),e.jsxs(re,{children:[e.jsx(j,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsx(j,{onClick:()=>i&&ge(i),children:"Update Subject"})]})]})})]})}export{hs as default};
