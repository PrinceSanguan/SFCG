import{j as e,$ as k}from"./app-CNA0EGn6.js";import{C as w,b as I,c as A,a as _}from"./card-B8T2hQI9.js";import{B as D}from"./button-DzKRCm_S.js";import{B as p}from"./badge-IFCSINdy.js";import{S as R,H as q}from"./sidebar-CK0iLW5W.js";import{A as U}from"./arrow-left-Bv7-vddA.js";import{U as S}from"./user-8lC43fkC.js";import{M as V}from"./mail-zpaO1CtY.js";import{B as G}from"./book-open-CgaWo9e8.js";import{G as O}from"./graduation-cap-DUOax5O-.js";import{C as F}from"./calendar-BbcTMHwC.js";import{A as H}from"./award-CYgoRmjq.js";import{P as Y}from"./plus-B1tlHoRy.js";import{S as z}from"./square-pen-DpzIXwVo.js";/* empty css            */import"./dropdown-menu-DWP2G9FP.js";import"./Combination-vSUcjMKV.js";import"./index-CFb5Ihyo.js";import"./log-out-DNB9xrwl.js";import"./upload-BcLIqBFE.js";import"./crown-CkMoiUp1.js";function Ne({user:C,student:x,subject:h,academicLevel:y,grades:m,gradingPeriods:f}){console.log("🔍 [COMPONENT INIT] ShowStudent Component Loaded"),console.log("🔍 [COMPONENT INIT] Student:",{id:x.id,name:x.name,student_number:x.student_number}),console.log("🔍 [COMPONENT INIT] Subject:",{id:h.id,name:h.name,code:h.code}),console.log("🔍 [COMPONENT INIT] Academic Level:",{id:y.id,name:y.name,key:y.key}),console.log("🔍 [COMPONENT INIT] Grades:",{count:m.length,grades:m.map(r=>{var i,a;return{id:r.id,grade:r.grade,grading_period_id:r.grading_period_id,period_name:(i=r.gradingPeriod)==null?void 0:i.name,period_parent_id:(a=r.gradingPeriod)==null?void 0:a.parent_id,school_year:r.school_year}})}),console.log("🔍 [COMPONENT INIT] Grading Periods:",{count:f.length,periods:f.map(r=>({id:r.id,name:r.name,code:r.code,parent_id:r.parent_id,type:r.type,period_type:r.period_type,is_active:r.is_active}))});const P=(r,i)=>i==="college"||i==="senior_highschool"?r<=1.5?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":r<=2.5?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":r<=3?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":r>=95?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":r>=90?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":r>=85?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":r>=75?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",E=(r,i)=>i==="college"||i==="senior_highschool"?r<=1.5?"Superior":r<=2?"Very Good":r<=2.5?"Good":r<=3?"Satisfactory":"Failing":r>=95?"Outstanding":r>=90?"Very Good":r>=85?"Good":r>=80?"Satisfactory":r>=75?"Fair":"Failing",b=m.length>0?m[0]:null,g=y.key,L=y.name,N=(()=>{console.log("🔍 DEBUG - getSemesterStructure called with:",{academicLevelKey:g,allGradingPeriods:f.map(a=>({id:a.id,name:a.name,code:a.code}))});let r=f.filter(a=>{const l=g,c=a.name.toLowerCase(),t=a.code.toLowerCase(),o=[l.toLowerCase(),l.toLowerCase().replace("_",""),l.toLowerCase().replace("_"," ")];l==="college"&&o.push("tertiary","university","higher"),l==="senior_highschool"&&o.push("senior high","shs","senior_high","seniorhigh");const s=o.some(n=>t.includes(n)||c.includes(n));return console.log(`🔍 Period "${a.name}" (${a.code}) relevant for ${l}:`,s),s});if(r.length===0&&(console.log("🔍 No level-specific periods found, using all active periods as fallback"),r=f.filter(a=>a.is_active)),console.log("🔍 DEBUG - Relevant periods after filtering:",r.map(a=>({id:a.id,name:a.name,code:a.code}))),["senior_highschool","college"].includes(g)){const a={},l=[],c=r.filter(s=>s.parent_id===null&&s.type==="semester");console.log("🔍 [FIXED] Parent semesters found:",c.map(s=>({id:s.id,name:s.name}))),r.forEach(s=>{if(s.parent_id===null&&s.type==="semester"){console.log(`🔍 [FIXED] Skipping parent semester: "${s.name}"`);return}if(s.period_type==="final"||s.name.toLowerCase().includes("average")||s.name.toLowerCase().includes("final")){console.log(`🔍 [FIXED] Skipping final/average period: "${s.name}"`);return}const d=s.parent_id;if(!d){console.log(`✅ [FIXED] Period "${s.name}" has no parent_id, adding to flat list`),l.push({id:s.id,name:s.name,code:s.code,gradingPeriodId:s.id,originalPeriod:s});return}const u=c.find($=>$.id===d);if(!u){console.log(`⚠️ [FIXED] No parent semester found for period "${s.name}" (parent_id: ${d}), adding to flat list`),l.push({id:s.id,name:s.name,code:s.code,gradingPeriodId:s.id,originalPeriod:s});return}const j=c.findIndex($=>$.id===d)+1;console.log(`🔍 [FIXED] Period "${s.name}" (${s.code}) assigned to Semester ${j} (parent: ${u.name})`),a[j]||(a[j]={name:u.name,periods:[]}),a[j].periods.push({id:s.id,name:s.name,code:s.code,gradingPeriodId:s.id})}),console.log(`🔍 [FIXED] Periods without parent: ${l.length}`,l.map(s=>({id:s.id,name:s.name})));let t=Object.keys(a).map(s=>({semesterNumber:parseInt(s),...a[s]}));if(l.length>0)if(console.log(`✅ [FIXED] Creating semester structure from ${l.length} flat periods`),t.length===0||t.every(s=>s.periods.length===0)){console.log("✅ [FIXED] No hierarchical structure, creating from flat periods");const s=l.filter(d=>d.name.toLowerCase().includes("first")||d.code.toLowerCase().includes("1")||d.code.toLowerCase().includes("q1")||d.code.toLowerCase().includes("q2")),n=l.filter(d=>d.name.toLowerCase().includes("second")||d.code.toLowerCase().includes("2")||d.code.toLowerCase().includes("q3")||d.code.toLowerCase().includes("q4"));if(s.length===0&&n.length===0){const d=Math.ceil(l.length/2);t=[],l.length>1?(t.push({semesterNumber:1,name:"First Semester",periods:l.slice(0,d)}),t.push({semesterNumber:2,name:"Second Semester",periods:l.slice(d)})):t.push({semesterNumber:1,name:"Semester",periods:l})}else t=[],s.length>0&&t.push({semesterNumber:1,name:"First Semester",periods:s}),n.length>0&&t.push({semesterNumber:2,name:"Second Semester",periods:n});console.log("✅ [FIXED] Created structure:",t.map(d=>({semester:d.name,periodCount:d.periods.length,periods:d.periods.map(u=>u.name)})))}else console.log(`✅ [FIXED] Adding ${l.length} orphan periods to existing structure`),t.length>0&&t[0].periods.push(...l);let o=t;if(o.length===0||o.every(s=>s.periods.length===0)){console.log("⚠️ [FIXED] No periods in structure after fixes, creating final fallback");const s=r.filter(n=>{const d=n.name.toLowerCase(),u=n.parent_id===null&&n.type==="semester"||d==="first semester"||d==="second semester",j=n.name.toLowerCase().includes("final average")||n.name.toLowerCase().includes("final")||n.code.includes("FA")||n.code.toLowerCase().includes("_fa");return!u&&!j});if(console.log("🔍 [FIXED] All input periods for final fallback:",s.map(n=>({id:n.id,name:n.name,code:n.code,parent_id:n.parent_id}))),s.length>0)if(s.length>=2){const n=Math.ceil(s.length/2);o=[{semesterNumber:1,name:"First Semester",periods:s.slice(0,n).map(d=>({id:d.id,name:d.name,code:d.code,gradingPeriodId:d.id}))},{semesterNumber:2,name:"Second Semester",periods:s.slice(n).map(d=>({id:d.id,name:d.name,code:d.code,gradingPeriodId:d.id}))}].filter(d=>d.periods.length>0)}else o=[{semesterNumber:1,name:"Semester",periods:s.map(n=>({id:n.id,name:n.name,code:n.code,gradingPeriodId:n.id}))}]}return console.log("✅ [FIXED] Final semester structure (semester-based):",o.map(s=>({semester:s.name,semesterNum:s.semesterNumber,periodCount:s.periods.length,periods:s.periods.map(n=>({id:n.id,name:n.name,gradingPeriodId:n.gradingPeriodId}))}))),o}else{const a=[{semesterNumber:1,name:"Academic Year",periods:r.filter(l=>{const c=l.name.toLowerCase(),t=c==="first semester"||c==="second semester",o=l.name.toLowerCase().includes("final average")||l.code.includes("FA")||l.code.toLowerCase().includes("_fa");return!t&&!o}).sort((l,c)=>l.id-c.id).map(l=>({id:l.id,name:l.name,code:l.code,gradingPeriodId:l.id}))}];return console.log("🔍 Final quarter structure:",a),a}})();console.log("🔍 DEBUG - ShowStudent component data:",{academicLevelKey:g,academicLevel:y,gradingPeriods:f.map(r=>({id:r.id,name:r.name,code:r.code})),semesterStructure:N,totalGradingPeriods:f.length,semesterStructureLength:N.length,totalPeriodsInStructure:N.reduce((r,i)=>r+i.periods.length,0)});const B=()=>{if(!["college","senior_highschool"].includes(g)){const s=m.filter(n=>n.grade!==null&&n.grade!==void 0).map(n=>n.grade);return s.length>0?{semester1Average:null,semester2Average:null,overallAverage:s.reduce((n,d)=>n+d,0)/s.length}:{semester1Average:null,semester2Average:null,overallAverage:null}}const i=f.filter(s=>s.parent_id===null&&s.type==="semester");console.log("🔍 Parent semesters for average calculation:",i.map(s=>({id:s.id,name:s.name})));const a={};i.forEach(s=>{const n=m.filter(d=>{const u=f.find(j=>j.id===d.grading_period_id);return u&&u.parent_id===s.id&&u.period_type!=="final"&&d.grade!==null&&d.grade!==void 0});if(n.length>0){const d=n.reduce((u,j)=>u+parseFloat(j.grade.toString()),0)/n.length;a[s.id]=d,console.log(`🔍 Semester "${s.name}" (ID: ${s.id}) average:`,d,"from",n.length,"grades")}else a[s.id]=null,console.log(`🔍 Semester "${s.name}" (ID: ${s.id}) has no grades`)});const l=i[0]?a[i[0].id]:null,c=i[1]?a[i[1].id]:null;let t=null;const o=Object.values(a).filter(s=>s!==null);return o.length>0&&(t=o.reduce((s,n)=>s+n,0)/o.length),console.log("🔍 Semester averages:",{semester1Average:l,semester2Average:c,overallAverage:t,allSemesterAverages:a}),{semester1Average:l,semester2Average:c,overallAverage:t}},{semester1Average:M,semester2Average:X,overallAverage:T}=B(),v=T;return console.log("🔍 FINAL CALCULATION RESULT:",{grades:m.map(r=>{var i,a;return{id:r.id,grade:r.grade,period_id:r.grading_period_id,period_code:(i=r.gradingPeriod)==null?void 0:i.code,period_name:(a=r.gradingPeriod)==null?void 0:a.name}}),semester1Average:M,semester2Average:X,overallAverage:T,finalGrade:v}),N.reduce((r,i)=>r+i.periods.length,0),e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(R,{user:C}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(q,{user:C}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(k,{href:route("teacher.grades.index"),children:e.jsxs(D,{variant:"outline",size:"sm",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Back to Grades"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Student Details"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["View and manage grades for ",x.name]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{className:"bg-white shadow-sm",children:[e.jsx(I,{children:e.jsxs(A,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(S,{className:"h-5 w-5 text-gray-600"}),"Personal Information"]})}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-100",children:e.jsx(S,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:x.name})]})]}),x.student_number&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-purple-100",children:e.jsx(S,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Student ID"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:x.student_number})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-green-100",children:e.jsx(V,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:x.email})]})]})]})]}),e.jsxs(w,{className:"bg-white shadow-sm",children:[e.jsx(I,{children:e.jsxs(A,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(G,{className:"h-5 w-5 text-gray-600"}),"Subject & Course Information"]})}),e.jsx(_,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-purple-100",children:e.jsx(G,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Subject"}),e.jsxs("p",{className:"text-base font-semibold text-gray-900",children:[h.name," (",h.code,")"]})]})]}),h.course&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-100",children:e.jsx(O,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Course"}),e.jsxs("p",{className:"text-base font-semibold text-gray-900",children:[h.course.name," (",h.course.code,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-orange-100",children:e.jsx(O,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Academic Level"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:L})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-yellow-100",children:e.jsx(F,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"School Year"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:(b==null?void 0:b.school_year)||"N/A"})]})]})]})})]}),f.length>0&&e.jsxs(w,{className:"bg-white shadow-sm",children:[e.jsxs(I,{children:[e.jsxs(A,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(F,{className:"h-5 w-5 text-gray-600"}),"Grading Periods"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Available grading periods for ",L]})]}),e.jsx(_,{children:e.jsx("div",{className:"space-y-4",children:f.filter(r=>{const i=g;return r.code.toLowerCase().includes(i.toLowerCase())}).map(r=>e.jsxs("div",{className:"relative border rounded-lg p-4 bg-gray-50",children:[e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(p,{variant:"outline",className:"text-xs bg-gray-100 text-gray-600",children:r.code})}),e.jsx("h4",{className:"font-medium mb-2 text-gray-900",children:r.name}),r.start_date&&r.end_date&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[new Date(r.start_date).toLocaleDateString()," - ",new Date(r.end_date).toLocaleDateString()]}),e.jsx(p,{variant:r.is_active?"default":"secondary",className:"text-xs",children:r.is_active?"Active":"Inactive"})]},r.id))})})]}),e.jsxs(w,{className:"bg-white shadow-sm",children:[e.jsx(I,{children:e.jsxs(A,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(H,{className:"h-5 w-5 text-gray-600"}),"Grade Summary"]})}),e.jsx(_,{children:(()=>{if(m.filter(i=>i.grade!==null&&i.grade!==void 0).length>0||N.length>0){const i=v||0,a=i>0?E(i,g):"No Grade",l=N.flatMap(t=>t.periods.map(o=>({...o,semesterName:t.name}))),c=["bg-blue-500 text-white","bg-green-500 text-white","bg-orange-500 text-white","bg-purple-500 text-white","bg-pink-500 text-white","bg-indigo-500 text-white"];return console.log("🔍 [GRADE MATCHING] Attempting to match grades to periods",{allPeriodsCount:l.length,allPeriods:l.map(t=>({id:t.id,name:t.name,gradingPeriodId:t.gradingPeriodId})),gradesCount:m.length,gradesPeriodIds:m.map(t=>({gradeId:t.id,periodId:t.grading_period_id,grade:t.grade}))}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:l.map((t,o)=>{const s=m.find(d=>d.grading_period_id===t.gradingPeriodId);console.log(s?`✅ [GRADE MATCHING] Grade found for period "${t.name}": ${s.grade}`:`⚠️ [GRADE MATCHING] No grade found for period "${t.name}" (gradingPeriodId: ${t.gradingPeriodId})`);const n=c[o%c.length];return e.jsxs("div",{className:`${n} rounded-lg p-4 text-center`,children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:s?s.grade:"-"}),e.jsx("div",{className:"text-sm opacity-90",children:t.name})]},t.id)})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"bg-gray-100 rounded-lg p-6 text-center min-w-48",children:[e.jsx("div",{className:"text-4xl font-bold text-gray-800 mb-2",children:i>0?i.toFixed(2):"-"}),e.jsx("div",{className:"text-gray-600 mb-2",children:"Overall Average"}),i>0&&e.jsx(p,{className:`${["Superior","Very Good","Good","Satisfactory","Fair","Outstanding"].includes(a)?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:a})]})})]})}else return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"h-16 w-16 text-gray-400 mx-auto mb-4",children:"📊"}),e.jsx("p",{className:"text-gray-500",children:"No grades recorded yet"})]})})()})]}),["senior_highschool","college"].includes(g)&&N.length>1?N.map(a=>{if(a.periods.length===0)return null;const l=a.periods.map(t=>{const o=m.find(s=>s.grading_period_id===t.gradingPeriodId);return o==null?void 0:o.grade}).filter(t=>t!=null),c=l.length>0?l.reduce((t,o)=>t+o,0)/l.length:null;return e.jsxs(w,{className:"bg-white shadow-sm",children:[e.jsx(I,{children:e.jsxs(A,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(F,{className:"h-5 w-5 text-gray-600"}),a.name]})}),e.jsx(_,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-900 text-white",children:[e.jsx("th",{className:"p-2 border-r border-gray-600",children:"Student ID"}),e.jsx("th",{className:"p-2 border-r border-gray-600",children:"Subject"}),e.jsx("th",{className:"p-2 border-r border-gray-600",children:"Faculty"}),a.periods.map(t=>e.jsx("th",{className:"text-center p-2 border-r border-gray-600",children:t.name},t.id)),e.jsxs("th",{className:"p-2 border-r border-gray-600",children:["SEM",a.semesterNumber," Average"]}),e.jsx("th",{className:"p-2",children:"Grade Status"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"border-b bg-white hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 border-r border-gray-200 font-medium",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"h-4 w-4 mr-2 text-gray-400"}),x.student_number||x.id]})}),e.jsx("td",{className:"p-3 border-r border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:h.name}),e.jsx("div",{className:"text-sm text-gray-500",children:h.code})]})]})}),e.jsx("td",{className:"p-3 border-r border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-600",children:C.name})]})}),a.periods.map(t=>{const o=m.find(s=>s.grading_period_id===t.gradingPeriodId);return console.log(o?`✅ [TABLE] Grade ${o.grade} matched for "${t.name}" (ID: ${t.gradingPeriodId})`:`⚠️ [TABLE] No grade for "${t.name}" (ID: ${t.gradingPeriodId}) - Available: [${m.map(s=>s.grading_period_id).join(", ")}]`),e.jsx("td",{className:"p-3 border-r border-gray-200 text-center",children:o?e.jsx(p,{className:P(o.grade,g),children:o.grade}):e.jsx("span",{className:"text-gray-400",children:"-"})},t.id)}),e.jsx("td",{className:"p-3 border-r border-gray-200 text-center",children:c?e.jsx(p,{className:`text-lg px-3 py-1 ${P(c,g)}`,children:c.toFixed(2)}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3 text-center",children:c?(()=>{const t=E(c,g);return e.jsx(p,{className:`${["Superior","Very Good","Good","Satisfactory","Fair","Outstanding"].includes(t)?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:t})})():e.jsx("span",{className:"text-gray-400",children:"No Grade"})})]})})]})})})]},a.semesterNumber)}):e.jsxs(w,{className:"bg-white shadow-sm",children:[e.jsx(I,{children:e.jsxs(A,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(F,{className:"h-5 w-5 text-gray-600"}),"Detailed Grades"]})}),e.jsx(_,{children:m.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800 text-white",children:[e.jsx("th",{className:"text-left p-3 font-medium border-r border-gray-700",children:"Student ID"}),e.jsx("th",{className:"text-left p-3 font-medium border-r border-gray-700",children:"Subject"}),e.jsx("th",{className:"text-left p-3 font-medium border-r border-gray-700",children:"Faculty"}),N.flatMap(a=>a.periods).map(a=>e.jsx("th",{className:"text-center p-3 font-medium border-r border-gray-700",children:a.name},a.id)),e.jsx("th",{className:"text-center p-3 font-medium border-r border-gray-700",children:"AVERAGE"}),e.jsx("th",{className:"text-center p-3 font-medium",children:"Grade Status"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"border-b bg-white hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 border-r border-gray-200 font-medium",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"h-4 w-4 mr-2 text-gray-400"}),x.student_number||x.id]})}),e.jsx("td",{className:"p-3 border-r border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:h.name}),e.jsx("div",{className:"text-sm text-gray-500",children:h.code})]})]})}),e.jsx("td",{className:"p-3 border-r border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-600",children:C.name})]})}),N.flatMap(a=>a.periods).map(a=>{const l=m.find(c=>c.grading_period_id===a.gradingPeriodId);return e.jsx("td",{className:"p-3 border-r border-gray-200 text-center",children:l?e.jsx(p,{className:P(l.grade,g),children:l.grade}):e.jsx("span",{className:"text-gray-400",children:"-"})},a.id)}),e.jsx("td",{className:"p-3 border-r border-gray-200 text-center",children:v?e.jsx(p,{className:`text-lg px-3 py-1 ${P(v,g)}`,children:v.toFixed(2)}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3 text-center",children:v?(()=>{const a=E(v,g);return e.jsx(p,{className:`${["Superior","Very Good","Good","Satisfactory","Fair","Outstanding"].includes(a)?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:a})})():e.jsx("span",{className:"text-gray-400",children:"No Grade"})})]})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"h-16 w-16 text-gray-400 mx-auto mb-4",children:"📊"}),e.jsx("p",{className:"text-gray-500",children:"No grade history available"})]})})]})]}),e.jsx(w,{children:e.jsx(_,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(k,{href:route("teacher.grades.create",{student_id:x.id,subject_id:h.id,academic_level_id:y.id,academic_level_key:g,school_year:(b==null?void 0:b.school_year)||"2024-2025"}),className:"flex-1",children:e.jsxs(D,{className:"w-full",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Input New Grade"]})}),b&&e.jsx(k,{href:route("teacher.grades.edit",b.id),className:"flex-1",children:e.jsxs(D,{variant:"outline",className:"w-full",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Edit Current Grade"]})})]})})})]})})]})]})}export{Ne as default};
