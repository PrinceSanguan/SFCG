import{K as Le,m as $e,R as r,j as e}from"./app-Cd5O8Yyo.js";import{H as De}from"./header-DuQQTipm.js";import{S as Ge}from"./sidebar-DaKSxBHx.js";import{C as me,b as oe,c as xe,a as he}from"./card-udIb0bf5.js";import{B}from"./button-BU-l1VB8.js";import{I as $}from"./input-Boi8VuUP.js";import{L as d}from"./label-G0RB97S8.js";import{S as b,a as F,b as k,c as L,d as C}from"./select-KrHc7J5E.js";import{A as m,a as o}from"./alert-B9si-4dX.js";import{P as Ee}from"./plus-BpvsFW90.js";import{S as we}from"./save-OUgD-CHW.js";import{T as Me}from"./trash-2-BMMUqY_g.js";/* empty css            */import"./dropdown-menu-NzllG_ZC.js";import"./Combination-DxZNsy0U.js";import"./index-BcErvGgl.js";import"./separator-Ct6UxV9i.js";import"./users-Dp1AFksB.js";import"./chevron-right-vDarkxt4.js";import"./crown-CjwqSWO_.js";import"./building-2-CwFO3VZg.js";import"./user-cog-DymJ7wQN.js";import"./book-open-BUlZkiOU.js";import"./user-check-BxFjacxF.js";import"./graduation-cap-B6eoKWTr.js";import"./notebook-C2MlxlC9.js";import"./chart-no-axes-column-increasing-z-xFz0bj.js";import"./shield-CFlFbFiJ.js";import"./index-BjcfQgog.js";import"./index-D6lSiGuC.js";import"./check-sAgTaFrJ.js";function xi(){var X,Z,ee,ie,se,ae,te,ne,re,le,ce;const{props:ue}=Le(),{user:z,sections:S,academicLevels:M,tracks:_e,strands:H,departments:je,courses:I,specificYearLevels:n,errors:s,activeLevelKey:ve}=ue,{data:_,setData:t,post:pe,processing:ge,reset:J,put:fe,delete:ye}=$e({id:void 0,name:"",academic_level_id:"",specific_year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",max_students:"",is_active:!0}),[T,K]=r.useState(null),[D]=r.useState(()=>{var i;return ve||((i=M[0])==null?void 0:i.key)||""}),[l,V]=r.useState(""),[j,q]=r.useState(""),[v,G]=r.useState(""),[y,A]=r.useState(""),[N,E]=r.useState(""),[U,p]=r.useState([]),c=r.useMemo(()=>{const i=M.find(a=>a.key===D);return i==null?void 0:i.id},[M,D]),w=D==="elementary",Q=D==="junior_highschool",Se=D==="senior_highschool",Ne=D==="college",g=w||Q,x=Se,h=Ne;r.useEffect(()=>{c&&(t("academic_level_id",c.toString()),t("specific_year_level",""),t("track_id",""),t("strand_id",""),t("department_id",""),t("course_id",""),V(""),q(""),G(""),A(""),E(""),p([]))},[c,t]),r.useEffect(()=>{if(g&&l&&c){const i=S.filter(a=>a.academic_level_id===c&&a.specific_year_level===l);p(i)}else p([])},[l,S,c,g]),r.useEffect(()=>{if(x&&j&&v&&c){const i=S.filter(a=>{var u,f;return a.academic_level_id===c&&((u=a.track_id)==null?void 0:u.toString())===j&&((f=a.strand_id)==null?void 0:f.toString())===v});p(i)}else x&&p([])},[j,v,S,c,x]),r.useEffect(()=>{if(h&&y&&N&&c){const i=S.filter(a=>{var u,f;return a.academic_level_id===c&&((u=a.department_id)==null?void 0:u.toString())===y&&((f=a.course_id)==null?void 0:f.toString())===N});p(i)}else h&&p([])},[y,N,S,c,h]);const Ce=i=>{var a,u,f,P;K(i),t({id:i.id,name:i.name,academic_level_id:i.academic_level_id,specific_year_level:i.specific_year_level||"",track_id:((a=i.track_id)==null?void 0:a.toString())||"",strand_id:((u=i.strand_id)==null?void 0:u.toString())||"",department_id:((f=i.department_id)==null?void 0:f.toString())||"",course_id:((P=i.course_id)==null?void 0:P.toString())||"",max_students:i.max_students??"",is_active:!0}),g&&i.specific_year_level&&V(i.specific_year_level),x&&(i.track_id&&q(i.track_id.toString()),i.strand_id&&G(i.strand_id.toString())),h&&(i.department_id&&A(i.department_id.toString()),i.course_id&&E(i.course_id.toString()))},be=()=>{K(null),J(),V(""),q(""),G(""),A(""),E(""),p([])},Fe=i=>{i.preventDefault(),T?fe(route("admin.academic.sections.update",T.id)):pe(route("admin.academic.sections.store"))},ke=i=>{confirm(`Delete section "${i.name}"?`)&&ye(route("admin.academic.sections.destroy",i.id))},O=r.useMemo(()=>x&&j?H.filter(i=>{var a;return((a=i.track_id)==null?void 0:a.toString())===j}):H,[H,j,x]),R=r.useMemo(()=>h&&y?I.filter(i=>{var a;return((a=i.department_id)==null?void 0:a.toString())===y}):I,[I,y,h]),W=r.useMemo(()=>c?S.filter(i=>i.academic_level_id===c):S,[S,c]);return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(Ge,{user:z}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(De,{user:z}),e.jsxs("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Sections"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage sections across academic levels and programs"})]}),e.jsxs(B,{onClick:()=>{K(null),J(),g&&(V(""),p([])),x&&(q(""),G(""),p([])),h&&(A(""),E(""),p([]))},className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"})," New Section"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs(me,{className:"lg:col-span-1",children:[e.jsx(oe,{children:e.jsx(xe,{children:T?"Edit Section":"Create Section"})}),e.jsx(he,{children:e.jsxs("form",{onSubmit:Fe,className:"space-y-4",children:[g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"specific_year_level",children:"Grade Level *"}),e.jsxs(b,{value:l,onValueChange:i=>{V(i),t("specific_year_level",i)},children:[e.jsx(F,{children:e.jsx(k,{placeholder:"Select Grade Level"})}),e.jsxs(L,{children:[w&&n.elementary&&Object.entries(n.elementary).map(([i,a])=>e.jsx(C,{value:i,children:a},i)),Q&&n.junior_highschool&&Object.entries(n.junior_highschool).map(([i,a])=>e.jsx(C,{value:i,children:a},i))]})]}),(s==null?void 0:s.specific_year_level)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.specific_year_level})})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Section Name *"}),e.jsx($,{id:"name",value:_.name,onChange:i=>t("name",i.target.value),placeholder:`e.g., ${w?(X=n.elementary)==null?void 0:X[l]:(Z=n.junior_highschool)==null?void 0:Z[l]} - Section A`,required:!0}),(s==null?void 0:s.name)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.name})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"max_students",children:"Maximum Students *"}),e.jsx($,{id:"max_students",type:"number",min:1,max:50,value:String(_.max_students),onChange:i=>t("max_students",i.target.value),placeholder:"e.g., 30",required:!0}),(s==null?void 0:s.max_students)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.max_students})})]})]})]}):x?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"track_id",children:"Track *"}),e.jsxs(b,{value:j,onValueChange:i=>{q(i),t("track_id",i),G(""),t("strand_id","")},children:[e.jsx(F,{children:e.jsx(k,{placeholder:"Select Track"})}),e.jsx(L,{children:_e.map(i=>e.jsx(C,{value:i.id.toString(),children:i.name},i.id))})]}),(s==null?void 0:s.track_id)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.track_id})})]}),j&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"strand_id",children:"Strand *"}),e.jsxs(b,{value:v,onValueChange:i=>{G(i),t("strand_id",i)},children:[e.jsx(F,{children:e.jsx(k,{placeholder:"Select Strand"})}),e.jsx(L,{children:O.map(i=>e.jsx(C,{value:i.id.toString(),children:i.name},i.id))})]}),(s==null?void 0:s.strand_id)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.strand_id})})]}),j&&v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"specific_year_level",children:"Grade Level *"}),e.jsxs(b,{value:_.specific_year_level,onValueChange:i=>t("specific_year_level",i),children:[e.jsx(F,{children:e.jsx(k,{placeholder:"Select Grade Level"})}),e.jsx(L,{children:n.senior_highschool&&Object.entries(n.senior_highschool).map(([i,a])=>e.jsx(C,{value:i,children:a},i))})]}),(s==null?void 0:s.specific_year_level)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.specific_year_level})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Section Name *"}),e.jsx($,{id:"name",value:_.name,onChange:i=>t("name",i.target.value),placeholder:`e.g., ${((ee=n.senior_highschool)==null?void 0:ee[_.specific_year_level])||"Grade"} - Section A`,required:!0}),(s==null?void 0:s.name)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.name})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"max_students",children:"Maximum Students *"}),e.jsx($,{id:"max_students",type:"number",min:1,max:50,value:String(_.max_students),onChange:i=>t("max_students",i.target.value),placeholder:"e.g., 30",required:!0}),(s==null?void 0:s.max_students)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.max_students})})]})]})]}):h?null:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Name *"}),e.jsx($,{id:"name",value:_.name,onChange:i=>t("name",i.target.value),required:!0}),(s==null?void 0:s.name)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.name})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"academic_level_id",children:"Academic Level *"}),e.jsxs(b,{value:String(_.academic_level_id),onValueChange:i=>t("academic_level_id",i),children:[e.jsx(F,{children:e.jsx(k,{placeholder:"Select level"})}),e.jsx(L,{children:M.map(i=>e.jsx(C,{value:i.id.toString(),children:i.name},i.id))})]}),(s==null?void 0:s.academic_level_id)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.academic_level_id})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"specific_year_level",children:"Year/Grade"}),e.jsxs(b,{value:_.specific_year_level,onValueChange:i=>t("specific_year_level",i),children:[e.jsx(F,{children:e.jsx(k,{placeholder:"Select year/grade (if applicable)"})}),e.jsx(L,{children:M.map(i=>e.jsx(r.Fragment,{children:n[i.key]&&Object.entries(n[i.key]).map(([a,u])=>e.jsx(C,{value:a,children:u},`${i.id}-${a}`))},i.id))})]}),(s==null?void 0:s.specific_year_level)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.specific_year_level})})]})]}),h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"department_id",children:"Department *"}),e.jsxs(b,{value:y,onValueChange:i=>{A(i),t("department_id",i),E(""),t("course_id","")},children:[e.jsx(F,{children:e.jsx(k,{placeholder:"Select Department"})}),e.jsx(L,{children:je.map(i=>e.jsx(C,{value:i.id.toString(),children:i.name},i.id))})]}),(s==null?void 0:s.department_id)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.department_id})})]}),y&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"course_id",children:"Course *"}),e.jsxs(b,{value:N,onValueChange:i=>{E(i),t("course_id",i)},children:[e.jsx(F,{children:e.jsx(k,{placeholder:"Select Course"})}),e.jsx(L,{children:R.map(i=>e.jsx(C,{value:i.id.toString(),children:i.name},i.id))})]}),(s==null?void 0:s.course_id)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.course_id})})]}),y&&N&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Section *"}),e.jsx($,{id:"name",value:_.name,onChange:i=>t("name",i.target.value),placeholder:`e.g., ${((ie=R.find(i=>i.id.toString()===N))==null?void 0:ie.name)||"Course"} - Section A`,required:!0}),(s==null?void 0:s.name)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.name})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"max_students",children:"Number of Students *"}),e.jsx($,{id:"max_students",type:"number",min:1,max:50,value:String(_.max_students),onChange:i=>t("max_students",i.target.value),placeholder:"e.g., 30",required:!0}),(s==null?void 0:s.max_students)&&e.jsx(m,{variant:"destructive",children:e.jsx(o,{children:s.max_students})})]})]})]}):null,e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[e.jsxs(B,{type:"submit",disabled:ge,className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4"})," ",T?"Update":"Create"]}),T&&e.jsx(B,{type:"button",variant:"outline",onClick:be,children:"Cancel"})]})]})})]}),e.jsxs(me,{className:"lg:col-span-2",children:[e.jsx(oe,{children:e.jsx(xe,{children:g&&l?`Sections for ${w?(se=n.elementary)==null?void 0:se[l]:((ae=n.junior_highschool)==null?void 0:ae[l])||l}`:x&&j&&v?`Sections for ${((te=O.find(i=>i.id.toString()===v))==null?void 0:te.name)||v}`:"Existing Sections"})}),e.jsx(he,{children:g&&!l?e.jsx("div",{className:"text-sm text-gray-500 py-6",children:"Please select a Grade Level to view and manage sections."}):x&&(!j||!v)?e.jsx("div",{className:"text-sm text-gray-500 py-6",children:"Please select a Track and Strand to view and manage sections."}):h&&(!y||!N)?e.jsx("div",{className:"text-sm text-gray-500 py-6",children:"Please select a Department and Course to view and manage sections."}):e.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:[(g||x||h?U:W).length===0&&e.jsx("div",{className:"text-sm text-gray-500 py-6",children:g?`No sections yet for ${w?(ne=n.elementary)==null?void 0:ne[l]:((re=n.junior_highschool)==null?void 0:re[l])||l}. Create your first section.`:x?`No sections yet for ${((le=O.find(i=>i.id.toString()===v))==null?void 0:le.name)||v}. Create your first section.`:h?`No sections yet for ${((ce=R.find(i=>i.id.toString()===N))==null?void 0:ce.name)||N}. Create your first section.`:"No sections yet. Create your first section."}),(g||x||h?U:W).map(i=>{var a,u,f,P,de;return e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:i.name}),e.jsx("div",{className:"text-xs text-gray-500",children:g?e.jsxs(e.Fragment,{children:["Grade: ",w?(a=n.elementary)==null?void 0:a[i.specific_year_level||""]:((u=n.junior_highschool)==null?void 0:u[i.specific_year_level||""])||i.specific_year_level,typeof i.max_students=="number"?` • Max: ${i.max_students}`:""]}):x?e.jsxs(e.Fragment,{children:["Strand: ",((f=H.find(Y=>Y.id===i.strand_id))==null?void 0:f.name)||i.strand_id,i.specific_year_level?` • Grade: ${((P=n.senior_highschool)==null?void 0:P[i.specific_year_level])||i.specific_year_level}`:"",typeof i.max_students=="number"?` • Max: ${i.max_students}`:""]}):h?e.jsxs(e.Fragment,{children:["Course: ",((de=I.find(Y=>Y.id===i.course_id))==null?void 0:de.name)||i.course_id,typeof i.max_students=="number"?` • Max: ${i.max_students}`:""]}):e.jsxs(e.Fragment,{children:["Level ID: ",i.academic_level_id,i.specific_year_level?` • Year: ${i.specific_year_level}`:"",typeof i.max_students=="number"?` • Max: ${i.max_students}`:""]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{size:"sm",variant:"outline",onClick:()=>Ce(i),children:"Edit"}),e.jsxs(B,{size:"sm",variant:"destructive",onClick:()=>ke(i),className:"flex items-center gap-1",children:[e.jsx(Me,{className:"h-3 w-3"})," Delete"]})]})]},i.id)})]})})]})]})]})]})]})}export{xi as default};
