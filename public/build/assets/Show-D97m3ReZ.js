import{c as B,j as e,L as E,$ as L}from"./app-CEl-APsC.js";import{P as O}from"./layout-BcQE32-l.js";import{C as N,b as v,c as w,a as S}from"./card-B4q6Ame0.js";import{B as D}from"./badge-DmMYQDly.js";import{A as V}from"./arrow-left-D3ldQhvh.js";import{B as H}from"./book-open-DKUAlxJf.js";import{C as $}from"./calendar-ClyX7FYI.js";import{U as _}from"./user-CDiIq-up.js";import{G as C}from"./graduation-cap-DAO1Kdzj.js";/* empty css            */import"./app-shell-B1SpZ1Cp.js";import"./button-CKIhprG8.js";import"./Combination-DliHkq0c.js";import"./index-DW57C5Ri.js";import"./dropdown-menu-CAqDati1.js";import"./index-DvXVcg-Y.js";import"./users-DkorfLVV.js";import"./crown-DClj_1Oe.js";import"./file-text-DVvQaVsL.js";import"./log-out-8dJQvB83.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M2 16V4a2 2 0 0 1 2-2h11",key:"spzkk5"}],["path",{d:"M22 18H11a2 2 0 1 0 0 4h10.5a.5.5 0 0 0 .5-.5v-15a.5.5 0 0 0-.5-.5H11a2 2 0 0 0-2 2v12",key:"1wz07i"}],["path",{d:"M5 14H4a2 2 0 1 0 0 4h1",key:"16gqf9"}]],I=B("BookCopy",M);function oe({schoolYear:G,student:j,subject:m,grades:x,gradingPeriods:p=[]}){const h=m.academic_level_id&&m.academic_level_id>=3,u=(()=>{if(!h)return[{semesterNumber:1,name:"All Periods",periods:p.filter(n=>n.period_type!=="final"&&n.type!=="semester").map(n=>({id:n.id,name:n.name,code:n.code,gradingPeriodId:n.id}))}];const t={},o=p.filter(r=>r.parent_id===null&&r.type==="semester");return console.log("🔍 Parent Grades - Parent semesters:",o.map(r=>({id:r.id,name:r.name}))),p.forEach(r=>{if(r.parent_id===null&&r.type==="semester"||r.period_type==="final"||r.name.toLowerCase().includes("average"))return;const l=r.parent_id;if(!l){console.log(`⚠️ Period "${r.name}" has no parent_id, skipping`);return}const d=o.find(a=>a.id===l);if(!d){console.log(`⚠️ No parent semester found for period "${r.name}" (parent_id: ${l})`);return}const s=o.indexOf(d)+1;t[s]||(t[s]={semesterNumber:s,name:d.name,periods:[]}),t[s].periods.push({id:r.id,name:r.name,code:r.code,gradingPeriodId:r.id}),console.log(`✓ Added period "${r.name}" to ${d.name}`)}),console.log("🔍 Parent Grades - Final semester structure:",Object.values(t)),Object.values(t)})(),k=()=>{var l,d;const t=x.filter(s=>s.grade!==null&&s.grade!==void 0),o=t.length>0?t.reduce((s,a)=>s+a.grade,0)/t.length:null;let r=null,n=null;if(h&&u.length>1){const s=(l=u[0])==null?void 0:l.periods.map(i=>{var c;return(c=x.find(y=>{var f;return((f=y.gradingPeriod)==null?void 0:f.id)===i.gradingPeriodId}))==null?void 0:c.grade}).filter(i=>i!=null),a=(d=u[1])==null?void 0:d.periods.map(i=>{var c;return(c=x.find(y=>{var f;return((f=y.gradingPeriod)==null?void 0:f.id)===i.gradingPeriodId}))==null?void 0:c.grade}).filter(i=>i!=null);r=s.length>0?s.reduce((i,c)=>i+c,0)/s.length:null,n=a.length>0?a.reduce((i,c)=>i+c,0)/a.length:null}return{semester1Average:r,semester2Average:n,overallAverage:o}},{semester1Average:A,semester2Average:F,overallAverage:g}=k(),P=t=>h?t>=1&&t<=1.24?{text:"Superior",color:"bg-green-100 text-green-800 border-green-200"}:t>=1.25&&t<=1.49?{text:"Excellent",color:"bg-green-100 text-green-800 border-green-200"}:t>=1.5&&t<=1.74?{text:"Very Good",color:"bg-blue-100 text-blue-800 border-blue-200"}:t>=1.75&&t<=1.99?{text:"Good",color:"bg-blue-100 text-blue-800 border-blue-200"}:t>=2&&t<=2.24?{text:"Satisfactory",color:"bg-purple-100 text-purple-800 border-purple-200"}:t>=2.25&&t<=2.49?{text:"Fair",color:"bg-purple-100 text-purple-800 border-purple-200"}:t>=2.5&&t<=2.74?{text:"Passing",color:"bg-yellow-100 text-yellow-800 border-yellow-200"}:t>=2.75&&t<=3?{text:"Conditional",color:"bg-yellow-100 text-yellow-800 border-yellow-200"}:{text:"Failed",color:"bg-red-100 text-red-800 border-red-200"}:t>=90?{text:"Outstanding",color:"bg-green-100 text-green-800 border-green-200"}:t>=85?{text:"Very Satisfactory",color:"bg-blue-100 text-blue-800 border-blue-200"}:t>=80?{text:"Satisfactory",color:"bg-purple-100 text-purple-800 border-purple-200"}:t>=75?{text:"Fairly Satisfactory",color:"bg-yellow-100 text-yellow-800 border-yellow-200"}:{text:"Did Not Meet Expectations",color:"bg-red-100 text-red-800 border-red-200"},b=g!==null?P(g):{text:"No Grade",color:"bg-gray-100 text-gray-800 border-gray-200"};return e.jsxs(O,{children:[e.jsx(E,{title:`${j.name} - ${m.name}`}),e.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 space-y-6",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(L,{href:route("parent.grades.index",{student_id:j.id}),className:"inline-flex items-center text-sm text-muted-foreground hover:underline",children:[e.jsx(V,{className:"h-4 w-4 mr-1"})," Back to Grades"]})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:m.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Subject Code: ",m.code]})]}),e.jsxs(N,{children:[e.jsx(v,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"})," Grade Summary"]})}),e.jsxs(S,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:h&&u.length>1?e.jsxs(e.Fragment,{children:[u.map((t,o)=>{var s;const r=t.periods.find(a=>a.name.toLowerCase().includes("midterm")),n=r?(s=x.find(a=>{var i;return((i=a.gradingPeriod)==null?void 0:i.id)===r.gradingPeriodId}))==null?void 0:s.grade:null,l=[{bg:"bg-blue-50",text:"text-blue-700"},{bg:"bg-yellow-50",text:"text-yellow-700"}],d=l[o]||l[0];return e.jsxs("div",{className:`rounded-lg border p-6 ${d.bg}`,children:[e.jsx("div",{className:`text-3xl font-semibold text-center ${d.text}`,children:n!=null?n.toFixed(2):"-"}),e.jsx("div",{className:"text-sm text-center text-muted-foreground mt-1",children:(r==null?void 0:r.name)||t.name})]},o)}),e.jsxs("div",{className:"rounded-lg border p-6 bg-green-50",children:[e.jsx("div",{className:"text-3xl font-semibold text-center text-green-700",children:A!==null?A.toFixed(2):"-"}),e.jsx("div",{className:"text-sm text-center text-muted-foreground mt-1",children:"First Semester"})]}),e.jsxs("div",{className:"rounded-lg border p-6 bg-purple-50",children:[e.jsx("div",{className:"text-3xl font-semibold text-center text-purple-700",children:F!==null?F.toFixed(2):"-"}),e.jsx("div",{className:"text-sm text-center text-muted-foreground mt-1",children:"Second Sem"})]})]}):p.slice(0,4).map((t,o)=>{const r=x.find(d=>{var s;return((s=d.gradingPeriod)==null?void 0:s.id)===t.id}),n=[{bg:"bg-blue-50",text:"text-blue-700"},{bg:"bg-green-50",text:"text-green-700"},{bg:"bg-yellow-50",text:"text-yellow-700"},{bg:"bg-purple-50",text:"text-purple-700"}],l=n[o]||n[0];return e.jsxs("div",{className:`rounded-lg border p-6 ${l.bg}`,children:[e.jsx("div",{className:`text-3xl font-semibold text-center ${l.text}`,children:(r==null?void 0:r.grade)!==null&&(r==null?void 0:r.grade)!==void 0?r.grade.toFixed(2):"-"}),e.jsx("div",{className:"text-sm text-center text-muted-foreground mt-1",children:t.name})]},t.id)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-lg border p-6 bg-gray-50",children:[e.jsx("div",{className:"text-3xl font-semibold text-center text-gray-700",children:g!==null?g.toFixed(2):"-"}),e.jsx("div",{className:"text-sm text-center text-muted-foreground mt-1",children:"Overall Average"})]}),e.jsx("div",{className:"rounded-lg border p-6 bg-red-50 flex items-center justify-center",children:e.jsx(D,{className:b.color,children:b.text})})]})]})]}),h&&u.length>1?u.map(t=>{const o=t.periods.map(l=>{const d=x.find(s=>{var a;return((a=s.gradingPeriod)==null?void 0:a.id)===l.gradingPeriodId});return d==null?void 0:d.grade}).filter(l=>l!=null),r=o.length>0?o.reduce((l,d)=>l+d,0)/o.length:null,n=r!==null?P(r):{text:"No Grade",color:"bg-gray-100 text-gray-800 border-gray-200"};return e.jsxs(N,{children:[e.jsx(v,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5 text-gray-600"}),t.name," - Detailed Grades"]})}),e.jsx(S,{children:e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border rounded-lg",children:[e.jsx("thead",{className:"bg-gray-900 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Student ID"}),e.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Subject"}),e.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Faculty"}),t.periods.map(l=>e.jsx("th",{className:"py-3 px-4 text-left font-medium",children:l.name},l.id)),e.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"AVERAGE"}),e.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Grade Status"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-gray-500"})," ",j.student_number??"-"]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-gray-500"})," ",m.name]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 text-green-600"})," Jane Instructor"]})}),t.periods.map((l,d)=>{const s=x.find(i=>{var c;return((c=i.gradingPeriod)==null?void 0:c.id)===l.gradingPeriodId}),a=["bg-blue-100 text-blue-700","bg-green-100 text-green-700"];return e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`inline-flex items-center justify-center text-sm px-3 py-1 rounded-full ${a[d%a.length]}`,children:(s==null?void 0:s.grade)!==null&&(s==null?void 0:s.grade)!==void 0?s.grade.toFixed(2):"-"})},l.id)}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"inline-flex items-center justify-center text-sm px-3 py-1 rounded-full bg-gray-100 text-gray-700",children:r!==null?r.toFixed(2):"-"})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`inline-flex items-center justify-center text-sm px-3 py-1 rounded-full ${n.color}`,children:n.text})})]})})]})})})]},t.semesterNumber)}):e.jsxs(N,{children:[e.jsx(v,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5 text-gray-600"}),"Detailed Grades"]})}),e.jsx(S,{children:e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border rounded-lg",children:[e.jsx("thead",{className:"bg-gray-900 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Student ID"}),e.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Subject"}),e.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Faculty"}),p.slice(0,4).map(t=>e.jsx("th",{className:"py-3 px-4 text-left font-medium",children:t.name},t.id)),e.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"AVERAGE"}),e.jsx("th",{className:"py-3 px-4 text-left font-medium",children:"Grade Status"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-gray-500"})," ",j.student_number??"-"]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-gray-500"})," ",m.name]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 text-green-600"})," Jane Instructor"]})}),p.slice(0,4).map((t,o)=>{const r=x.find(l=>{var d;return((d=l.gradingPeriod)==null?void 0:d.id)===t.id}),n=["bg-blue-100 text-blue-700","bg-green-100 text-green-700","bg-yellow-100 text-yellow-700","bg-purple-100 text-purple-700"];return e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`inline-flex items-center justify-center text-sm px-3 py-1 rounded-full ${n[o]}`,children:(r==null?void 0:r.grade)!==null&&(r==null?void 0:r.grade)!==void 0?r.grade.toFixed(2):"-"})},t.id)}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"inline-flex items-center justify-center text-sm px-3 py-1 rounded-full bg-gray-100 text-gray-700",children:g!==null?g.toFixed(2):"-"})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`inline-flex items-center justify-center text-sm px-3 py-1 rounded-full ${b.color}`,children:b.text})})]})})]})})})]})]})]})}export{oe as default};
