import{m as L,j as e,$ as S}from"./app-CEl-APsC.js";import{C as A,b as E,c as U,a as F}from"./card-B4q6Ame0.js";import{B as m}from"./button-CKIhprG8.js";import{I}from"./input-DKtQm51Y.js";import{L as k}from"./label-B8Lt35n1.js";import{S as H,a as P,b as B,c as D,d as c,e as q,f as R}from"./select-D0yo45hq.js";import{S as T,H as V}from"./sidebar-Bueq1zrC.js";import{A as $}from"./arrow-left-D3ldQhvh.js";import{S as z}from"./square-pen-CnS4_fs3.js";import{S as K}from"./save-DB6qP58K.js";/* empty css            */import"./index-DW57C5Ri.js";import"./Combination-DliHkq0c.js";import"./index-Bz9Cl0ZU.js";import"./index-DvXVcg-Y.js";import"./check-X2sMxzrC.js";import"./dropdown-menu-CAqDati1.js";import"./user-CDiIq-up.js";import"./log-out-8dJQvB83.js";import"./book-open-DKUAlxJf.js";import"./graduation-cap-DAO1Kdzj.js";import"./upload-C1a3VLbX.js";import"./crown-DClj_1Oe.js";function pe({user:x,grade:s,gradingPeriods:o}){var u,j,f,N,v,b;const{data:h,setData:g,put:w,processing:p,errors:d}=L({grade:s.grade.toString(),grading_period_id:((u=s.grading_period_id)==null?void 0:u.toString())||"0"}),i=()=>{var a;return(a=s.academicLevel)==null?void 0:a.key},C=a=>{a.preventDefault(),w(route("teacher.grades.update",s.id),{onSuccess:()=>{console.log("Grade updated successfully")},onError:n=>{console.log("Grade update failed:",n)}})};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(T,{user:x}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(V,{user:x}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(S,{href:route("teacher.grades.show-student",[s.student_id,s.subject_id]),children:e.jsxs(m,{variant:"outline",size:"sm",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Back to Student"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Edit Grade"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Update the grade for ",s.student.name," in ",s.subject.name]})]})]})}),e.jsxs(A,{className:"max-w-2xl",children:[e.jsx(E,{children:e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Grade Information"]})}),e.jsxs(F,{children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Current Grade Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Student:"}),e.jsx("p",{className:"font-medium",children:((j=s.student)==null?void 0:j.name)||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Subject:"}),e.jsxs("p",{className:"font-medium",children:[((f=s.subject)==null?void 0:f.name)||"Unknown"," (",((N=s.subject)==null?void 0:N.code)||"N/A",")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Academic Level:"}),e.jsx("p",{className:"font-medium",children:((v=s.academicLevel)==null?void 0:v.name)||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"School Year:"}),e.jsx("p",{className:"font-medium",children:s.school_year||"N/A"})]}),((b=s.subject)==null?void 0:b.course)&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Course:"}),e.jsxs("p",{className:"font-medium",children:[s.subject.course.name," (",s.subject.course.code,")"]})]})]})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"grade",children:"Grade"}),e.jsx(I,{id:"grade",type:"number",step:"0.01",min:i()==="college"?"1.0":"75",max:i()==="college"?"5.0":"100",placeholder:i()==="college"?"Enter grade (1.0-5.0)":"Enter grade (0-100)",value:h.grade,onChange:a=>g("grade",a.target.value),className:d.grade?"border-red-500":"",autoFocus:!0}),d.grade&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.grade}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i()==="college"?"College: 1.0 (highest) to 5.0 (lowest). 3.0 is passing (equivalent to 75).":"Elementary to Senior High: 75 (passing) to 100 (highest)."})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"grading_period_id",children:"Grading Period"}),e.jsxs(H,{value:h.grading_period_id,onValueChange:a=>g("grading_period_id",a),children:[e.jsx(P,{className:d.grading_period_id?"border-red-500":"",children:e.jsx(B,{placeholder:"Select grading period"})}),e.jsxs(D,{children:[e.jsx(c,{value:"0",children:"No Period"}),o&&o.length>0?e.jsx(e.Fragment,{children:(()=>{const a=s.academic_level_id||0,n=o.filter(r=>r.academic_level_id===a),y=n.filter(r=>r.parent_id===null&&r.type==="semester"),_=n.filter(r=>r.parent_id!==null&&r.period_type!=="final");if(y.length===0&&_.length===0)return e.jsx(c,{value:"none",disabled:!0,children:"No grading periods available for this academic level"});const G=y.sort((r,t)=>r.sort_order-t.sort_order).map(r=>({parent:r,children:_.filter(t=>t.parent_id===r.id).sort((t,l)=>t.sort_order-l.sort_order)}));return e.jsx(e.Fragment,{children:G.map(({parent:r,children:t})=>t.length>0&&e.jsxs(q,{children:[e.jsx(R,{children:r.name}),t.map(l=>e.jsx(c,{value:l.id.toString(),children:l.name},l.id))]},r.id))})})()}):e.jsx(c,{value:"0",disabled:!0,children:"No grading periods available"})]})]}),d.grading_period_id&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.grading_period_id}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select which grading period this grade belongs to"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs(m,{type:"submit",disabled:p,className:"flex-1",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),p?"Updating...":"Update Grade"]}),e.jsx(S,{href:route("teacher.grades.show-student",[s.student_id,s.subject_id]),className:"flex-1",children:e.jsx(m,{type:"button",variant:"outline",className:"w-full",children:"Cancel"})})]})]})]})]})]})})]})]})}export{pe as default};
