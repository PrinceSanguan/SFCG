import{j as e,r as H,m as I,$ as F,C as h}from"./app-D4d_CnOG.js";import{H as T}from"./header-sNNJMTxw.js";import{S as z}from"./sidebar-AgpJh8C-.js";import{C as t,b as a,c as i,a as n}from"./card-Ddd1PbJm.js";import{B as d}from"./button-BNY9pfxV.js";import{B as c}from"./badge-B5X3Bo5x.js";import{T as Y}from"./textarea-BSUJtB8h.js";import{L as r}from"./label-DUZH2A38.js";import{A as $}from"./arrow-left-D7rCR_6w.js";import{C as j}from"./circle-x-YwKXM8rN.js";import{C as X}from"./clock-CkU7sqoi.js";import{E as q}from"./eye-CZSR3OJu.js";/* empty css            */import"./dropdown-menu-C8j3iGLG.js";import"./Combination-DV3hOdVE.js";import"./index--LpZLMxA.js";import"./separator-CATApVxB.js";import"./user-check-BdnFS5QH.js";import"./graduation-cap-639r0NlY.js";import"./chevron-right-BM3L0HFY.js";import"./book-open-BuG7Pj3m.js";import"./award-DxCdZEOx.js";import"./chart-no-axes-column-increasing-N_7gcrMv.js";import"./trending-up-Bo30IJkH.js";import"./building-2-DyVWsf7-.js";import"./log-out-B1DUJlT7.js";function ve({user:o,grade:s}){var v,N,g,y,_,b,w,A,C,k,R,S,G;if(!o||!s)return e.jsx("div",{children:"Loading..."});const[L,m]=H.useState(!1),{data:x,setData:p,post:u,processing:l,errors:f}=I({return_reason:""}),B=()=>{u(route("chairperson.grades.approve",s.id))},E=()=>{x.return_reason.trim()&&(u(route("chairperson.grades.return",s.id)),m(!1),p("return_reason",""))},P=()=>s.is_returned?e.jsx(c,{variant:"destructive",children:"Returned"}):s.is_approved?e.jsx(c,{variant:"default",children:"Approved"}):s.is_submitted_for_validation?e.jsx(c,{variant:"secondary",children:"Pending Approval"}):e.jsx(c,{variant:"outline",children:"Unknown"}),U=()=>s.is_returned?e.jsx(j,{className:"h-5 w-5 text-red-500"}):s.is_approved?e.jsx(h,{className:"h-5 w-5 text-green-500"}):s.is_submitted_for_validation?e.jsx(X,{className:"h-5 w-5 text-yellow-500"}):e.jsx(q,{className:"h-5 w-5 text-gray-500"});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(z,{user:o}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(T,{user:o}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(d,{asChild:!0,variant:"outline",size:"sm",children:e.jsxs(F,{href:route("chairperson.grades.index"),children:[e.jsx($,{className:"h-4 w-4"}),"Back to Grades"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Grade Review"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Review grade details and make approval decisions"})]})]}),e.jsxs(t,{children:[e.jsx(a,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[U(),"Grade Status"]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[P(),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.is_submitted_for_validation&&"Submitted for validation",s.is_approved&&"Approved",s.is_returned&&"Returned for correction"]})]})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(t,{children:[e.jsx(a,{children:e.jsx(i,{children:"Student Information"})}),e.jsxs(n,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("p",{className:"text-lg font-semibold",children:((v=s.student)==null?void 0:v.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Student Number"}),e.jsx("p",{className:"text-lg",children:((N=s.student)==null?void 0:N.student_number)||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-lg",children:((g=s.student)==null?void 0:g.email)||"N/A"})]})]})]}),e.jsxs(t,{children:[e.jsx(a,{children:e.jsx(i,{children:"Subject Information"})}),e.jsxs(n,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Subject"}),e.jsx("p",{className:"text-lg font-semibold",children:((y=s.subject)==null?void 0:y.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Subject Code"}),e.jsx("p",{className:"text-lg",children:((_=s.subject)==null?void 0:_.code)||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Course"}),e.jsx("p",{className:"text-lg",children:((w=(b=s.subject)==null?void 0:b.course)==null?void 0:w.name)||"N/A"})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(t,{children:[e.jsx(a,{children:e.jsx(i,{children:"Grade Information"})}),e.jsxs(n,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Grade"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.grade})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"School Year"}),e.jsx("p",{className:"text-lg",children:s.school_year})]}),s.year_of_study&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Year of Study"}),e.jsx("p",{className:"text-lg",children:s.year_of_study})]})]})]}),e.jsxs(t,{children:[e.jsx(a,{children:e.jsx(i,{children:"Academic Context"})}),e.jsxs(n,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Academic Level"}),e.jsx("p",{className:"text-lg",children:((A=s.academicLevel)==null?void 0:A.name)||"N/A"})]}),s.gradingPeriod&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Grading Period"}),e.jsx("p",{className:"text-lg",children:((C=s.gradingPeriod)==null?void 0:C.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Submitted At"}),e.jsx("p",{className:"text-lg",children:s.submitted_at?new Date(s.submitted_at).toLocaleString():"Not specified"})]})]})]})]}),(s.is_approved||s.is_returned)&&e.jsxs(t,{children:[e.jsx(a,{children:e.jsx(i,{children:"Approval History"})}),e.jsxs(n,{children:[s.is_approved&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Approved"})]}),e.jsxs("div",{className:"ml-6 text-sm text-gray-600",children:[e.jsxs("p",{children:["Approved by: ",((k=s.approved_by)==null?void 0:k.name)||"Unknown"]}),e.jsxs("p",{children:["Approved at: ",s.approved_at?new Date(s.approved_at).toLocaleString():"Unknown"]})]})]}),s.is_returned&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"font-medium",children:"Returned for Correction"})]}),e.jsxs("div",{className:"ml-6 text-sm text-gray-600",children:[e.jsxs("p",{children:["Returned by: ",((R=s.returned_by)==null?void 0:R.name)||"Unknown"]}),e.jsxs("p",{children:["Returned at: ",s.returned_at?new Date(s.returned_at).toLocaleString():"Unknown"]}),s.return_reason&&e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Reason:"}),e.jsx("p",{className:"italic",children:s.return_reason})]})]})]})]})]}),s.is_submitted_for_validation&&!s.is_approved&&!s.is_returned&&e.jsxs(t,{children:[e.jsx(a,{children:e.jsx(i,{children:"Actions"})}),e.jsx(n,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(d,{onClick:B,disabled:l,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),l?"Approving...":"Approve Grade"]}),e.jsxs(d,{variant:"destructive",onClick:()=>m(!0),disabled:l,children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Return for Correction"]})]})})]})]})})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Return Grade for Correction"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Returning grade for ",e.jsx("strong",{children:((S=s.student)==null?void 0:S.name)||"N/A"})," in ",e.jsx("strong",{children:((G=s.subject)==null?void 0:G.name)||"N/A"})]}),e.jsx(r,{htmlFor:"return_reason",children:"Reason for Return"}),e.jsx(Y,{id:"return_reason",value:x.return_reason,onChange:D=>p("return_reason",D.target.value),placeholder:"Please provide a reason for returning this grade...",className:"mt-2",rows:4}),f.return_reason&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.return_reason})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(d,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(d,{variant:"destructive",onClick:E,disabled:l||!x.return_reason.trim(),children:l?"Returning...":"Return Grade"})]})]})})]})}export{ve as default};
