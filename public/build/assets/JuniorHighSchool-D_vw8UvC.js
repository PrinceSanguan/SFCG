import{r as f,u as Ae,m as He,j as e,C as me,S as Fe}from"./app-BsQN5rAM.js";import{H as ke}from"./header-tZmeSSBA.js";import{S as Ge}from"./sidebar-kxrf0sEW.js";import{C as E,b as D,c as U,a as Q}from"./card-DwIhOWDM.js";import{B as x}from"./button-DBf52xZG.js";import{I as h}from"./input-Ccl0ETbI.js";import{L as d}from"./label-TWNOL8aH.js";import{S as H,a as F,b as k,c as G,d as v}from"./select-1FMfMg3V.js";import{C as xe}from"./checkbox-CDoF5vX1.js";import{B as i}from"./badge-BN0FeRzE.js";import{A as Te,a as qe}from"./alert-Du2eMrje.js";import{D as Me,b as Pe,c as Je,d as $e,e as Ee}from"./dialog-9DaDaYxF.js";import{A as De}from"./arrow-left-CWo1Q1LV.js";import{P as Ue}from"./plus-DGiKpmJv.js";import{T as N}from"./trophy-Cy5Un105.js";import{U as Qe}from"./upload-Cowx3t-N.js";/* empty css            */import"./dropdown-menu-w7wVxWbL.js";import"./Combination-29xvA0uR.js";import"./index-BjK9bhdO.js";import"./separator-D5nM7hG5.js";import"./users-3w6mGXna.js";import"./chevron-right-CRmR5nxy.js";import"./crown-B3lLgZ7M.js";import"./building-2-B0fIsvbO.js";import"./user-cog-By23ZxIX.js";import"./book-open-B4r6eqtB.js";import"./user-check-DKpI0-ki.js";import"./graduation-cap-D6HPy0t6.js";import"./notebook-CLxTpZBU.js";import"./chart-no-axes-column-increasing-BhIlZ8m5.js";import"./shield-sUbGsF4l.js";import"./index-Dkke8hXh.js";import"./index-CqbdR3bf.js";import"./check-C4GbCgu1.js";function fs({user:O,honorTypes:b,criteria:T,schoolYears:w,qualifiedStudents:he,honorResults:ge,currentSchoolYear:z="2024-2025",gradeLevels:o={},sections:S=[],filters:n}){var K,X,W,Z,L,R,ee,se,ae,le,te,ne,re,ie,de;const g=he||[],_=ge||[],C=z||"2024-2025",[q,y]=f.useState(null),{addToast:M}=Ae(),[c,pe]=f.useState(null),[ue,P]=f.useState(!1),[A,J]=f.useState(null),[r,p]=f.useState({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),[je,$]=f.useState(!1),{data:u,setData:j,post:_e,processing:ve,errors:B,reset:Ne}=He({academic_level_id:"2",honor_type_id:"",school_year:"2024-2025",min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),I=s=>{var l,t;if((l=s==null?void 0:s.honor_type)!=null&&l.name)return s.honor_type.name;if((t=s==null?void 0:s.honorType)!=null&&t.name)return s.honorType.name;const a=b.find(m=>m.id===s.honor_type_id);return(a==null?void 0:a.name)||"Unknown Honor Type"},V=s=>{var l,t;if((l=s==null?void 0:s.honor_type)!=null&&l.scope)return s.honor_type.scope;if((t=s==null?void 0:s.honorType)!=null&&t.scope)return s.honorType.scope;const a=b.find(m=>m.id===s.honor_type_id);return(a==null?void 0:a.scope)||"Unknown"},be=s=>{var l,t;if((l=s==null?void 0:s.honor_type)!=null&&l.name)return s.honor_type.name;if((t=s==null?void 0:s.honorType)!=null&&t.name)return s.honorType.name;const a=b.find(m=>m.id===s.honor_type_id);return(a==null?void 0:a.name)||"Unknown Honor Type"},Y=s=>{var a;return(a=s==null?void 0:s.section)!=null&&a.name?s.section.name:s!=null&&s.sectionName?s.sectionName:"No Section"},ye=s=>{s.preventDefault(),_e("/admin/academic/honors/criteria",{onSuccess:()=>{y({type:"success",text:"Criteria saved successfully!"}),Ne(),$(!1),window.location.reload()},onError:()=>y({type:"error",text:"Failed to save criteria."})})},fe=s=>{var a,l,t,m,ce,oe;J(s),p({min_gpa:((a=s.min_gpa)==null?void 0:a.toString())||"",max_gpa:((l=s.max_gpa)==null?void 0:l.toString())||"",min_grade:((t=s.min_grade)==null?void 0:t.toString())||"",min_grade_all:((m=s.min_grade_all)==null?void 0:m.toString())||"",min_year:((ce=s.min_year)==null?void 0:ce.toString())||"",max_year:((oe=s.max_year)==null?void 0:oe.toString())||"",require_consistent_honor:s.require_consistent_honor})},Se=()=>{J(null),p({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1})},we=s=>{var l;const a={...A,min_gpa:parseFloat(r.min_gpa)||null,max_gpa:parseFloat(r.max_gpa)||null,min_grade:parseFloat(r.min_grade)||null,min_grade_all:parseFloat(r.min_grade_all)||null,min_year:parseInt(r.min_year)||null,max_year:parseInt(r.max_year)||null,require_consistent_honor:r.require_consistent_honor};fetch(`/admin/academic/honors/criteria/${s}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify(a)}).then(t=>{if(!t.ok)throw new Error(`HTTP ${t.status}`);return t.json()}).then(()=>{y({type:"success",text:"Criteria updated successfully!"}),J(null),window.location.reload()}).catch(()=>y({type:"error",text:"Failed to update criteria."}))},Ce=s=>{var a;window.confirm("Are you sure you want to delete this criterion?")&&fetch(`/admin/academic/honors/criteria/${s}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""}}).then(l=>{if(!l.ok)throw new Error(`HTTP ${l.status}`);return l.json()}).then(()=>{y({type:"success",text:"Criteria deleted successfully!"}),window.location.reload()}).catch(()=>y({type:"error",text:"Failed to delete criteria."}))};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(Ge,{user:O}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(ke,{user:O}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),"Back"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Junior High School Honor Criteria"})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage honor criteria for Junior High School level students."})]})}),q&&e.jsxs(Te,{className:q.type==="success"?"border-green-500":"border-red-500",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx(qe,{children:q.text})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(x,{onClick:()=>$(!0),className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Add New Criteria"]})}),je&&e.jsxs(E,{children:[e.jsx(D,{children:e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Add Honor Criteria"]})}),e.jsx(Q,{children:e.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"honor_type_id",children:"Honor Type"}),b&&b.length>0?e.jsxs(H,{value:u.honor_type_id||"",onValueChange:s=>j("honor_type_id",s),children:[e.jsx(F,{children:e.jsx(k,{placeholder:"Select honor"})}),e.jsx(G,{children:b.filter(s=>s.id&&s.name).map(s=>e.jsx(v,{value:s.id.toString(),children:s.name},s.id))})]}):e.jsx("div",{className:"p-2 text-sm text-gray-500 bg-gray-100 rounded border",children:"Loading honor types..."}),B.honor_type_id&&e.jsx("p",{className:"text-sm text-red-500",children:B.honor_type_id})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"school_year",children:"School Year"}),e.jsxs(H,{value:u.school_year||"",onValueChange:s=>j("school_year",s),children:[e.jsx(F,{children:e.jsx(k,{placeholder:"Select school year"})}),e.jsx(G,{children:(w!=null&&w.length?w:["2024-2025"]).filter(s=>s&&s.trim()!=="").map(s=>e.jsx(v,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"min_gpa",children:"Min GPA"}),e.jsx(h,{id:"min_gpa",type:"number",step:"0.01",value:u.min_gpa,onChange:s=>j("min_gpa",s.target.value),placeholder:"e.g., 90.0"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"max_gpa",children:"Max GPA"}),e.jsx(h,{id:"max_gpa",type:"number",step:"0.01",value:u.max_gpa,onChange:s=>j("max_gpa",s.target.value),placeholder:"e.g., 97.0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"min_grade",children:"Min Grade (any)"}),e.jsx(h,{id:"min_grade",type:"number",value:u.min_grade,onChange:s=>j("min_grade",s.target.value),placeholder:"e.g., 90"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"min_grade_all",children:"Min Grade (all)"}),e.jsx(h,{id:"min_grade_all",type:"number",value:u.min_grade_all,onChange:s=>j("min_grade_all",s.target.value),placeholder:"e.g., 93"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"min_year",children:"Min Year"}),e.jsx(h,{id:"min_year",type:"number",value:u.min_year,onChange:s=>j("min_year",s.target.value),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"max_year",children:"Max Year"}),e.jsx(h,{id:"max_year",type:"number",value:u.max_year,onChange:s=>j("max_year",s.target.value),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"require_consistent_honor",checked:!!u.require_consistent_honor,onCheckedChange:s=>j("require_consistent_honor",s)}),e.jsx(d,{htmlFor:"require_consistent_honor",children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{type:"submit",disabled:ve,children:"Save Criteria"}),e.jsx(x,{type:"button",variant:"outline",onClick:()=>$(!1),children:"Cancel"})]})]})})]}),e.jsxs(E,{children:[e.jsx(D,{children:e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Existing Criteria (",T.length,")"]})}),e.jsx(Q,{children:T.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(N,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No honor criteria set for Junior High School"}),e.jsx("p",{className:"text-sm",children:'Use the "Add New Criteria" button to create criteria for this level.'})]}):e.jsx("div",{className:"grid gap-4",children:T.map(s=>e.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:(A==null?void 0:A.id)===s.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:I(s)}),e.jsx(i,{variant:"secondary",children:V(s)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:`edit_min_gpa_${s.id}`,children:"Min GPA"}),e.jsx(h,{id:`edit_min_gpa_${s.id}`,type:"number",step:"0.01",value:r.min_gpa,onChange:a=>p({...r,min_gpa:a.target.value}),placeholder:"e.g., 90.0"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:`edit_max_gpa_${s.id}`,children:"Max GPA"}),e.jsx(h,{id:`edit_max_gpa_${s.id}`,type:"number",step:"0.01",value:r.max_gpa,onChange:a=>p({...r,max_gpa:a.target.value}),placeholder:"e.g., 97.0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:`edit_min_grade_${s.id}`,children:"Min Grade (any)"}),e.jsx(h,{id:`edit_min_grade_${s.id}`,type:"number",value:r.min_grade,onChange:a=>p({...r,min_grade:a.target.value}),placeholder:"e.g., 90"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:`edit_min_grade_all_${s.id}`,children:"Min Grade (all)"}),e.jsx(h,{id:`edit_min_grade_all_${s.id}`,type:"number",value:r.min_grade_all,onChange:a=>p({...r,min_grade_all:a.target.value}),placeholder:"e.g., 93"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:`edit_min_year_${s.id}`,children:"Min Year"}),e.jsx(h,{id:`edit_min_year_${s.id}`,type:"number",value:r.min_year,onChange:a=>p({...r,min_year:a.target.value}),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:`edit_max_year_${s.id}`,children:"Max Year"}),e.jsx(h,{id:`edit_max_year_${s.id}`,type:"number",value:r.max_year,onChange:a=>p({...r,max_year:a.target.value}),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:`edit_require_consistent_${s.id}`,checked:r.require_consistent_honor,onCheckedChange:a=>p({...r,require_consistent_honor:a})}),e.jsx(d,{htmlFor:`edit_require_consistent_${s.id}`,children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:Se,children:"Cancel"}),e.jsx(x,{size:"sm",onClick:()=>we(s.id),children:"Update Criteria"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:I(s)}),e.jsx(i,{variant:"secondary",children:V(s)})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[s.min_gpa&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Min GPA:"})," ",s.min_gpa]}),s.max_gpa&&e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Max GPA:"})," ",s.max_gpa]}),s.min_grade&&e.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-yellow-700",children:"Min Grade:"})," ",s.min_grade]}),s.min_grade_all&&e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Min Grade (All):"})," ",s.min_grade_all]}),s.min_year&&s.max_year&&e.jsxs("div",{className:"bg-indigo-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-indigo-700",children:"Years:"})," ",s.min_year,"-",s.max_year]}),s.require_consistent_honor&&e.jsx("div",{className:"col-span-2",children:e.jsx(i,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:"Requires Consistent Honor Standing"})})]}),e.jsxs("div",{className:"flex justify-end mt-4 gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>fe(s),children:"Edit"}),e.jsx(x,{variant:"destructive",size:"sm",onClick:()=>Ce(s.id),children:"Delete"})]})]})},s.id))})})]}),e.jsxs(E,{children:[e.jsxs(D,{children:[e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Junior High School Honor Results (",_.length,") | Qualified Students (",g.length,")"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["School Year: ",z," â€¢ Click on a student to view detailed grades and honor calculation"]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"grade_level_filter",children:"Grade Level"}),e.jsxs(H,{value:(n==null?void 0:n.grade_level)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("grade_level",s):a.searchParams.delete("grade_level"),window.location.href=a.toString()},children:[e.jsx(F,{children:e.jsx(k,{placeholder:"All Grade Levels"})}),e.jsxs(G,{children:[e.jsx(v,{value:"all",children:"All Grade Levels"}),o&&Object.entries(o).map(([s,a])=>e.jsx(v,{value:s,children:a},s))]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"section_filter",children:"Section"}),e.jsxs(H,{value:(n==null?void 0:n.section_id)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("section_id",s):a.searchParams.delete("section_id"),window.location.href=a.toString()},children:[e.jsx(F,{children:e.jsx(k,{placeholder:"All Sections"})}),e.jsxs(G,{children:[e.jsx(v,{value:"all",children:"All Sections"}),e.jsx(v,{value:"no_section",children:"No Section"}),S&&S.map(s=>e.jsxs(v,{value:s.id.toString(),children:[s.name," (",s.code,")",s.specific_year_level&&` - ${s.specific_year_level.replace("grade_","Grade ")}`]},s.id))]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(x,{variant:"outline",onClick:()=>{const s=new URL(window.location.href);s.searchParams.delete("grade_level"),s.searchParams.delete("section_id"),window.location.href=s.toString()},className:"w-full",children:"Clear Filters"})})]}),((n==null?void 0:n.grade_level)||(n==null?void 0:n.section_id))&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Active Filters:"}),(n==null?void 0:n.grade_level)&&e.jsxs("span",{className:"ml-2",children:["Grade Level: ",e.jsx(i,{variant:"secondary",children:(o==null?void 0:o[n.grade_level])||n.grade_level})]}),(n==null?void 0:n.section_id)&&e.jsxs("span",{className:"ml-2",children:["Section: ",e.jsx(i,{variant:"secondary",children:n.section_id==="no_section"?"No Section":((K=S==null?void 0:S.find(s=>s.id.toString()===n.section_id))==null?void 0:K.name)||n.section_id})]})]})})]})]}),e.jsx(Q,{children:_.length===0&&g.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(N,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No honor results or qualified students found"}),e.jsx("p",{className:"text-sm",children:"Students need to meet honor criteria and have approved honors to appear here."})]}):e.jsxs("div",{className:"space-y-6",children:[_.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:["Approved Honor Results (",_.length,")"]}),e.jsx("div",{className:"grid gap-4",children:_.map((s,a)=>e.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",a+1]}),e.jsx("h4",{className:"font-semibold text-lg",children:s.student.name})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",className:"text-xs",children:s.student.student_number}),s.student.specific_year_level&&e.jsx(i,{variant:"secondary",className:"text-xs",children:(o==null?void 0:o[s.student.specific_year_level])||s.student.specific_year_level.replace("grade_","Grade ")}),s.student.section?e.jsx(i,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:Y(s.student)}):e.jsx(i,{variant:"outline",className:"text-xs bg-gray-50 text-gray-500",children:"No Section"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"GPA:"}),e.jsx("div",{className:"text-lg font-bold",children:s.gpa})]}),e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Honor Type:"}),e.jsx("div",{className:"font-bold",children:e.jsx(i,{className:"bg-purple-100 text-purple-800 border-purple-200",children:be(s)})})]}),e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Status:"}),e.jsx("div",{className:"font-bold",children:s.is_approved?e.jsx(i,{variant:"default",className:"bg-green-100 text-green-800",children:"Approved"}):s.is_pending_approval?e.jsx(i,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Pending"}):s.is_rejected?e.jsx(i,{variant:"destructive",className:"bg-red-100 text-red-800",children:"Rejected"}):e.jsx(i,{variant:"outline",children:"Unknown"})})]}),e.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"School Year:"}),e.jsx("div",{className:"text-sm font-bold",children:s.school_year})]})]})]})})},s.id))})]}),g.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Calculated Qualified Students (",g.length,")"]}),e.jsxs(x,{onClick:()=>{console.log("[JHS Submit] Starting submission process..."),console.log("[JHS Submit] Qualified students count:",g.length),console.log("[JHS Submit] Current school year:",C),console.log("[JHS Submit] Honor results count:",_.length);const s=g.filter(l=>!_.some(m=>m.student_id===l.student.id&&m.school_year===C)),a=g.length-s.length;if(console.log("[JHS Submit] Total qualified students:",g.length),console.log("[JHS Submit] Already submitted count:",a),console.log("[JHS Submit] Students to submit count:",s.length),console.log("[JHS Submit] Student names to submit:",s.map(l=>l.student.name)),a>0&&console.log("[JHS Submit] Already submitted students:",g.filter(l=>_.some(t=>t.student_id===l.student.id&&t.school_year===C)).map(l=>l.student.name)),s.length===0){console.log("[JHS Submit] All students already submitted - blocking submission"),M("All qualified students have already been submitted for approval.","warning");return}if(confirm(`Submit ${s.length} qualified student(s) for principal approval?`)){const l={school_year:C};console.log("[JHS Submit] User confirmed. Sending data:",l),console.log("[JHS Submit] Submitting students:",s.map(t=>({id:t.student.id,name:t.student.name}))),Fe.post(route("admin.academic.honors.junior-high-school.generate-results"),l,{onSuccess:t=>{console.log("[JHS Submit] Success response:",t),M(`Successfully submitted ${s.length} student(s) for approval!`,"success")},onError:t=>{console.error("[JHS Submit] Error response:",t);const m=(t==null?void 0:t.message)||"Failed to submit students for approval. Please try again.";M(m,"error")}})}else console.log("[JHS Submit] User cancelled submission")},className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),"Submit for Approval"]})]}),e.jsx("div",{className:"grid gap-4",children:g.map((s,a)=>e.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm hover:shadow-md cursor-pointer transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",a+1]}),e.jsx("h4",{className:"font-semibold text-lg",children:s.student.name})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",className:"text-xs",children:s.student.student_number}),s.student.specific_year_level&&e.jsx(i,{variant:"secondary",className:"text-xs",children:(o==null?void 0:o[s.student.specific_year_level])||s.student.specific_year_level.replace("grade_","Grade ")}),s.student.section?e.jsx(i,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:Y(s.student)}):e.jsx(i,{variant:"outline",className:"text-xs bg-gray-50 text-gray-500",children:"No Section"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Average Grade:"}),e.jsx("div",{className:"text-lg font-bold",children:s.result.average_grade})]}),e.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-yellow-700",children:"Min Grade:"}),e.jsx("div",{className:"text-lg font-bold",children:s.result.min_grade})]}),e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Total Quarters:"}),e.jsx("div",{className:"text-lg font-bold",children:s.result.quarter_averages.length})]}),e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Honor:"}),e.jsx("div",{className:"font-bold",children:s.result.qualifications.length>0?e.jsx(i,{className:"bg-purple-100 text-purple-800 border-purple-200",children:s.result.qualifications[0].honor_type.name}):e.jsx("span",{className:"text-gray-500",children:"N/A"})})]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx(x,{variant:"outline",size:"sm",onClick:()=>{pe(s),P(!0)},children:"View Details"})})]})},s.student.id))})]})]})})]})]})})]}),e.jsx(Me,{open:ue,onOpenChange:P,children:e.jsxs(Pe,{className:"max-w-[95vw] w-[95vw] max-h-[95vh] overflow-y-auto",children:[e.jsxs(Je,{children:[e.jsxs($e,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-purple-600"}),"Student Honor Details - Junior High School"]}),e.jsx(Ee,{children:"Detailed grade breakdown and honor calculation"})]}),c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3 text-gray-900",children:"Student Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsx("p",{className:"font-semibold text-gray-900",children:c.student.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Student Number:"}),e.jsx("p",{className:"font-semibold text-gray-900",children:c.student.student_number})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Grade Level:"}),e.jsx("p",{className:"font-semibold text-gray-900",children:(o==null?void 0:o[c.student.specific_year_level||""])||((X=c.student.specific_year_level)==null?void 0:X.replace("grade_","Grade "))||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Section:"}),e.jsx("p",{className:"font-semibold text-gray-900",children:((W=c.student.section)==null?void 0:W.name)||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-lg border border-purple-200",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-gray-900 flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-purple-600"}),"Honor Achievement"]}),e.jsx("div",{className:"space-y-2",children:((L=(Z=c.result)==null?void 0:Z.qualifications)==null?void 0:L.length)>0?(()=>{var a;const s=c.result.qualifications[c.result.qualifications.length-1];return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5 text-green-600"}),e.jsx(i,{className:"bg-purple-600 text-white text-base py-1 px-3",children:((a=s.honor_type)==null?void 0:a.name)||"Unknown Honor"})]})})():e.jsx("p",{className:"text-gray-600",children:"No honor qualification found"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3 text-gray-900",children:"Grade Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[e.jsx("span",{className:"text-sm text-blue-700 font-medium",children:"Average Grade"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:((ee=(R=c.result)==null?void 0:R.average_grade)==null?void 0:ee.toFixed(2))||"N/A"}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Overall GPA"})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Minimum Grade"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:((ae=(se=c.result)==null?void 0:se.min_grade)==null?void 0:ae.toFixed(2))||"N/A"}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Lowest subject grade"})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-200",children:[e.jsx("span",{className:"text-sm text-purple-700 font-medium",children:"Total Quarters"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:((te=(le=c.result)==null?void 0:le.quarter_averages)==null?void 0:te.length)||0}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Grading periods"})]})]})]}),((ne=c.result)==null?void 0:ne.quarter_averages)&&c.result.quarter_averages.length>0&&e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3 text-gray-900",children:"Quarter Averages"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:c.result.quarter_averages.map((s,a)=>e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-lg text-center border border-blue-200",children:[e.jsxs("span",{className:"text-sm text-blue-700 font-medium",children:["Quarter ",a+1]}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 mt-1",children:s.toFixed(2)})]},a))})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border-2 border-green-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg text-green-900",children:"Overall Academic Performance"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Final average across all quarters"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-4xl font-bold text-green-900",children:((ie=(re=c.result)==null?void 0:re.average_grade)==null?void 0:ie.toFixed(2))||"N/A"}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Final GPA"})]})]})}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Qualification Status"}),e.jsx("p",{className:"text-sm text-gray-900",children:((de=c.result)==null?void 0:de.reason)||"N/A"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(x,{onClick:()=>P(!1),variant:"outline",children:"Close"})})]})]})})]})}export{fs as default};
