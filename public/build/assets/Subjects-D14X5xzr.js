import{c as ie,r as p,j as e,$ as re,S as k}from"./app-BSmajpHQ.js";import{S as le,H as ce}from"./sidebar-Dt6BC0yy.js";import{C as S,a as C,b as P,c as z}from"./card-Rhg1hfeR.js";import{B as n}from"./button-CFRE8StS.js";import{I as t}from"./input-Bm944TBk.js";import{L as r}from"./label-BiKLtf53.js";import{S as x,a as h,b as m,c as j,d as g}from"./select-CRIwoZ2p.js";import{B as o}from"./badge-CRHJkprN.js";import{D as G,a as de,b as U,c as q,d as O,e as $}from"./dialog-Ca4MTlzu.js";import{T as ne,a as te,b as v,c as W}from"./tabs-CI3ijdr2.js";import{A as oe}from"./arrow-left-nz-xDri3.js";import{P as J}from"./plus-CzuJz9F4.js";import{B as w}from"./graduation-cap-BXICACT4.js";import{S as R}from"./square-pen-xAjoUe1b.js";import{T as K}from"./trash-2-C7uZsDfa.js";import{C as xe}from"./clock-C1mLfLPt.js";import"./dropdown-menu-DAtcKM2_.js";import"./index-C41mf1B0.js";import"./separator-BpSvlMcy.js";import"./users-DD81mbpz.js";import"./user-cog-B6olVA9R.js";import"./shield-BlDwKto6.js";import"./index-CTga3qKm.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],me=ie("Hash",he);function Me({user:A,subjects:b=[],academicLevels:u=[],gradingPeriods:Q=[],courses:F=[]}){var I,L,M,V;const[X,Y]=p.useState("all"),[a,c]=p.useState({name:"",code:"",description:"",academic_level_id:"",grading_period_id:"",course_id:"",units:0,hours_per_week:0,is_core:!1,is_active:!0}),[Z,_]=p.useState(!1),[i,d]=p.useState(null),[ee,N]=p.useState(!1),y=s=>b.filter(l=>l.academic_level.key===s),T=s=>Q.filter(l=>l.academic_level_id===s),se=()=>{k.post(route("admin.academic.subjects.store"),a,{preserveScroll:!0,onSuccess:()=>{c({name:"",code:"",description:"",academic_level_id:"",grading_period_id:"",course_id:"",units:0,hours_per_week:0,is_core:!1,is_active:!0}),_(!1)}})},ae=s=>{const l={name:s.name,code:s.code,description:s.description||"",academic_level_id:s.academic_level_id,grading_period_id:s.grading_period_id||"",course_id:s.course_id||"",units:s.units,hours_per_week:s.hours_per_week,is_core:s.is_core,is_active:s.is_active};k.put(route("admin.academic.subjects.update",s.id),l,{preserveScroll:!0,onSuccess:()=>N(!1)})},B=s=>{confirm(`Delete subject ${s.name}?`)&&k.delete(route("admin.academic.subjects.destroy",s.id),{preserveScroll:!0})},H=s=>{d(s),N(!0)},D=s=>s?e.jsx(o,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"}):e.jsx(o,{variant:"secondary",children:"Inactive"}),E=s=>s?e.jsx(o,{variant:"default",className:"bg-blue-100 text-blue-800",children:"Core"}):e.jsx(o,{variant:"outline",children:"Elective"}),f=s=>{switch(s){case"elementary":return"ðŸŽ“";case"junior_highschool":return"ðŸ“š";case"senior_highschool":return"ðŸŽ¯";case"college":return"ðŸ›ï¸";default:return"ðŸ“–"}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(le,{user:A}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(ce,{user:A}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"mb-4",children:e.jsx(re,{href:route("admin.academic.index"),children:e.jsxs(n,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Back to Academic & Curriculum"]})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Manage Subjects per Level"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Create and manage subjects for each academic level with appropriate grading periods."})]}),e.jsx(S,{children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold",children:"Subjects"}),e.jsxs(G,{open:Z,onOpenChange:_,children:[e.jsx(de,{asChild:!0,children:e.jsxs(n,{onClick:()=>c({name:"",code:"",description:"",academic_level_id:"",grading_period_id:"",course_id:"",units:0,hours_per_week:0,is_core:!1,is_active:!0}),className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Add Subject"]})}),e.jsxs(U,{className:"max-w-2xl",children:[e.jsx(q,{children:e.jsx(O,{children:"Add New Subject"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"subject-name",children:"Name"}),e.jsx(t,{id:"subject-name",placeholder:"e.g., Mathematics, English, Science",value:a.name,onChange:s=>c({...a,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"subject-code",children:"Code"}),e.jsx(t,{id:"subject-code",placeholder:"e.g., MATH101, ENG101",value:a.code,onChange:s=>c({...a,code:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"subject-description",children:"Description"}),e.jsx(t,{id:"subject-description",placeholder:"Brief description of the subject",value:a.description,onChange:s=>c({...a,description:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"subject-level",children:"Academic Level"}),e.jsxs(x,{value:a.academic_level_id,onValueChange:s=>c({...a,academic_level_id:s,grading_period_id:"",course_id:""}),children:[e.jsx(h,{children:e.jsx(m,{placeholder:"Select academic level"})}),e.jsx(j,{children:u.map(s=>e.jsx(g,{value:s.id.toString(),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:f(s.key)}),s.name]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"subject-grading",children:"Grading Period"}),e.jsxs(x,{value:a.grading_period_id,onValueChange:s=>c({...a,grading_period_id:s}),disabled:!a.academic_level_id,children:[e.jsx(h,{children:e.jsx(m,{placeholder:"Select grading period"})}),e.jsx(j,{children:a.academic_level_id&&T(parseInt(a.academic_level_id)).map(s=>e.jsxs(g,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]})]})]}),a.academic_level_id&&((I=u.find(s=>s.id.toString()===a.academic_level_id))==null?void 0:I.key)==="college"&&e.jsxs("div",{children:[e.jsx(r,{htmlFor:"subject-course",children:"Course"}),e.jsxs(x,{value:a.course_id,onValueChange:s=>c({...a,course_id:s}),children:[e.jsx(h,{children:e.jsx(m,{placeholder:"Select course (required for college subjects)"})}),e.jsx(j,{children:F.map(s=>e.jsxs(g,{value:s.id.toString(),children:[s.code," - ",s.name]},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"subject-units",children:"Units"}),e.jsx(t,{id:"subject-units",type:"number",min:"0",step:"0.5",value:a.units,onChange:s=>c({...a,units:parseFloat(s.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"subject-hours",children:"Hours per Week"}),e.jsx(t,{id:"subject-hours",type:"number",min:"0",value:a.hours_per_week,onChange:s=>c({...a,hours_per_week:parseInt(s.target.value)||0})})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx("input",{id:"subject-core",type:"checkbox",checked:a.is_core,onChange:s=>c({...a,is_core:s.target.checked}),className:"rounded border-gray-300"}),e.jsx(r,{htmlFor:"subject-core",children:"Core Subject"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"subject-active",type:"checkbox",checked:a.is_active,onChange:s=>c({...a,is_active:s.target.checked}),className:"rounded border-gray-300"}),e.jsx(r,{htmlFor:"subject-active",children:"Active"})]})]}),e.jsxs($,{children:[e.jsx(n,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),e.jsx(n,{onClick:se,children:"Create Subject"})]})]})]})]})})}),e.jsxs(ne,{value:X,onValueChange:Y,className:"w-full",children:[e.jsxs(te,{className:"grid w-full grid-cols-5",children:[e.jsx(v,{value:"all",children:"All Subjects"}),e.jsx(v,{value:"elementary",children:"Elementary"}),e.jsx(v,{value:"junior_highschool",children:"Junior High"}),e.jsx(v,{value:"senior_highschool",children:"Senior High"}),e.jsx(v,{value:"college",children:"College"})]}),e.jsx(W,{value:"all",className:"space-y-4",children:e.jsxs(S,{children:[e.jsx(P,{children:e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"All Subjects (",b.length,")"]})}),e.jsx(C,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Level"}),e.jsx("th",{className:"text-left p-3",children:"Period"}),e.jsx("th",{className:"text-left p-3",children:"Course"}),e.jsx("th",{className:"text-left p-3",children:"Units"}),e.jsx("th",{className:"text-left p-3",children:"Hours"}),e.jsx("th",{className:"text-left p-3",children:"Type"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:b.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:e.jsx(o,{variant:"outline",className:"font-mono",children:s.code})}),e.jsx("td",{className:"p-3 font-medium",children:s.name}),e.jsx("td",{className:"p-3",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:f(s.academic_level.key)}),s.academic_level.name]})}),e.jsx("td",{className:"p-3",children:s.grading_period?e.jsx(o,{variant:"outline",children:s.grading_period.name}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3",children:s.course?e.jsx(o,{variant:"outline",className:"bg-blue-100 text-blue-800",children:s.course.code}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3",children:s.units}),e.jsx("td",{className:"p-3",children:s.hours_per_week}),e.jsx("td",{className:"p-3",children:E(s.is_core)}),e.jsx("td",{className:"p-3",children:D(s.is_active)}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>H(s),children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>B(s),className:"text-red-600 hover:text-red-700",children:e.jsx(K,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})}),u.map(s=>e.jsx(W,{value:s.key,className:"space-y-4",children:e.jsxs(S,{children:[e.jsx(P,{children:e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx("span",{children:f(s.key)}),s.name," Subjects (",y(s.key).length,")"]})}),e.jsx(C,{children:y(s.key).length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(w,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No subjects defined"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:["Get started by creating the first subject for ",s.name,"."]}),e.jsxs(n,{variant:"outline",onClick:()=>{c({...a,academic_level_id:s.id.toString()}),_(!0)},className:"border-blue-300 text-blue-600 hover:bg-blue-50",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Add First Subject"]})]}):e.jsx("div",{className:"grid gap-4",children:y(s.key).map(l=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50 dark:bg-gray-800",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(w,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:l.name}),e.jsxs(o,{variant:"outline",className:"text-xs font-mono bg-gray-100 dark:bg-gray-600",children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),l.code]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[l.grading_period&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(xe,{className:"h-3 w-3"}),l.grading_period.name]}),e.jsxs("span",{children:[l.units," units"]}),e.jsxs("span",{children:[l.hours_per_week," hrs/week"]})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[E(l.is_core),D(l.is_active),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>H(l),children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>B(l),className:"text-red-600 hover:text-red-700",children:e.jsx(K,{className:"h-4 w-4"})})]})]})]},l.id))})})]})},s.key))]})]})})]}),e.jsx(G,{open:ee,onOpenChange:N,children:e.jsxs(U,{className:"max-w-2xl",children:[e.jsx(q,{children:e.jsx(O,{children:"Edit Subject"})}),i&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Name"}),e.jsx(t,{value:i.name,onChange:s=>d({...i,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Code"}),e.jsx(t,{value:i.code,onChange:s=>d({...i,code:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Description"}),e.jsx(t,{value:i.description||"",onChange:s=>d({...i,description:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Academic Level"}),e.jsxs(x,{value:i.academic_level_id.toString(),onValueChange:s=>d({...i,academic_level_id:Number(s),grading_period_id:void 0,course_id:void 0}),children:[e.jsx(h,{children:e.jsx(m,{})}),e.jsx(j,{children:u.map(s=>e.jsx(g,{value:s.id.toString(),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:f(s.key)}),s.name]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Grading Period"}),e.jsxs(x,{value:((L=i.grading_period_id)==null?void 0:L.toString())||"",onValueChange:s=>d({...i,grading_period_id:Number(s)}),children:[e.jsx(h,{children:e.jsx(m,{placeholder:"Select grading period"})}),e.jsx(j,{children:T(i.academic_level_id).map(s=>e.jsxs(g,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]})]})]}),i.academic_level_id&&((M=u.find(s=>s.id===i.academic_level_id))==null?void 0:M.key)==="college"&&e.jsxs("div",{children:[e.jsx(r,{children:"Course"}),e.jsxs(x,{value:((V=i.course_id)==null?void 0:V.toString())||"",onValueChange:s=>d({...i,course_id:Number(s)}),children:[e.jsx(h,{children:e.jsx(m,{placeholder:"Select course (required for college subjects)"})}),e.jsx(j,{children:F.map(s=>e.jsxs(g,{value:s.id.toString(),children:[s.code," - ",s.name]},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Units"}),e.jsx(t,{type:"number",min:"0",step:"0.5",value:i.units,onChange:s=>d({...i,units:parseFloat(s.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Hours per Week"}),e.jsx(t,{type:"number",min:"0",value:i.hours_per_week,onChange:s=>d({...i,hours_per_week:parseInt(s.target.value)||0})})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx("input",{type:"checkbox",checked:i.is_core,onChange:s=>d({...i,is_core:s.target.checked}),className:"rounded border-gray-300"}),e.jsx(r,{children:"Core Subject"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:i.is_active,onChange:s=>d({...i,is_active:s.target.checked}),className:"rounded border-gray-300"}),e.jsx(r,{children:"Active"})]})]}),e.jsxs($,{children:[e.jsx(n,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),e.jsx(n,{onClick:()=>i&&ae(i),children:"Update Subject"})]})]})})]})}export{Me as default};
