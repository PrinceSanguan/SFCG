import{r as n,j as e,$ as de,S as c}from"./app-_ACoLM-P.js";import{S as le,H as re}from"./sidebar-DnnWkgaB.js";import{C as ne,b as te,c as ie,a as ce}from"./card-Ct-Sq1CI.js";import{B as a}from"./button-B6aJWj-6.js";import{I as r}from"./input-Dh9V7yTb.js";import{L as d}from"./label-D4aZ_aw6.js";import{S as k,a as A,b as w,c as M,d as F}from"./select-lW6xcZNp.js";import{T as oe,a as me,b as z,c as O}from"./tabs-Dv258t_e.js";import{D as u,a as V,b as p,c as v,d as g,e as N}from"./dialog-GrSi6CEv.js";import{A as he,a as xe}from"./alert-BrFzMnu2.js";import{A as je}from"./arrow-left-D6AaxuwP.js";import{P as B}from"./plus-DZcwx_Cu.js";/* empty css            */import"./dropdown-menu-DTo2vNa_.js";import"./Combination-CbhOSQl6.js";import"./index-BwE486B4.js";import"./separator-DZLNz4YP.js";import"./users-BOfkElcp.js";import"./chevron-right-EitJIQyZ.js";import"./crown-Bb0On0y8.js";import"./user-cog-PcEXeHCL.js";import"./book-open-IqCtqkzB.js";import"./graduation-cap-DJD8Uj71.js";import"./chart-no-axes-column-increasing-Lmr0HkKk.js";import"./shield-1NtmXhSw.js";import"./index-BIK_VqV1.js";import"./index-D0rFmsK2.js";function Pe({user:$,academicLevels:S=[],departments:f=[],formErrors:_}){const[P,G]=n.useState("strands"),[o,C]=n.useState({name:"",code:"",academic_level_id:""}),[U,T]=n.useState(!1),[t,x]=n.useState(null),R=()=>{const s=S.find(l=>l.key==="senior_highschool");s&&C({name:"",code:"",academic_level_id:s.id.toString()}),T(!0)},[b,H]=n.useState({name:"",code:""}),[q,L]=n.useState(!1),[m,y]=n.useState(null),[h,D]=n.useState({name:"",code:"",department_id:""}),[J,I]=n.useState(!1),[i,j]=n.useState(null),K=()=>{c.post(route("admin.academic.strands.store"),o,{preserveScroll:!0,onSuccess:()=>{C({name:"",code:"",academic_level_id:""}),T(!1)}})},Q=s=>{const l={name:s.name,code:s.code,academic_level_id:s.academic_level_id};c.put(route("admin.academic.strands.update",s.id),l,{preserveScroll:!0,onSuccess:()=>x(null)})},W=s=>{confirm(`Delete strand ${s.name}?`)&&c.delete(route("admin.academic.strands.destroy",s.id),{preserveScroll:!0})},X=()=>{c.post(route("admin.academic.departments.store"),b,{preserveScroll:!0,onSuccess:()=>{H({name:"",code:""}),L(!1)}})},Y=s=>{const l={name:s.name,code:s.code};c.put(route("admin.academic.departments.update",s.id),l,{preserveScroll:!0,onSuccess:()=>y(null)})},Z=s=>{confirm(`Delete department ${s.name}?`)&&c.delete(route("admin.academic.departments.destroy",s.id),{preserveScroll:!0})},ee=()=>{c.post(route("admin.academic.courses.store"),h,{preserveScroll:!0,onSuccess:()=>{D({name:"",code:"",department_id:""}),I(!1)}})},se=s=>{const l={name:s.name,code:s.code,department_id:s.department_id};c.put(route("admin.academic.courses.update",s.id),l,{preserveScroll:!0,onSuccess:()=>j(null)})},ae=s=>{confirm(`Delete course ${s.name}?`)&&c.delete(route("admin.academic.courses.destroy",s.id),{preserveScroll:!0})};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(le,{user:$}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(re,{user:$}),e.jsxs("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:[e.jsx("div",{className:"mb-4",children:e.jsx(de,{href:route("admin.academic.index"),children:e.jsxs(a,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"})," Back to Academic & Curriculum"]})})}),e.jsxs(ne,{children:[e.jsx(te,{children:e.jsx(ie,{children:"Manage strands, courses, and departments"})}),e.jsx(ce,{children:e.jsxs(oe,{value:P,onValueChange:G,children:[e.jsxs(me,{className:"grid w-full grid-cols-3",children:[e.jsx(z,{value:"strands",children:"Strands"}),e.jsx(z,{value:"departments",children:"Departments"}),e.jsx(z,{value:"courses",children:"Courses"})]}),e.jsxs(O,{value:"strands",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Academic Strands"}),e.jsxs(u,{open:U,onOpenChange:T,children:[e.jsx(V,{asChild:!0,children:e.jsxs(a,{onClick:R,className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Add Strand"]})}),e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(g,{children:"Add new strand"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Strands are only available for Senior High School students as academic tracks (STEM, ABM, HUMSS, GAS)."]})}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"strand-name",children:"Name"}),e.jsx(r,{id:"strand-name",value:o.name,onChange:s=>C({...o,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"strand-code",children:"Code"}),e.jsx(r,{id:"strand-code",value:o.code,onChange:s=>C({...o,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"strand-level",children:"Academic Level"}),e.jsxs(k,{value:o.academic_level_id,onValueChange:s=>C({...o,academic_level_id:s}),disabled:!0,children:[e.jsx(A,{children:e.jsx(w,{placeholder:"Select academic level"})}),e.jsx(M,{children:S.filter(s=>s.key==="senior_highschool").map(s=>e.jsx(F,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Strands are automatically assigned to Senior High School"}),(_==null?void 0:_.academic_level_id)&&e.jsx(he,{variant:"destructive",children:e.jsx(xe,{children:_.academic_level_id})})]})]}),e.jsx(N,{children:e.jsx(a,{onClick:K,children:"Save"})})]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Academic Level"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:S.flatMap(s=>s.strands).map(s=>{var l;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:((l=S.find(E=>E.id===s.academic_level_id))==null?void 0:l.name)||"-"}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>x(s),children:"Edit"}),e.jsx(a,{variant:"destructive",size:"sm",onClick:()=>W(s),children:"Delete"})]})})]},s.id)})})]})})]}),e.jsxs(O,{value:"departments",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Departments"}),e.jsxs(u,{open:q,onOpenChange:L,children:[e.jsx(V,{asChild:!0,children:e.jsxs(a,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"})," Add Department"]})}),e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(g,{children:"Add new department"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"dept-name",children:"Name"}),e.jsx(r,{id:"dept-name",value:b.name,onChange:s=>H({...b,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"dept-code",children:"Code"}),e.jsx(r,{id:"dept-code",value:b.code,onChange:s=>H({...b,code:s.target.value})})]})]}),e.jsx(N,{children:e.jsx(a,{onClick:X,children:"Save"})})]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:f.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>y(s),children:"Edit"}),e.jsx(a,{variant:"destructive",size:"sm",onClick:()=>Z(s),children:"Delete"})]})})]},s.id))})]})})]}),e.jsxs(O,{value:"courses",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Courses"}),e.jsxs(u,{open:J,onOpenChange:I,children:[e.jsx(V,{asChild:!0,children:e.jsxs(a,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"})," Add Course"]})}),e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(g,{children:"Add new course"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"course-name",children:"Name"}),e.jsx(r,{id:"course-name",value:h.name,onChange:s=>D({...h,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"course-code",children:"Code"}),e.jsx(r,{id:"course-code",value:h.code,onChange:s=>D({...h,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"course-dept",children:"Department"}),e.jsxs(k,{value:h.department_id,onValueChange:s=>D({...h,department_id:s}),children:[e.jsx(A,{children:e.jsx(w,{placeholder:"Select department"})}),e.jsx(M,{children:f.map(s=>e.jsx(F,{value:s.id.toString(),children:s.name},s.id))})]})]})]}),e.jsx(N,{children:e.jsx(a,{onClick:ee,children:"Save"})})]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Department"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:f.flatMap(s=>s.courses).map(s=>{var l;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:((l=f.find(E=>E.id===s.department_id))==null?void 0:l.name)||"-"}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>j(s),children:"Edit"}),e.jsx(a,{variant:"destructive",size:"sm",onClick:()=>ae(s),children:"Delete"})]})})]},s.id)})})]})})]})]})})]}),t&&e.jsx(u,{open:!!t,onOpenChange:s=>!s&&x(null),children:e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(g,{children:"Edit strand"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Strands are only available for Senior High School students as academic tracks (STEM, ABM, HUMSS, GAS)."]})}),e.jsxs("div",{children:[e.jsx(d,{children:"Name"}),e.jsx(r,{value:t.name,onChange:s=>x({...t,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Code"}),e.jsx(r,{value:t.code,onChange:s=>x({...t,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Academic Level"}),e.jsxs(k,{value:t.academic_level_id.toString(),onValueChange:s=>x({...t,academic_level_id:Number(s)}),disabled:!0,children:[e.jsx(A,{children:e.jsx(w,{})}),e.jsx(M,{children:S.filter(s=>s.key==="senior_highschool").map(s=>e.jsx(F,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Strands are automatically assigned to Senior High School"})]})]}),e.jsx(N,{children:e.jsx(a,{onClick:()=>Q(t),children:"Save"})})]})}),m&&e.jsx(u,{open:!!m,onOpenChange:s=>!s&&y(null),children:e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(g,{children:"Edit department"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Name"}),e.jsx(r,{value:m.name,onChange:s=>y({...m,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Code"}),e.jsx(r,{value:m.code,onChange:s=>y({...m,code:s.target.value})})]})]}),e.jsx(N,{children:e.jsx(a,{onClick:()=>Y(m),children:"Save"})})]})}),i&&e.jsx(u,{open:!!i,onOpenChange:s=>!s&&j(null),children:e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(g,{children:"Edit course"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Name"}),e.jsx(r,{value:i.name,onChange:s=>j({...i,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Code"}),e.jsx(r,{value:i.code,onChange:s=>j({...i,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Department"}),e.jsxs(k,{value:i.department_id.toString(),onValueChange:s=>j({...i,department_id:Number(s)}),children:[e.jsx(A,{children:e.jsx(w,{})}),e.jsx(M,{children:f.map(s=>e.jsx(F,{value:s.id.toString(),children:s.name},s.id))})]})]})]}),e.jsx(N,{children:e.jsx(a,{onClick:()=>se(i),children:"Save"})})]})})]})]})]})}export{Pe as default};
