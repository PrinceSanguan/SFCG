import{r as t,j as e,$ as re,S as c}from"./app-DV6pQfte.js";import{S as le,H as de}from"./sidebar-B2nCGGWU.js";import{C as te,b as ne,c as ie,a as ce}from"./card-Cfgbc4YJ.js";import{B as a}from"./button-vZZaD-Ov.js";import{I as d}from"./input-BuoOf7RB.js";import{L as r}from"./label-B-tjfhs-.js";import{S as k,a as A,b as w,c as M,d as F}from"./select-BZHKcWZW.js";import{T as oe,a as me,b as z,c as O}from"./tabs-skuWaDAD.js";import{D as u,a as V,b as p,c as v,d as g,f as N}from"./dialog-DR6MSop8.js";import{A as he,a as xe}from"./alert-BJDxkpPZ.js";import{A as je}from"./arrow-left-B3zYIVCk.js";import{P as B}from"./plus-diCYtwMC.js";/* empty css            */import"./dropdown-menu-07BmKsff.js";import"./Combination-DXwulNrV.js";import"./index-DI3PmIre.js";import"./separator-Bd8ogLlG.js";import"./users-9aoybpPJ.js";import"./chevron-right-BCpJ0uGb.js";import"./crown-CjvZ_FOv.js";import"./building-2-CplrOh6H.js";import"./user-cog-B9ZmjYBF.js";import"./book-open-vuHNhnUp.js";import"./user-check-DEVHjOM2.js";import"./graduation-cap-l7vHyC9O.js";import"./notebook-D1noTDPv.js";import"./chart-no-axes-column-increasing-Dq2scRRC.js";import"./index-BPEefCMT.js";import"./index-DjczLSwL.js";import"./check-Cf60cf4N.js";function Re({user:$,academicLevels:S=[],departments:f=[],formErrors:_}){const[P,G]=t.useState("strands"),[o,C]=t.useState({name:"",code:"",academic_level_id:""}),[U,T]=t.useState(!1),[n,x]=t.useState(null),R=()=>{const s=S.find(l=>l.key==="senior_highschool");s&&C({name:"",code:"",academic_level_id:s.id.toString()}),T(!0)},[b,H]=t.useState({name:"",code:""}),[q,L]=t.useState(!1),[m,y]=t.useState(null),[h,D]=t.useState({name:"",code:"",department_id:""}),[J,I]=t.useState(!1),[i,j]=t.useState(null),K=()=>{c.post(route("registrar.academic.strands.store"),o,{preserveScroll:!0,onSuccess:()=>{C({name:"",code:"",academic_level_id:""}),T(!1)}})},Q=s=>{const l={name:s.name,code:s.code,academic_level_id:s.academic_level_id};c.put(route("registrar.academic.strands.update",s.id),l,{preserveScroll:!0,onSuccess:()=>x(null)})},W=s=>{confirm(`Delete strand ${s.name}?`)&&c.delete(route("registrar.academic.strands.destroy",s.id),{preserveScroll:!0})},X=()=>{c.post(route("registrar.academic.departments.store"),b,{preserveScroll:!0,onSuccess:()=>{H({name:"",code:""}),L(!1)}})},Y=s=>{const l={name:s.name,code:s.code};c.put(route("registrar.academic.departments.update",s.id),l,{preserveScroll:!0,onSuccess:()=>y(null)})},Z=s=>{confirm(`Delete department ${s.name}?`)&&c.delete(route("registrar.academic.departments.destroy",s.id),{preserveScroll:!0})},ee=()=>{c.post(route("registrar.academic.courses.store"),h,{preserveScroll:!0,onSuccess:()=>{D({name:"",code:"",department_id:""}),I(!1)}})},se=s=>{const l={name:s.name,code:s.code,department_id:s.department_id};c.put(route("registrar.academic.courses.update",s.id),l,{preserveScroll:!0,onSuccess:()=>j(null)})},ae=s=>{confirm(`Delete course ${s.name}?`)&&c.delete(route("registrar.academic.courses.destroy",s.id),{preserveScroll:!0})};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(le,{user:$}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(de,{user:$}),e.jsxs("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:[e.jsx("div",{className:"mb-4",children:e.jsx(re,{href:route("registrar.academic.index"),children:e.jsxs(a,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"})," Back to Academic & Curriculum"]})})}),e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ie,{children:"Manage strands, courses, and departments"})}),e.jsx(ce,{children:e.jsxs(oe,{value:P,onValueChange:G,children:[e.jsxs(me,{className:"grid w-full grid-cols-3",children:[e.jsx(z,{value:"strands",children:"Strands"}),e.jsx(z,{value:"departments",children:"Departments"}),e.jsx(z,{value:"courses",children:"Courses"})]}),e.jsxs(O,{value:"strands",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Academic Strands"}),e.jsxs(u,{open:U,onOpenChange:T,children:[e.jsx(V,{asChild:!0,children:e.jsxs(a,{onClick:R,className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Add Strand"]})}),e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(g,{children:"Add new strand"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Strands are only available for Senior High School students as academic tracks (STEM, ABM, HUMSS, GAS)."]})}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"strand-name",children:"Name"}),e.jsx(d,{id:"strand-name",value:o.name,onChange:s=>C({...o,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"strand-code",children:"Code"}),e.jsx(d,{id:"strand-code",value:o.code,onChange:s=>C({...o,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"strand-level",children:"Academic Level"}),e.jsxs(k,{value:o.academic_level_id,onValueChange:s=>C({...o,academic_level_id:s}),disabled:!0,children:[e.jsx(A,{children:e.jsx(w,{placeholder:"Select academic level"})}),e.jsx(M,{children:S.filter(s=>s.key==="senior_highschool").map(s=>e.jsx(F,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Strands are automatically assigned to Senior High School"}),(_==null?void 0:_.academic_level_id)&&e.jsx(he,{variant:"destructive",children:e.jsx(xe,{children:_.academic_level_id})})]})]}),e.jsx(N,{children:e.jsx(a,{onClick:K,children:"Save"})})]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Academic Level"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:S.flatMap(s=>s.strands).map(s=>{var l;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:((l=S.find(E=>E.id===s.academic_level_id))==null?void 0:l.name)||"-"}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>x(s),children:"Edit"}),e.jsx(a,{variant:"destructive",size:"sm",onClick:()=>W(s),children:"Delete"})]})})]},s.id)})})]})})]}),e.jsxs(O,{value:"departments",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Departments"}),e.jsxs(u,{open:q,onOpenChange:L,children:[e.jsx(V,{asChild:!0,children:e.jsxs(a,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"})," Add Department"]})}),e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(g,{children:"Add new department"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"dept-name",children:"Name"}),e.jsx(d,{id:"dept-name",value:b.name,onChange:s=>H({...b,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"dept-code",children:"Code"}),e.jsx(d,{id:"dept-code",value:b.code,onChange:s=>H({...b,code:s.target.value})})]})]}),e.jsx(N,{children:e.jsx(a,{onClick:X,children:"Save"})})]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:f.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>y(s),children:"Edit"}),e.jsx(a,{variant:"destructive",size:"sm",onClick:()=>Z(s),children:"Delete"})]})})]},s.id))})]})})]}),e.jsxs(O,{value:"courses",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Courses"}),e.jsxs(u,{open:J,onOpenChange:I,children:[e.jsx(V,{asChild:!0,children:e.jsxs(a,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"})," Add Course"]})}),e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(g,{children:"Add new course"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"course-name",children:"Name"}),e.jsx(d,{id:"course-name",value:h.name,onChange:s=>D({...h,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"course-code",children:"Code"}),e.jsx(d,{id:"course-code",value:h.code,onChange:s=>D({...h,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"course-dept",children:"Department"}),e.jsxs(k,{value:h.department_id,onValueChange:s=>D({...h,department_id:s}),children:[e.jsx(A,{children:e.jsx(w,{placeholder:"Select department"})}),e.jsx(M,{children:f.map(s=>e.jsx(F,{value:s.id.toString(),children:s.name},s.id))})]})]})]}),e.jsx(N,{children:e.jsx(a,{onClick:ee,children:"Save"})})]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Code"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Department"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:f.flatMap(s=>s.courses).map(s=>{var l;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:s.code}),e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3",children:((l=f.find(E=>E.id===s.department_id))==null?void 0:l.name)||"-"}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>j(s),children:"Edit"}),e.jsx(a,{variant:"destructive",size:"sm",onClick:()=>ae(s),children:"Delete"})]})})]},s.id)})})]})})]})]})})]}),n&&e.jsx(u,{open:!!n,onOpenChange:s=>!s&&x(null),children:e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(g,{children:"Edit strand"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Strands are only available for Senior High School students as academic tracks (STEM, ABM, HUMSS, GAS)."]})}),e.jsxs("div",{children:[e.jsx(r,{children:"Name"}),e.jsx(d,{value:n.name,onChange:s=>x({...n,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Code"}),e.jsx(d,{value:n.code,onChange:s=>x({...n,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Academic Level"}),e.jsxs(k,{value:n.academic_level_id.toString(),onValueChange:s=>x({...n,academic_level_id:Number(s)}),disabled:!0,children:[e.jsx(A,{children:e.jsx(w,{})}),e.jsx(M,{children:S.filter(s=>s.key==="senior_highschool").map(s=>e.jsx(F,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Strands are automatically assigned to Senior High School"})]})]}),e.jsx(N,{children:e.jsx(a,{onClick:()=>Q(n),children:"Save"})})]})}),m&&e.jsx(u,{open:!!m,onOpenChange:s=>!s&&y(null),children:e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(g,{children:"Edit department"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Name"}),e.jsx(d,{value:m.name,onChange:s=>y({...m,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Code"}),e.jsx(d,{value:m.code,onChange:s=>y({...m,code:s.target.value})})]})]}),e.jsx(N,{children:e.jsx(a,{onClick:()=>Y(m),children:"Save"})})]})}),i&&e.jsx(u,{open:!!i,onOpenChange:s=>!s&&j(null),children:e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(g,{children:"Edit course"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Name"}),e.jsx(d,{value:i.name,onChange:s=>j({...i,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Code"}),e.jsx(d,{value:i.code,onChange:s=>j({...i,code:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Department"}),e.jsxs(k,{value:i.department_id.toString(),onValueChange:s=>j({...i,department_id:Number(s)}),children:[e.jsx(A,{children:e.jsx(w,{})}),e.jsx(M,{children:f.map(s=>e.jsx(F,{value:s.id.toString(),children:s.name},s.id))})]})]})]}),e.jsx(N,{children:e.jsx(a,{onClick:()=>se(i),children:"Save"})})]})})]})]})]})}export{Re as default};
