import{j as e,L,$ as G}from"./app-CiTvAQ0f.js";import{H as $,S as k}from"./sidebar-VVoXZtH1.js";import{B as x}from"./badge-CLxxIXTE.js";import{B as D}from"./button-D8UEoVMQ.js";import{C as p,b as y,c as f,a as u}from"./card-CeoXYgSE.js";import{T as _,a as H,b as N,c as l,d as C,e as n}from"./table-DL8wLvRC.js";import{A as E}from"./arrow-left-CkmX7KIL.js";import{B as v}from"./book-open-B4ZVJoDG.js";import{S as F}from"./square-pen-N2s6-UGI.js";import{G as A}from"./graduation-cap-62qVkGal.js";import{U as O}from"./user-ULKmCKff.js";/* empty css            */import"./dropdown-menu-BWbk8yuG.js";import"./Combination-Dm1ZUc4F.js";import"./index-Bs3AYGKE.js";import"./log-out-CbciamVY.js";import"./upload-qqA5fVcl.js";import"./crown-BOH8iN8x.js";function re({user:m,student:h,subject:c,grades:d,schoolYear:T,gradingPeriods:o}){const r=d.filter(s=>s.grade!==null),w=o.reduce((s,t)=>{const a=d.find(i=>{var b;return((b=i.gradingPeriod)==null?void 0:b.id)===t.id&&i.grade!==null});return s[t.code]=a,s},{}),g=[{bg:"bg-blue-50",text:"text-blue-600"},{bg:"bg-green-50",text:"text-green-600"},{bg:"bg-yellow-50",text:"text-yellow-600"},{bg:"bg-purple-50",text:"text-purple-600"},{bg:"bg-pink-50",text:"text-pink-600"},{bg:"bg-indigo-50",text:"text-indigo-600"}],S=s=>{var a;const t=(a=c.academicLevel)==null?void 0:a.key;return t==="elementary"||t==="junior_highschool"?s>=90?{text:"Outstanding",color:"bg-green-100 text-green-800 border-green-200"}:s>=85?{text:"Very Satisfactory",color:"bg-blue-100 text-blue-800 border-blue-200"}:s>=80?{text:"Satisfactory",color:"bg-yellow-100 text-yellow-800 border-yellow-200"}:s>=75?{text:"Fairly Satisfactory",color:"bg-orange-100 text-orange-800 border-orange-200"}:{text:"Did Not Meet Expectations",color:"bg-red-100 text-red-800 border-red-200"}:s>=95?{text:"With Highest Honors",color:"bg-green-100 text-green-800 border-green-200"}:s>=90?{text:"With High Honors",color:"bg-blue-100 text-blue-800 border-blue-200"}:s>=85?{text:"With Honors",color:"bg-purple-100 text-purple-800 border-purple-200"}:s>=75?{text:"Passed",color:"bg-yellow-100 text-yellow-800 border-yellow-200"}:{text:"Failed",color:"bg-red-100 text-red-800 border-red-200"}},B=r.length>0?r.reduce((s,t)=>s+t.grade,0)/r.length:0,j=r.length>0?S(B):{text:"No Grade",color:"bg-gray-100 text-gray-800 border-gray-200"};return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(L,{title:`${h.name} • ${c.name} • Grades`}),e.jsx($,{user:{name:m.name,email:m.email||""}}),e.jsxs("div",{className:"flex",children:[e.jsx(k,{user:{name:m.name,email:m.email||""}}),e.jsx("main",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(G,{href:route("adviser.grades.index"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{children:"Back to Grades"})]})}),e.jsxs("div",{className:"text-right",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:h.name}),e.jsxs("p",{className:"text-gray-600",children:[c.name," (",c.code,")"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["School Year: ",T]})]})]}),e.jsxs(p,{children:[e.jsx(y,{children:e.jsxs(f,{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Grade Summary"})]})}),e.jsxs(u,{children:[e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-${Math.min(o.length,4)} gap-4 mb-4`,children:o.map((s,t)=>{const a=g[t%g.length],i=w[s.code];return e.jsxs("div",{className:`text-center p-4 ${a.bg} rounded-lg`,children:[e.jsx("div",{className:`text-2xl font-bold ${a.text}`,children:i?i.grade:"—"}),e.jsx("div",{className:`text-sm ${a.text}`,children:s.name})]},s.id)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:r.length>0?(r.reduce((s,t)=>s+t.grade,0)/r.length).toFixed(2):"—"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Overall Average"})]}),e.jsx("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:e.jsx(x,{className:j.color,children:j.text})})]})]})]}),(()=>{const s=d.length>0?d[0]:null;return s&&s.is_editable&&e.jsx(p,{className:"border-blue-200 bg-blue-50/50",children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Latest Grade Editable"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["You can edit the most recent grade for this student.",s.days_remaining!==void 0&&s.days_remaining<2&&e.jsxs("span",{className:"ml-2 text-orange-600 font-medium",children:["⏰ ",s.days_remaining," ",s.days_remaining===1?"day":"days"," remaining"]})]})]}),e.jsx(G,{href:route("adviser.grades.edit",s.id),children:e.jsxs(D,{variant:"default",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Edit Grade"]})})]})})})})(),e.jsxs(p,{children:[e.jsx(y,{children:e.jsxs(f,{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:"Detailed Grades"})]})}),e.jsx(u,{children:e.jsxs(_,{children:[e.jsx(H,{children:e.jsxs(N,{children:[e.jsx(l,{className:"bg-gray-900 text-white",children:"Student ID"}),e.jsx(l,{className:"bg-gray-900 text-white",children:"Subject"}),e.jsx(l,{className:"bg-gray-900 text-white",children:"Faculty"}),o.map(s=>e.jsx(l,{className:"bg-gray-900 text-white",children:s.name},s.id)),e.jsx(l,{className:"bg-gray-900 text-white",children:"AVERAGE"}),e.jsx(l,{className:"bg-gray-900 text-white",children:"Grade Status"})]})}),e.jsx(C,{children:e.jsxs(N,{children:[e.jsx(n,{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:h.student_number||h.id})]})}),e.jsx(n,{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:c.name})]})}),e.jsx(n,{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:r.length>0&&r[0].teacher_name?r[0].teacher_name:"No Teacher Assigned"})]})}),o.map((s,t)=>{const a=g[t%g.length],i=w[s.code],b=a.bg.replace("50","100")+" "+a.text.replace("600","800")+" border-"+a.text.split("-")[1]+"-200";return e.jsx(n,{className:"px-4 py-3",children:i?e.jsx(x,{className:b,children:i.grade}):e.jsx("span",{className:"text-gray-400",children:"—"})},s.id)}),e.jsx(n,{className:"px-4 py-3",children:r.length>0?e.jsx(x,{className:"bg-gray-100 text-gray-800 border-gray-200",children:(r.reduce((s,t)=>s+t.grade,0)/r.length).toFixed(2)}):e.jsx("span",{className:"text-gray-400",children:"—"})}),e.jsx(n,{className:"px-4 py-3",children:e.jsx(x,{className:j.color,children:j.text})})]})})]})})]}),d.length>0&&e.jsxs(p,{children:[e.jsx(y,{children:e.jsxs(f,{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Grade History"})]})}),e.jsx(u,{children:e.jsxs(_,{children:[e.jsx(H,{children:e.jsxs(N,{children:[e.jsx(l,{children:"Grading Period"}),e.jsx(l,{children:"Grade"}),e.jsx(l,{children:"Date Added"}),e.jsx(l,{children:"Status"})]})}),e.jsx(C,{children:d.map(s=>{var t;return e.jsxs(N,{children:[e.jsx(n,{className:"font-medium",children:s.gradingPeriod?s.gradingPeriod.name:"General Grade"}),e.jsx(n,{children:e.jsx(x,{className:s.grade>=75?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:s.grade})}),e.jsx(n,{className:"text-gray-600",children:new Date(s.created_at).toLocaleDateString()}),e.jsx(n,{children:e.jsx(x,{variant:"outline",className:s.is_submitted_for_validation?"text-green-600":"text-blue-600",children:S(s.grade,((t=c.academicLevel)==null?void 0:t.key)||"")})})]},s.id)})})]})})]})]})})]})]})}export{re as default};
