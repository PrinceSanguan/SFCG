import{r as d,j as e,S as u}from"./app-J6Xw7W28.js";import{S as Z,H as ee}from"./sidebar-Cl8ZSFTx.js";import{C as i,a as n,b as w,c as A}from"./card-QxngUtEE.js";import{B as o}from"./badge-DmOiAtTn.js";import{B as r}from"./button-SZZ7FCQ6.js";import{L as c}from"./label-CGYswwCK.js";import{S as p,a as N,b as f,c as b,d as g}from"./select-CqQ1Z8Xt.js";import{S as v}from"./searchable-select-C6V44-E8.js";import{D,b as M,c as H,d as Y,f as z}from"./dialog-Bmy-Zo6F.js";import{T as se,a as le,b as x,c as U}from"./tabs-BJNGXgGz.js";import{T as L}from"./textarea-B61bC3SN.js";import{A as te}from"./arrow-left-BeAzcxhv.js";import{U as ae}from"./users-BU-dExKj.js";import{B as re}from"./book-open-DveG_6FJ.js";import{U as ce}from"./user-check-BzAIoPYF.js";import{C as ie}from"./calendar-CEH_ac7k.js";import{P as q}from"./plus-DEYo13UD.js";import{S as P}from"./square-pen-DourCiAZ.js";import{T as I}from"./trash-2-Je6-Z1lM.js";/* empty css            */import"./dropdown-menu-DEOGLwzi.js";import"./Combination-NTOXyszT.js";import"./index-BWM8aR7n.js";import"./separator-DcVr60kq.js";import"./chevron-right-DU5s_jeQ.js";import"./crown-ZfCmxDo4.js";import"./building-2-DkWMjV-f.js";import"./user-cog-CloRfNx7.js";import"./graduation-cap-BGWPOvUB.js";import"./notebook-CyiRpWAh.js";import"./chart-no-axes-column-increasing-9GLjCE0b.js";import"./index-DgBicOvs.js";import"./index-2uH8rEQJ.js";import"./check-CboidytU.js";import"./input-CkYwEXDI.js";import"./search--iHQsrVU.js";function Ie({user:k,academicLevels:$,assignmentsByLevel:S,students:y,subjects:_}){const[J,R]=d.useState("all"),[G,h]=d.useState(!1),[K,m]=d.useState(!1),[C,E]=d.useState(null),[l,t]=d.useState({student_id:"",subject_id:"",school_year:"",semester:"",notes:""}),T=["2024-2025","2025-2026","2026-2027","2027-2028"],F=["1st Semester","2nd Semester","Summer","N/A"],Q=s=>{s.preventDefault(),u.post("/registrar/academic/student-subjects",l),h(!1),t({student_id:"",subject_id:"",school_year:"",semester:"",notes:""})},W=s=>{s.preventDefault(),C&&(u.put(`/registrar/academic/student-subjects/${C.id}`,{...l,is_active:C.is_active}),m(!1),E(null),t({student_id:"",subject_id:"",school_year:"",semester:"",notes:""}))},V=s=>{confirm("Are you sure you want to remove this student subject enrollment?")&&u.delete(`/registrar/academic/student-subjects/${s}`)},B=s=>{E(s),t({student_id:s.student.id.toString(),subject_id:s.subject.id.toString(),school_year:s.school_year,semester:s.semester||"",notes:s.notes||""}),m(!0)},O=s=>s?e.jsx(o,{className:"bg-green-100 text-green-800",children:"Active"}):e.jsx(o,{className:"bg-red-100 text-red-800",children:"Inactive"}),X=s=>{const j={elementary:"bg-blue-100 text-blue-800",junior_highschool:"bg-green-100 text-green-800",senior_highschool:"bg-purple-100 text-purple-800",college:"bg-orange-100 text-orange-800"};return e.jsx(o,{variant:"outline",className:j[s.key]||"bg-gray-100 text-gray-800",children:s.name})};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(Z,{user:k}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(ee,{user:k}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(r,{variant:"ghost",size:"sm",onClick:()=>u.get("/registrar/academic"),className:"flex items-center space-x-2",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{children:"Back to Academic Management"})]})}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Subject Management"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsx(i,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.length})]})]})})}),e.jsx(i,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Subjects"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.length})]})]})})}),e.jsx(i,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Enrollments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Object.values(S).flat().length})]})]})})}),e.jsx(i,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Current Year"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"2024-2025"})]})]})})})]}),e.jsxs(i,{children:[e.jsx(w,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),"Enroll Student in Subject"]})}),e.jsx(n,{children:e.jsxs(r,{onClick:()=>h(!0),children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"New Enrollment"]})})]}),e.jsxs(se,{value:J,onValueChange:R,className:"w-full",children:[e.jsxs(le,{className:"grid w-full grid-cols-5",children:[e.jsx(x,{value:"all",children:"All Enrollments"}),e.jsx(x,{value:"elementary",children:"Elementary"}),e.jsx(x,{value:"junior_highschool",children:"Junior High"}),e.jsx(x,{value:"senior_highschool",children:"Senior High"}),e.jsx(x,{value:"college",children:"College"})]}),e.jsx(U,{value:"all",className:"space-y-4",children:e.jsxs(i,{children:[e.jsx(w,{children:e.jsx(A,{children:"All Student Subject Enrollments"})}),e.jsx(n,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Student"}),e.jsx("th",{className:"text-left p-3",children:"Subject"}),e.jsx("th",{className:"text-left p-3",children:"Level"}),e.jsx("th",{className:"text-left p-3",children:"Course"}),e.jsx("th",{className:"text-left p-3",children:"Year"}),e.jsx("th",{className:"text-left p-3",children:"Semester"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Enrolled By"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:Object.values(S).flat().map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.student.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.student.email})]})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.subject.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.subject.code})]})}),e.jsx("td",{className:"p-3",children:X(s.subject.academic_level)}),e.jsx("td",{className:"p-3",children:s.subject.course?e.jsx(o,{variant:"outline",className:"bg-blue-100 text-blue-800",children:s.subject.course.code}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3",children:s.school_year}),e.jsx("td",{className:"p-3",children:s.semester||"N/A"}),e.jsx("td",{className:"p-3",children:O(s.is_active)}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"text-sm text-gray-600",children:s.enrolled_by.name})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>B(s),children:e.jsx(P,{className:"h-4 w-4"})}),e.jsx(r,{variant:"destructive",size:"sm",onClick:()=>V(s.id),children:e.jsx(I,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})}),$.map(s=>{var j;return e.jsx(U,{value:s.key,className:"space-y-4",children:e.jsxs(i,{children:[e.jsx(w,{children:e.jsxs(A,{children:[s.name," Enrollments"]})}),e.jsx(n,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Student"}),e.jsx("th",{className:"text-left p-3",children:"Subject"}),e.jsx("th",{className:"text-left p-3",children:"Course"}),e.jsx("th",{className:"text-left p-3",children:"Year"}),e.jsx("th",{className:"text-left p-3",children:"Semester"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Enrolled By"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:((j=S[s.key])==null?void 0:j.map(a=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.student.name}),e.jsx("p",{className:"text-xs text-gray-500",children:a.student.email})]})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.subject.name}),e.jsx("p",{className:"text-xs text-gray-500",children:a.subject.code})]})}),e.jsx("td",{className:"p-3",children:a.subject.course?e.jsx(o,{variant:"outline",className:"bg-blue-100 text-blue-800",children:a.subject.course.code}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3",children:a.school_year}),e.jsx("td",{className:"p-3",children:a.semester||"N/A"}),e.jsx("td",{className:"p-3",children:O(a.is_active)}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"text-sm text-gray-600",children:a.enrolled_by.name})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>B(a),children:e.jsx(P,{className:"h-4 w-4"})}),e.jsx(r,{variant:"destructive",size:"sm",onClick:()=>V(a.id),children:e.jsx(I,{className:"h-4 w-4"})})]})})]},a.id)))||e.jsx("tr",{children:e.jsxs("td",{colSpan:8,className:"p-3 text-center text-gray-500",children:["No enrollments found for ",s.name]})})})]})})})]})},s.key)})]}),e.jsx(D,{open:G,onOpenChange:h,children:e.jsxs(M,{className:"max-w-md",children:[e.jsx(H,{children:e.jsx(Y,{children:"Enroll Student in Subject"})}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"student",children:"Student"}),e.jsx(v,{value:l.student_id,onValueChange:s=>t({...l,student_id:s}),placeholder:"Select student",options:y.map(s=>({value:s.id.toString(),label:s.name,description:s.email}))})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"subject",children:"Subject"}),e.jsx(v,{value:l.subject_id,onValueChange:s=>t({...l,subject_id:s}),placeholder:"Select subject",options:_.map(s=>({value:s.id.toString(),label:s.name,description:s.code}))})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"school_year",children:"School Year"}),e.jsxs(p,{value:l.school_year,onValueChange:s=>t({...l,school_year:s}),required:!0,children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select school year"})}),e.jsx(b,{children:T.map(s=>e.jsx(g,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"semester",children:"Semester"}),e.jsxs(p,{value:l.semester,onValueChange:s=>t({...l,semester:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select semester (optional)"})}),e.jsx(b,{children:F.map(s=>e.jsx(g,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"notes",children:"Notes"}),e.jsx(L,{id:"notes",value:l.notes,onChange:s=>t({...l,notes:s.target.value}),placeholder:"Optional notes about this enrollment"})]}),e.jsxs(z,{children:[e.jsx(r,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(r,{type:"submit",children:"Enroll Student"})]})]})]})}),e.jsx(D,{open:K,onOpenChange:m,children:e.jsxs(M,{className:"max-w-md",children:[e.jsx(H,{children:e.jsx(Y,{children:"Edit Student Subject Enrollment"})}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"edit-student",children:"Student"}),e.jsx(v,{value:l.student_id,onValueChange:s=>t({...l,student_id:s}),placeholder:"Select student",options:y.map(s=>({value:s.id.toString(),label:s.name,description:s.email}))})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"edit-subject",children:"Subject"}),e.jsx(v,{value:l.subject_id,onValueChange:s=>t({...l,subject_id:s}),placeholder:"Select subject",options:_.map(s=>({value:s.id.toString(),label:s.name,description:s.code}))})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"edit-school_year",children:"School Year"}),e.jsxs(p,{value:l.school_year,onValueChange:s=>t({...l,school_year:s}),required:!0,children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select school year"})}),e.jsx(b,{children:T.map(s=>e.jsx(g,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"edit-semester",children:"Semester"}),e.jsxs(p,{value:l.semester,onValueChange:s=>t({...l,semester:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select semester (optional)"})}),e.jsx(b,{children:F.map(s=>e.jsx(g,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"edit-notes",children:"Notes"}),e.jsx(L,{id:"edit-notes",value:l.notes,onChange:s=>t({...l,notes:s.target.value}),placeholder:"Optional notes about this enrollment"})]}),e.jsxs(z,{children:[e.jsx(r,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(r,{type:"submit",children:"Update Enrollment"})]})]})]})})]})})]})]})}export{Ie as default};
