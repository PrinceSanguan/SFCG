import{r as v,K as Ne,m as G,j as e,$ as Ce}from"./app-CEl-APsC.js";import{H as be}from"./header-Dhb-t_r7.js";import{S as we}from"./sidebar-CvjshkAd.js";import{C as S,a as N,b as W,c as $}from"./card-B4q6Ame0.js";import{B as L}from"./button-CKIhprG8.js";import{L as o}from"./label-B8Lt35n1.js";import{S as x,a as p,b as j,c as g,d as c}from"./select-D0yo45hq.js";import{T as Ae,a as ke,b as J,c as K}from"./tabs-0vhxtqKK.js";import{C as R}from"./checkbox-DrUhfBAH.js";import{U as re}from"./users-DkorfLVV.js";import{F as V}from"./file-text-DVvQaVsL.js";import{A as te}from"./award-D4bPNJgq.js";import{C as Fe}from"./calendar-ClyX7FYI.js";import{G as ie}from"./graduation-cap-DAO1Kdzj.js";import{T as Ee}from"./trending-up-DZ5SZ31d.js";import{F as X,a as Z,A as ce}from"./file-x-B1NDLOsA.js";import{D as ne}from"./download-CANAVn9y.js";/* empty css            */import"./dropdown-menu-CAqDati1.js";import"./Combination-DliHkq0c.js";import"./index-DW57C5Ri.js";import"./separator-CWkusw7m.js";import"./chevron-right-CwsuZUrO.js";import"./crown-DClj_1Oe.js";import"./building-2-BYe8OOAZ.js";import"./user-cog-BNUu9Yhy.js";import"./book-open-DKUAlxJf.js";import"./user-check-DyGOBg4j.js";import"./notebook-CqxZelgs.js";import"./chart-no-axes-column-increasing-BBvNTgHg.js";import"./shield-B_NiMtZ-.js";import"./index-Bz9Cl0ZU.js";import"./index-DvXVcg-Y.js";import"./check-X2sMxzrC.js";function Ss({user:Q,academicLevels:_,schoolYears:y,currentSchoolYear:k,gradingPeriods:O,honorTypes:de,sections:I,tracks:ee,strands:P,departments:se,courses:H,stats:F}){var ae;const[oe,me]=v.useState("honor-statistics"),[E,w]=v.useState(!1),[Y,De]=v.useState(""),[Ie,le]=v.useState([]),[B,z]=v.useState([]),[Te,he]=v.useState([]),[xe,M]=v.useState([]),[Ge,pe]=v.useState([]),[je,U]=v.useState([]),{props:ge}=Ne(),C=ge.csrf_token||((ae=document.querySelector('meta[name="csrf-token"]'))==null?void 0:ae.content)||"",{data:b,setData:Le,post:Re,processing:Ve}=G({academic_level_id:"all",semester_id:"",grading_period_id:"all",school_year:k||y[0]||"",format:"pdf",include_statistics:!0}),{data:D,setData:T,post:Oe,processing:ue}=G({academic_level_id:"all",school_year:k||y[0]||"",honor_type_id:"all",format:"pdf"}),{data:f,setData:A,post:Pe,processing:ve}=G({academic_level_id:"",school_year:k||y[0]||"",include_grades:!0,include_honors:!0,include_certificates:!0,format:"excel"}),{data:a,setData:u,post:He,processing:fe}=G({academic_level_id:"",year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:"all",school_year:k||y[0]||"",include_grades:!1,format:"pdf"});v.useEffect(()=>{if(b.academic_level_id&&b.academic_level_id!=="all"){const s=parseInt(b.academic_level_id);let t=O.filter(r=>r.academic_level_id===s);if(Y){const r=parseInt(Y);t=t.filter(i=>i.id===r||i.parent_id===r)}le(t)}else le([])},[b.academic_level_id,Y,O]),v.useEffect(()=>{console.log("=== CLASS SECTION REPORT - PAGE LOADED ==="),console.log("Available Academic Levels:",_),console.log("Available School Years:",y),console.log("Current School Year:",k),console.log("Initial Section Data:",a),console.log("Available Sections:",I),console.log("Available Tracks:",ee),console.log("Available Strands:",P),console.log("Available Departments:",se),console.log("Available Courses:",H)},[]),v.useEffect(()=>{if(console.log("=== CLASS SECTION FILTER TRIGGERED ==="),console.log("Academic Level ID:",a.academic_level_id),console.log("Year Level:",a.year_level),console.log("Track ID:",a.track_id),console.log("Strand ID:",a.strand_id),console.log("Department ID:",a.department_id),console.log("Course ID:",a.course_id),!a.academic_level_id){z([]),he([]),M([]),pe([]),U([]);return}const s=parseInt(a.academic_level_id),t=_.find(i=>i.id===s);if(console.log("Selected Level:",t),!t){z([]);return}let r=I.filter(i=>i.academic_level_id===s);console.log("Sections for level:",r),a.year_level&&(r=r.filter(i=>i.specific_year_level===a.year_level),console.log("After year level filter:",r)),t.key==="senior_highschool"&&(a.track_id&&(r=r.filter(i=>{var m;return((m=i.track_id)==null?void 0:m.toString())===a.track_id}),console.log("After track filter:",r)),a.strand_id&&(r=r.filter(i=>{var m;return((m=i.strand_id)==null?void 0:m.toString())===a.strand_id}),console.log("After strand filter:",r))),t.key==="college"&&(a.department_id&&(r=r.filter(i=>{var m;return((m=i.department_id)==null?void 0:m.toString())===a.department_id}),console.log("After department filter:",r)),a.course_id&&(r=r.filter(i=>{var m;return((m=i.course_id)==null?void 0:m.toString())===a.course_id}),console.log("After course filter:",r))),console.log("Final filtered sections:",r),z(r)},[a.academic_level_id,a.year_level,a.track_id,a.strand_id,a.department_id,a.course_id,I,_]),v.useEffect(()=>{if(a.track_id){const s=parseInt(a.track_id),t=P.filter(r=>r.track_id===s);console.log("Filtered Strands for Track:",t),M(t)}else M([])},[a.track_id,P]),v.useEffect(()=>{if(a.department_id){const s=parseInt(a.department_id),t=H.filter(r=>r.department_id===s);console.log("Filtered Courses for Department:",t),U(t)}else U([])},[a.department_id,H]);const _e=s=>{if(s.preventDefault(),!C){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}w(!0);let t=document.getElementById("download-iframe");t||(t=document.createElement("iframe"),t.id="download-iframe",t.style.display="none",document.body.appendChild(t));const r=document.createElement("form");r.method="POST",r.action=route("admin.reports.honor-statistics"),r.target="download-iframe";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=C,r.appendChild(i),Object.entries(D).forEach(([m,d])=>{const n=document.createElement("input");n.type="hidden",n.name=m,typeof d=="boolean"?n.value=d?"1":"0":n.value=(d==null?void 0:d.toString())||"",r.appendChild(n)}),document.body.appendChild(r),r.submit(),document.body.removeChild(r),setTimeout(()=>w(!1),2e3)},ye=s=>{if(s.preventDefault(),!C){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}w(!0);let t=document.getElementById("download-iframe");t||(t=document.createElement("iframe"),t.id="download-iframe",t.style.display="none",document.body.appendChild(t));const r=document.createElement("form");r.method="POST",r.action=route("admin.reports.archive-records"),r.target="download-iframe";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=C,r.appendChild(i),Object.entries(f).forEach(([m,d])=>{const n=document.createElement("input");n.type="hidden",n.name=m,typeof d=="boolean"?n.value=d?"1":"0":n.value=(d==null?void 0:d.toString())||"",r.appendChild(n)}),document.body.appendChild(r),r.submit(),document.body.removeChild(r),setTimeout(()=>w(!1),2e3)},q=s=>{if(!s)return[];const t=parseInt(s),r=I.filter(m=>m.academic_level_id===t),i=[...new Set(r.map(m=>m.specific_year_level))].filter(Boolean);return console.log("Available year levels for academic level",s,":",i),i},Se=s=>{if(console.log("=== handleClassSectionReport CALLED ==="),s.preventDefault(),s.stopPropagation(),console.log("=== CLASS SECTION REPORT FORM SUBMISSION ==="),console.log("Form Data:",a),!C){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}console.log("CSRF Token:",C),w(!0);let t=document.getElementById("download-iframe");t?console.log("Using existing download iframe"):(t=document.createElement("iframe"),t.id="download-iframe",t.style.display="none",document.body.appendChild(t),console.log("Created download iframe"));const r=document.createElement("form");r.method="POST",r.action=route("admin.reports.class-section-report"),r.target="download-iframe",console.log("Form action URL:",r.action);const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=C,r.appendChild(i),console.log("Added CSRF token to form");const m={};Object.entries(a).forEach(([d,n])=>{const h=document.createElement("input");h.type="hidden",h.name=d,typeof n=="boolean"?h.value=n?"1":"0":h.value=(n==null?void 0:n.toString())||"",m[d]=h.value,r.appendChild(h)}),console.log("Form data being submitted:",m),document.body.appendChild(r),console.log("Form appended to body, submitting..."),r.submit(),console.log("Form submitted"),document.body.removeChild(r),console.log("Form removed from body"),t.onload=()=>{var d,n;console.log("Iframe loaded");try{const h=t.contentDocument||((d=t.contentWindow)==null?void 0:d.document);if(h){const l=h.body;console.log("Iframe body content:",(n=l==null?void 0:l.textContent)==null?void 0:n.substring(0,500))}}catch(h){console.log("Could not access iframe content (this is normal for successful downloads):",h)}},setTimeout(()=>{console.log("Resetting loading state"),w(!1)},2e3)};return(()=>{if(b.academic_level_id&&b.academic_level_id!=="all"){const s=parseInt(b.academic_level_id),t=_.find(r=>r.id===s);if(t&&(t.key==="college"||t.key==="senior_highschool"))return O.filter(r=>r.academic_level_id===s&&r.parent_id===null&&r.type==="semester")}return[]})(),e.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(we,{user:Q}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(be,{user:Q}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 min-h-0",children:e.jsxs("div",{className:"flex flex-col gap-6 pb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Reports & Archiving"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Generate comprehensive reports and archive academic records."})]}),e.jsx(Ce,{href:route("admin.dashboard"),children:e.jsx(L,{variant:"outline",children:"Back to Dashboard"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(S,{children:e.jsxs(N,{className:"flex items-center p-6",children:[e.jsx(re,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F.total_students})]})]})}),e.jsx(S,{children:e.jsxs(N,{className:"flex items-center p-6",children:[e.jsx(V,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Certificates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F.total_certificates})]})]})}),e.jsx(S,{children:e.jsxs(N,{className:"flex items-center p-6",children:[e.jsx(te,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Honor Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F.total_honors})]})]})}),e.jsx(S,{children:e.jsxs(N,{className:"flex items-center p-6",children:[e.jsx(Fe,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Periods"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F.active_periods})]})]})}),e.jsx(S,{children:e.jsxs(N,{className:"flex items-center p-6",children:[e.jsx(ie,{className:"h-8 w-8 text-indigo-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Sections"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F.active_sections})]})]})})]}),e.jsxs(Ae,{value:oe,onValueChange:me,className:"w-full",children:[e.jsxs(ke,{className:"grid w-full grid-cols-3",children:[e.jsx(J,{value:"honor-statistics",children:"Honor Statistics"}),e.jsx(J,{value:"archive-records",children:"Archive Records"}),e.jsx(J,{value:"class-section-reports",children:"Class Section Reports"})]}),e.jsx(K,{value:"honor-statistics",className:"space-y-6",children:e.jsxs(S,{children:[e.jsxs(W,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5"}),"Generate Honor Statistics"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate comprehensive honor roll statistics and distribution analysis."})]}),e.jsx(N,{children:e.jsxs("form",{onSubmit:_e,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Academic Level"}),e.jsxs(x,{value:D.academic_level_id,onValueChange:s=>T("academic_level_id",s),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"All levels"})}),e.jsxs(g,{children:[e.jsx(c,{value:"all",children:"All Levels"}),_.map(s=>e.jsx(c,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Honor Type"}),e.jsxs(x,{value:D.honor_type_id,onValueChange:s=>T("honor_type_id",s),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"All types"})}),e.jsxs(g,{children:[e.jsx(c,{value:"all",children:"All Types"}),de.map(s=>e.jsx(c,{value:s.id.toString(),children:s.name},s.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"School Year"}),e.jsxs(x,{value:D.school_year,onValueChange:s=>T("school_year",s),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select year"})}),e.jsx(g,{children:y.map(s=>e.jsx(c,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Export Format"}),e.jsxs(x,{value:D.format,onValueChange:s=>T("format",s),children:[e.jsx(p,{children:e.jsx(j,{})}),e.jsxs(g,{children:[e.jsx(c,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"PDF Report"]})}),e.jsx(c,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"Excel Spreadsheet"]})}),e.jsx(c,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"CSV File"]})})]})]})]})]}),e.jsx(L,{type:"submit",disabled:ue||E,className:"flex items-center gap-2",children:E?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4"}),"Generate Honor Statistics"]})})]})})]})}),e.jsx(K,{value:"archive-records",className:"space-y-6",children:e.jsxs(S,{children:[e.jsxs(W,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"Archive Academic Records"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create comprehensive archives of academic records for specific levels and years."})]}),e.jsx(N,{children:e.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Academic Level *"}),e.jsxs(x,{value:f.academic_level_id,onValueChange:s=>A("academic_level_id",s),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select level"})}),e.jsx(g,{children:_.map(s=>e.jsx(c,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Academic level is required for archiving"})]}),e.jsxs("div",{children:[e.jsx(o,{children:"School Year *"}),e.jsxs(x,{value:f.school_year,onValueChange:s=>A("school_year",s),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select year"})}),e.jsx(g,{children:y.map(s=>e.jsx(c,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Include in Archive"}),e.jsxs("div",{className:"space-y-3 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{id:"include_grades",checked:f.include_grades,onCheckedChange:s=>A("include_grades",s===!0)}),e.jsxs(o,{htmlFor:"include_grades",className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),"Student grades and academic records"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{id:"include_honors",checked:f.include_honors,onCheckedChange:s=>A("include_honors",s===!0)}),e.jsxs(o,{htmlFor:"include_honors",className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Honor roll and academic achievements"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{id:"include_certificates",checked:f.include_certificates,onCheckedChange:s=>A("include_certificates",s===!0)}),e.jsxs(o,{htmlFor:"include_certificates",className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Certificates and recognitions"]})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Export Format"}),e.jsxs(x,{value:f.format,onValueChange:s=>A("format",s),children:[e.jsx(p,{children:e.jsx(j,{})}),e.jsxs(g,{children:[e.jsx(c,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"Excel Workbook (Multiple Sheets)"]})}),e.jsx(c,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"CSV Files (Zip Archive)"]})})]})]})]}),e.jsxs(L,{type:"submit",disabled:ve||!f.academic_level_id||!f.school_year,className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4"}),E?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Archive..."]}):"Create Academic Archive"]})]})})]})}),e.jsx(K,{value:"class-section-reports",className:"space-y-6",children:e.jsxs(S,{children:[e.jsxs(W,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5"}),"Generate Class Section Reports"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate comprehensive class section rosters and student lists by academic level."})]}),e.jsx(N,{children:e.jsxs("form",{onSubmit:Se,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Academic Level *"}),e.jsxs(x,{value:a.academic_level_id,onValueChange:s=>{console.log("Academic Level Changed:",s),u({...a,academic_level_id:s,year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:"all"})},children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select level"})}),e.jsx(g,{children:_.map(s=>e.jsx(c,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Academic level is required for class section reports"})]}),(()=>{if(!a.academic_level_id)return null;const s=_.find(d=>d.id.toString()===a.academic_level_id);if(!s)return null;const t=s.key==="elementary",r=s.key==="junior_highschool",i=s.key==="senior_highschool",m=s.key==="college";if(t||r){const d=t?[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}]:[{value:"grade_7",label:"Grade 7"},{value:"grade_8",label:"Grade 8"},{value:"grade_9",label:"Grade 9"},{value:"grade_10",label:"Grade 10"}],n=q(a.academic_level_id),h=d.filter(l=>n.includes(l.value));return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Year Level"}),e.jsxs(x,{value:a.year_level,onValueChange:l=>{console.log("Year Level Changed:",l),u({...a,year_level:l,section_id:"all"})},children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select year level"})}),e.jsx(g,{children:h.length===0?e.jsx(c,{value:"no-data",disabled:!0,children:"No data available"}):h.map(l=>e.jsx(c,{value:l.value,children:l.label},l.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Filter by year level"})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Section"}),e.jsxs(x,{value:a.section_id,onValueChange:l=>u({...a,section_id:l}),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"All sections"})}),e.jsxs(g,{children:[e.jsx(c,{value:"all",children:"All Sections"}),B.map(l=>e.jsx(c,{value:l.id.toString(),children:l.name},l.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})}if(i){const d=[{value:"grade_11",label:"Grade 11"},{value:"grade_12",label:"Grade 12"}],n=q(a.academic_level_id),h=d.filter(l=>n.includes(l.value));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Year Level"}),e.jsxs(x,{value:a.year_level,onValueChange:l=>{console.log("Year Level Changed:",l),u({...a,year_level:l,track_id:"",strand_id:"",section_id:"all"})},children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select year level"})}),e.jsx(g,{children:h.length===0?e.jsx(c,{value:"no-data",disabled:!0,children:"No data available"}):h.map(l=>e.jsx(c,{value:l.value,children:l.label},l.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select year level"})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Track"}),e.jsxs(x,{value:a.track_id,onValueChange:l=>{console.log("Track Changed:",l),u({...a,track_id:l,strand_id:"",section_id:"all"})},children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select track"})}),e.jsx(g,{children:ee.map(l=>e.jsxs(c,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select track"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Strand"}),e.jsxs(x,{value:a.strand_id,onValueChange:l=>{console.log("Strand Changed:",l),u({...a,strand_id:l,section_id:"all"})},disabled:!a.track_id,children:[e.jsx(p,{children:e.jsx(j,{placeholder:a.track_id?"Select strand":"Select track first"})}),e.jsx(g,{children:xe.map(l=>e.jsxs(c,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select strand"})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Section"}),e.jsxs(x,{value:a.section_id,onValueChange:l=>u({...a,section_id:l}),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"All sections"})}),e.jsxs(g,{children:[e.jsx(c,{value:"all",children:"All Sections"}),B.map(l=>e.jsx(c,{value:l.id.toString(),children:l.name},l.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})]})}if(m){const d=[{value:"1st_year",label:"1st Year"},{value:"2nd_year",label:"2nd Year"},{value:"3rd_year",label:"3rd Year"},{value:"4th_year",label:"4th Year"}],n=q(a.academic_level_id),h=d.filter(l=>n.includes(l.value));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Year Level"}),e.jsxs(x,{value:a.year_level,onValueChange:l=>{console.log("Year Level Changed:",l),u({...a,year_level:l,department_id:"",course_id:"",section_id:"all"})},children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select year level"})}),e.jsx(g,{children:h.length===0?e.jsx(c,{value:"no-data",disabled:!0,children:"No data available"}):h.map(l=>e.jsx(c,{value:l.value,children:l.label},l.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select year level"})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Department"}),e.jsxs(x,{value:a.department_id,onValueChange:l=>{console.log("Department Changed:",l),u({...a,department_id:l,course_id:"",section_id:"all"})},children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select department"})}),e.jsx(g,{children:se.map(l=>e.jsxs(c,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select department"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Course"}),e.jsxs(x,{value:a.course_id,onValueChange:l=>{console.log("Course Changed:",l),u({...a,course_id:l,section_id:"all"})},disabled:!a.department_id,children:[e.jsx(p,{children:e.jsx(j,{placeholder:a.department_id?"Select course":"Select department first"})}),e.jsx(g,{children:je.map(l=>e.jsxs(c,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select course"})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Section"}),e.jsxs(x,{value:a.section_id,onValueChange:l=>u({...a,section_id:l}),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"All sections"})}),e.jsxs(g,{children:[e.jsx(c,{value:"all",children:"All Sections"}),B.map(l=>e.jsx(c,{value:l.id.toString(),children:l.name},l.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})]})}return null})(),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"School Year *"}),e.jsxs(x,{value:a.school_year,onValueChange:s=>u("school_year",s),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select year"})}),e.jsx(g,{children:y.map(s=>e.jsx(c,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Export Format"}),e.jsxs(x,{value:a.format,onValueChange:s=>u("format",s),children:[e.jsx(p,{children:e.jsx(j,{})}),e.jsxs(g,{children:[e.jsx(c,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"PDF Report"]})}),e.jsx(c,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"Excel Spreadsheet"]})}),e.jsx(c,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"CSV File"]})})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{id:"include_grades_section",checked:a.include_grades,onCheckedChange:s=>u("include_grades",s===!0)}),e.jsx(o,{htmlFor:"include_grades_section",children:"Include student average grades in the report"})]}),(!a.academic_level_id||!a.school_year)&&e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Required:"})," Please select Academic Level and School Year to generate the report."]})}),e.jsx(L,{type:"submit",disabled:fe||!a.academic_level_id||!a.school_year||E,className:"flex items-center gap-2",children:E?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4"}),"Generate Class Section Report"]})})]})})]})})]})]})})]})]})}export{Ss as default};
