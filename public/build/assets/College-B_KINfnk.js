import{r as P,u as we,m as Ce,j as e,C as ce,S as Se}from"./app-Cits1ROP.js";import{H as ke}from"./header-Cf_BRROD.js";import{S as Fe}from"./sidebar-D2xNYzcO.js";import{C as w,b as C,c as S,a as k}from"./card-D8z9Ir2i.js";import{B as p}from"./button-Csuy7OgH.js";import{I as _}from"./input-NGE5FyJy.js";import{L as m}from"./label-BV7EzFIZ.js";import{S as T,a as $,b as M,c as E,d as u}from"./select-BuXWPhku.js";import{C as me}from"./checkbox-g9XccRJ_.js";import{B as o}from"./badge-D6HSvqhe.js";import{A as xe,a as he}from"./alert-7U3-bI_l.js";import{A as Ae}from"./arrow-left-BuuD4YFY.js";import{P as Pe}from"./plus-DpWMs-NC.js";import{T as F}from"./trophy-ss3IcJPk.js";import{U as Te}from"./upload-B1PYVL0m.js";/* empty css            */import"./dropdown-menu-CuY5XJ6F.js";import"./Combination-hZHRaZeU.js";import"./index-7nAixpTG.js";import"./separator-CM6yCdgm.js";import"./users-BMS2SZ4v.js";import"./chevron-right-7Cujj1_r.js";import"./crown-BOyeRCL6.js";import"./building-2-Dt357rre.js";import"./user-cog-C5dpNWsQ.js";import"./book-open-DJCkDZFY.js";import"./user-check-CKlU5k41.js";import"./graduation-cap-BXn3Oq0e.js";import"./notebook-BxMymHfM.js";import"./chart-no-axes-column-increasing-K6pkvSQ7.js";import"./shield-DWIC-Jwy.js";import"./index-BMiiYTTH.js";import"./index-Dx8mhPly.js";import"./check-BnBTk89b.js";function xs({user:Q,honorTypes:L,criteria:j,schoolYears:H,qualifiedStudents:g=[],honorResults:b=[],currentSchoolYear:f="2024-2025",gradeLevels:h={},departments:O=[],courses:U=[],sections:G=[],filters:l}){var W,Z,D,ee,se,ae,re,le,ne,te,de,ie,oe;console.log("=== COLLEGE HONORS FRONTEND DEBUG ==="),console.log("Criteria received:",j),console.log("First criterion:",j[0]),j[0]&&(console.log("First criterion keys:",Object.keys(j[0])),console.log("honorType property:",j[0].honorType),console.log("honor_type property (snake_case):",j[0].honor_type)),console.log("[COLLEGE HONORS FRONTEND] Data received:",{qualifiedStudentsCount:g.length,honorResultsCount:b.length,currentSchoolYear:f,filters:l,qualifiedStudentsPreview:g.slice(0,2).map(s=>{var a,r,t,i;return{student_id:(a=s.student)==null?void 0:a.id,student_name:(r=s.student)==null?void 0:r.name,qualifications:(i=(t=s.result)==null?void 0:t.qualifications)==null?void 0:i.map(d=>{var x;return(x=d.honor_type)==null?void 0:x.name})}}),honorResultsPreview:b.slice(0,2).map(s=>{var a,r,t;return{id:s.id,student_id:s.student_id,student_name:(a=s.student)==null?void 0:a.name,honor_type:((r=s.honor_type)==null?void 0:r.name)||((t=s.honorType)==null?void 0:t.name),is_approved:s.is_approved}})});const[V,A]=P.useState(null),[n,K]=P.useState(null),[ge,X]=P.useState(!1),[R,B]=P.useState(null),[c,v]=P.useState({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),[pe,z]=P.useState(!1),{addToast:q}=we(),{data:y,setData:N,post:_e,processing:ue,errors:Y,reset:je}=Ce({academic_level_id:"4",honor_type_id:"",school_year:"2024-2025",min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),be=s=>{s.preventDefault(),_e("/admin/academic/honors/criteria",{onSuccess:()=>{A({type:"success",text:"Criteria saved successfully!"}),je(),z(!1),window.location.reload()},onError:()=>A({type:"error",text:"Failed to save criteria."})})},ve=s=>{var a,r,t,i,d,x;B(s),v({min_gpa:((a=s.min_gpa)==null?void 0:a.toString())||"",max_gpa:((r=s.max_gpa)==null?void 0:r.toString())||"",min_grade:((t=s.min_grade)==null?void 0:t.toString())||"",min_grade_all:((i=s.min_grade_all)==null?void 0:i.toString())||"",min_year:((d=s.min_year)==null?void 0:d.toString())||"",max_year:((x=s.max_year)==null?void 0:x.toString())||"",require_consistent_honor:s.require_consistent_honor})},ye=()=>{B(null),v({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1})},J=s=>{K(s),X(!0)},Ne=s=>{var r;const a={...R,min_gpa:parseFloat(c.min_gpa)||null,max_gpa:parseFloat(c.max_gpa)||null,min_grade:parseFloat(c.min_grade)||null,min_grade_all:parseFloat(c.min_grade_all)||null,min_year:parseInt(c.min_year)||null,max_year:parseInt(c.max_year)||null,require_consistent_honor:c.require_consistent_honor};fetch(`/admin/academic/honors/criteria/${s}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""},body:JSON.stringify(a)}).then(t=>{if(!t.ok)throw new Error(`HTTP ${t.status}`);return t.json()}).then(()=>{A({type:"success",text:"Criteria updated successfully!"}),B(null),window.location.reload()}).catch(()=>A({type:"error",text:"Failed to update criteria."}))},fe=s=>{var a;window.confirm("Are you sure you want to delete this criterion?")&&fetch(`/admin/academic/honors/criteria/${s}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""}}).then(r=>{if(!r.ok)throw new Error(`HTTP ${r.status}`);return r.json()}).then(()=>{A({type:"success",text:"Criteria deleted successfully!"}),window.location.reload()}).catch(()=>A({type:"error",text:"Failed to delete criteria."}))};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(Fe,{user:Q}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(ke,{user:Q}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),"Back"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"College Honor Criteria"})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage honor criteria for College level students."})]})}),V&&e.jsxs(xe,{className:V.type==="success"?"border-green-500":"border-red-500",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx(he,{children:V.text})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(p,{onClick:()=>z(!0),className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Add New Criteria"]})}),pe&&e.jsxs(w,{children:[e.jsx(C,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Add Honor Criteria"]})}),e.jsx(k,{children:e.jsxs("form",{onSubmit:be,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"honor_type_id",children:"Honor Type"}),L&&L.length>0?e.jsxs(T,{value:y.honor_type_id||"",onValueChange:s=>N("honor_type_id",s),children:[e.jsx($,{children:e.jsx(M,{placeholder:"Select honor"})}),e.jsx(E,{children:L.filter(s=>s.id&&s.name).map(s=>e.jsx(u,{value:s.id.toString(),children:s.name},s.id))})]}):e.jsx("div",{className:"p-2 text-sm text-gray-500 bg-gray-100 rounded border",children:"Loading honor types..."}),Y.honor_type_id&&e.jsx("p",{className:"text-sm text-red-500",children:Y.honor_type_id})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"school_year",children:"School Year"}),e.jsxs(T,{value:y.school_year||"",onValueChange:s=>N("school_year",s),children:[e.jsx($,{children:e.jsx(M,{placeholder:"Select school year"})}),e.jsx(E,{children:(H!=null&&H.length?H:["2024-2025"]).filter(s=>s&&s.trim()!=="").map(s=>e.jsx(u,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"min_gpa",children:"Min GPA (5-1 scale)"}),e.jsx(_,{id:"min_gpa",type:"number",step:"0.1",value:y.min_gpa,onChange:s=>N("min_gpa",s.target.value),placeholder:"e.g., 3.5 (5=lowest, 1=highest)"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"max_gpa",children:"Max GPA (5-1 scale)"}),e.jsx(_,{id:"max_gpa",type:"number",step:"0.1",value:y.max_gpa,onChange:s=>N("max_gpa",s.target.value),placeholder:"e.g., 1.5 (5=lowest, 1=highest)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"min_grade",children:"Min Grade (any) (5-1 scale)"}),e.jsx(_,{id:"min_grade",type:"number",value:y.min_grade,onChange:s=>N("min_grade",s.target.value),placeholder:"e.g., 3 (5=lowest, 1=highest)"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"min_grade_all",children:"Min Grade (all) (5-1 scale)"}),e.jsx(_,{id:"min_grade_all",type:"number",value:y.min_grade_all,onChange:s=>N("min_grade_all",s.target.value),placeholder:"e.g., 2 (5=lowest, 1=highest)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"min_year",children:"Min Year"}),e.jsx(_,{id:"min_year",type:"number",value:y.min_year,onChange:s=>N("min_year",s.target.value),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"max_year",children:"Max Year"}),e.jsx(_,{id:"max_year",type:"number",value:y.max_year,onChange:s=>N("max_year",s.target.value),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{id:"require_consistent_honor",checked:!!y.require_consistent_honor,onCheckedChange:s=>N("require_consistent_honor",s)}),e.jsx(m,{htmlFor:"require_consistent_honor",children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{type:"submit",disabled:ue,children:"Save Criteria"}),e.jsx(p,{type:"button",variant:"outline",onClick:()=>z(!1),children:"Cancel"})]})]})})]}),e.jsxs(w,{children:[e.jsx(C,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Existing Criteria (",j.length,")"]})}),e.jsx(k,{children:j.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(F,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No honor criteria set for College"}),e.jsx("p",{className:"text-sm",children:'Use the "Add New Criteria" button to create criteria for this level.'})]}):e.jsx("div",{className:"grid gap-4",children:j.map(s=>{var a,r,t,i;return e.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:(R==null?void 0:R.id)===s.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:((a=s.honor_type||s.honorType)==null?void 0:a.name)||"Unknown Honor Type"}),e.jsx(o,{variant:"secondary",children:((r=s.honor_type||s.honorType)==null?void 0:r.scope)||"Unknown"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:`edit_min_gpa_${s.id}`,children:"Min GPA (5-1 scale)"}),e.jsx(_,{id:`edit_min_gpa_${s.id}`,type:"number",step:"0.1",value:c.min_gpa,onChange:d=>v({...c,min_gpa:d.target.value}),placeholder:"e.g., 3.5"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:`edit_max_gpa_${s.id}`,children:"Max GPA (5-1 scale)"}),e.jsx(_,{id:`edit_max_gpa_${s.id}`,type:"number",step:"0.1",value:c.max_gpa,onChange:d=>v({...c,max_gpa:d.target.value}),placeholder:"e.g., 1.5"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:`edit_min_grade_${s.id}`,children:"Min Grade (any) (5-1 scale)"}),e.jsx(_,{id:`edit_min_grade_${s.id}`,type:"number",value:c.min_grade,onChange:d=>v({...c,min_grade:d.target.value}),placeholder:"e.g., 3"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:`edit_min_grade_all_${s.id}`,children:"Min Grade (all) (5-1 scale)"}),e.jsx(_,{id:`edit_min_grade_all_${s.id}`,type:"number",value:c.min_grade_all,onChange:d=>v({...c,min_grade_all:d.target.value}),placeholder:"e.g., 2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:`edit_min_year_${s.id}`,children:"Min Year"}),e.jsx(_,{id:`edit_min_year_${s.id}`,type:"number",value:c.min_year,onChange:d=>v({...c,min_year:d.target.value}),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:`edit_max_year_${s.id}`,children:"Max Year"}),e.jsx(_,{id:`edit_max_year_${s.id}`,type:"number",value:c.max_year,onChange:d=>v({...c,max_year:d.target.value}),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{id:`edit_require_consistent_${s.id}`,checked:c.require_consistent_honor,onCheckedChange:d=>v({...c,require_consistent_honor:d})}),e.jsx(m,{htmlFor:`edit_require_consistent_${s.id}`,children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:ye,children:"Cancel"}),e.jsx(p,{size:"sm",onClick:()=>Ne(s.id),children:"Update Criteria"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:((t=s.honor_type||s.honorType)==null?void 0:t.name)||"Unknown Honor Type"}),e.jsx(o,{variant:"secondary",children:((i=s.honor_type||s.honorType)==null?void 0:i.scope)||"Unknown"})]}),(s.min_gpa&&(s.min_gpa<1||s.min_gpa>5)||s.max_gpa&&(s.max_gpa<1||s.max_gpa>5)||s.min_grade&&(s.min_grade<1||s.min_grade>5)||s.min_grade_all&&(s.min_grade_all<1||s.min_grade_all>5))&&e.jsx(xe,{className:"mb-3 border-orange-500 bg-orange-50",children:e.jsx(he,{className:"text-orange-700",children:"‚ö†Ô∏è Warning: College uses 1.0-5.0 grading scale (1=Highest, 5=Lowest). Values outside this range may be incorrect."})}),e.jsx("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg border border-blue-200",children:e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"üìò College Grading Scale: 1.0 = Highest | 5.0 = Lowest | Lower values = Better performance"})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[s.min_gpa&&e.jsxs("div",{className:`${s.min_gpa<1||s.min_gpa>5?"bg-orange-50 border-orange-200":"bg-blue-50"} p-2 rounded border`,children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Min GPA:"})," ",s.min_gpa,s.min_gpa<1||s.min_gpa>5?" ‚ö†Ô∏è":""]}),s.max_gpa&&e.jsxs("div",{className:`${s.max_gpa<1||s.max_gpa>5?"bg-orange-50 border-orange-200":"bg-green-50"} p-2 rounded border`,children:[e.jsx("span",{className:"font-medium text-green-700",children:"Max GPA:"})," ",s.max_gpa,s.max_gpa<1||s.max_gpa>5?" ‚ö†Ô∏è":""]}),s.min_grade&&e.jsxs("div",{className:`${s.min_grade<1||s.min_grade>5?"bg-orange-50 border-orange-200":"bg-yellow-50"} p-2 rounded border`,children:[e.jsx("span",{className:"font-medium text-yellow-700",children:"Min Grade (any):"})," ",s.min_grade,s.min_grade<1||s.min_grade>5?" ‚ö†Ô∏è":""]}),s.min_grade_all&&e.jsxs("div",{className:`${s.min_grade_all<1||s.min_grade_all>5?"bg-orange-50 border-orange-200":"bg-purple-50"} p-2 rounded border`,children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Min Grade (all):"})," ",s.min_grade_all,s.min_grade_all<1||s.min_grade_all>5?" ‚ö†Ô∏è":""]}),s.min_year&&s.max_year&&e.jsxs("div",{className:"bg-indigo-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-indigo-700",children:"Years:"})," ",s.min_year,"-",s.max_year]}),s.require_consistent_honor&&e.jsx("div",{className:"col-span-2",children:e.jsx(o,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:"Requires Consistent Honor Standing"})})]}),e.jsxs("div",{className:"flex justify-end mt-4 gap-2",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>ve(s),children:"Edit"}),e.jsx(p,{variant:"destructive",size:"sm",onClick:()=>fe(s.id),children:"Delete"})]})]})},s.id)})})})]}),e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Qualified College Students (",g.length,")"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["School Year: ",f," ‚Ä¢ Click on a student to view detailed grades and honor calculation"]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"grade_level_filter",children:"Year Level"}),e.jsxs(T,{value:(l==null?void 0:l.grade_level)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("grade_level",s):a.searchParams.delete("grade_level"),a.searchParams.delete("department_id"),a.searchParams.delete("course_id"),a.searchParams.delete("section_id"),window.location.href=a.toString()},children:[e.jsx($,{children:e.jsx(M,{placeholder:"All Year Levels"})}),e.jsxs(E,{children:[e.jsx(u,{value:"all",children:"All Year Levels"}),h&&Object.entries(h).map(([s,a])=>e.jsx(u,{value:s,children:a},s))]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"department_filter",children:"Department"}),e.jsxs(T,{value:(l==null?void 0:l.department_id)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("department_id",s):a.searchParams.delete("department_id"),a.searchParams.delete("course_id"),a.searchParams.delete("section_id"),window.location.href=a.toString()},children:[e.jsx($,{children:e.jsx(M,{placeholder:"All Departments"})}),e.jsxs(E,{children:[e.jsx(u,{value:"all",children:"All Departments"}),O&&O.map(s=>e.jsxs(u,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"course_filter",children:"Course"}),e.jsxs(T,{value:(l==null?void 0:l.course_id)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("course_id",s):a.searchParams.delete("course_id"),a.searchParams.delete("section_id"),window.location.href=a.toString()},children:[e.jsx($,{children:e.jsx(M,{placeholder:"All Courses"})}),e.jsxs(E,{children:[e.jsx(u,{value:"all",children:"All Courses"}),U&&U.map(s=>e.jsxs(u,{value:s.id.toString(),children:[s.name," (",s.code,")",s.department&&` - ${s.department.name}`]},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"section_filter",children:"Section"}),e.jsxs(T,{value:(l==null?void 0:l.section_id)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("section_id",s):a.searchParams.delete("section_id"),window.location.href=a.toString()},children:[e.jsx($,{children:e.jsx(M,{placeholder:"All Sections"})}),e.jsxs(E,{children:[e.jsx(u,{value:"all",children:"All Sections"}),G&&G.map(s=>e.jsxs(u,{value:s.id.toString(),children:[s.name," (",s.code,")",s.specific_year_level&&` - ${s.specific_year_level.replace("_"," ").replace(/\b\w/g,a=>a.toUpperCase())}`]},s.id))]})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(p,{variant:"outline",onClick:()=>{const s=new URL(window.location.href);s.searchParams.delete("grade_level"),s.searchParams.delete("department_id"),s.searchParams.delete("course_id"),s.searchParams.delete("section_id"),window.location.href=s.toString()},className:"w-full md:w-auto",children:"Clear All Filters"})}),((l==null?void 0:l.grade_level)||(l==null?void 0:l.department_id)||(l==null?void 0:l.course_id)||(l==null?void 0:l.section_id))&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Active Filters:"}),(l==null?void 0:l.grade_level)&&e.jsxs("span",{className:"ml-2",children:["Year Level: ",e.jsx(o,{variant:"secondary",children:(h==null?void 0:h[l.grade_level])||l.grade_level})]}),(l==null?void 0:l.department_id)&&e.jsxs("span",{className:"ml-2",children:["Department: ",e.jsx(o,{variant:"secondary",children:((W=O==null?void 0:O.find(s=>s.id.toString()===l.department_id))==null?void 0:W.name)||l.department_id})]}),(l==null?void 0:l.course_id)&&e.jsxs("span",{className:"ml-2",children:["Course: ",e.jsx(o,{variant:"secondary",children:((Z=U==null?void 0:U.find(s=>s.id.toString()===l.course_id))==null?void 0:Z.name)||l.course_id})]}),(l==null?void 0:l.section_id)&&e.jsxs("span",{className:"ml-2",children:["Section: ",e.jsx(o,{variant:"secondary",children:((D=G==null?void 0:G.find(s=>s.id.toString()===l.section_id))==null?void 0:D.name)||l.section_id})]})]})})]})]}),e.jsx(k,{children:g.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(F,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No qualified students found"}),e.jsx("p",{className:"text-sm",children:"Students need to meet honor criteria to appear here."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Ready to submit ",g.length," student",g.length!==1?"s":""," for approval"]}),e.jsxs(p,{onClick:()=>{console.log("[College Submit] Starting submission process..."),console.log("[College Submit] Qualified students count:",g.length),console.log("[College Submit] Current school year:",f),console.log("[College Submit] Honor results count:",b.length);const s=g.filter(r=>!b.some(i=>i.student_id===r.student.id&&i.school_year===f)),a=g.length-s.length;if(console.log("[College Submit] Total qualified students:",g.length),console.log("[College Submit] Already submitted count:",a),console.log("[College Submit] Students to submit count:",s.length),console.log("[College Submit] Student names to submit:",s.map(r=>r.student.name)),a>0&&console.log("[College Submit] Already submitted students:",g.filter(r=>b.some(t=>t.student_id===r.student.id&&t.school_year===f)).map(r=>r.student.name)),s.length===0){console.log("[College Submit] All students already submitted - blocking submission"),q("All qualified students have already been submitted for approval.","warning");return}confirm(`Submit ${s.length} qualified student(s) for chairperson approval?`)?(console.log("[College Submit] User confirmed. Sending data..."),console.log("[College Submit] Submitting students:",s.map(r=>({id:r.student.id,name:r.student.name}))),Se.post(route("admin.academic.honors.college.generate-results"),{school_year:f},{onSuccess:r=>{console.log("[College Submit] Success response:",r),q(`Successfully submitted ${s.length} student(s) for approval!`,"success")},onError:r=>{console.error("[College Submit] Error response:",r),q("Failed to submit students for approval. Please try again.","error")}})):console.log("[College Submit] User cancelled submission")},className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),"Submit for Approval"]})]}),e.jsx("div",{className:"grid gap-4",children:g.map((s,a)=>{var r,t,i,d;return e.jsx("div",{onClick:()=>J(s),className:"border rounded-lg p-4 bg-white shadow-sm hover:shadow-md cursor-pointer transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",a+1]}),e.jsx("h4",{className:"font-semibold text-lg",children:s.student.name})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(o,{variant:"outline",className:"text-xs",children:s.student.student_number}),s.student.specific_year_level&&e.jsx(o,{variant:"secondary",className:"text-xs",children:(h==null?void 0:h[s.student.specific_year_level])||s.student.specific_year_level.replace("_"," ").replace(/\b\w/g,x=>x.toUpperCase())}),s.student.department&&e.jsx(o,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:s.student.department.name}),s.student.course&&e.jsx(o,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700",children:s.student.course.name}),s.student.section&&e.jsx(o,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:s.student.section.name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Average Grade:"}),e.jsx("div",{className:"text-lg font-bold",children:s.result.average_grade})]}),e.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-yellow-700",children:"Min Grade:"}),e.jsx("div",{className:"text-lg font-bold",children:s.result.min_grade})]}),e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Total Quarters:"}),e.jsx("div",{className:"text-lg font-bold",children:s.result.total_quarters??0})]}),e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Honor:"}),e.jsx("div",{className:"font-bold",children:((r=s.result.qualifications)==null?void 0:r.length)>0?e.jsx(o,{className:"bg-purple-100 text-purple-800 border-purple-200",children:((d=(i=(t=s.result.qualifications)==null?void 0:t[0])==null?void 0:i.honor_type)==null?void 0:d.name)||"N/A"}):e.jsx("span",{className:"text-gray-500",children:"N/A"})})]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx(p,{variant:"outline",size:"sm",onClick:x=>{x.stopPropagation(),J(s)},children:"View Details"})})]})},s.student.id)})})]})})]}),e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"Results of ",b.length," student",b.length!==1?"s":""," for approval"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["School Year: ",f," ‚Ä¢ Students who have been submitted for chairperson/principal approval"]})]}),e.jsx(k,{children:b.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(F,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No students have been submitted for approval yet"}),e.jsx("p",{className:"text-sm",children:'Use the "Submit for Approval" button above to submit qualified students.'})]}):e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:b.map((s,a)=>{const r=s.student,t=s.honor_type||s.honorType,i=s.is_approved,d=!s.is_approved&&!s.approved_at;return e.jsx("div",{className:`border rounded-lg p-4 shadow-sm ${i?"bg-green-50 border-green-200":d?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200"}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",a+1]}),e.jsx("h4",{className:"font-semibold text-lg",children:(r==null?void 0:r.name)||"Unknown Student"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(o,{variant:"outline",className:"text-xs",children:(r==null?void 0:r.student_number)||"N/A"}),(r==null?void 0:r.specific_year_level)&&e.jsx(o,{variant:"secondary",className:"text-xs",children:(h==null?void 0:h[r.specific_year_level])||r.specific_year_level.replace("_"," ").replace(/\b\w/g,x=>x.toUpperCase())}),(r==null?void 0:r.department)&&e.jsx(o,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:r.department.name}),(r==null?void 0:r.course)&&e.jsx(o,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700",children:r.course.name}),(r==null?void 0:r.section)&&e.jsx(o,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:r.section.name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Honor Type:"}),e.jsx("div",{className:"font-bold",children:(t==null?void 0:t.name)||"N/A"})]}),e.jsxs("div",{className:`p-2 rounded ${i?"bg-green-100":d?"bg-yellow-100":"bg-gray-100"}`,children:[e.jsx("span",{className:`font-medium ${i?"text-green-700":d?"text-yellow-700":"text-gray-700"}`,children:"Status:"}),e.jsx("div",{className:"font-bold",children:i?e.jsx(o,{className:"bg-green-600 text-white",children:"Approved"}):d?e.jsx(o,{className:"bg-yellow-600 text-white",children:"Pending"}):e.jsx(o,{className:"bg-gray-600 text-white",children:"Submitted"})})]}),s.approved_at&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Approved Date:"}),e.jsx("div",{className:"text-sm",children:new Date(s.approved_at).toLocaleDateString()})]}),s.created_at&&e.jsxs("div",{className:"bg-gray-100 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Submitted:"}),e.jsx("div",{className:"text-sm",children:new Date(s.created_at).toLocaleDateString()})]})]})]})})},s.id)})})})})]}),n&&ge&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[n.student.name," - Honor Details"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Student Number: ",n.student.student_number," | School Year: ",f,n.student.specific_year_level&&e.jsxs(e.Fragment,{children:[" | Year Level: ",(h==null?void 0:h[n.student.specific_year_level])||n.student.specific_year_level.replace("_"," ").replace(/\b\w/g,s=>s.toUpperCase())]}),n.student.course&&e.jsxs(e.Fragment,{children:[" | Course: ",n.student.course.name," (",n.student.course.code,")"]}),n.student.section&&e.jsxs(e.Fragment,{children:[" | Section: ",n.student.section.name," (",n.student.section.code,")"]})]})]}),e.jsx(p,{variant:"outline",onClick:()=>{X(!1),K(null)},children:"Close"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(w,{children:[e.jsx(C,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Honor Qualification Summary"]})}),e.jsxs(k,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Average Grade"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:n.result.average_grade})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-yellow-700",children:"Min Grade"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:n.result.min_grade})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-green-700",children:"Total Quarters"}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:n.result.total_quarters??0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700",children:"Honor"}),e.jsx("div",{className:"mt-1",children:((ee=n.result.qualifications)==null?void 0:ee.length)>0?e.jsx(o,{className:"bg-purple-100 text-purple-800 border-purple-200",children:((re=(ae=(se=n.result.qualifications)==null?void 0:se[0])==null?void 0:ae.honor_type)==null?void 0:re.name)||"N/A"}):e.jsx("span",{className:"text-gray-500",children:"N/A"})})]})]})]}),((le=n.result.grades_breakdown)==null?void 0:le.subjects)&&Object.keys(n.result.grades_breakdown.subjects).length>0&&e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(S,{children:"First Semester Grades"}),((te=(ne=n.result.grades_breakdown)==null?void 0:ne.semester_summaries)==null?void 0:te.first_semester)&&e.jsxs("div",{className:"text-2xl font-bold text-green-700 mt-2",children:["Semester Average: ",n.result.grades_breakdown.semester_summaries.first_semester.average??"‚Äî"]})]}),e.jsx(k,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 p-3 text-left",children:"Subject"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Midterm"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Pre-Final"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Average"})]})}),e.jsx("tbody",{children:Object.entries(n.result.grades_breakdown.subjects).map(([s,a])=>{const r=(a==null?void 0:a.COL_S1_MT)??"‚Äî",t=(a==null?void 0:a.COL_S1_PF)??"‚Äî",i=[a==null?void 0:a.COL_S1_MT,a==null?void 0:a.COL_S1_PF].filter(x=>typeof x=="number"),d=i.length?(i.reduce((x,I)=>x+I,0)/i.length).toFixed(2):"‚Äî";return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:s}),e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:r}),e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:t}),e.jsx("td",{className:"border border-gray-300 p-3 text-center font-bold text-blue-600",children:d})]},s)})})]})})})]}),((de=n.result.grades_breakdown)==null?void 0:de.subjects)&&Object.keys(n.result.grades_breakdown.subjects).length>0&&e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(S,{children:"Second Semester Grades"}),((oe=(ie=n.result.grades_breakdown)==null?void 0:ie.semester_summaries)==null?void 0:oe.second_semester)&&e.jsxs("div",{className:"text-2xl font-bold text-green-700 mt-2",children:["Semester Average: ",n.result.grades_breakdown.semester_summaries.second_semester.average??"‚Äî"]})]}),e.jsx(k,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 p-3 text-left",children:"Subject"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Midterm"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Pre-Final"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Average"})]})}),e.jsx("tbody",{children:Object.entries(n.result.grades_breakdown.subjects).map(([s,a])=>{const r=(a==null?void 0:a.COL_S2_MT)??"‚Äî",t=(a==null?void 0:a.COL_S2_PF)??"‚Äî",i=[a==null?void 0:a.COL_S2_MT,a==null?void 0:a.COL_S2_PF].filter(x=>typeof x=="number"),d=i.length?(i.reduce((x,I)=>x+I,0)/i.length).toFixed(2):"‚Äî";return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:s}),e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:r}),e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:t}),e.jsx("td",{className:"border border-gray-300 p-3 text-center font-bold text-blue-600",children:d})]},s)})})]})})})]}),!n.result.qualified&&n.result.reason&&e.jsxs(w,{children:[e.jsx(C,{children:e.jsx(S,{children:"Reason"})}),e.jsx(k,{children:e.jsx("div",{className:"text-sm text-gray-700",children:n.result.reason})})]})]})]})})]})})]})]})}export{xs as default};
