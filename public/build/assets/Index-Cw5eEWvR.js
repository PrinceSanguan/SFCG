import{r as w,j as e,L as G,$ as L}from"./app-CuHdXwVM.js";import{P as S}from"./layout-DMatkK7z.js";import{C as c,b as j,c as u,d as p,a as d}from"./card-BTLlGdAX.js";import{S as _,a as I,b as P,c as V,d as $}from"./select--EdpRsry.js";import{U as g}from"./user-Wo7v_JnN.js";import{B as n}from"./book-open-C56YDAyt.js";import{G as k}from"./graduation-cap-CDjXjcir.js";import{C as z}from"./calendar-Ih7A0ydr.js";import{C as A}from"./chevron-right-fSmv56Tf.js";/* empty css            */import"./app-shell-CCWR2ZM7.js";import"./button-B3FQa-ko.js";import"./Combination-DlrZ3lXm.js";import"./index-D2WF1OSh.js";import"./dropdown-menu-2sVsYT8r.js";import"./index-DoEoLKKq.js";import"./users-CWpXH9ck.js";import"./crown-DBzedbXD.js";import"./file-text-D_o36Nm5.js";import"./log-out-CzOrDvDi.js";import"./index-BcWjRi7I.js";import"./check-BC03zr8E.js";function te({schoolYear:f,grades:v,linkedStudents:l,selectedStudent:i}){var m;const[N,b]=w.useState(((m=i==null?void 0:i.id)==null?void 0:m.toString())||""),C=s=>{b(s),window.location.href=route("parent.grades.index",{student_id:s})},y=v.reduce((s,a)=>{var t;const r=((t=a.subject)==null?void 0:t.id)||0;return s[r]||(s[r]={subject:a.subject,academicLevel:a.academicLevel,school_year:a.school_year,grades:[]}),a.grade!==null&&a.grade!==void 0&&s[r].grades.push(a.grade),s},{}),o=Object.values(y).map(s=>{const a=s.grades.length>0?s.grades.reduce((r,t)=>r+t,0)/s.grades.length:null;return{subject:s.subject,academicLevel:s.academicLevel,school_year:s.school_year,average:a,gradeCount:s.grades.length}});return e.jsxs(S,{children:[e.jsx(G,{title:"Children's Grades"}),e.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Children's Grades"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["School Year: ",f]})]}),l.length>0&&e.jsxs(c,{children:[e.jsxs(j,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(g,{size:18})," Select Child"]}),e.jsx(p,{children:"Choose which child's grades to view"})]}),e.jsx(d,{children:e.jsxs(_,{value:N,onValueChange:C,children:[e.jsx(I,{className:"w-full md:w-80",children:e.jsx(P,{placeholder:"Select a child"})}),e.jsx(V,{children:l.map(s=>e.jsxs($,{value:s.id.toString(),children:[s.name," ",s.student_number&&`(${s.student_number})`]},s.id))})]})})]}),i&&e.jsxs(c,{children:[e.jsxs(j,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5"}),"Academic Performance - ",i.name]}),e.jsx(p,{children:"View grades across all enrolled subjects"})]}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-3",children:[o.map(s=>{var a,r,t,x,h;return e.jsx(L,{href:(a=s.subject)!=null&&a.id?route("parent.grades.show",[i.id,s.subject.id]):"#",className:"block",children:e.jsxs("div",{className:"p-4 border rounded-lg flex items-center justify-between hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(n,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[(r=s.subject)==null?void 0:r.name," (",(t=s.subject)==null?void 0:t.code,")"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[((x=s.academicLevel)==null?void 0:x.name)&&e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-3 w-3"}),s.academicLevel.name]}),e.jsx(z,{className:"h-3 w-3"}),s.gradeCount," grading period",s.gradeCount!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:s.average!==null?s.average.toFixed(2):"-"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Average Grade"})]}),e.jsx(A,{size:18,className:"text-muted-foreground"})]})]})},((h=s.subject)==null?void 0:h.id)||Math.random())}),o.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(n,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("div",{className:"text-lg font-medium text-gray-500",children:"No grades available"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Grades will appear here once they are posted by instructors"})]})]})})]}),l.length===0&&e.jsx(c,{children:e.jsxs(d,{className:"text-center py-8",children:[e.jsx(g,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("div",{className:"text-lg font-medium text-gray-500",children:"No children linked"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact the school administration to link your account to your children"})]})})]})]})}export{te as default};
