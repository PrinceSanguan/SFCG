import{r as j,j as e,$ as k}from"./app-m3UQBMcP.js";import{S as T,H as P}from"./sidebar-CW4nxJVq.js";import{C as n,a as d,b as c,c as o}from"./card-Cb3vhp8k.js";import{B as h}from"./button-DufCHHPz.js";import{B as m}from"./badge-CWhgMSOr.js";import{I as R}from"./input-DsSiTzZC.js";import{S as F,a as E,b as B,c as U,d as y}from"./select-D08EJ6rm.js";import{A as I}from"./arrow-left-Bixw1jjw.js";import{T as v}from"./trending-up-DJz-ds9H.js";import{C as f}from"./chart-no-axes-column-increasing-CczMTEXd.js";import{U as z}from"./users-DPAu0Mf5.js";import{F as G}from"./filter--3TVBQYG.js";import{D as g}from"./download-BwkDPMbn.js";import{C as V}from"./calendar-CQidkWbs.js";/* empty css            */import"./dropdown-menu-BKqTm_Lw.js";import"./Combination-1fZyme7-.js";import"./index-BWILvfpH.js";import"./separator-BItFfQZ1.js";import"./user-cog-BhYCVh1G.js";import"./award-ClxfNlGh.js";import"./chevron-right-BZxMwjV4.js";import"./file-text-DkYa2lRa.js";import"./index-B2WO6HMh.js";import"./index-DzDddJKI.js";import"./check-iTPGTtBJ.js";function oe({user:p,trends:r,filters:N,principalAcademicLevel:a,strands:x}){const[l,b]=j.useState(N.strand_id||""),[i,w]=j.useState(N.year||"");j.useEffect(()=>{console.log("[Principal Reports] Grade Trends - Component Render",{principalAcademicLevel:a,academicLevelKey:a==null?void 0:a.key,academicLevelName:a==null?void 0:a.name,shouldShowStrand:(a==null?void 0:a.key)==="senior_highschool",strandsCount:(x==null?void 0:x.length)||0})},[a,x]);const u=(a==null?void 0:a.key)==="senior_highschool",S=s=>s.total_grades>0?s.passing_count/s.total_grades*100:0,C=s=>s>=90?"text-green-600":s>=80?"text-blue-600":s>=75?"text-yellow-600":"text-red-600",_=s=>s>=90?e.jsx(m,{variant:"default",className:"bg-green-100 text-green-800",children:"Excellent"}):s>=80?e.jsx(m,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"Good"}):s>=75?e.jsx(m,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:"Passing"}):e.jsx(m,{variant:"destructive",children:"Below Average"});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(T,{user:p}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(P,{user:p}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(k,{href:route("principal.reports.index"),children:e.jsxs(h,{variant:"outline",size:"sm",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Back to Reports"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Grade Trends Analysis"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Track grade trends over time and identify patterns in academic performance."})]})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Periods"}),e.jsx("p",{className:"text-2xl font-bold",children:r.length})]})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overall Average"}),e.jsx("p",{className:"text-2xl font-bold",children:r.length>0?(r.reduce((s,t)=>s+t.average_grade,0)/r.length).toFixed(2):"0.00"})]})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Grades"}),e.jsx("p",{className:"text-2xl font-bold",children:r.reduce((s,t)=>s+t.total_grades,0)})]})]})})})]}),e.jsxs(n,{children:[e.jsx(c,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(d,{children:e.jsxs("div",{className:`grid gap-4 ${u?"md:grid-cols-3":"md:grid-cols-2"}`,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Academic Level"}),e.jsx("div",{className:"flex h-10 w-full items-center rounded-md border border-input bg-gray-50 px-3 py-2 text-sm",children:(a==null?void 0:a.name)||"Not Assigned"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Reports are filtered by your assigned academic level"})]}),u&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Strand"}),e.jsxs(F,{value:l,onValueChange:b,children:[e.jsx(E,{children:e.jsx(B,{placeholder:"All strands"})}),e.jsxs(U,{children:[e.jsx(y,{value:"all",children:"All strands"}),x.map(s=>e.jsx(y,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"School Year"}),e.jsx(R,{placeholder:"e.g., 2024-2025",value:i,onChange:s=>w(s.target.value)})]})]})})]}),e.jsxs(n,{children:[e.jsx(c,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Export Options"]})}),e.jsx(d,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(h,{className:"flex items-center gap-2",onClick:()=>{const s=new URLSearchParams;l&&l!=="all"&&s.append("strand_id",l),i&&s.append("year",i),window.location.href=route("principal.reports.grade-trends.export",{format:"pdf"})+"?"+s.toString()},children:[e.jsx(g,{className:"h-4 w-4"}),"Export to PDF"]}),e.jsxs(h,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{const s=new URLSearchParams;l&&l!=="all"&&s.append("strand_id",l),i&&s.append("year",i),window.location.href=route("principal.reports.grade-trends.export",{format:"excel"})+"?"+s.toString()},children:[e.jsx(g,{className:"h-4 w-4"}),"Export to Excel"]}),e.jsxs(h,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{const s=new URLSearchParams;l&&l!=="all"&&s.append("strand_id",l),i&&s.append("year",i),window.location.href=route("principal.reports.grade-trends.export",{format:"csv"})+"?"+s.toString()},children:[e.jsx(g,{className:"h-4 w-4"}),"Export to CSV"]})]})})]}),e.jsxs(n,{children:[e.jsx(c,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"Grade Trends Visualization"]})}),e.jsx(d,{children:e.jsx("div",{className:"h-64 bg-gray-50 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Chart visualization would be implemented here"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Using libraries like Chart.js or Recharts"})]})})})]}),e.jsxs(n,{children:[e.jsx(c,{children:e.jsx(o,{children:"Trends by Grading Period"})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[r.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium",children:s.gradingPeriod.name}),e.jsx("span",{className:`text-lg font-bold ${C(s.average_grade)}`,children:s.average_grade.toFixed(2)}),_(s.average_grade)]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Total Grades:"})," ",s.total_grades]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Passing:"})," ",s.passing_count]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Passing Rate:"})," ",S(s).toFixed(1),"%"]})]})]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(m,{variant:"outline",children:["Period ",t+1]})})]},s.grading_period_id)),r.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(v,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No trend data available for the selected criteria."})]})]})})]}),e.jsxs(n,{children:[e.jsx(c,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"}),"Analysis Summary"]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Performance Insights"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["• Average grade across all periods: ",r.length>0?(r.reduce((s,t)=>s+t.average_grade,0)/r.length).toFixed(2):"N/A"]}),e.jsxs("p",{children:["• Total grades analyzed: ",r.reduce((s,t)=>s+t.total_grades,0)]}),e.jsxs("p",{children:["• Overall passing rate: ",r.length>0?(r.reduce((s,t)=>s+t.passing_count,0)/r.reduce((s,t)=>s+t.total_grades,0)*100).toFixed(1):"0.0","%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Recommendations"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("p",{children:"• Monitor periods with below-average performance"}),e.jsx("p",{children:"• Identify subjects that may need additional support"}),e.jsx("p",{children:"• Track improvement trends over time"})]})]})]})})]})]})})]})]})}export{oe as default};
