import{c as le,r as p,m as k,j as e,S as b}from"./app-BAqdKzRe.js";import{H as ie}from"./header-CEJziK0e.js";import{S as ne}from"./sidebar-CdX2pZqj.js";import{C as f,a as v,b as ce,c as re}from"./card-DGY5CJ_r.js";import{B as r}from"./button-Dgg7RRwo.js";import{S as $,a as F,b as I,c as V,d as z}from"./select-Dcc-Dx3t.js";import{T as de,a as oe,b as E,c as d,d as me,e as o}from"./table-yrpJZNQ9.js";import{B as y}from"./badge-YBJD95uJ.js";import{A as R}from"./arrow-left-DiqEuVbo.js";import{S as xe}from"./school-yypivLDO.js";import{B as he}from"./book-open-DabesNP2.js";import{G as ue}from"./graduation-cap-BX1Tk1aW.js";import{U as pe}from"./users-CESPBb3S.js";import{D as L}from"./download-DJ70sEJE.js";import{P as ge}from"./printer-v8_CGA0l.js";import{F as je}from"./file-text-BO1PkwG_.js";/* empty css            */import"./dropdown-menu-CQybs8HY.js";import"./Combination-5NOhm_Dh.js";import"./index-C93lzRn6.js";import"./separator-Fvi83ylw.js";import"./chevron-right-NaQOr08x.js";import"./crown-CxBrFsG-.js";import"./building-2-CPSBYG04.js";import"./user-cog-D-DhTw5L.js";import"./user-check-BF__2MmM.js";import"./notebook-sAwri7zu.js";import"./chart-no-axes-column-increasing--35YS0DA.js";import"./shield-xARMtr3L.js";import"./index-CUG4Z3Ar.js";import"./index-BCRj5jkI.js";import"./check-CCJHJr9p.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ve=le("Package",fe),S=[{key:"elementary",name:"Elementary",icon:xe,color:"bg-blue-500 hover:bg-blue-600",iconColor:"text-blue-600"},{key:"junior_highschool",name:"Junior High School",icon:he,color:"bg-green-500 hover:bg-green-600",iconColor:"text-green-600"},{key:"senior_highschool",name:"Senior High School",icon:ue,color:"bg-orange-500 hover:bg-orange-600",iconColor:"text-orange-600"},{key:"college",name:"College",icon:pe,color:"bg-purple-500 hover:bg-purple-600",iconColor:"text-purple-600"}];function cs({user:w,academicLevels:_,honorTypes:ye=[],templates:M,allHonors:N=[],generatedCertificates:m=[],schoolYears:g,currentSchoolYear:U,stats:_e}){var P,H;const[n,C]=p.useState(null),[x,O]=p.useState(U||(g==null?void 0:g[0])||"2024-2025"),[u,T]=p.useState(""),[i,j]=p.useState([]),[Ne,ke]=p.useState([]),[be,Se]=p.useState(!1),{data:we,setData:q,post:J,processing:K}=k({student_id:"",template_id:"",academic_level_id:"",school_year:x}),{data:Ce,setData:Q,post:W,processing:G}=k({student_ids:[],template_id:"",academic_level_id:"",school_year:x}),{data:Te,setData:X,post:Z,processing:A}=k({certificate_ids:[]}),B=s=>N.length?N.filter(t=>t&&t.academic_level&&t.academic_level.key===s&&t.school_year===x).sort((t,a)=>t.year_level!==a.year_level?(t.year_level||"").localeCompare(a.year_level||""):t.section_id!==a.section_id?(t.section_id||0)-(a.section_id||0):(a.gpa||0)-(t.gpa||0)):[],Y=s=>{const t=_.find(a=>a.key===s);return t?M.filter(a=>a.academic_level_id===t.id&&a.is_active):[]},ee=s=>{q({student_id:s.student.id.toString(),template_id:u,academic_level_id:s.academic_level.id.toString(),school_year:x}),J(route("admin.academic.certificates.generate"),{onSuccess:()=>{b.reload()}})},se=()=>{if(i.length===0||!u)return;const s=_.find(t=>t.key===n);s&&(Q({student_ids:i,template_id:u,academic_level_id:s.id.toString(),school_year:x}),W(route("admin.academic.certificates.generate-bulk"),{onSuccess:()=>{j([]),b.reload()}}))},te=s=>{j(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},D=()=>{const t=B(n).map(a=>a.student.id);j(i.length===t.length?[]:t)},h=n?B(n):[],ae=n?Y(n):[];return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(ne,{user:w}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(ie,{user:w}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>b.get("/admin/academic"),children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Back to Academic"]})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Certificate Management"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Generate and manage honor certificates by academic level."})]}),e.jsx(f,{children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"School Year:"}),e.jsxs($,{value:x,onValueChange:O,children:[e.jsx(F,{className:"w-40",children:e.jsx(I,{})}),e.jsx(V,{children:g.map(s=>e.jsx(z,{value:s,children:s},s))})]})]})})}),n?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(r,{variant:"outline",onClick:()=>{C(null),j([]),T("")},children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Back to Categories"]}),e.jsxs("h2",{className:"text-2xl font-bold",children:[(P=S.find(s=>s.key===n))==null?void 0:P.name," Honor Students"]}),e.jsxs(y,{variant:"outline",children:[h.length," students"]})]})}),e.jsxs(f,{children:[e.jsx(ce,{children:e.jsx(re,{children:"Certificate Generation"})}),e.jsx(v,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Certificate Template"}),e.jsxs($,{value:u,onValueChange:T,children:[e.jsx(F,{children:e.jsx(I,{placeholder:"Choose a template..."})}),e.jsx(V,{children:ae.map(s=>e.jsx(z,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outline",onClick:D,disabled:h.length===0,children:i.length===h.length?"Deselect All":"Select All"}),e.jsx(r,{onClick:se,disabled:i.length===0||!u||G,className:"bg-green-600 hover:bg-green-700 text-white",children:G?"Generating...":`Generate ${i.length} Certificates`}),e.jsxs(r,{variant:"outline",onClick:()=>{const s=h.filter(t=>i.includes(t.student.id)).map(t=>{const a=m==null?void 0:m.find(l=>l.student.id===t.student.id&&l.academicLevel.id===t.academic_level.id);return a==null?void 0:a.id}).filter(Boolean);s.length>0&&(X({certificate_ids:s}),Z(route("admin.academic.certificates.bulk-print-pdf")))},disabled:i.length===0||A,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),A?"Preparing...":`Download ${i.length} Certificates`]}),e.jsxs(r,{variant:"outline",onClick:()=>{var s;return window.open(`/admin/academic/certificates/honor-roll/pdf?academic_level_id=${(s=_.find(t=>t.key===n))==null?void 0:s.id}&school_year=${x}`,"_blank")},children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Honor Roll PDF"]})]})]})})]}),e.jsx(f,{children:e.jsx(v,{children:h.length>0?e.jsxs(de,{children:[e.jsx(oe,{children:e.jsxs(E,{children:[e.jsx(d,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:i.length===h.length&&h.length>0,onChange:D})}),e.jsx(d,{children:"Rank"}),e.jsx(d,{children:"Student Name"}),e.jsx(d,{children:"Student Number"}),e.jsx(d,{children:"Year Level"}),e.jsx(d,{children:"Section"}),e.jsx(d,{children:"Honor Type"}),e.jsx(d,{children:"GPA"}),e.jsx(d,{children:"Certificate"}),e.jsx(d,{children:"Actions"})]})}),e.jsx(me,{children:h.map((s,t)=>{var a;return!s||!s.student?null:e.jsxs(E,{children:[e.jsx(o,{children:e.jsx("input",{type:"checkbox",checked:i.includes(s.student.id),onChange:()=>te(s.student.id)})}),e.jsxs(o,{className:"font-medium",children:["#",t+1]}),e.jsx(o,{className:"font-medium",children:s.student.name}),e.jsx(o,{children:s.student.student_number||"N/A"}),e.jsx(o,{children:s.year_level||s.student.year_level||"N/A"}),e.jsx(o,{children:s.section_id||s.student.section_id||"N/A"}),e.jsx(o,{children:e.jsx(y,{variant:"secondary",children:((a=s.honor_type)==null?void 0:a.name)||"Unknown Honor"})}),e.jsx(o,{className:"font-mono",children:s.gpa?s.gpa.toFixed(2):"N/A"}),e.jsx(o,{children:(()=>{const l=m==null?void 0:m.find(c=>c.student.id===s.student.id&&c.academic_level.id===s.academic_level.id&&c.school_year===s.school_year);return l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{variant:"default",className:"text-xs",children:"Generated"}),e.jsx("span",{className:"text-xs text-gray-500",children:l.serial_number})]}):e.jsx(y,{variant:"outline",className:"text-xs",children:"Pending"})})()}),e.jsx(o,{children:e.jsx("div",{className:"flex gap-1",children:(()=>{const l=m==null?void 0:m.find(c=>c.student.id===s.student.id&&c.academic_level.id===s.academic_level.id&&c.school_year===s.school_year);return l?e.jsxs(e.Fragment,{children:[e.jsx(r,{size:"sm",variant:"outline",onClick:()=>window.open(`/admin/academic/certificates/${l.id}/download`,"_blank"),className:"h-8 px-2",children:e.jsx(L,{className:"h-3 w-3"})}),e.jsx(r,{size:"sm",variant:"outline",onClick:()=>window.open(`/admin/academic/certificates/${l.id}/print`,"_blank"),className:"h-8 px-2",children:e.jsx(ge,{className:"h-3 w-3"})})]}):e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>ee(s),disabled:!u||K,className:"h-8 px-2",children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),"Generate"]})})()})})]},s.id||t)})})]}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Honor Students Found"}),e.jsxs("p",{className:"text-sm",children:["No approved honor students for ",(H=S.find(s=>s.key===n))==null?void 0:H.name," in ",x,"."]})]})})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:S.map(s=>{const t=s.icon,a=N.filter(l=>{var c;return((c=l==null?void 0:l.academic_level)==null?void 0:c.key)===s.key&&l.school_year===x}).length;return e.jsx(f,{className:"cursor-pointer transition-all hover:shadow-lg",onClick:()=>C(s.key),children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-full bg-gray-100",children:e.jsx(t,{className:`h-8 w-8 ${s.iconColor}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a," honor students"]})]}),e.jsx(r,{className:`w-full ${s.color} text-white`,children:"View Students"})]})})},s.key)})})]})})]})]})}export{cs as default};
