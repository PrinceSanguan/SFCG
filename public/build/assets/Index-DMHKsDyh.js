import{u as dl,r as p,K as tl,m as X,j as e,$ as nl}from"./app-CgPPdIC1.js";import{T as V}from"./index-CtBsO7PD.js";import{B as W}from"./button-BiWMOtaD.js";import{C as O,a as P,b as Q,c as Z}from"./card-C7AwRruy.js";import{L as x}from"./label-BpwX8uAv.js";import{S as u,a as _,b as R,c as j,d as n}from"./select-CtRiSvFC.js";import{T as ol,a as cl,b as ee,c as le}from"./tabs-CDVVzZu0.js";import{C as z}from"./checkbox-CXRHCqdW.js";import{S as hl,H as ml}from"./sidebar-Bstwh0vB.js";import{U as je}from"./users-DK1ukhgo.js";import{G as gl}from"./graduation-cap-BEXWMXbs.js";import{A as pe}from"./award-CBGCifGz.js";import{F as Y}from"./file-text-DxxUAOyG.js";import{A as ve,F as re,a as Ne}from"./file-x-tmhqzmX2.js";import{D as fe}from"./download-DRCxVp6z.js";/* empty css            */import"./index-BP4p-C9O.js";import"./Combination-CMBXQBIk.js";import"./index-BFm4cbza.js";import"./index-BWM1Q0Nf.js";import"./check-DXQupfFC.js";import"./dropdown-menu-BSVGAHQI.js";import"./separator-Cn1J9wYo.js";import"./chevron-right-Cw-6FhuX.js";import"./crown-BiK_Sh0_.js";import"./building-2-D4CLGJuS.js";import"./user-cog-Br-S-g-n.js";import"./book-open-BRVMbNf0.js";import"./user-check-DtKbtoO-.js";import"./notebook-xUBK6Gwq.js";import"./chart-no-axes-column-increasing-lCTZ5xo9.js";function Kl({user:Se,academicLevels:y,schoolYears:k,currentSchoolYear:J,gradingPeriods:be,honorTypes:ke,sections:G,tracks:$,strands:w,departments:q,courses:D,stats:K}){var Ce;const{addToast:T}=dl(),[we,De]=p.useState("grade-reports"),[ae,U]=p.useState([]),[xl,Fe]=p.useState([]),[Ve,se]=p.useState([]),[ul,Le]=p.useState([]),[He,ie]=p.useState([]),[de,te]=p.useState([]),[_l,Oe]=p.useState([]),[Pe,ne]=p.useState([]),[Rl,Ye]=p.useState([]),[$e,oe]=p.useState([]),[ce,he]=p.useState([]),[qe,Ue]=p.useState([]),[Me,me]=p.useState([]),[Be,We]=p.useState([]),[ze,ge]=p.useState([]),[xe,ye]=p.useState([]),[Je,Ae]=p.useState([]),[Ke,ue]=p.useState([]),[Xe,Ee]=p.useState([]),[Qe,_e]=p.useState([]),{props:Ze}=tl(),F=Ze.csrf_token||((Ce=document.querySelector('meta[name="csrf-token"]'))==null?void 0:Ce.content)||"",[L,H]=p.useState(!1),{data:g,setData:E,processing:Ie}=X({academic_level_id:"all",grading_period_id:"all",school_year:J||k[0]||"",year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:"all",format:"pdf",include_statistics:"1"}),{data:m,setData:C,processing:Ge}=X({academic_level_id:"all",school_year:J||k[0]||"",honor_type_id:"all",year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:"all",format:"pdf"}),{data:c,setData:A,processing:Te}=X({academic_level_id:"",school_year:k[0]||"",year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:"all",include_grades:"1",include_honors:"1",include_certificates:"1",format:"excel"}),{data:o,setData:N,processing:el}=X({academic_level_id:"",year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:"all",school_year:J||k[0]||"",include_grades:!1,format:"pdf"});p.useEffect(()=>{console.log("=== [REGISTRAR] CLASS SECTION REPORT - PAGE LOADED ==="),console.log("[REGISTRAR] Available Academic Levels:",y),console.log("[REGISTRAR] Available School Years:",k),console.log("[REGISTRAR] Current School Year:",J),console.log("[REGISTRAR] Initial Section Data:",o),console.log("[REGISTRAR] Available Sections:",G),console.log("[REGISTRAR] Available Tracks:",$),console.log("[REGISTRAR] Available Strands:",w),console.log("[REGISTRAR] Available Departments:",q),console.log("[REGISTRAR] Available Courses:",D)},[]),p.useEffect(()=>{console.log("=== [REGISTRAR] CLASS SECTION FILTER TRIGGERED ==="),console.log("[REGISTRAR] Form Data:",{academic_level_id:o.academic_level_id,year_level:o.year_level,track_id:o.track_id,strand_id:o.strand_id,department_id:o.department_id,course_id:o.course_id,school_year:o.school_year}),console.log("[REGISTRAR] Total available sections:",G.length),console.log("[REGISTRAR] Sample sections:",G.slice(0,3).map(t=>({id:t.id,name:t.name,academic_level_id:t.academic_level_id,year_level:t.specific_year_level,track_id:t.track_id,strand_id:t.strand_id,department_id:t.department_id,course_id:t.course_id,school_year:t.school_year})));const a=G.filter(t=>{const s=y.find(l=>l.key==="college");return s&&t.academic_level_id===s.id});if(a.length>0&&(console.log("[REGISTRAR] College Sections Table:"),console.table(a.map(t=>({ID:t.id,Name:t.name,Year:t.specific_year_level,Dept:t.department_id,Course:t.course_id,"School Year":t.school_year})))),!o.academic_level_id){U([]),Fe([]),se([]),Le([]),ie([]);return}const d=parseInt(o.academic_level_id),r=y.find(t=>t.id===d);if(console.log("[REGISTRAR] Selected Level:",r),!r){U([]);return}let i=G.filter(t=>t.academic_level_id===d);if(console.log("[REGISTRAR] After academic level filter:",i.length,"sections"),o.school_year&&i.length>0){const t=i.length;i=i.filter(s=>{const l=s.school_year;return!l||l===o.school_year}),console.log(`[REGISTRAR] After school year filter (${o.school_year}):`,i.length,"sections (removed",t-i.length,"sections)")}if(o.year_level){const t=i.length;i=i.filter(s=>s.specific_year_level===o.year_level),console.log(`[REGISTRAR] After year level filter (${o.year_level}):`,i.length,"sections (removed",t-i.length,"sections)")}if(r.key==="senior_highschool"){if(o.track_id){const t=i.length;i=i.filter(s=>{var l;return((l=s.track_id)==null?void 0:l.toString())===o.track_id}),console.log(`[REGISTRAR] After track filter (${o.track_id}):`,i.length,"sections (removed",t-i.length,"sections)")}if(o.strand_id){const t=i.length;i=i.filter(s=>{var l;return((l=s.strand_id)==null?void 0:l.toString())===o.strand_id}),console.log(`[REGISTRAR] After strand filter (${o.strand_id}):`,i.length,"sections (removed",t-i.length,"sections)")}}if(r.key==="college"){if(o.department_id){const t=i.length;console.log("[REGISTRAR] === DEPARTMENT FILTER DEBUG ==="),console.log("[REGISTRAR] Looking for department_id:",o.department_id,`(type: ${typeof o.department_id})`),console.log("[REGISTRAR] Sample sections before department filter:",i.slice(0,3).map(s=>{var l,h;return{id:s.id,name:s.name,department_id:s.department_id,department_id_type:typeof s.department_id,toString:(l=s.department_id)==null?void 0:l.toString(),matches:((h=s.department_id)==null?void 0:h.toString())===o.department_id}})),i=i.filter(s=>{var h;const l=((h=s.department_id)==null?void 0:h.toString())===o.department_id;return!l&&s.department_id&&console.log(`[REGISTRAR] Section "${s.name}" filtered out: department_id ${s.department_id} (${typeof s.department_id}) !== ${o.department_id} (${typeof o.department_id})`),l}),console.log(`[REGISTRAR] After department filter (${o.department_id}):`,i.length,"sections (removed",t-i.length,"sections)"),i.length===0&&t>0&&(console.error("[REGISTRAR] ⚠️ DEPARTMENT FILTER ELIMINATED ALL SECTIONS!"),console.log("[REGISTRAR] Check if sections have department_id property and if values match"))}if(o.course_id){const t=i.length;console.log("[REGISTRAR] === COURSE FILTER DEBUG ==="),console.log("[REGISTRAR] Looking for course_id:",o.course_id,`(type: ${typeof o.course_id})`),console.log("[REGISTRAR] Sample sections before course filter:",i.slice(0,3).map(s=>{var l,h;return{id:s.id,name:s.name,course_id:s.course_id,course_id_type:typeof s.course_id,toString:(l=s.course_id)==null?void 0:l.toString(),matches:((h=s.course_id)==null?void 0:h.toString())===o.course_id}})),i=i.filter(s=>{var h;const l=((h=s.course_id)==null?void 0:h.toString())===o.course_id;return!l&&s.course_id&&console.log(`[REGISTRAR] Section "${s.name}" filtered out: course_id ${s.course_id} (${typeof s.course_id}) !== ${o.course_id} (${typeof o.course_id})`),l}),console.log(`[REGISTRAR] After course filter (${o.course_id}):`,i.length,"sections (removed",t-i.length,"sections)"),i.length===0&&t>0&&(console.error("[REGISTRAR] ⚠️ COURSE FILTER ELIMINATED ALL SECTIONS!"),console.log("[REGISTRAR] Check if sections have course_id property and if values match"))}}console.log("[REGISTRAR] === FINAL FILTERED SECTIONS ==="),console.log("[REGISTRAR] Count:",i.length),i.length===0?(console.warn("[REGISTRAR] ⚠️ WARNING: No sections matched the filters!"),console.log("[REGISTRAR] Debugging tips:"),console.log("[REGISTRAR] 1. Check if sections exist for this academic level"),console.log("[REGISTRAR] 2. Try removing filters one by one to find which filter eliminates all sections"),console.log("[REGISTRAR] 3. Check section properties match your filter values")):console.log("[REGISTRAR] Filtered sections:",i.map(t=>({id:t.id,name:t.name,year_level:t.specific_year_level,track_id:t.track_id,strand_id:t.strand_id,department_id:t.department_id,course_id:t.course_id}))),U(i)},[o.academic_level_id,o.year_level,o.track_id,o.strand_id,o.department_id,o.course_id,o.school_year,G,y]),p.useEffect(()=>{if(o.track_id){const a=parseInt(o.track_id),d=w.filter(r=>r.track_id===a);console.log("[REGISTRAR] Filtered Strands for Track:",d),se(d)}else se([])},[o.track_id,w]),p.useEffect(()=>{if(o.department_id){const a=parseInt(o.department_id),d=D.filter(r=>r.department_id===a);console.log("[REGISTRAR] Filtered Courses for Department:",d),ie(d)}else ie([])},[o.department_id,D]),p.useEffect(()=>{if(console.log("=== [REGISTRAR] HONOR STATISTICS FILTER TRIGGERED ==="),console.log("[REGISTRAR HONOR] Academic Level ID:",m.academic_level_id),!m.academic_level_id||m.academic_level_id==="all"){te([]),Oe([]),ne([]),Ye([]),oe([]);return}const a=parseInt(m.academic_level_id),d=y.find(i=>i.id===a);if(console.log("[REGISTRAR HONOR] Selected Level:",d),!d){te([]);return}let r=G.filter(i=>i.academic_level_id===a);m.year_level&&(r=r.filter(i=>i.specific_year_level===m.year_level)),d.key==="senior_highschool"&&(m.track_id&&(r=r.filter(i=>{var t;return((t=i.track_id)==null?void 0:t.toString())===m.track_id})),m.strand_id&&(r=r.filter(i=>{var t;return((t=i.strand_id)==null?void 0:t.toString())===m.strand_id}))),d.key==="college"&&(m.department_id&&(r=r.filter(i=>{var t;return((t=i.department_id)==null?void 0:t.toString())===m.department_id})),m.course_id&&(r=r.filter(i=>{var t;return((t=i.course_id)==null?void 0:t.toString())===m.course_id}))),te(r)},[m.academic_level_id,m.year_level,m.track_id,m.strand_id,m.department_id,m.course_id,G,y]),p.useEffect(()=>{if(m.track_id){const a=parseInt(m.track_id),d=w.filter(r=>r.track_id===a);ne(d)}else ne([])},[m.track_id,w]),p.useEffect(()=>{if(m.department_id){const a=parseInt(m.department_id),d=D.filter(r=>r.department_id===a);oe(d)}else oe([])},[m.department_id,D]),p.useEffect(()=>{if(console.log("=== [REGISTRAR] GRADE REPORTS FILTER TRIGGERED ==="),console.log("[REGISTRAR GRADE] Academic Level ID:",g.academic_level_id),!g.academic_level_id||g.academic_level_id==="all"){he([]),Ue([]),me([]),We([]),ge([]);return}const a=parseInt(g.academic_level_id),d=y.find(i=>i.id===a);if(console.log("[REGISTRAR GRADE] Selected Level:",d),!d){he([]);return}let r=G.filter(i=>i.academic_level_id===a);g.year_level&&(r=r.filter(i=>i.specific_year_level===g.year_level)),d.key==="senior_highschool"&&(g.track_id&&(r=r.filter(i=>{var t;return((t=i.track_id)==null?void 0:t.toString())===g.track_id})),g.strand_id&&(r=r.filter(i=>{var t;return((t=i.strand_id)==null?void 0:t.toString())===g.strand_id}))),d.key==="college"&&(g.department_id&&(r=r.filter(i=>{var t;return((t=i.department_id)==null?void 0:t.toString())===g.department_id})),g.course_id&&(r=r.filter(i=>{var t;return((t=i.course_id)==null?void 0:t.toString())===g.course_id}))),he(r)},[g.academic_level_id,g.year_level,g.track_id,g.strand_id,g.department_id,g.course_id,G,y]),p.useEffect(()=>{if(g.track_id){const a=parseInt(g.track_id),d=w.filter(r=>r.track_id===a);me(d)}else me([])},[g.track_id,w]),p.useEffect(()=>{if(g.department_id){const a=parseInt(g.department_id),d=D.filter(r=>r.department_id===a);ge(d)}else ge([])},[g.department_id,D]),p.useEffect(()=>{if(console.log("=== [REGISTRAR] ARCHIVE FILTER TRIGGERED ==="),console.log("[REGISTRAR ARCHIVE] Academic Level ID:",c.academic_level_id),!c.academic_level_id){ye([]),Ae([]),ue([]),Ee([]),_e([]);return}const a=parseInt(c.academic_level_id),d=y.find(i=>i.id===a);if(!d){console.log("[REGISTRAR ARCHIVE] Selected level not found");return}console.log("[REGISTRAR ARCHIVE] Selected Level:",d.name,d.key);let r=G.filter(i=>i.academic_level_id===a);console.log("[REGISTRAR ARCHIVE] Sections for level:",r.length),d.key==="senior_highschool"&&(console.log("[REGISTRAR ARCHIVE] Processing SHS filters"),Ae($),c.track_id&&(console.log("[REGISTRAR ARCHIVE] Filtering by Track ID:",c.track_id),r=r.filter(i=>{var t;return((t=i.track_id)==null?void 0:t.toString())===c.track_id})),c.strand_id&&(console.log("[REGISTRAR ARCHIVE] Filtering by Strand ID:",c.strand_id),r=r.filter(i=>{var t;return((t=i.strand_id)==null?void 0:t.toString())===c.strand_id})),c.year_level&&(console.log("[REGISTRAR ARCHIVE] Filtering by Year Level:",c.year_level),r=r.filter(i=>i.specific_year_level===c.year_level))),d.key==="college"&&(console.log("[REGISTRAR ARCHIVE] Processing College filters"),Ee(q),c.department_id&&(console.log("[REGISTRAR ARCHIVE] Filtering by Department ID:",c.department_id),r=r.filter(i=>{var t;return((t=i.department_id)==null?void 0:t.toString())===c.department_id})),c.course_id&&(console.log("[REGISTRAR ARCHIVE] Filtering by Course ID:",c.course_id),r=r.filter(i=>{var t;return((t=i.course_id)==null?void 0:t.toString())===c.course_id})),c.year_level&&(console.log("[REGISTRAR ARCHIVE] Filtering by Year Level:",c.year_level),r=r.filter(i=>i.specific_year_level===c.year_level))),(d.key==="elementary"||d.key==="junior_highschool")&&(console.log("[REGISTRAR ARCHIVE] Processing Elementary/JHS filters"),c.year_level&&(console.log("[REGISTRAR ARCHIVE] Filtering by Year Level:",c.year_level),r=r.filter(i=>i.specific_year_level===c.year_level))),console.log("[REGISTRAR ARCHIVE] Final filtered sections:",r.length),ye(r)},[c.academic_level_id,c.year_level,c.track_id,c.strand_id,c.department_id,c.course_id,G,y,$,q]),p.useEffect(()=>{if(c.track_id){const a=parseInt(c.track_id),d=w.filter(r=>r.track_id===a);ue(d)}else ue([])},[c.track_id,w]),p.useEffect(()=>{if(c.department_id){const a=parseInt(c.department_id),d=D.filter(r=>r.department_id===a);_e(d)}else _e([])},[c.department_id,D]);const ll=a=>{if(console.log("[REGISTRAR] === GRADE REPORT SUBMISSION STARTED ==="),a.preventDefault(),!F){console.error("[REGISTRAR] CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}if(!g.school_year){console.error("[REGISTRAR] School year not selected"),alert("Please select a school year.");return}console.log("[REGISTRAR] Grade report data:",g),console.log("[REGISTRAR] Route URL:",V("registrar.reports.grade-report")),H(!0);let d=document.getElementById("download-iframe");d?(d.name="download-iframe",console.log("[REGISTRAR] Using existing download iframe, name set to:",d.name)):(d=document.createElement("iframe"),d.id="download-iframe",d.name="download-iframe",d.style.display="none",document.body.appendChild(d),console.log("[REGISTRAR] Created download iframe with name:",d.name));const r=document.createElement("form");r.method="POST",r.action=V("registrar.reports.grade-report"),r.target="download-iframe";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=F,r.appendChild(i),Object.entries(g).forEach(([t,s])=>{const l=document.createElement("input");l.type="hidden",l.name=t,l.value=(s==null?void 0:s.toString())||"",r.appendChild(l)}),d.onload=()=>{var t,s,l,h,b;console.log("[REGISTRAR] Iframe loaded at:",new Date().toISOString());try{const I=d.contentDocument||((t=d.contentWindow)==null?void 0:t.document);if(I){const v=I.body;if(v==null?void 0:v.querySelector('[data-error-type="no-data"]')){const S=((l=(s=v==null?void 0:v.querySelector(".error-title"))==null?void 0:s.textContent)==null?void 0:l.trim())||"No data found",M=((b=(h=v==null?void 0:v.querySelector(".error-message"))==null?void 0:h.textContent)==null?void 0:b.trim())||"Please adjust your filters and try again.";console.warn("[REGISTRAR] No data found:",S),T(`${S} ${M}`,"warning",{duration:5e3}),setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed after error detection"))},100);return}T("Report generated successfully! Download should start automatically.","success",{duration:3e3})}}catch(I){console.log("[REGISTRAR] Could not access iframe content (normal for downloads):",I),T("Report generated! Check your downloads folder.","success",{duration:3e3})}setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed from body after iframe load"))},100)},document.body.appendChild(r),console.log("[REGISTRAR] Form appended to body"),setTimeout(()=>{console.log("[REGISTRAR] Submitting form to iframe:",r.target),r.submit(),console.log("[REGISTRAR] Form submitted at:",new Date().toISOString())},50),setTimeout(()=>{H(!1)},2e3)},rl=a=>{if(console.log("[REGISTRAR] === HONOR STATISTICS SUBMISSION STARTED ==="),a.preventDefault(),!F){console.error("[REGISTRAR] CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}if(console.log("[REGISTRAR] Honor statistics data:",m),console.log("[REGISTRAR] Route URL:",V("registrar.reports.honor-statistics")),!m.school_year){console.error("[REGISTRAR] School year is required"),alert("Please select a school year before generating the report.");return}H(!0);let d=document.getElementById("download-iframe");d?(d.name="download-iframe",console.log("[REGISTRAR] Using existing download iframe, name set to:",d.name)):(d=document.createElement("iframe"),d.id="download-iframe",d.name="download-iframe",d.style.display="none",document.body.appendChild(d),console.log("[REGISTRAR] Created download iframe with name:",d.name));const r=document.createElement("form");r.method="POST",r.action=V("registrar.reports.honor-statistics"),r.target="download-iframe",console.log("[REGISTRAR] Form action URL:",r.action),console.log("[REGISTRAR] Form target:",r.target);const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=F,r.appendChild(i);const t={};Object.entries(m).forEach(([s,l])=>{const h=document.createElement("input");h.type="hidden",h.name=s,typeof l=="boolean"?h.value=l?"1":"0":h.value=(l==null?void 0:l.toString())||"",t[s]=h.value,r.appendChild(h)}),console.log("[REGISTRAR] Form data being submitted:",t),d.onload=()=>{var s,l,h,b,I;console.log("[REGISTRAR] Iframe loaded at:",new Date().toISOString());try{const v=d.contentDocument||((s=d.contentWindow)==null?void 0:s.document);if(v){const f=v.body,S=(f==null?void 0:f.textContent)||"";if(console.log("[REGISTRAR] Iframe body content length:",S.length),console.log("[REGISTRAR] Iframe body preview:",S.substring(0,500)),f==null?void 0:f.querySelector('[data-error-type="no-data"]')){const B=((h=(l=f==null?void 0:f.querySelector(".error-title"))==null?void 0:l.textContent)==null?void 0:h.trim())||"No data found",Re=((I=(b=f==null?void 0:f.querySelector(".error-message"))==null?void 0:b.textContent)==null?void 0:I.trim())||"Please adjust your filters and try again.";console.warn("[REGISTRAR] No data found:",B),T(`${B} ${Re}`,"warning",{duration:5e3}),setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed after error detection"))},100);return}S.includes("error")||S.includes("Error")||S.includes("Exception")?(console.error("[REGISTRAR] Error detected in response:",S.substring(0,1e3)),T("An error occurred while generating the report. Please check the Laravel logs.","error",{duration:7e3})):T("Report generated successfully! Download should start automatically.","success",{duration:3e3})}}catch(v){console.log("[REGISTRAR] Could not access iframe content (this is normal for successful downloads):",v),T("Report generated! Check your downloads folder.","success",{duration:3e3})}setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed from body after iframe load"))},100)},document.body.appendChild(r),console.log("[REGISTRAR] Form appended to body"),setTimeout(()=>{console.log("[REGISTRAR] Submitting form to iframe:",r.target),r.submit(),console.log("[REGISTRAR] Form submitted at:",new Date().toISOString())},50),setTimeout(()=>{console.log("[REGISTRAR] Resetting loading state at:",new Date().toISOString()),H(!1)},3e3)},al=a=>{if(console.log("[REGISTRAR] === ARCHIVE RECORDS SUBMISSION STARTED ==="),a.preventDefault(),!F){console.error("[REGISTRAR] CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}if(console.log("[REGISTRAR] Archive data:",c),console.log("[REGISTRAR] Route URL:",V("registrar.reports.archive-records")),!c.academic_level_id){console.error("[REGISTRAR] Academic level is required"),alert("Please select an academic level before creating the archive.");return}if(!c.school_year){console.error("[REGISTRAR] School year is required"),alert("Please select a school year before creating the archive.");return}if(!c.include_grades&&!c.include_honors&&!c.include_certificates){console.error("[REGISTRAR] No data types selected"),alert("Please select at least one data type to include in the archive (grades, honors, or certificates).");return}H(!0);let d=document.getElementById("download-iframe");d?(d.name="download-iframe",console.log("[REGISTRAR] Using existing download iframe, name set to:",d.name)):(d=document.createElement("iframe"),d.id="download-iframe",d.name="download-iframe",d.style.display="none",document.body.appendChild(d),console.log("[REGISTRAR] Created download iframe with name:",d.name));const r=document.createElement("form");r.method="POST",r.action=V("registrar.reports.archive-records"),r.target="download-iframe",console.log("[REGISTRAR] Form action URL:",r.action),console.log("[REGISTRAR] Form target:",r.target);const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=F,r.appendChild(i);const t={};Object.entries(c).forEach(([s,l])=>{const h=document.createElement("input");h.type="hidden",h.name=s,typeof l=="boolean"?h.value=l?"1":"0":h.value=(l==null?void 0:l.toString())||"",t[s]=h.value,r.appendChild(h)}),console.log("[REGISTRAR] Form data being submitted:",t),d.onload=()=>{var s,l,h,b,I;console.log("[REGISTRAR] Iframe loaded at:",new Date().toISOString());try{const v=d.contentDocument||((s=d.contentWindow)==null?void 0:s.document);if(v){const f=v.body,S=(f==null?void 0:f.textContent)||"";if(console.log("[REGISTRAR] Iframe body content length:",S.length),console.log("[REGISTRAR] Iframe body preview:",S.substring(0,500)),f==null?void 0:f.querySelector('[data-error-type="no-data"]')){const B=((h=(l=f==null?void 0:f.querySelector(".error-title"))==null?void 0:l.textContent)==null?void 0:h.trim())||"No data found",Re=((I=(b=f==null?void 0:f.querySelector(".error-message"))==null?void 0:b.textContent)==null?void 0:I.trim())||"Please adjust your filters and try again.";console.warn("[REGISTRAR] No data found:",B),T(`${B} ${Re}`,"warning",{duration:5e3}),setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed after error detection"))},100);return}S.includes("error")||S.includes("Error")||S.includes("Exception")?(console.error("[REGISTRAR] Error detected in response:",S.substring(0,1e3)),T("An error occurred while creating the archive. Please check the Laravel logs.","error",{duration:7e3})):T("Archive created successfully! Download should start automatically.","success",{duration:3e3})}}catch(v){console.log("[REGISTRAR] Could not access iframe content (this is normal for successful downloads):",v),T("Archive created! Check your downloads folder.","success",{duration:3e3})}setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed from body after iframe load"))},100)},document.body.appendChild(r),console.log("[REGISTRAR] Form appended to body"),setTimeout(()=>{console.log("[REGISTRAR] Submitting form to iframe:",r.target),r.submit(),console.log("[REGISTRAR] Form submitted at:",new Date().toISOString())},50),setTimeout(()=>{console.log("[REGISTRAR] Resetting loading state at:",new Date().toISOString()),H(!1)},3e3)},sl=a=>{if(console.log("=== [REGISTRAR] handleClassSectionReport CALLED ==="),a.preventDefault(),a.stopPropagation(),console.log("=== [REGISTRAR] CLASS SECTION REPORT FORM SUBMISSION ==="),console.log("[REGISTRAR] Form Data:",o),!F){console.error("[REGISTRAR] CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}if(console.log("[REGISTRAR] CSRF Token:",F),!o.academic_level_id){console.error("[REGISTRAR] Validation failed: academic_level_id is required"),alert("Please select an academic level.");return}if(!o.school_year){console.error("[REGISTRAR] Validation failed: school_year is required"),alert("Please select a school year.");return}console.log("[REGISTRAR] Validation passed!"),console.log("[REGISTRAR] Route URL:",V("registrar.reports.class-section-report")),H(!0);let d=document.getElementById("download-iframe");d?(d.name="download-iframe",console.log("[REGISTRAR] Using existing download iframe, name set to:",d.name)):(d=document.createElement("iframe"),d.id="download-iframe",d.name="download-iframe",d.style.display="none",document.body.appendChild(d),console.log("[REGISTRAR] Created download iframe with name:",d.name));const r=document.createElement("form");r.method="POST",r.action=V("registrar.reports.class-section-report"),r.target="download-iframe",console.log("[REGISTRAR] Form action URL:",r.action),console.log("[REGISTRAR] Form target:",r.target);const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=F,r.appendChild(i),Object.entries(o).forEach(([t,s])=>{const l=document.createElement("input");l.type="hidden",l.name=t,t==="include_grades"?l.value=s?"1":"0":l.value=(s==null?void 0:s.toString())||"",r.appendChild(l)}),console.log("[REGISTRAR] Form data being submitted"),d.onload=()=>{var t,s,l,h,b;console.log("[REGISTRAR] Iframe loaded at:",new Date().toISOString());try{const I=d.contentDocument||((t=d.contentWindow)==null?void 0:t.document);if(I){const v=I.body;if(v==null?void 0:v.querySelector('[data-error-type="no-data"]')){const S=((l=(s=v==null?void 0:v.querySelector(".error-title"))==null?void 0:s.textContent)==null?void 0:l.trim())||"No data found",M=((b=(h=v==null?void 0:v.querySelector(".error-message"))==null?void 0:h.textContent)==null?void 0:b.trim())||"Please adjust your filters and try again.";console.warn("[REGISTRAR] No data found:",S),T(`${S} ${M}`,"warning",{duration:5e3}),setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed after error detection"))},100);return}T("Report generated successfully! Download should start automatically.","success",{duration:3e3})}}catch(I){console.log("[REGISTRAR] Could not access iframe content (normal for downloads):",I),T("Report generated! Check your downloads folder.","success",{duration:3e3})}setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed from body after iframe load"))},100)},document.body.appendChild(r),console.log("[REGISTRAR] Form appended to body"),setTimeout(()=>{console.log("[REGISTRAR] Submitting form to iframe:",r.target),r.submit(),console.log("[REGISTRAR] Form submitted at:",new Date().toISOString())},50),setTimeout(()=>{H(!1)},2e3)};p.useEffect(()=>{if(o.academic_level_id){const a=parseInt(o.academic_level_id),d=G.filter(r=>r.academic_level_id===a);U(d)}else U([])},[o.academic_level_id,G]);const il=(()=>{const a=be.filter(r=>r.academic_level_id.toString()===g.academic_level_id||g.academic_level_id==="all");return Array.from(new Map(a.map(r=>[r.id,r])).values()).sort((r,i)=>r.sort_order!==void 0&&i.sort_order!==void 0&&r.sort_order!==i.sort_order?r.sort_order-i.sort_order:r.name.localeCompare(i.name))})();return e.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(hl,{user:Se}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(ml,{user:Se}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 min-h-0",children:e.jsxs("div",{className:"flex flex-col gap-6 pb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Reports & Archiving"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Generate comprehensive reports and archive academic records."})]}),e.jsx(nl,{href:V("registrar.dashboard"),children:e.jsx(W,{variant:"outline",children:"Back to Dashboard"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(je,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:K.total_students})]})]})})}),e.jsx(O,{children:e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(gl,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Periods"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:K.active_periods})]})]})})}),e.jsx(O,{children:e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(pe,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Honors"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:K.total_honors})]})]})})}),e.jsx(O,{children:e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900 rounded-lg",children:e.jsx(Y,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Certificates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:K.total_certificates})]})]})})})]}),e.jsxs(ol,{value:we,onValueChange:De,className:"w-full",children:[e.jsxs(cl,{className:"grid w-full grid-cols-4",children:[e.jsxs(ee,{value:"grade-reports",className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Grade Reports"]}),e.jsxs(ee,{value:"honor-statistics",className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),"Honor Statistics"]}),e.jsxs(ee,{value:"archiving",className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),"Archiving"]}),e.jsxs(ee,{value:"class-section-reports",className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"Class Section Reports"]})]}),e.jsx(le,{value:"grade-reports",className:"mt-6",children:e.jsxs(O,{children:[e.jsx(Q,{children:e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5"}),"Generate Grade Reports"]})}),e.jsx(P,{children:e.jsxs("form",{onSubmit:ll,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"academic_level",children:"Academic Level"}),e.jsxs(u,{value:g.academic_level_id,onValueChange:a=>{console.log("[REGISTRAR GRADE] Academic Level Changed:",a),E({...g,academic_level_id:a,year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select academic level"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Levels"}),y.map(a=>e.jsx(n,{value:a.id.toString(),children:a.name},a.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"grading_period",children:"Grading Period"}),e.jsxs(u,{value:g.grading_period_id,onValueChange:a=>E("grading_period_id",a),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select grading period"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Periods"}),il.map(a=>e.jsx(n,{value:a.id.toString(),children:a.name},a.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"school_year",children:"School Year"}),e.jsxs(u,{value:g.school_year,onValueChange:a=>E("school_year",a),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select school year"})}),e.jsx(j,{children:k.map(a=>e.jsx(n,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"format",children:"Format"}),e.jsxs(u,{value:g.format,onValueChange:a=>E("format",a),children:[e.jsx(_,{children:e.jsx(R,{})}),e.jsxs(j,{children:[e.jsx(n,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"PDF"]})}),e.jsx(n,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),"Excel"]})})]})]})]})]}),(()=>{if(!g.academic_level_id||g.academic_level_id==="all")return null;const a=parseInt(g.academic_level_id),d=y.find(l=>l.id===a);if(!d)return null;const r=d.key==="elementary",i=d.key==="junior_highschool",t=d.key==="senior_highschool",s=d.key==="college";if(console.log("[REGISTRAR GRADE] Rendering cascading filters for:",d.key),r||i){const l=r?[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}]:[{value:"grade_7",label:"Grade 7"},{value:"grade_8",label:"Grade 8"},{value:"grade_9",label:"Grade 9"},{value:"grade_10",label:"Grade 10"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Year Level"}),e.jsxs(u,{value:g.year_level,onValueChange:h=>{console.log("[REGISTRAR GRADE] Year Level Changed:",h),E({...g,year_level:h,section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Year Levels"}),l.map(h=>e.jsx(n,{value:h.value,children:h.label},h.value))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Section"}),e.jsxs(u,{value:g.section_id,onValueChange:h=>{console.log("[REGISTRAR GRADE] Section Changed:",h),E({...g,section_id:h})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Sections"}),ce.map(h=>e.jsx(n,{value:h.id.toString(),children:h.name},h.id))]})]})]})]})}return t?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Year Level"}),e.jsxs(u,{value:g.year_level,onValueChange:l=>{console.log("[REGISTRAR GRADE] Year Level Changed:",l),E({...g,year_level:l,track_id:"",strand_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Year Levels"}),e.jsx(n,{value:"grade_11",children:"Grade 11"}),e.jsx(n,{value:"grade_12",children:"Grade 12"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Track"}),e.jsxs(u,{value:g.track_id,onValueChange:l=>{console.log("[REGISTRAR GRADE] Track Changed:",l),E({...g,track_id:l,strand_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All tracks"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Tracks"}),qe.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Strand"}),e.jsxs(u,{value:g.strand_id,onValueChange:l=>{console.log("[REGISTRAR GRADE] Strand Changed:",l),E({...g,strand_id:l,section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All strands"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Strands"}),Me.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Section"}),e.jsxs(u,{value:g.section_id,onValueChange:l=>{console.log("[REGISTRAR GRADE] Section Changed:",l),E({...g,section_id:l})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Sections"}),ce.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]})]})]}):s?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Year Level"}),e.jsxs(u,{value:g.year_level,onValueChange:l=>{console.log("[REGISTRAR GRADE] Year Level Changed:",l),E({...g,year_level:l,department_id:"",course_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Year Levels"}),e.jsx(n,{value:"first_year",children:"1st Year"}),e.jsx(n,{value:"second_year",children:"2nd Year"}),e.jsx(n,{value:"third_year",children:"3rd Year"}),e.jsx(n,{value:"fourth_year",children:"4th Year"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Department"}),e.jsxs(u,{value:g.department_id,onValueChange:l=>{console.log("[REGISTRAR GRADE] Department Changed:",l),E({...g,department_id:l,course_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All departments"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Departments"}),Be.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Course"}),e.jsxs(u,{value:g.course_id,onValueChange:l=>{console.log("[REGISTRAR GRADE] Course Changed:",l),E({...g,course_id:l,section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All courses"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Courses"}),ze.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Section"}),e.jsxs(u,{value:g.section_id,onValueChange:l=>{console.log("[REGISTRAR GRADE] Section Changed:",l),E({...g,section_id:l})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Sections"}),ce.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]})]})]}):null})(),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{id:"include_statistics",checked:g.include_statistics==="1",onCheckedChange:a=>E("include_statistics",a===!0?"1":"0")}),e.jsx(x,{htmlFor:"include_statistics",children:"Include statistical analysis"})]}),e.jsx(W,{type:"submit",disabled:Ie||L,className:"w-full md:w-auto",children:Ie||L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating Report..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Generate Grade Report"]})})]})})]})}),e.jsx(le,{value:"honor-statistics",className:"mt-6",children:e.jsxs(O,{children:[e.jsx(Q,{children:e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5"}),"Generate Honor Statistics"]})}),e.jsx(P,{children:e.jsxs("form",{onSubmit:rl,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"honor_academic_level",children:"Academic Level"}),e.jsxs(u,{value:m.academic_level_id,onValueChange:a=>{console.log("[REGISTRAR HONOR] Academic Level Changed:",a),C({...m,academic_level_id:a,year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select academic level"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Levels"}),y.map(a=>e.jsx(n,{value:a.id.toString(),children:a.name},a.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"honor_school_year",children:"School Year"}),e.jsxs(u,{value:m.school_year,onValueChange:a=>C("school_year",a),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select school year"})}),e.jsx(j,{children:k.map(a=>e.jsx(n,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"honor_type",children:"Honor Type"}),e.jsxs(u,{value:m.honor_type_id,onValueChange:a=>C("honor_type_id",a),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select honor type"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Types"}),ke.map(a=>e.jsx(n,{value:a.id.toString(),children:a.name},a.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"honor_format",children:"Format"}),e.jsxs(u,{value:m.format,onValueChange:a=>C("format",a),children:[e.jsx(_,{children:e.jsx(R,{})}),e.jsxs(j,{children:[e.jsx(n,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"PDF"]})}),e.jsx(n,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),"Excel"]})})]})]})]})]}),(()=>{if(!m.academic_level_id||m.academic_level_id==="all")return null;const a=y.find(s=>s.id.toString()===m.academic_level_id);if(!a)return null;const d=a.key==="elementary",r=a.key==="junior_highschool",i=a.key==="senior_highschool",t=a.key==="college";if(d||r){const s=d?[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}]:[{value:"grade_7",label:"Grade 7"},{value:"grade_8",label:"Grade 8"},{value:"grade_9",label:"Grade 9"},{value:"grade_10",label:"Grade 10"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Year Level"}),e.jsxs(u,{value:m.year_level,onValueChange:l=>C({...m,year_level:l,section_id:"all"}),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsx(j,{children:s.map(l=>e.jsx(n,{value:l.value,children:l.label},l.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Section"}),e.jsxs(u,{value:m.section_id,onValueChange:l=>C({...m,section_id:l}),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Sections"}),de.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]})]})]})}return i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Year Level"}),e.jsxs(u,{value:m.year_level,onValueChange:s=>C({...m,year_level:s,track_id:"",strand_id:"",section_id:"all"}),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(j,{children:[e.jsx(n,{value:"grade_11",children:"Grade 11"}),e.jsx(n,{value:"grade_12",children:"Grade 12"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Track"}),e.jsxs(u,{value:m.track_id,onValueChange:s=>C({...m,track_id:s,strand_id:"",section_id:"all"}),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All tracks"})}),e.jsx(j,{children:$.map(s=>e.jsxs(n,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Strand"}),e.jsxs(u,{value:m.strand_id,onValueChange:s=>C({...m,strand_id:s,section_id:"all"}),disabled:!m.track_id,children:[e.jsx(_,{children:e.jsx(R,{placeholder:m.track_id?"All strands":"Select track first"})}),e.jsx(j,{children:Pe.map(s=>e.jsxs(n,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Section"}),e.jsxs(u,{value:m.section_id,onValueChange:s=>C({...m,section_id:s}),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Sections"}),de.map(s=>e.jsx(n,{value:s.id.toString(),children:s.name},s.id))]})]})]})]})]}):t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Year Level"}),e.jsxs(u,{value:m.year_level,onValueChange:s=>C({...m,year_level:s,department_id:"",course_id:"",section_id:"all"}),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(j,{children:[e.jsx(n,{value:"1st_year",children:"1st Year"}),e.jsx(n,{value:"2nd_year",children:"2nd Year"}),e.jsx(n,{value:"3rd_year",children:"3rd Year"}),e.jsx(n,{value:"4th_year",children:"4th Year"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Department"}),e.jsxs(u,{value:m.department_id,onValueChange:s=>C({...m,department_id:s,course_id:"",section_id:"all"}),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All departments"})}),e.jsx(j,{children:q.map(s=>e.jsxs(n,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Course"}),e.jsxs(u,{value:m.course_id,onValueChange:s=>C({...m,course_id:s,section_id:"all"}),disabled:!m.department_id,children:[e.jsx(_,{children:e.jsx(R,{placeholder:m.department_id?"All courses":"Select department first"})}),e.jsx(j,{children:$e.map(s=>e.jsxs(n,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Section"}),e.jsxs(u,{value:m.section_id,onValueChange:s=>C({...m,section_id:s}),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Sections"}),de.map(s=>e.jsx(n,{value:s.id.toString(),children:s.name},s.id))]})]})]})]})]}):null})(),e.jsx(W,{type:"submit",disabled:Ge||L,className:"w-full md:w-auto",children:Ge||L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating Statistics..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Generate Honor Statistics"]})})]})})]})}),e.jsx(le,{value:"archiving",className:"mt-6",children:e.jsxs(O,{children:[e.jsx(Q,{children:e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5"}),"Archive Academic Records"]})}),e.jsxs(P,{children:[e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Note:"})," Archiving will create a backup of academic records for the specified period. This process helps maintain system performance while preserving historical data."]})}),e.jsxs("form",{onSubmit:al,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"archive_academic_level",children:"Academic Level"}),e.jsxs(u,{value:c.academic_level_id,onValueChange:a=>{console.log("[REGISTRAR ARCHIVE] Academic Level Changed:",a),A({...c,academic_level_id:a,year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select academic level"})}),e.jsx(j,{children:y.map(a=>e.jsx(n,{value:a.id.toString(),children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"archive_school_year",children:"School Year"}),e.jsxs(u,{value:c.school_year,onValueChange:a=>A("school_year",a),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select school year"})}),e.jsx(j,{children:k.map(a=>e.jsx(n,{value:a,children:a},a))})]})]})]}),(()=>{if(!c.academic_level_id)return null;const a=parseInt(c.academic_level_id),d=y.find(l=>l.id===a);if(!d)return null;const r=d.key==="elementary",i=d.key==="junior_highschool",t=d.key==="senior_highschool",s=d.key==="college";if(console.log("[REGISTRAR ARCHIVE] Rendering cascading filters for:",d.key),r||i){const l=r?[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}]:[{value:"grade_7",label:"Grade 7"},{value:"grade_8",label:"Grade 8"},{value:"grade_9",label:"Grade 9"},{value:"grade_10",label:"Grade 10"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Year Level"}),e.jsxs(u,{value:c.year_level,onValueChange:h=>{console.log("[REGISTRAR ARCHIVE] Year Level Changed:",h),A({...c,year_level:h,section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Year Levels"}),l.map(h=>e.jsx(n,{value:h.value,children:h.label},h.value))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Section"}),e.jsxs(u,{value:c.section_id,onValueChange:h=>{console.log("[REGISTRAR ARCHIVE] Section Changed:",h),A({...c,section_id:h})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Sections"}),xe.map(h=>e.jsx(n,{value:h.id.toString(),children:h.name},h.id))]})]})]})]})}return t?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Year Level"}),e.jsxs(u,{value:c.year_level,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Year Level Changed:",l),A({...c,year_level:l,track_id:"",strand_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Year Levels"}),e.jsx(n,{value:"grade_11",children:"Grade 11"}),e.jsx(n,{value:"grade_12",children:"Grade 12"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Track"}),e.jsxs(u,{value:c.track_id,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Track Changed:",l),A({...c,track_id:l,strand_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All tracks"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Tracks"}),Je.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Strand"}),e.jsxs(u,{value:c.strand_id,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Strand Changed:",l),A({...c,strand_id:l,section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All strands"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Strands"}),Ke.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Section"}),e.jsxs(u,{value:c.section_id,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Section Changed:",l),A({...c,section_id:l})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Sections"}),xe.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]})]})]}):s?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Year Level"}),e.jsxs(u,{value:c.year_level,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Year Level Changed:",l),A({...c,year_level:l,department_id:"",course_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Year Levels"}),e.jsx(n,{value:"first_year",children:"1st Year"}),e.jsx(n,{value:"second_year",children:"2nd Year"}),e.jsx(n,{value:"third_year",children:"3rd Year"}),e.jsx(n,{value:"fourth_year",children:"4th Year"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Department"}),e.jsxs(u,{value:c.department_id,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Department Changed:",l),A({...c,department_id:l,course_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All departments"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Departments"}),Xe.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Course"}),e.jsxs(u,{value:c.course_id,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Course Changed:",l),A({...c,course_id:l,section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All courses"})}),e.jsxs(j,{children:[e.jsx(n,{value:"",children:"All Courses"}),Qe.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Section"}),e.jsxs(u,{value:c.section_id,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Section Changed:",l),A({...c,section_id:l})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Sections"}),xe.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]})]})]}):null})(),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Include in Archive"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{id:"include_grades",checked:c.include_grades==="1",onCheckedChange:a=>A("include_grades",a===!0?"1":"0")}),e.jsx(x,{htmlFor:"include_grades",children:"Student Grades"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{id:"include_honors",checked:c.include_honors==="1",onCheckedChange:a=>A("include_honors",a===!0?"1":"0")}),e.jsx(x,{htmlFor:"include_honors",children:"Honor Records"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{id:"include_certificates",checked:c.include_certificates==="1",onCheckedChange:a=>A("include_certificates",a===!0?"1":"0")}),e.jsx(x,{htmlFor:"include_certificates",children:"Certificates"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"archive_format",children:"Archive Format"}),e.jsxs(u,{value:c.format,onValueChange:a=>A("format",a),children:[e.jsx(_,{children:e.jsx(R,{})}),e.jsxs(j,{children:[e.jsx(n,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),"Excel"]})}),e.jsx(n,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),"CSV"]})})]})]})]}),e.jsx(W,{type:"submit",disabled:Te||L,className:"w-full md:w-auto",children:Te||L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Archiving Records..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Archive Records"]})})]})]})]})}),e.jsx(le,{value:"class-section-reports",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(Q,{children:[e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),"Generate Class Section Reports"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate comprehensive class section rosters and student lists by academic level."})]}),e.jsx(P,{children:e.jsxs("form",{onSubmit:sl,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Academic Level *"}),e.jsxs(u,{value:o.academic_level_id,onValueChange:a=>{console.log("[REGISTRAR] Academic Level Changed:",a),N({...o,academic_level_id:a,year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select level"})}),e.jsx(j,{children:y.map(a=>e.jsx(n,{value:a.id.toString(),children:a.name},a.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Academic level is required for class section reports"})]}),(()=>{if(!o.academic_level_id)return null;const a=y.find(s=>s.id.toString()===o.academic_level_id);if(!a)return null;const d=a.key==="elementary",r=a.key==="junior_highschool",i=a.key==="senior_highschool",t=a.key==="college";if(d||r){const s=d?[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}]:[{value:"grade_7",label:"Grade 7"},{value:"grade_8",label:"Grade 8"},{value:"grade_9",label:"Grade 9"},{value:"grade_10",label:"Grade 10"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Year Level"}),e.jsxs(u,{value:o.year_level,onValueChange:l=>{console.log("[REGISTRAR] Year Level Changed:",l),N({...o,year_level:l,section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select year level"})}),e.jsx(j,{children:s.map(l=>e.jsx(n,{value:l.value,children:l.label},l.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Filter by year level"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Section"}),e.jsxs(u,{value:o.section_id,onValueChange:l=>N({...o,section_id:l}),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Sections"}),ae.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})}if(i){const s=[{value:"grade_11",label:"Grade 11"},{value:"grade_12",label:"Grade 12"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Year Level"}),e.jsxs(u,{value:o.year_level,onValueChange:l=>{console.log("[REGISTRAR] Year Level Changed:",l),N({...o,year_level:l,track_id:"",strand_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select year level"})}),e.jsx(j,{children:s.map(l=>e.jsx(n,{value:l.value,children:l.label},l.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select year level"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Track"}),e.jsxs(u,{value:o.track_id,onValueChange:l=>{console.log("[REGISTRAR] Track Changed:",l),N({...o,track_id:l,strand_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select track"})}),e.jsx(j,{children:$.map(l=>e.jsxs(n,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select track"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Strand"}),e.jsxs(u,{value:o.strand_id,onValueChange:l=>{console.log("[REGISTRAR] Strand Changed:",l),N({...o,strand_id:l,section_id:"all"})},disabled:!o.track_id,children:[e.jsx(_,{children:e.jsx(R,{placeholder:o.track_id?"Select strand":"Select track first"})}),e.jsx(j,{children:Ve.map(l=>e.jsxs(n,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select strand"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Section"}),e.jsxs(u,{value:o.section_id,onValueChange:l=>N({...o,section_id:l}),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Sections"}),ae.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})]})}if(t){const s=[{value:"first_year",label:"1st Year"},{value:"second_year",label:"2nd Year"},{value:"third_year",label:"3rd Year"},{value:"fourth_year",label:"4th Year"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Year Level"}),e.jsxs(u,{value:o.year_level,onValueChange:l=>{console.log("[REGISTRAR] Year Level Changed:",l),N({...o,year_level:l,department_id:"",course_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select year level"})}),e.jsx(j,{children:s.map(l=>e.jsx(n,{value:l.value,children:l.label},l.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select year level"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Department"}),e.jsxs(u,{value:o.department_id,onValueChange:l=>{console.log("[REGISTRAR] Department Changed:",l),N({...o,department_id:l,course_id:"",section_id:"all"})},children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select department"})}),e.jsx(j,{children:q.map(l=>e.jsxs(n,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select department"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Course"}),e.jsxs(u,{value:o.course_id,onValueChange:l=>{console.log("[REGISTRAR] Course Changed:",l),N({...o,course_id:l,section_id:"all"})},disabled:!o.department_id,children:[e.jsx(_,{children:e.jsx(R,{placeholder:o.department_id?"Select course":"Select department first"})}),e.jsx(j,{children:He.map(l=>e.jsxs(n,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select course"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Section"}),e.jsxs(u,{value:o.section_id,onValueChange:l=>N({...o,section_id:l}),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"All Sections"}),ae.map(l=>e.jsx(n,{value:l.id.toString(),children:l.name},l.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})]})}return null})(),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"School Year *"}),e.jsxs(u,{value:o.school_year,onValueChange:a=>N({...o,school_year:a}),children:[e.jsx(_,{children:e.jsx(R,{placeholder:"Select year"})}),e.jsx(j,{children:k.map(a=>e.jsx(n,{value:a,children:a},a))})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Export Format"}),e.jsxs(u,{value:o.format,onValueChange:a=>N({...o,format:a}),children:[e.jsx(_,{children:e.jsx(R,{})}),e.jsxs(j,{children:[e.jsx(n,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"PDF Report"]})}),e.jsx(n,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),"Excel Spreadsheet"]})}),e.jsx(n,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),"CSV File"]})})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{id:"include_grades_section",checked:o.include_grades,onCheckedChange:a=>{const d=a===!0?"1":"0";console.log("[REGISTRAR] Section include_grades changed to:",d),N({...o,include_grades:d})}}),e.jsx(x,{htmlFor:"include_grades_section",children:"Include student average grades in the report"})]}),(!o.academic_level_id||!o.school_year)&&e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Required:"})," Please select Academic Level and School Year to generate the report."]})}),e.jsx(W,{type:"submit",disabled:el||!o.academic_level_id||!o.school_year||L,className:"flex items-center gap-2",children:L?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-4 w-4"}),"Generate Class Section Report"]})})]})})]})})]})]})})]})]})}export{Kl as default};
