import{u as Ke,r as j,K as Xe,m as z,j as e,$ as Ze}from"./app-DAn0IDCL.js";import{H as Qe}from"./header-3j1q2jdK.js";import{S as el}from"./sidebar-CfeOBA4L.js";import{C as E,a as F,b as he,c as me}from"./card-D27ZnC70.js";import{B as J}from"./button-z4dLpn4_.js";import{L as m}from"./label-W-T60myh.js";import{S as x,a as u,b as v,c as _,d}from"./select-D6rIoMqj.js";import{T as ll,a as rl,b as ge,c as xe}from"./tabs--sXprCTG.js";import{C as K}from"./checkbox-YVTsslbn.js";import{U as Ce}from"./users-TgFlzEBw.js";import{F as X}from"./file-text-DdNPNN7p.js";import{A as De}from"./award-CeFQnH14.js";import{C as sl}from"./calendar-B_oTg-kd.js";import{G as be}from"./graduation-cap-5-wcQQVk.js";import{T as al}from"./trending-up-Cp9vjRs4.js";import{F as ue,a as ve,A as ke}from"./file-x-5gW0lSji.js";import{D as Me}from"./download-DwYe3HJq.js";/* empty css            */import"./dropdown-menu-CzARHlKP.js";import"./Combination-Dnvc7mK-.js";import"./index-BWlM_YhN.js";import"./separator-DEGh51Wy.js";import"./chevron-right-BAYaBRFi.js";import"./crown-Cb_UgCcO.js";import"./building-2-SlpKBaLl.js";import"./user-cog-BbqbsHPZ.js";import"./book-open-MfW7zUk2.js";import"./user-check-CmUpWstI.js";import"./notebook-LlKoVv32.js";import"./chart-no-axes-column-increasing-Ay03fjAl.js";import"./shield-COqo2tQg.js";import"./index-CkgvhvYB.js";import"./index-CpR_vJRE.js";import"./check-CbtuMRqH.js";function Kl({user:_e,academicLevels:N,schoolYears:k,currentSchoolYear:P,gradingPeriods:Z,honorTypes:we,sections:D,tracks:H,strands:O,departments:T,courses:V,stats:Y}){var Se;const{addToast:y}=Ke(),[U,Re]=j.useState("honor-statistics"),[q,L]=j.useState(!1),[Q,il]=j.useState(""),[tl,fe]=j.useState([]),[ee,le]=j.useState([]),[nl,Ee]=j.useState([]),[Fe,re]=j.useState([]),[ol,He]=j.useState([]),[Oe,se]=j.useState([]),[ae,ie]=j.useState([]),[je,$]=j.useState([]),[Te,te]=j.useState([]),[pe,W]=j.useState([]),[Ve,ne]=j.useState([]),[oe,ye]=j.useState([]),[Ge,Ne]=j.useState([]),[Le,de]=j.useState([]),[Pe,Ae]=j.useState([]),[Ye,ce]=j.useState([]),{props:qe}=Xe(),b=qe.csrf_token||((Se=document.querySelector('meta[name="csrf-token"]'))==null?void 0:Se.content)||"",{data:G,setData:dl,post:cl,processing:hl}=z({academic_level_id:"all",semester_id:"",grading_period_id:"all",school_year:P||k[0]||"",format:"pdf",include_statistics:!0}),{data:t,setData:S,post:ml,processing:Be}=z({academic_level_id:"all",school_year:P||k[0]||"",honor_type_id:"all",year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:"",format:"pdf"}),{data:i,setData:A,post:gl,processing:Ue}=z({academic_level_id:"",school_year:P||k[0]||"",year_level:"all",track_id:"all",strand_id:"all",department_id:"all",course_id:"",section_id:"",include_grades:!0,include_honors:!0,include_certificates:!0,format:"excel"}),{data:o,setData:I,post:xl,processing:$e}=z({academic_level_id:"",year_level:"all",track_id:"all",strand_id:"all",department_id:"all",course_id:"",section_id:"",school_year:P||k[0]||"",include_grades:!1,format:"pdf"});j.useEffect(()=>{if(G.academic_level_id&&G.academic_level_id!=="all"){const a=parseInt(G.academic_level_id);let s=Z.filter(r=>r.academic_level_id===a);if(Q){const r=parseInt(Q);s=s.filter(n=>n.id===r||n.parent_id===r)}fe(s)}else fe([])},[G.academic_level_id,Q,Z]),j.useEffect(()=>{console.log("=== CLASS SECTION REPORT - PAGE LOADED ==="),console.log("Available Academic Levels:",N),console.log("Available School Years:",k),console.log("Current School Year:",P),console.log("Initial Section Data:",o),console.log("Available Sections:",D),console.log("Available Tracks:",H),console.log("Available Strands:",O),console.log("Available Departments:",T),console.log("Available Courses:",V)},[]),j.useEffect(()=>{if(console.log("=== CLASS SECTION FILTER TRIGGERED ==="),console.log("Academic Level ID:",o.academic_level_id),console.log("Year Level:",o.year_level),console.log("Track ID:",o.track_id),console.log("Strand ID:",o.strand_id),console.log("Department ID:",o.department_id),console.log("Course ID:",o.course_id),!o.academic_level_id){le([]),Ee([]),re([]),He([]),se([]);return}const a=parseInt(o.academic_level_id),s=N.find(n=>n.id===a);if(console.log("Selected Level:",s),!s){le([]);return}let r=D.filter(n=>n.academic_level_id===a);console.log("Sections for level:",r),o.year_level&&(r=r.filter(n=>n.specific_year_level===o.year_level),console.log("After year level filter:",r)),s.key==="senior_highschool"&&(o.track_id&&(r=r.filter(n=>{var h;return((h=n.track_id)==null?void 0:h.toString())===o.track_id}),console.log("After track filter:",r)),o.strand_id&&(r=r.filter(n=>{var h;return((h=n.strand_id)==null?void 0:h.toString())===o.strand_id}),console.log("After strand filter:",r))),s.key==="college"&&(o.department_id&&(r=r.filter(n=>{var h;return((h=n.department_id)==null?void 0:h.toString())===o.department_id}),console.log("After department filter:",r)),o.course_id&&(r=r.filter(n=>{var h;return((h=n.course_id)==null?void 0:h.toString())===o.course_id}),console.log("After course filter:",r))),console.log("Final filtered sections:",r),le(r)},[o.academic_level_id,o.year_level,o.track_id,o.strand_id,o.department_id,o.course_id,D,N]),j.useEffect(()=>{if(o.track_id){const a=parseInt(o.track_id),s=O.filter(r=>r.track_id===a);console.log("Filtered Strands for Track:",s),re(s)}else re([])},[o.track_id,O]),j.useEffect(()=>{if(o.department_id){const a=parseInt(o.department_id),s=V.filter(r=>r.department_id===a);console.log("Filtered Courses for Department:",s),se(s)}else se([])},[o.department_id,V]),j.useEffect(()=>{if(console.log("=== HONOR STATISTICS FILTER TRIGGERED ==="),console.log("[HONOR] Academic Level ID:",t.academic_level_id),console.log("[HONOR] Year Level:",t.year_level),console.log("[HONOR] Track ID:",t.track_id),console.log("[HONOR] Strand ID:",t.strand_id),console.log("[HONOR] Department ID:",t.department_id),console.log("[HONOR] Course ID:",t.course_id),!t.academic_level_id||t.academic_level_id==="all"){ie([]),$([]),te([]),W([]),ne([]);return}const a=parseInt(t.academic_level_id),s=N.find(n=>n.id===a);if(console.log("[HONOR] Selected Level:",s),!s){ie([]);return}let r=D.filter(n=>n.academic_level_id===a);console.log("[HONOR] Sections for level:",r),t.year_level&&(r=r.filter(n=>n.specific_year_level===t.year_level),console.log("[HONOR] After year level filter:",r)),s.key==="senior_highschool"&&(t.track_id&&(r=r.filter(n=>{var h;return((h=n.track_id)==null?void 0:h.toString())===t.track_id}),console.log("[HONOR] After track filter:",r)),t.strand_id&&(r=r.filter(n=>{var h;return((h=n.strand_id)==null?void 0:h.toString())===t.strand_id}),console.log("[HONOR] After strand filter:",r))),s.key==="college"&&(t.department_id&&(r=r.filter(n=>{var h;return((h=n.department_id)==null?void 0:h.toString())===t.department_id}),console.log("[HONOR] After department filter:",r)),t.course_id&&(r=r.filter(n=>{var h;return((h=n.course_id)==null?void 0:h.toString())===t.course_id}),console.log("[HONOR] After course filter:",r))),console.log("[HONOR] Final filtered sections:",r),ie(r)},[t.academic_level_id,t.year_level,t.track_id,t.strand_id,t.department_id,t.course_id,D,N]),j.useEffect(()=>{if(t.track_id){const a=parseInt(t.track_id),s=O.filter(r=>r.track_id===a);console.log("[HONOR] Filtered Strands for Track:",s),te(s)}else te([])},[t.track_id,O]),j.useEffect(()=>{if(t.department_id){const a=parseInt(t.department_id),s=V.filter(r=>r.department_id===a);console.log("[HONOR] Filtered Courses for Department:",s),ne(s)}else ne([])},[t.department_id,V]),j.useEffect(()=>{if(console.log("[ADMIN HONOR] Filtering departments by year level"),t.academic_level_id&&t.academic_level_id!=="all"){const a=parseInt(t.academic_level_id),s=N.find(r=>r.id===a);if((s==null?void 0:s.key)==="college"){let r=D.filter(c=>c.academic_level_id===a);t.year_level&&t.year_level!==""&&(r=r.filter(c=>c.specific_year_level===t.year_level));const n=new Set(r.map(c=>c.department_id).filter(c=>c!=null)),h=T.filter(c=>n.has(c.id));console.log("[ADMIN HONOR] Filtered departments count:",h.length),W(h)}else W([])}else W([])},[t.academic_level_id,t.year_level,D,N,T]),j.useEffect(()=>{if(console.log("[ADMIN HONOR] Filtering tracks by year level"),t.academic_level_id&&t.academic_level_id!=="all"){const a=parseInt(t.academic_level_id),s=N.find(r=>r.id===a);if((s==null?void 0:s.key)==="senior_highschool"){let r=D.filter(c=>c.academic_level_id===a);t.year_level&&t.year_level!==""&&(r=r.filter(c=>c.specific_year_level===t.year_level));const n=new Set(r.map(c=>c.track_id).filter(c=>c!=null)),h=H.filter(c=>n.has(c.id));console.log("[ADMIN HONOR] Filtered tracks count:",h.length,"Track IDs:",Array.from(n)),$(h)}else $([])}else $([])},[t.academic_level_id,t.year_level,D,N,H]),j.useEffect(()=>{if(console.log("=== [ADMIN] ARCHIVE FILTER TRIGGERED ==="),console.log("[ADMIN ARCHIVE] Academic Level ID:",i.academic_level_id),!i.academic_level_id){ye([]),Ne([]),de([]),Ae([]),ce([]);return}const a=parseInt(i.academic_level_id),s=N.find(n=>n.id===a);if(!s){console.log("[ADMIN ARCHIVE] Selected level not found");return}console.log("[ADMIN ARCHIVE] Selected Level:",s.name,s.key);let r=D.filter(n=>n.academic_level_id===a);console.log("[ADMIN ARCHIVE] Sections for level:",r.length),s.key==="senior_highschool"&&(console.log("[ADMIN ARCHIVE] Processing SHS filters"),Ne(H),i.track_id&&i.track_id!=="all"&&(console.log("[ADMIN ARCHIVE] Filtering by Track ID:",i.track_id),r=r.filter(n=>{var h;return((h=n.track_id)==null?void 0:h.toString())===i.track_id})),i.strand_id&&i.strand_id!=="all"&&(console.log("[ADMIN ARCHIVE] Filtering by Strand ID:",i.strand_id),r=r.filter(n=>{var h;return((h=n.strand_id)==null?void 0:h.toString())===i.strand_id})),i.year_level&&i.year_level!=="all"&&(console.log("[ADMIN ARCHIVE] Filtering by Year Level:",i.year_level),r=r.filter(n=>n.specific_year_level===i.year_level))),s.key==="college"&&(console.log("[ADMIN ARCHIVE] Processing College filters"),Ae(T),i.department_id&&i.department_id!=="all"&&(console.log("[ADMIN ARCHIVE] Filtering by Department ID:",i.department_id),r=r.filter(n=>{var h;return((h=n.department_id)==null?void 0:h.toString())===i.department_id})),i.course_id&&i.course_id!=="all"&&(console.log("[ADMIN ARCHIVE] Filtering by Course ID:",i.course_id),r=r.filter(n=>{var h;return((h=n.course_id)==null?void 0:h.toString())===i.course_id})),i.year_level&&i.year_level!=="all"&&(console.log("[ADMIN ARCHIVE] Filtering by Year Level:",i.year_level),r=r.filter(n=>n.specific_year_level===i.year_level))),(s.key==="elementary"||s.key==="junior_highschool")&&(console.log("[ADMIN ARCHIVE] Processing Elementary/JHS filters"),i.year_level&&i.year_level!=="all"&&(console.log("[ADMIN ARCHIVE] Filtering by Year Level:",i.year_level),r=r.filter(n=>n.specific_year_level===i.year_level))),console.log("[ADMIN ARCHIVE] Final filtered sections:",r.length),ye(r)},[i.academic_level_id,i.year_level,i.track_id,i.strand_id,i.department_id,i.course_id,D,N,H,T]),j.useEffect(()=>{if(i.track_id&&i.track_id!=="all"){const a=parseInt(i.track_id),s=O.filter(r=>r.track_id===a);de(s)}else de([])},[i.track_id,O]),j.useEffect(()=>{if(i.department_id&&i.department_id!=="all"){const a=parseInt(i.department_id),s=V.filter(r=>r.department_id===a);ce(s)}else ce([])},[i.department_id,V]);const We=a=>{if(a.preventDefault(),console.log("=== [ADMIN] HONOR STATISTICS FORM SUBMISSION ==="),console.log("[ADMIN] Button clicked at:",new Date().toISOString()),console.log("[ADMIN] Honor Data:",t),console.log("[ADMIN] Active Tab:",U),!b){console.error("[ADMIN] CSRF token not found"),y("Session expired. Please refresh the page and try again.","error");return}if(console.log("[ADMIN] CSRF Token:",b),!t.school_year){console.error("[ADMIN] School year is required"),y("Please select a school year before generating the report.","warning");return}console.log("[ADMIN] All validations passed, starting report generation..."),y("Generating Honor Statistics Report...","info",{duration:2e3}),L(!0);let s=document.getElementById("download-iframe");s?(s.name="download-iframe",console.log("[ADMIN] Using existing download iframe, name set to:",s.name)):(s=document.createElement("iframe"),s.id="download-iframe",s.name="download-iframe",s.style.display="none",document.body.appendChild(s),console.log("[ADMIN] Created download iframe with name:",s.name));const r=document.createElement("form");r.method="POST",r.action=route("admin.reports.honor-statistics"),r.target="download-iframe",console.log("[ADMIN] Form action URL:",r.action),console.log("[ADMIN] Form target:",r.target);const n=document.createElement("input");n.type="hidden",n.name="_token",n.value=b,r.appendChild(n);const h={};Object.entries(t).forEach(([c,l])=>{const g=document.createElement("input");g.type="hidden",g.name=c,typeof l=="boolean"?g.value=l?"1":"0":g.value=(l==null?void 0:l.toString())||"",h[c]=g.value,r.appendChild(g)}),console.log("[ADMIN] Form data being submitted:",h),s.onload=()=>{var c,l,g,M,w;console.log("[ADMIN] Iframe loaded at:",new Date().toISOString());try{const C=s.contentDocument||((c=s.contentWindow)==null?void 0:c.document);if(C){const f=C.body,p=(f==null?void 0:f.textContent)||"";if(console.log("[ADMIN] Iframe body content length:",p.length),console.log("[ADMIN] Iframe body preview:",p.substring(0,500)),f==null?void 0:f.querySelector('[data-error-type="no-data"]')){const R=((g=(l=f==null?void 0:f.querySelector(".error-title"))==null?void 0:l.textContent)==null?void 0:g.trim())||"No data found",B=((w=(M=f==null?void 0:f.querySelector(".error-message"))==null?void 0:M.textContent)==null?void 0:w.trim())||"Please adjust your filters and try again.";console.warn("[ADMIN] No data found:",R),y(`${R} ${B}`,"warning",{duration:5e3}),setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[ADMIN] Form removed after error detection"))},100);return}p.includes("error")||p.includes("Error")||p.includes("Exception")?(console.error("[ADMIN] Error detected in response:",p.substring(0,1e3)),y("An error occurred while generating the report. Please check the Laravel logs.","error",{duration:7e3})):p.length>0&&p.length<200?(console.error("[ADMIN] Possible error response:",p),y("Report generation may have failed. Please check the Laravel logs.","warning",{duration:5e3})):(console.log("[ADMIN] Report likely generated successfully"),y("Report generated successfully! Download should start automatically.","success",{duration:3e3}))}}catch(C){console.log("[ADMIN] Could not access iframe content (this is normal for successful downloads):",C),y("Report generated! Check your downloads folder.","success",{duration:3e3})}setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[ADMIN] Form removed from body after iframe load"))},100)},document.body.appendChild(r),console.log("[ADMIN] Form appended to body"),setTimeout(()=>{console.log("[ADMIN] Submitting form to iframe:",r.target),r.submit(),console.log("[ADMIN] Form submitted at:",new Date().toISOString())},50),setTimeout(()=>{console.log("[ADMIN] Resetting loading state at:",new Date().toISOString()),L(!1)},3e3)},ze=a=>{if(a.preventDefault(),console.log("=== [ADMIN] ARCHIVE RECORDS FORM SUBMISSION ==="),console.log("[ADMIN] Button clicked at:",new Date().toISOString()),console.log("[ADMIN] Archive Data:",i),console.log("[ADMIN] Active Tab:",U),!b){console.error("[ADMIN] CSRF token not found"),y("Session expired. Please refresh the page and try again.","error");return}if(console.log("[ADMIN] CSRF Token:",b),!i.academic_level_id){console.error("[ADMIN] Academic level is required"),y("Please select an academic level before creating the archive.","warning");return}if(!i.school_year){console.error("[ADMIN] School year is required"),y("Please select a school year before creating the archive.","warning");return}if(!i.include_grades&&!i.include_honors&&!i.include_certificates){console.error("[ADMIN] No data types selected"),y("Please select at least one data type to include in the archive (grades, honors, or certificates).","warning");return}console.log("[ADMIN] All validations passed, starting archive creation..."),y("Creating Academic Records Archive...","info",{duration:2e3}),L(!0);let s=document.getElementById("download-iframe");s?(s.name="download-iframe",console.log("[ADMIN] Using existing download iframe, name set to:",s.name)):(s=document.createElement("iframe"),s.id="download-iframe",s.name="download-iframe",s.style.display="none",document.body.appendChild(s),console.log("[ADMIN] Created download iframe with name:",s.name));const r=document.createElement("form");r.method="POST",r.action=route("admin.reports.archive-records"),r.target="download-iframe",console.log("[ADMIN] Form action URL:",r.action);const n=document.createElement("input");n.type="hidden",n.name="_token",n.value=b,r.appendChild(n);const h={};Object.entries(i).forEach(([c,l])=>{const g=document.createElement("input");g.type="hidden",g.name=c,typeof l=="boolean"?g.value=l?"1":"0":g.value=(l==null?void 0:l.toString())||"",h[c]=g.value,r.appendChild(g)}),console.log("[ADMIN] Form data being submitted:",h),s.onload=()=>{var c,l,g,M,w;console.log("[ADMIN] Iframe loaded at:",new Date().toISOString());try{const C=s.contentDocument||((c=s.contentWindow)==null?void 0:c.document);if(C){const f=C.body,p=(f==null?void 0:f.textContent)||"";if(console.log("[ADMIN] Iframe body content length:",p.length),console.log("[ADMIN] Iframe body preview:",p.substring(0,500)),f==null?void 0:f.querySelector('[data-error-type="no-data"]')){const R=((g=(l=f==null?void 0:f.querySelector(".error-title"))==null?void 0:l.textContent)==null?void 0:g.trim())||"No data found",B=((w=(M=f==null?void 0:f.querySelector(".error-message"))==null?void 0:M.textContent)==null?void 0:w.trim())||"Please adjust your filters and try again.";console.warn("[ADMIN] No data found:",R),y(`${R} ${B}`,"warning",{duration:5e3}),setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[ADMIN] Form removed after error detection"))},100);return}p.includes("error")||p.includes("Error")||p.includes("Exception")?(console.error("[ADMIN] Error detected in response:",p.substring(0,1e3)),y("An error occurred while creating the archive. Please check the Laravel logs.","error",{duration:7e3})):p.length>0&&p.length<200?(console.error("[ADMIN] Possible error response:",p),y("Archive creation may have failed. Please check the Laravel logs.","warning",{duration:5e3})):(console.log("[ADMIN] Archive likely created successfully"),y("Archive created successfully! Download should start automatically.","success",{duration:3e3}))}}catch(C){console.log("[ADMIN] Could not access iframe content (this is normal for successful downloads):",C),y("Archive created! Check your downloads folder.","success",{duration:3e3})}setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[ADMIN] Form removed from body after iframe load"))},100)},document.body.appendChild(r),console.log("[ADMIN] Form appended to body"),setTimeout(()=>{console.log("[ADMIN] Submitting form to iframe:",r.target),r.submit(),console.log("[ADMIN] Form submitted at:",new Date().toISOString())},50),setTimeout(()=>{console.log("[ADMIN] Resetting loading state at:",new Date().toISOString()),L(!1)},3e3)},Je=a=>{if(console.log("=== handleClassSectionReport CALLED ==="),console.log("[ADMIN] Button clicked at:",new Date().toISOString()),a.preventDefault(),a.stopPropagation(),console.log("=== [ADMIN] CLASS SECTION REPORT FORM SUBMISSION ==="),console.log("[ADMIN] Section Data:",o),console.log("[ADMIN] Active Tab:",U),!b){console.error("[ADMIN] CSRF token not found"),y("Session expired. Please refresh the page and try again.","error");return}if(!o.academic_level_id){console.error("[ADMIN] Academic level is required"),y("Please select an academic level before generating the report.","warning");return}if(!o.school_year){console.error("[ADMIN] School year is required"),y("Please select a school year before generating the report.","warning");return}console.log("[ADMIN] CSRF Token:",b),console.log("[ADMIN] All validations passed, starting report generation..."),y("Generating Class Section Report...","info",{duration:2e3}),L(!0);let s=document.getElementById("download-iframe");s?(s.name="download-iframe",console.log("[ADMIN] Using existing download iframe, name set to:",s.name)):(s=document.createElement("iframe"),s.id="download-iframe",s.name="download-iframe",s.style.display="none",document.body.appendChild(s),console.log("[ADMIN] Created download iframe with name:",s.name));const r=document.createElement("form");r.method="POST",r.action=route("admin.reports.class-section-report"),r.target="download-iframe",console.log("[ADMIN] Form action URL:",r.action),console.log("[ADMIN] Form target:",r.target);const n=document.createElement("input");n.type="hidden",n.name="_token",n.value=b,r.appendChild(n);const h={};Object.entries(o).forEach(([c,l])=>{const g=document.createElement("input");g.type="hidden",g.name=c,typeof l=="boolean"?g.value=l?"1":"0":g.value=(l==null?void 0:l.toString())||"",h[c]=g.value,r.appendChild(g)}),console.log("[ADMIN] Form data being submitted:",h),s.onload=()=>{var c,l,g,M,w;console.log("[ADMIN] Iframe loaded at:",new Date().toISOString());try{const C=s.contentDocument||((c=s.contentWindow)==null?void 0:c.document);if(C){const f=C.body,p=(f==null?void 0:f.textContent)||"";if(console.log("[ADMIN] Iframe body content length:",p.length),console.log("[ADMIN] Iframe body preview:",p.substring(0,500)),f==null?void 0:f.querySelector('[data-error-type="no-data"]')){const R=((g=(l=f==null?void 0:f.querySelector(".error-title"))==null?void 0:l.textContent)==null?void 0:g.trim())||"No data found",B=((w=(M=f==null?void 0:f.querySelector(".error-message"))==null?void 0:M.textContent)==null?void 0:w.trim())||"Please adjust your filters and try again.";console.warn("[ADMIN] No data found:",R),y(`${R} ${B}`,"warning",{duration:5e3}),setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[ADMIN] Form removed after error detection"))},100);return}p.includes("error")||p.includes("Error")||p.includes("Exception")?(console.error("[ADMIN] Error detected in response:",p.substring(0,1e3)),y("An error occurred while generating the report. Please check the Laravel logs.","error",{duration:7e3})):p.length>0&&p.length<200?(console.error("[ADMIN] Possible error response:",p),y("Report generation may have failed. Please check the Laravel logs.","warning",{duration:5e3})):(console.log("[ADMIN] Report likely generated successfully"),y("Report generated successfully! Download should start automatically.","success",{duration:3e3}))}}catch(C){console.log("[ADMIN] Could not access iframe content (this is normal for successful downloads):",C),y("Report generated! Check your downloads folder.","success",{duration:3e3})}setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[ADMIN] Form removed from body after iframe load"))},100)},document.body.appendChild(r),console.log("[ADMIN] Form appended to body"),setTimeout(()=>{console.log("[ADMIN] Submitting form to iframe:",r.target),r.submit(),console.log("[ADMIN] Form submitted at:",new Date().toISOString())},50),setTimeout(()=>{console.log("[ADMIN] Resetting loading state at:",new Date().toISOString()),L(!1)},2e3)};return(()=>{if(G.academic_level_id&&G.academic_level_id!=="all"){const a=parseInt(G.academic_level_id),s=N.find(r=>r.id===a);if(s&&(s.key==="college"||s.key==="senior_highschool"))return Z.filter(r=>r.academic_level_id===a&&r.parent_id===null&&r.type==="semester")}return[]})(),e.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(el,{user:_e}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(Qe,{user:_e}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 min-h-0",children:e.jsxs("div",{className:"flex flex-col gap-6 pb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Reports & Archiving"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Generate comprehensive reports and archive academic records."})]}),e.jsx(Ze,{href:route("admin.dashboard"),children:e.jsx(J,{variant:"outline",children:"Back to Dashboard"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(E,{children:e.jsxs(F,{className:"flex items-center p-6",children:[e.jsx(Ce,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Y.total_students})]})]})}),e.jsx(E,{children:e.jsxs(F,{className:"flex items-center p-6",children:[e.jsx(X,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Certificates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Y.total_certificates})]})]})}),e.jsx(E,{children:e.jsxs(F,{className:"flex items-center p-6",children:[e.jsx(De,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Honor Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Y.total_honors})]})]})}),e.jsx(E,{children:e.jsxs(F,{className:"flex items-center p-6",children:[e.jsx(sl,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Periods"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Y.active_periods})]})]})}),e.jsx(E,{children:e.jsxs(F,{className:"flex items-center p-6",children:[e.jsx(be,{className:"h-8 w-8 text-indigo-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Sections"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Y.active_sections})]})]})})]}),e.jsxs(ll,{value:U,onValueChange:Re,className:"w-full",children:[e.jsxs(rl,{className:"grid w-full grid-cols-3",children:[e.jsx(ge,{value:"honor-statistics",children:"Honor Statistics"}),e.jsx(ge,{value:"archive-records",children:"Archive Records"}),e.jsx(ge,{value:"class-section-reports",children:"Class Section Reports"})]}),e.jsx(xe,{value:"honor-statistics",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(he,{children:[e.jsxs(me,{className:"flex items-center gap-2",children:[e.jsx(al,{className:"h-5 w-5"}),"Generate Honor Statistics"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate comprehensive honor roll statistics and distribution analysis."})]}),e.jsx(F,{children:e.jsxs("form",{onSubmit:We,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Academic Level"}),e.jsxs(x,{value:t.academic_level_id,onValueChange:a=>{console.log("[HONOR] Academic Level Changed:",a),S({...t,academic_level_id:a,year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All levels"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Levels"}),N.map(a=>e.jsx(d,{value:a.id.toString(),children:a.name},a.id))]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Honor Type"}),e.jsxs(x,{value:t.honor_type_id,onValueChange:a=>S("honor_type_id",a),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All types"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Types"}),we.map(a=>e.jsx(d,{value:a.id.toString(),children:a.name},a.id))]})]})]})]}),(()=>{if(!t.academic_level_id||t.academic_level_id==="all")return null;const a=N.find(c=>c.id.toString()===t.academic_level_id);if(!a)return null;const s=a.key==="elementary",r=a.key==="junior_highschool",n=a.key==="senior_highschool",h=a.key==="college";if(s||r){const c=s?[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}]:[{value:"grade_7",label:"Grade 7"},{value:"grade_8",label:"Grade 8"},{value:"grade_9",label:"Grade 9"},{value:"grade_10",label:"Grade 10"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Year Level"}),e.jsxs(x,{value:t.year_level,onValueChange:l=>S({...t,year_level:l,section_id:""}),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All year levels"})}),e.jsx(_,{children:c.map(l=>e.jsx(d,{value:l.value,children:l.label},l.value))})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Section"}),e.jsxs(x,{value:t.section_id,onValueChange:l=>S({...t,section_id:l}),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All sections"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Sections"}),ae.map(l=>e.jsx(d,{value:l.id.toString(),children:l.name},l.id))]})]})]})]})}if(n){const c=[{value:"grade_11",label:"Grade 11"},{value:"grade_12",label:"Grade 12"}];return e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Year Level"}),e.jsxs(x,{value:t.year_level,onValueChange:l=>S({...t,year_level:l,track_id:"",strand_id:"",section_id:""}),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All year levels"})}),e.jsx(_,{children:c.map(l=>e.jsx(d,{value:l.value,children:l.label},l.value))})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Track"}),e.jsxs(x,{value:t.track_id,onValueChange:l=>S({...t,track_id:l,strand_id:"",section_id:""}),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All tracks"})}),e.jsx(_,{children:(je.length>0?je:H).map(l=>e.jsxs(d,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Strand"}),e.jsxs(x,{value:t.strand_id,onValueChange:l=>S({...t,strand_id:l,section_id:""}),disabled:!t.track_id,children:[e.jsx(u,{children:e.jsx(v,{placeholder:t.track_id?"All strands":"Select track first"})}),e.jsx(_,{children:Te.map(l=>e.jsxs(d,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Section"}),e.jsxs(x,{value:t.section_id,onValueChange:l=>S({...t,section_id:l}),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All sections"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Sections"}),ae.map(l=>e.jsx(d,{value:l.id.toString(),children:l.name},l.id))]})]})]})]})]})}if(h){const c=[{value:"first_year",label:"1st Year"},{value:"second_year",label:"2nd Year"},{value:"third_year",label:"3rd Year"},{value:"fourth_year",label:"4th Year"}];return e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Year Level"}),e.jsxs(x,{value:t.year_level,onValueChange:l=>S({...t,year_level:l,department_id:"",course_id:"",section_id:""}),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All year levels"})}),e.jsx(_,{children:c.map(l=>e.jsx(d,{value:l.value,children:l.label},l.value))})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Department"}),e.jsxs(x,{value:t.department_id,onValueChange:l=>S({...t,department_id:l,course_id:"",section_id:""}),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All departments"})}),e.jsx(_,{children:(pe.length>0?pe:T).map(l=>e.jsxs(d,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Course"}),e.jsxs(x,{value:t.course_id,onValueChange:l=>S({...t,course_id:l,section_id:""}),disabled:!t.department_id,children:[e.jsx(u,{children:e.jsx(v,{placeholder:t.department_id?"All courses":"Select department first"})}),e.jsx(_,{children:Ve.map(l=>e.jsxs(d,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Section"}),e.jsxs(x,{value:t.section_id,onValueChange:l=>S({...t,section_id:l}),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All sections"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Sections"}),ae.map(l=>e.jsx(d,{value:l.id.toString(),children:l.name},l.id))]})]})]})]})]})}return null})(),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"School Year"}),e.jsxs(x,{value:t.school_year,onValueChange:a=>S("school_year",a),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"Select year"})}),e.jsx(_,{children:k.map(a=>e.jsx(d,{value:a,children:a},a))})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Export Format"}),e.jsxs(x,{value:t.format,onValueChange:a=>S("format",a),children:[e.jsx(u,{children:e.jsx(v,{})}),e.jsxs(_,{children:[e.jsx(d,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"PDF Report"]})}),e.jsx(d,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),"Excel Spreadsheet"]})}),e.jsx(d,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),"CSV File"]})})]})]})]})]}),e.jsx(J,{type:"submit",disabled:Be||q,className:"flex items-center gap-2",children:q?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-4 w-4"}),"Generate Honor Statistics"]})})]})})]})}),e.jsx(xe,{value:"archive-records",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(he,{children:[e.jsxs(me,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Archive Academic Records"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create comprehensive archives of academic records for specific levels and years."})]}),e.jsx(F,{children:e.jsxs("form",{onSubmit:ze,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Academic Level *"}),e.jsxs(x,{value:i.academic_level_id,onValueChange:a=>{console.log("[ADMIN ARCHIVE] Academic Level Changed:",a),A({...i,academic_level_id:a,year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"Select level"})}),e.jsx(_,{children:N.map(a=>e.jsx(d,{value:a.id.toString(),children:a.name},a.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Academic level is required for archiving"})]}),e.jsxs("div",{children:[e.jsx(m,{children:"School Year *"}),e.jsxs(x,{value:i.school_year,onValueChange:a=>A("school_year",a),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"Select year"})}),e.jsx(_,{children:k.map(a=>e.jsx(d,{value:a,children:a},a))})]})]})]}),(()=>{if(!i.academic_level_id)return null;const a=parseInt(i.academic_level_id),s=N.find(l=>l.id===a);if(!s)return null;const r=s.key==="elementary",n=s.key==="junior_highschool",h=s.key==="senior_highschool",c=s.key==="college";if(console.log("[ADMIN ARCHIVE] Rendering cascading filters for:",s.key),r||n){const l=r?[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}]:[{value:"grade_7",label:"Grade 7"},{value:"grade_8",label:"Grade 8"},{value:"grade_9",label:"Grade 9"},{value:"grade_10",label:"Grade 10"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Year Level"}),e.jsxs(x,{value:i.year_level,onValueChange:g=>{console.log("[ADMIN ARCHIVE] Year Level Changed:",g),A({...i,year_level:g,section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All year levels"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Year Levels"}),l.map(g=>e.jsx(d,{value:g.value,children:g.label},g.value))]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Section"}),e.jsxs(x,{value:i.section_id,onValueChange:g=>{console.log("[ADMIN ARCHIVE] Section Changed:",g),A({...i,section_id:g})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All sections"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Sections"}),oe.map(g=>e.jsx(d,{value:g.id.toString(),children:g.name},g.id))]})]})]})]})}return h?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Year Level"}),e.jsxs(x,{value:i.year_level,onValueChange:l=>{console.log("[ADMIN ARCHIVE] Year Level Changed:",l),A({...i,year_level:l,track_id:"all",strand_id:"all",section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All year levels"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Year Levels"}),e.jsx(d,{value:"grade_11",children:"Grade 11"}),e.jsx(d,{value:"grade_12",children:"Grade 12"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Track"}),e.jsxs(x,{value:i.track_id,onValueChange:l=>{console.log("[ADMIN ARCHIVE] Track Changed:",l),A({...i,track_id:l,strand_id:"all",section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All tracks"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Tracks"}),Ge.map(l=>e.jsx(d,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Strand"}),e.jsxs(x,{value:i.strand_id,onValueChange:l=>{console.log("[ADMIN ARCHIVE] Strand Changed:",l),A({...i,strand_id:l,section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All strands"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Strands"}),Le.map(l=>e.jsx(d,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Section"}),e.jsxs(x,{value:i.section_id,onValueChange:l=>{console.log("[ADMIN ARCHIVE] Section Changed:",l),A({...i,section_id:l})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All sections"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Sections"}),oe.map(l=>e.jsx(d,{value:l.id.toString(),children:l.name},l.id))]})]})]})]}):c?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Year Level"}),e.jsxs(x,{value:i.year_level,onValueChange:l=>{console.log("[ADMIN ARCHIVE] Year Level Changed:",l),A({...i,year_level:l,department_id:"all",course_id:"",section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All year levels"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Year Levels"}),e.jsx(d,{value:"first_year",children:"1st Year"}),e.jsx(d,{value:"second_year",children:"2nd Year"}),e.jsx(d,{value:"third_year",children:"3rd Year"}),e.jsx(d,{value:"fourth_year",children:"4th Year"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Department"}),e.jsxs(x,{value:i.department_id,onValueChange:l=>{console.log("[ADMIN ARCHIVE] Department Changed:",l),A({...i,department_id:l,course_id:"",section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All departments"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Departments"}),Pe.map(l=>e.jsx(d,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Course"}),e.jsxs(x,{value:i.course_id,onValueChange:l=>{console.log("[ADMIN ARCHIVE] Course Changed:",l),A({...i,course_id:l,section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All courses"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Courses"}),Ye.map(l=>e.jsx(d,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Section"}),e.jsxs(x,{value:i.section_id,onValueChange:l=>{console.log("[ADMIN ARCHIVE] Section Changed:",l),A({...i,section_id:l})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All sections"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Sections"}),oe.map(l=>e.jsx(d,{value:l.id.toString(),children:l.name},l.id))]})]})]})]}):null})(),e.jsxs("div",{children:[e.jsx(m,{children:"Include in Archive"}),e.jsxs("div",{className:"space-y-3 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{id:"include_grades",checked:i.include_grades,onCheckedChange:a=>{const s=a===!0;console.log("[ADMIN] Archive include_grades changed to:",s),A("include_grades",s)}}),e.jsxs(m,{htmlFor:"include_grades",className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),"Student grades and academic records"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{id:"include_honors",checked:i.include_honors,onCheckedChange:a=>{const s=a===!0;console.log("[ADMIN] Archive include_honors changed to:",s),A("include_honors",s)}}),e.jsxs(m,{htmlFor:"include_honors",className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),"Honor roll and academic achievements"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{id:"include_certificates",checked:i.include_certificates,onCheckedChange:a=>{const s=a===!0;console.log("[ADMIN] Archive include_certificates changed to:",s),A("include_certificates",s)}}),e.jsxs(m,{htmlFor:"include_certificates",className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"Certificates and recognitions"]})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Export Format"}),e.jsxs(x,{value:i.format,onValueChange:a=>A("format",a),children:[e.jsx(u,{children:e.jsx(v,{})}),e.jsxs(_,{children:[e.jsx(d,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),"Excel Workbook (Multiple Sheets)"]})}),e.jsx(d,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),"CSV Files (Zip Archive)"]})})]})]})]}),e.jsxs(J,{type:"submit",disabled:Ue||!i.academic_level_id||!i.school_year,className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),q?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Archive..."]}):"Create Academic Archive"]})]})})]})}),e.jsx(xe,{value:"class-section-reports",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(he,{children:[e.jsxs(me,{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5"}),"Generate Class Section Reports"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate comprehensive class section rosters and student lists by academic level."})]}),e.jsx(F,{children:e.jsxs("form",{onSubmit:Je,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Academic Level *"}),e.jsxs(x,{value:o.academic_level_id,onValueChange:a=>{console.log("Academic Level Changed:",a),I({...o,academic_level_id:a,year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"Select level"})}),e.jsx(_,{children:N.map(a=>e.jsx(d,{value:a.id.toString(),children:a.name},a.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Academic level is required for class section reports"})]}),(()=>{if(!o.academic_level_id)return null;const a=N.find(c=>c.id.toString()===o.academic_level_id);if(!a)return null;const s=a.key==="elementary",r=a.key==="junior_highschool",n=a.key==="senior_highschool",h=a.key==="college";if(s||r){const c=s?[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}]:[{value:"grade_7",label:"Grade 7"},{value:"grade_8",label:"Grade 8"},{value:"grade_9",label:"Grade 9"},{value:"grade_10",label:"Grade 10"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Year Level"}),e.jsxs(x,{value:o.year_level,onValueChange:l=>{console.log("Year Level Changed:",l),I({...o,year_level:l,section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"Select year level"})}),e.jsx(_,{children:c.map(l=>e.jsx(d,{value:l.value,children:l.label},l.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Filter by year level"})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Section"}),e.jsxs(x,{value:o.section_id,onValueChange:l=>I({...o,section_id:l}),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All sections"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Sections"}),ee.map(l=>e.jsx(d,{value:l.id.toString(),children:l.name},l.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})}if(n){const c=[{value:"grade_11",label:"Grade 11"},{value:"grade_12",label:"Grade 12"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Year Level"}),e.jsxs(x,{value:o.year_level,onValueChange:l=>{console.log("Year Level Changed:",l),I({...o,year_level:l,track_id:"",strand_id:"",section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"Select year level"})}),e.jsx(_,{children:c.map(l=>e.jsx(d,{value:l.value,children:l.label},l.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select year level"})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Track"}),e.jsxs(x,{value:o.track_id,onValueChange:l=>{console.log("Track Changed:",l),I({...o,track_id:l,strand_id:"",section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"Select track"})}),e.jsx(_,{children:H.map(l=>e.jsxs(d,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select track"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Strand"}),e.jsxs(x,{value:o.strand_id,onValueChange:l=>{console.log("Strand Changed:",l),I({...o,strand_id:l,section_id:""})},disabled:!o.track_id,children:[e.jsx(u,{children:e.jsx(v,{placeholder:o.track_id?"Select strand":"Select track first"})}),e.jsx(_,{children:Fe.map(l=>e.jsxs(d,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select strand"})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Section"}),e.jsxs(x,{value:o.section_id,onValueChange:l=>I({...o,section_id:l}),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All sections"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Sections"}),ee.map(l=>e.jsx(d,{value:l.id.toString(),children:l.name},l.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})]})}if(h){const c=[{value:"first_year",label:"1st Year"},{value:"second_year",label:"2nd Year"},{value:"third_year",label:"3rd Year"},{value:"fourth_year",label:"4th Year"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Year Level"}),e.jsxs(x,{value:o.year_level,onValueChange:l=>{console.log("Year Level Changed:",l),I({...o,year_level:l,department_id:"",course_id:"",section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"Select year level"})}),e.jsx(_,{children:c.map(l=>e.jsx(d,{value:l.value,children:l.label},l.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select year level"})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Department"}),e.jsxs(x,{value:o.department_id,onValueChange:l=>{console.log("Department Changed:",l),I({...o,department_id:l,course_id:"",section_id:""})},children:[e.jsx(u,{children:e.jsx(v,{placeholder:"Select department"})}),e.jsx(_,{children:T.map(l=>e.jsxs(d,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select department"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Course"}),e.jsxs(x,{value:o.course_id,onValueChange:l=>{console.log("Course Changed:",l),I({...o,course_id:l,section_id:""})},disabled:!o.department_id,children:[e.jsx(u,{children:e.jsx(v,{placeholder:o.department_id?"Select course":"Select department first"})}),e.jsx(_,{children:Oe.map(l=>e.jsxs(d,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select course"})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Section"}),e.jsxs(x,{value:o.section_id,onValueChange:l=>I({...o,section_id:l}),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"All sections"})}),e.jsxs(_,{children:[e.jsx(d,{value:"all",children:"All Sections"}),ee.map(l=>e.jsx(d,{value:l.id.toString(),children:l.name},l.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})]})}return null})(),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"School Year *"}),e.jsxs(x,{value:o.school_year,onValueChange:a=>I("school_year",a),children:[e.jsx(u,{children:e.jsx(v,{placeholder:"Select year"})}),e.jsx(_,{children:k.map(a=>e.jsx(d,{value:a,children:a},a))})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Export Format"}),e.jsxs(x,{value:o.format,onValueChange:a=>I("format",a),children:[e.jsx(u,{children:e.jsx(v,{})}),e.jsxs(_,{children:[e.jsx(d,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"PDF Report"]})}),e.jsx(d,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),"Excel Spreadsheet"]})}),e.jsx(d,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),"CSV File"]})})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{id:"include_grades_section",checked:o.include_grades,onCheckedChange:a=>{const s=a===!0;console.log("[ADMIN] Section include_grades changed to:",s),I("include_grades",s)}}),e.jsx(m,{htmlFor:"include_grades_section",children:"Include student average grades in the report"})]}),(!o.academic_level_id||!o.school_year)&&e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Required:"})," Please select Academic Level and School Year to generate the report."]})}),e.jsx(J,{type:"submit",disabled:$e||!o.academic_level_id||!o.school_year||q,className:"flex items-center gap-2",children:q?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-4 w-4"}),"Generate Class Section Report"]})})]})})]})})]})]})})]})]})}export{Kl as default};
