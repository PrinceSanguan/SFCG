import{r as g,K as Se,m as I,j as e,$ as Ne}from"./app-NOZokKrp.js";import{H as Ce}from"./header-DMnd7Gtf.js";import{S as be}from"./sidebar-78_mr7Az.js";import{C as y,a as S,b as W,c as q}from"./card-CZg7yPSw.js";import{B as T}from"./button-C8sJrIGt.js";import{L as n}from"./label-BafUkssy.js";import{S as m,a as h,b as x,c as p,d as c}from"./select-Be6T499F.js";import{T as we,a as ke,b as $,c as J}from"./tabs-0S5BOu12.js";import{C as G}from"./checkbox-9iQBXDwT.js";import{U as ae}from"./users-CazxFmiC.js";import{F as R}from"./file-text-BYIGkCUj.js";import{A as re}from"./award-hxQFsR53.js";import{C as Ae}from"./calendar-DDnz7MkW.js";import{G as te}from"./graduation-cap-CUfUpYzQ.js";import{T as Fe}from"./trending-up-DsBBlVUx.js";import{F as K,a as X,A as ie}from"./file-x-DVOgH9Wh.js";import{D as ce}from"./download-BcCKJXov.js";/* empty css            */import"./dropdown-menu-D3_MARD1.js";import"./Combination-CfLtk33l.js";import"./index-B17d5bkF.js";import"./separator-Cmk2b_2Z.js";import"./chevron-right-B_SaZWVc.js";import"./crown-B3RkF-dk.js";import"./building-2-BHbArqzd.js";import"./user-cog-BT4bH5ue.js";import"./book-open-BbdoqLMw.js";import"./user-check-DihSi9Vo.js";import"./notebook-CvC6ICZS.js";import"./chart-no-axes-column-increasing-RyzHM-oY.js";import"./shield-C2ImuMbT.js";import"./index-mAfkgoFK.js";import"./index-iE5WAaYG.js";import"./check-D7g8STvH.js";function ys({user:Z,academicLevels:v,schoolYears:_,currentSchoolYear:k,gradingPeriods:V,honorTypes:de,sections:L,tracks:Q,strands:O,departments:ee,courses:P,stats:A}){var le;const[ne,oe]=g.useState("honor-statistics"),[F,b]=g.useState(!1),[H,Ee]=g.useState(""),[De,se]=g.useState([]),[B,Y]=g.useState([]),[Ie,me]=g.useState([]),[he,z]=g.useState([]),[Te,xe]=g.useState([]),[pe,M]=g.useState([]),{props:je}=Se(),N=je.csrf_token||((le=document.querySelector('meta[name="csrf-token"]'))==null?void 0:le.content)||"",{data:C,setData:Ge,post:Re,processing:Ve}=I({academic_level_id:"all",semester_id:"",grading_period_id:"all",school_year:k||_[0]||"",format:"pdf",include_statistics:!0}),{data:E,setData:D,post:Le,processing:ge}=I({academic_level_id:"all",school_year:k||_[0]||"",honor_type_id:"all",format:"pdf"}),{data:f,setData:w,post:Oe,processing:ue}=I({academic_level_id:"",school_year:k||_[0]||"",include_grades:!0,include_honors:!0,include_certificates:!0,format:"excel"}),{data:a,setData:j,post:Pe,processing:fe}=I({academic_level_id:"",year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:"all",school_year:k||_[0]||"",include_grades:!1,format:"pdf"});g.useEffect(()=>{if(C.academic_level_id&&C.academic_level_id!=="all"){const l=parseInt(C.academic_level_id);let t=V.filter(r=>r.academic_level_id===l);if(H){const r=parseInt(H);t=t.filter(i=>i.id===r||i.parent_id===r)}se(t)}else se([])},[C.academic_level_id,H,V]),g.useEffect(()=>{console.log("=== CLASS SECTION REPORT - PAGE LOADED ==="),console.log("Available Academic Levels:",v),console.log("Available School Years:",_),console.log("Current School Year:",k),console.log("Initial Section Data:",a),console.log("Available Sections:",L),console.log("Available Tracks:",Q),console.log("Available Strands:",O),console.log("Available Departments:",ee),console.log("Available Courses:",P)},[]),g.useEffect(()=>{if(console.log("=== CLASS SECTION FILTER TRIGGERED ==="),console.log("Academic Level ID:",a.academic_level_id),console.log("Year Level:",a.year_level),console.log("Track ID:",a.track_id),console.log("Strand ID:",a.strand_id),console.log("Department ID:",a.department_id),console.log("Course ID:",a.course_id),!a.academic_level_id){Y([]),me([]),z([]),xe([]),M([]);return}const l=parseInt(a.academic_level_id),t=v.find(i=>i.id===l);if(console.log("Selected Level:",t),!t){Y([]);return}let r=L.filter(i=>i.academic_level_id===l);console.log("Sections for level:",r),a.year_level&&(r=r.filter(i=>i.specific_year_level===a.year_level),console.log("After year level filter:",r)),t.key==="senior_highschool"&&(a.track_id&&(r=r.filter(i=>{var o;return((o=i.track_id)==null?void 0:o.toString())===a.track_id}),console.log("After track filter:",r)),a.strand_id&&(r=r.filter(i=>{var o;return((o=i.strand_id)==null?void 0:o.toString())===a.strand_id}),console.log("After strand filter:",r))),t.key==="college"&&(a.department_id&&(r=r.filter(i=>{var o;return((o=i.department_id)==null?void 0:o.toString())===a.department_id}),console.log("After department filter:",r)),a.course_id&&(r=r.filter(i=>{var o;return((o=i.course_id)==null?void 0:o.toString())===a.course_id}),console.log("After course filter:",r))),console.log("Final filtered sections:",r),Y(r)},[a.academic_level_id,a.year_level,a.track_id,a.strand_id,a.department_id,a.course_id,L,v]),g.useEffect(()=>{if(a.track_id){const l=parseInt(a.track_id),t=O.filter(r=>r.track_id===l);console.log("Filtered Strands for Track:",t),z(t)}else z([])},[a.track_id,O]),g.useEffect(()=>{if(a.department_id){const l=parseInt(a.department_id),t=P.filter(r=>r.department_id===l);console.log("Filtered Courses for Department:",t),M(t)}else M([])},[a.department_id,P]);const ve=l=>{if(l.preventDefault(),!N){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}b(!0);let t=document.getElementById("download-iframe");t||(t=document.createElement("iframe"),t.id="download-iframe",t.style.display="none",document.body.appendChild(t));const r=document.createElement("form");r.method="POST",r.action=route("admin.reports.honor-statistics"),r.target="download-iframe";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=N,r.appendChild(i),Object.entries(E).forEach(([o,d])=>{const s=document.createElement("input");s.type="hidden",s.name=o,typeof d=="boolean"?s.value=d?"1":"0":s.value=(d==null?void 0:d.toString())||"",r.appendChild(s)}),document.body.appendChild(r),r.submit(),document.body.removeChild(r),setTimeout(()=>b(!1),2e3)},_e=l=>{if(l.preventDefault(),!N){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}b(!0);let t=document.getElementById("download-iframe");t||(t=document.createElement("iframe"),t.id="download-iframe",t.style.display="none",document.body.appendChild(t));const r=document.createElement("form");r.method="POST",r.action=route("admin.reports.archive-records"),r.target="download-iframe";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=N,r.appendChild(i),Object.entries(f).forEach(([o,d])=>{const s=document.createElement("input");s.type="hidden",s.name=o,typeof d=="boolean"?s.value=d?"1":"0":s.value=(d==null?void 0:d.toString())||"",r.appendChild(s)}),document.body.appendChild(r),r.submit(),document.body.removeChild(r),setTimeout(()=>b(!1),2e3)},ye=l=>{if(console.log("=== handleClassSectionReport CALLED ==="),l.preventDefault(),l.stopPropagation(),console.log("=== CLASS SECTION REPORT FORM SUBMISSION ==="),console.log("Form Data:",a),!N){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}console.log("CSRF Token:",N),b(!0);let t=document.getElementById("download-iframe");t?console.log("Using existing download iframe"):(t=document.createElement("iframe"),t.id="download-iframe",t.style.display="none",document.body.appendChild(t),console.log("Created download iframe"));const r=document.createElement("form");r.method="POST",r.action=route("admin.reports.class-section-report"),r.target="download-iframe",console.log("Form action URL:",r.action);const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=N,r.appendChild(i),console.log("Added CSRF token to form");const o={};Object.entries(a).forEach(([d,s])=>{const u=document.createElement("input");u.type="hidden",u.name=d,typeof s=="boolean"?u.value=s?"1":"0":u.value=(s==null?void 0:s.toString())||"",o[d]=u.value,r.appendChild(u)}),console.log("Form data being submitted:",o),document.body.appendChild(r),console.log("Form appended to body, submitting..."),r.submit(),console.log("Form submitted"),document.body.removeChild(r),console.log("Form removed from body"),t.onload=()=>{var d,s;console.log("Iframe loaded");try{const u=t.contentDocument||((d=t.contentWindow)==null?void 0:d.document);if(u){const U=u.body;console.log("Iframe body content:",(s=U==null?void 0:U.textContent)==null?void 0:s.substring(0,500))}}catch(u){console.log("Could not access iframe content (this is normal for successful downloads):",u)}},setTimeout(()=>{console.log("Resetting loading state"),b(!1)},2e3)};return(()=>{if(C.academic_level_id&&C.academic_level_id!=="all"){const l=parseInt(C.academic_level_id),t=v.find(r=>r.id===l);if(t&&(t.key==="college"||t.key==="senior_highschool"))return V.filter(r=>r.academic_level_id===l&&r.parent_id===null&&r.type==="semester")}return[]})(),e.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(be,{user:Z}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(Ce,{user:Z}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 min-h-0",children:e.jsxs("div",{className:"flex flex-col gap-6 pb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Reports & Archiving"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Generate comprehensive reports and archive academic records."})]}),e.jsx(Ne,{href:route("admin.dashboard"),children:e.jsx(T,{variant:"outline",children:"Back to Dashboard"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(y,{children:e.jsxs(S,{className:"flex items-center p-6",children:[e.jsx(ae,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.total_students})]})]})}),e.jsx(y,{children:e.jsxs(S,{className:"flex items-center p-6",children:[e.jsx(R,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Certificates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.total_certificates})]})]})}),e.jsx(y,{children:e.jsxs(S,{className:"flex items-center p-6",children:[e.jsx(re,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Honor Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.total_honors})]})]})}),e.jsx(y,{children:e.jsxs(S,{className:"flex items-center p-6",children:[e.jsx(Ae,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Periods"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.active_periods})]})]})}),e.jsx(y,{children:e.jsxs(S,{className:"flex items-center p-6",children:[e.jsx(te,{className:"h-8 w-8 text-indigo-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Sections"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.active_sections})]})]})})]}),e.jsxs(we,{value:ne,onValueChange:oe,className:"w-full",children:[e.jsxs(ke,{className:"grid w-full grid-cols-3",children:[e.jsx($,{value:"honor-statistics",children:"Honor Statistics"}),e.jsx($,{value:"archive-records",children:"Archive Records"}),e.jsx($,{value:"class-section-reports",children:"Class Section Reports"})]}),e.jsx(J,{value:"honor-statistics",className:"space-y-6",children:e.jsxs(y,{children:[e.jsxs(W,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5"}),"Generate Honor Statistics"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate comprehensive honor roll statistics and distribution analysis."})]}),e.jsx(S,{children:e.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Academic Level"}),e.jsxs(m,{value:E.academic_level_id,onValueChange:l=>D("academic_level_id",l),children:[e.jsx(h,{children:e.jsx(x,{placeholder:"All levels"})}),e.jsxs(p,{children:[e.jsx(c,{value:"all",children:"All Levels"}),v.map(l=>e.jsx(c,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Honor Type"}),e.jsxs(m,{value:E.honor_type_id,onValueChange:l=>D("honor_type_id",l),children:[e.jsx(h,{children:e.jsx(x,{placeholder:"All types"})}),e.jsxs(p,{children:[e.jsx(c,{value:"all",children:"All Types"}),de.map(l=>e.jsx(c,{value:l.id.toString(),children:l.name},l.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"School Year"}),e.jsxs(m,{value:E.school_year,onValueChange:l=>D("school_year",l),children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select year"})}),e.jsx(p,{children:_.map(l=>e.jsx(c,{value:l,children:l},l))})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Export Format"}),e.jsxs(m,{value:E.format,onValueChange:l=>D("format",l),children:[e.jsx(h,{children:e.jsx(x,{})}),e.jsxs(p,{children:[e.jsx(c,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"PDF Report"]})}),e.jsx(c,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Excel Spreadsheet"]})}),e.jsx(c,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"CSV File"]})})]})]})]})]}),e.jsx(T,{type:"submit",disabled:ge||F,className:"flex items-center gap-2",children:F?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4"}),"Generate Honor Statistics"]})})]})})]})}),e.jsx(J,{value:"archive-records",className:"space-y-6",children:e.jsxs(y,{children:[e.jsxs(W,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-5 w-5"}),"Archive Academic Records"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create comprehensive archives of academic records for specific levels and years."})]}),e.jsx(S,{children:e.jsxs("form",{onSubmit:_e,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Academic Level *"}),e.jsxs(m,{value:f.academic_level_id,onValueChange:l=>w("academic_level_id",l),children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select level"})}),e.jsx(p,{children:v.map(l=>e.jsx(c,{value:l.id.toString(),children:l.name},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Academic level is required for archiving"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"School Year *"}),e.jsxs(m,{value:f.school_year,onValueChange:l=>w("school_year",l),children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select year"})}),e.jsx(p,{children:_.map(l=>e.jsx(c,{value:l,children:l},l))})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Include in Archive"}),e.jsxs("div",{className:"space-y-3 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{id:"include_grades",checked:f.include_grades,onCheckedChange:l=>w("include_grades",!!l)}),e.jsxs(n,{htmlFor:"include_grades",className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Student grades and academic records"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{id:"include_honors",checked:f.include_honors,onCheckedChange:l=>w("include_honors",!!l)}),e.jsxs(n,{htmlFor:"include_honors",className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),"Honor roll and academic achievements"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{id:"include_certificates",checked:f.include_certificates,onCheckedChange:l=>w("include_certificates",!!l)}),e.jsxs(n,{htmlFor:"include_certificates",className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Certificates and recognitions"]})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Export Format"}),e.jsxs(m,{value:f.format,onValueChange:l=>w("format",l),children:[e.jsx(h,{children:e.jsx(x,{})}),e.jsxs(p,{children:[e.jsx(c,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Excel Workbook (Multiple Sheets)"]})}),e.jsx(c,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"CSV Files (Zip Archive)"]})})]})]})]}),e.jsxs(T,{type:"submit",disabled:ue||!f.academic_level_id||!f.school_year,className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),F?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Archive..."]}):"Create Academic Archive"]})]})})]})}),e.jsx(J,{value:"class-section-reports",className:"space-y-6",children:e.jsxs(y,{children:[e.jsxs(W,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5"}),"Generate Class Section Reports"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate comprehensive class section rosters and student lists by academic level."})]}),e.jsx(S,{children:e.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Academic Level *"}),e.jsxs(m,{value:a.academic_level_id,onValueChange:l=>{console.log("Academic Level Changed:",l),j({...a,academic_level_id:l,year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:"all"})},children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select level"})}),e.jsx(p,{children:v.map(l=>e.jsx(c,{value:l.id.toString(),children:l.name},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Academic level is required for class section reports"})]}),(()=>{if(!a.academic_level_id)return null;const l=v.find(d=>d.id.toString()===a.academic_level_id);if(!l)return null;const t=l.key==="elementary",r=l.key==="junior_highschool",i=l.key==="senior_highschool",o=l.key==="college";if(t||r){const d=t?[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}]:[{value:"grade_7",label:"Grade 7"},{value:"grade_8",label:"Grade 8"},{value:"grade_9",label:"Grade 9"},{value:"grade_10",label:"Grade 10"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Year Level"}),e.jsxs(m,{value:a.year_level,onValueChange:s=>{console.log("Year Level Changed:",s),j({...a,year_level:s,section_id:"all"})},children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select year level"})}),e.jsx(p,{children:d.map(s=>e.jsx(c,{value:s.value,children:s.label},s.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Filter by year level"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Section"}),e.jsxs(m,{value:a.section_id,onValueChange:s=>j({...a,section_id:s}),children:[e.jsx(h,{children:e.jsx(x,{placeholder:"All sections"})}),e.jsxs(p,{children:[e.jsx(c,{value:"all",children:"All Sections"}),B.map(s=>e.jsx(c,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})}if(i){const d=[{value:"grade_11",label:"Grade 11"},{value:"grade_12",label:"Grade 12"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Year Level"}),e.jsxs(m,{value:a.year_level,onValueChange:s=>{console.log("Year Level Changed:",s),j({...a,year_level:s,track_id:"",strand_id:"",section_id:"all"})},children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select year level"})}),e.jsx(p,{children:d.map(s=>e.jsx(c,{value:s.value,children:s.label},s.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select year level"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Track"}),e.jsxs(m,{value:a.track_id,onValueChange:s=>{console.log("Track Changed:",s),j({...a,track_id:s,strand_id:"",section_id:"all"})},children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select track"})}),e.jsx(p,{children:Q.map(s=>e.jsxs(c,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select track"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Strand"}),e.jsxs(m,{value:a.strand_id,onValueChange:s=>{console.log("Strand Changed:",s),j({...a,strand_id:s,section_id:"all"})},disabled:!a.track_id,children:[e.jsx(h,{children:e.jsx(x,{placeholder:a.track_id?"Select strand":"Select track first"})}),e.jsx(p,{children:he.map(s=>e.jsxs(c,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select strand"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Section"}),e.jsxs(m,{value:a.section_id,onValueChange:s=>j({...a,section_id:s}),children:[e.jsx(h,{children:e.jsx(x,{placeholder:"All sections"})}),e.jsxs(p,{children:[e.jsx(c,{value:"all",children:"All Sections"}),B.map(s=>e.jsx(c,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})]})}if(o){const d=[{value:"1st_year",label:"1st Year"},{value:"2nd_year",label:"2nd Year"},{value:"3rd_year",label:"3rd Year"},{value:"4th_year",label:"4th Year"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Year Level"}),e.jsxs(m,{value:a.year_level,onValueChange:s=>{console.log("Year Level Changed:",s),j({...a,year_level:s,department_id:"",course_id:"",section_id:"all"})},children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select year level"})}),e.jsx(p,{children:d.map(s=>e.jsx(c,{value:s.value,children:s.label},s.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select year level"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Department"}),e.jsxs(m,{value:a.department_id,onValueChange:s=>{console.log("Department Changed:",s),j({...a,department_id:s,course_id:"",section_id:"all"})},children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select department"})}),e.jsx(p,{children:ee.map(s=>e.jsxs(c,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select department"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Course"}),e.jsxs(m,{value:a.course_id,onValueChange:s=>{console.log("Course Changed:",s),j({...a,course_id:s,section_id:"all"})},disabled:!a.department_id,children:[e.jsx(h,{children:e.jsx(x,{placeholder:a.department_id?"Select course":"Select department first"})}),e.jsx(p,{children:pe.map(s=>e.jsxs(c,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select course"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Section"}),e.jsxs(m,{value:a.section_id,onValueChange:s=>j({...a,section_id:s}),children:[e.jsx(h,{children:e.jsx(x,{placeholder:"All sections"})}),e.jsxs(p,{children:[e.jsx(c,{value:"all",children:"All Sections"}),B.map(s=>e.jsx(c,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})]})}return null})(),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"School Year *"}),e.jsxs(m,{value:a.school_year,onValueChange:l=>j("school_year",l),children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select year"})}),e.jsx(p,{children:_.map(l=>e.jsx(c,{value:l,children:l},l))})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Export Format"}),e.jsxs(m,{value:a.format,onValueChange:l=>j("format",l),children:[e.jsx(h,{children:e.jsx(x,{})}),e.jsxs(p,{children:[e.jsx(c,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"PDF Report"]})}),e.jsx(c,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Excel Spreadsheet"]})}),e.jsx(c,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"CSV File"]})})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{id:"include_grades_section",checked:a.include_grades,onCheckedChange:l=>j("include_grades",!!l)}),e.jsx(n,{htmlFor:"include_grades_section",children:"Include student average grades in the report"})]}),(!a.academic_level_id||!a.school_year)&&e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Required:"})," Please select Academic Level and School Year to generate the report."]})}),e.jsx(T,{type:"submit",disabled:fe||!a.academic_level_id||!a.school_year||F,className:"flex items-center gap-2",children:F?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4"}),"Generate Class Section Report"]})})]})})]})})]})]})})]})]})}export{ys as default};
