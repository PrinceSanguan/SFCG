import{r as h,j as e,L as U,$ as u}from"./app-4Fw4o22u.js";import{H as B}from"./header-wB0Qf9XP.js";import{S as P}from"./sidebar-BHasltWe.js";import{C as f,b as y,c as v,d as N,a as b}from"./card-DJ7fdxSi.js";import{B as n}from"./button-gNCVOgNq.js";import{B as T}from"./badge-SneF3cHW.js";import{I as p}from"./input-PCToFPZu.js";import{L as d}from"./label-Gie53tf9.js";import{S as w,a as _,b as S,c as C,d as o}from"./select-6bpZQs5k.js";import{A as V}from"./arrow-left-DBqqZNiq.js";import{D as z}from"./download-CwWxkbmL.js";import{F as O}from"./filter-DRIBcCv9.js";import{S as H}from"./search-KyFq18N8.js";import{A}from"./activity-B1T3UL5a.js";import{E as R}from"./eye-B_vvDHkR.js";/* empty css            */import"./dropdown-menu-D6-_Ft-G.js";import"./Combination-QrKwmNkq.js";import"./index-B8WdjkTd.js";import"./separator-CyPAhbL9.js";import"./chevron-down-hlat33IM.js";import"./users-D6C8imcn.js";import"./chevron-right-CNgOdbOL.js";import"./crown-KeJuHY6x.js";import"./building-2-DmPfYsr7.js";import"./user-cog-CV6l5NFk.js";import"./book-open-BXcBMdRc.js";import"./user-plus-BbFV6Tbb.js";import"./user-check-BO5Cn4kj.js";import"./graduation-cap-DQuwBf51.js";import"./notebook-Dr4DqkgJ.js";import"./chart-no-axes-column-increasing-x0klZ01W.js";import"./shield-C1caion6.js";import"./index-DXxs4UjQ.js";import"./index-C6l-0toZ.js";import"./check-BdzZtWqb.js";function Ae({user:j,activityLogs:r,filters:m,availableActions:F,users:k}){const[i,x]=h.useState(m),[g,q]=h.useState(!1);h.useEffect(()=>{x(m)},[m]);const c=(s,t)=>{x(a=>({...a,[s]:t}))},D=()=>{const s=new URLSearchParams;Object.entries(i).forEach(([a,l])=>{l&&l!=="all"&&s.append(a,l)});const t=`${route("admin.security.activity-logs")}?${s.toString()}`;window.location.href=t},$=()=>{x({}),window.location.href=route("admin.security.activity-logs")},E=s=>({login:"bg-green-100 text-green-800",logout:"bg-gray-100 text-gray-800",failed_login:"bg-red-100 text-red-800",unauthorized_admin_access:"bg-red-100 text-red-800",reset_password:"bg-blue-100 text-blue-800",create_backup:"bg-purple-100 text-purple-800",download_backup:"bg-blue-100 text-blue-800",delete_backup:"bg-red-100 text-red-800",created_user:"bg-green-100 text-green-800",updated_user:"bg-blue-100 text-blue-800",deleted_user:"bg-red-100 text-red-800",terminate_session:"bg-orange-100 text-orange-800"})[s]||"bg-gray-100 text-gray-800",L=s=>new Date(s).toLocaleString(),I=()=>{const s=new URLSearchParams;Object.entries(i).forEach(([a,l])=>{l&&l!=="all"&&s.append(a,l)}),s.append("export","csv");const t=`${route("admin.security.activity-logs")}?${s.toString()}`;window.open(t,"_blank")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(P,{user:j}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(B,{user:j}),e.jsxs("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:[e.jsx(U,{title:"Activity Logs - System Audit & Security"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{href:route("admin.security.index"),children:e.jsxs(n,{variant:"ghost",size:"sm",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Back to Security"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Activity Logs"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Monitor and analyze system activity and user actions"})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(n,{variant:"outline",onClick:I,children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Export CSV"]})})]}),e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Filter Activity Logs"]}),e.jsx(N,{children:"Filter logs by action, user, date range, and search terms"})]}),e.jsxs(b,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"action-filter",children:"Action"}),e.jsxs(w,{value:i.action||"all",onValueChange:s=>c("action",s),children:[e.jsx(_,{children:e.jsx(S,{placeholder:"Select action"})}),e.jsxs(C,{children:[e.jsx(o,{value:"all",children:"All Actions"}),F.map(s=>e.jsx(o,{value:s,children:s.replace("_"," ")},s))]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"user-filter",children:"User"}),e.jsxs(w,{value:i.user_id||"all",onValueChange:s=>c("user_id",s),children:[e.jsx(_,{children:e.jsx(S,{placeholder:"Select user"})}),e.jsxs(C,{children:[e.jsx(o,{value:"all",children:"All Users"}),k.map(s=>{var t;return e.jsxs(o,{value:((t=s.id)==null?void 0:t.toString())||"",children:[s.name," (",s.email,")"]},s.id)})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"date-from",children:"Date From"}),e.jsx(p,{type:"date",value:i.date_from||"",onChange:s=>c("date_from",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"date-to",children:"Date To"}),e.jsx(p,{type:"date",value:i.date_to||"",onChange:s=>c("date_to",s.target.value)})]})]}),e.jsxs("div",{className:"flex items-end gap-4 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(d,{htmlFor:"search",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(p,{id:"search",placeholder:"Search by action, entity type, IP address, or user details...",value:i.search||"",onChange:s=>c("search",s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{onClick:D,disabled:g,children:g?"Applying...":"Apply Filters"}),e.jsx(n,{variant:"outline",onClick:$,children:"Clear All"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",r.data.length," of ",r.total," activity logs"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",r.current_page," of ",r.last_page]})]}),e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5"}),"System Activity Logs"]}),e.jsx(N,{children:"Detailed view of all system activities and user actions"})]}),e.jsx(b,{children:r.data.length>0?e.jsx("div",{className:"space-y-4",children:r.data.map(s=>{var t,a;return e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(T,{className:E(s.action),children:s.action.replace("_"," ")}),e.jsx("span",{className:"text-sm text-gray-500",children:L(s.created_at)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-700",children:"User"}),e.jsxs("p",{className:"text-sm",children:[((t=s.user)==null?void 0:t.name)||"System",((a=s.user)==null?void 0:a.email)&&` (${s.user.email})`]})]}),s.target_user&&e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-700",children:"Target User"}),e.jsxs("p",{className:"text-sm",children:[s.target_user.name," (",s.target_user.email,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-700",children:"Entity"}),e.jsxs("p",{className:"text-sm",children:[s.entity_type," ",s.entity_id?`#${s.entity_id}`:""]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-700",children:"IP Address"}),e.jsx("p",{className:"text-sm font-mono",children:s.ip_address})]})]}),s.details&&Object.keys(s.details).length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"font-medium text-sm text-gray-700 mb-1",children:"Details"}),e.jsx("div",{className:"bg-gray-50 p-2 rounded text-sm",children:e.jsx("pre",{className:"whitespace-pre-wrap text-xs",children:JSON.stringify(s.details,null,2)})})]})]}),e.jsx("div",{className:"flex gap-2 ml-4",children:e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(R,{className:"w-4 h-4 mr-1"}),"View"]})})]})},s.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No activity logs found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters or search criteria"})]})})]}),r.last_page>1&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("nav",{className:"flex items-center gap-2",children:r.links.map((s,t)=>e.jsx(u,{href:s.url||"#",className:`px-3 py-2 text-sm rounded-md ${s.active?"bg-blue-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50"} ${s.url?"":"opacity-50 cursor-not-allowed"}`,onClick:a=>!s.url&&a.preventDefault(),children:s.label.replace("&laquo;","«").replace("&raquo;","»")},t))})})]})]})]})]})}export{Ae as default};
