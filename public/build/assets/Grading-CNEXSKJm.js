import{r as g,m as R,j as e,S as $}from"./app-BUacVS3B.js";import{S as E,H as J}from"./sidebar-CpdPw2bS.js";import{C as y,a as S,b as K,c as W}from"./card-CgFlvjis.js";import{B as l}from"./button-hasTKr4q.js";import{I as n}from"./input-Ct3tLlb6.js";import{L as d}from"./label-C-XjMAxD.js";import{S as b,a as k,b as D,c as w,d as F}from"./select-BNvhVA6b.js";import{A as c,a as o}from"./alert-B4nYcqSw.js";import{B as v}from"./badge-BgcoyrbW.js";import{D as A,a as X,b as P,c as O,d as B}from"./dialog-DWqMbVjz.js";import{A as Y}from"./arrow-left-jC-4B6C-.js";import{P as Z}from"./plus-DAazCVyJ.js";import{B as ee}from"./book-open-31XnliA-.js";import{C as ae}from"./calendar-DDEbcdqx.js";import{S as se}from"./square-pen-D3LgxOoA.js";import{T as te}from"./trash-2-Dsqu0Yd9.js";/* empty css            */import"./dropdown-menu-DUnoF0CX.js";import"./Combination-D3ne_WHq.js";import"./index-CdEKCKk_.js";import"./separator-BFGTiYSz.js";import"./users-DlOjb4py.js";import"./chevron-right-DzmeGSe9.js";import"./crown-L3cJlpgb.js";import"./building-2-DhLVrrPC.js";import"./user-cog-dNUKz5hM.js";import"./user-check-Cy_G0F79.js";import"./graduation-cap-CaBLylT9.js";import"./notebook-B8zmA_fG.js";import"./chart-no-axes-column-increasing-DpmpKgZA.js";import"./index-DtPi_XZZ.js";import"./index-m40YCXEv.js";import"./check-B3Yona0S.js";function He({user:p,gradingPeriods:I,academicLevels:h}){const[T,j]=g.useState(!1),[_,u]=g.useState(null),[G,m]=g.useState(!1),{data:i,setData:t,post:H,put:L,processing:x,reset:f,errors:s}=R({name:"",code:"",academic_level_id:"",start_date:"",end_date:"",sort_order:0,is_active:!0}),U=()=>{H(route("registrar.academic.grading-periods.store"),{onSuccess:()=>{j(!1),f()}})},z=a=>{u(a),t({name:a.name,code:a.code,academic_level_id:a.academic_level_id.toString(),start_date:a.start_date,end_date:a.end_date,sort_order:a.sort_order,is_active:a.is_active}),m(!0)},V=()=>{_&&L(route("registrar.academic.grading-periods.update",_.id),{onSuccess:()=>{m(!1),u(null),f()}})},q=a=>{confirm(`Are you sure you want to delete "${a.name}"? This action cannot be undone.`)&&$.delete(route("registrar.academic.grading-periods.destroy",a.id))},N=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),M=a=>a?e.jsx(v,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"}):e.jsx(v,{variant:"secondary",children:"Inactive"});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(E,{user:p}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(J,{user:p}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Back"]})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Grading Periods Management"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage grading periods, quarters, and semesters for each academic level."})]}),e.jsx(y,{children:e.jsx(S,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold",children:"Grading Periods"}),e.jsxs(A,{open:T,onOpenChange:j,children:[e.jsx(X,{asChild:!0,children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Add Grading Period"]})}),e.jsxs(P,{className:"max-w-md",children:[e.jsx(O,{children:e.jsx(B,{children:"Create New Grading Period"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",children:"Name"}),e.jsx(n,{id:"name",value:i.name,onChange:a=>t("name",a.target.value),placeholder:"e.g., First Quarter, First Semester"}),(s==null?void 0:s.name)&&e.jsx(c,{variant:"destructive",children:e.jsx(o,{children:s.name})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"code",children:"Code"}),e.jsx(n,{id:"code",value:i.code,onChange:a=>t("code",a.target.value),placeholder:"e.g., Q1, S1"}),(s==null?void 0:s.code)&&e.jsx(c,{variant:"destructive",children:e.jsx(o,{children:s.code})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"academic_level_id",children:"Academic Level"}),e.jsxs(b,{value:i.academic_level_id,onValueChange:a=>t("academic_level_id",a),children:[e.jsx(k,{children:e.jsx(D,{placeholder:"Select academic level"})}),e.jsx(w,{children:h.map(a=>e.jsx(F,{value:a.id.toString(),children:a.name},a.id))})]}),(s==null?void 0:s.academic_level_id)&&e.jsx(c,{variant:"destructive",children:e.jsx(o,{children:s.academic_level_id})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"start_date",children:"Start Date"}),e.jsx(n,{id:"start_date",type:"date",value:i.start_date,onChange:a=>t("start_date",a.target.value)}),(s==null?void 0:s.start_date)&&e.jsx(c,{variant:"destructive",children:e.jsx(o,{children:s.start_date})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"end_date",children:"End Date"}),e.jsx(n,{id:"end_date",type:"date",value:i.end_date,onChange:a=>t("end_date",a.target.value)}),(s==null?void 0:s.end_date)&&e.jsx(c,{variant:"destructive",children:e.jsx(o,{children:s.end_date})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"sort_order",children:"Sort Order"}),e.jsx(n,{id:"sort_order",type:"number",value:i.sort_order,onChange:a=>t("sort_order",parseInt(a.target.value)||0),min:"0"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx("input",{id:"is_active",type:"checkbox",checked:i.is_active,onChange:a=>t("is_active",a.target.checked),className:"rounded border-gray-300"}),e.jsx(d,{htmlFor:"is_active",children:"Active"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(l,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(l,{onClick:U,disabled:x,children:x?"Creating...":"Create"})]})]})]})]})]})})}),e.jsx("div",{className:"space-y-4",children:h.map(a=>{const C=I.filter(r=>r.academic_level_id===a.id);return e.jsxs(y,{children:[e.jsx(K,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),a.name]})}),e.jsx(S,{children:C.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No grading periods defined for this level."}):e.jsx("div",{className:"space-y-3",children:C.sort((r,Q)=>r.sort_order-Q.sort_order).map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:r.name}),e.jsx(v,{variant:"outline",children:r.code})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[N(r.start_date)," - ",N(r.end_date)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[M(r.is_active),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>z(r),children:e.jsx(se,{className:"h-4 w-4"})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>q(r),className:"text-red-600 hover:text-red-700",children:e.jsx(te,{className:"h-4 w-4"})})]})]},r.id))})})]},a.id)})})]})})]}),e.jsx(A,{open:G,onOpenChange:m,children:e.jsxs(P,{className:"max-w-md",children:[e.jsx(O,{children:e.jsx(B,{children:"Edit Grading Period"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"edit_name",children:"Name"}),e.jsx(n,{id:"edit_name",value:i.name,onChange:a=>t("name",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"edit_code",children:"Code"}),e.jsx(n,{id:"edit_code",value:i.code,onChange:a=>t("code",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"edit_academic_level_id",children:"Academic Level"}),e.jsxs(b,{value:i.academic_level_id,onValueChange:a=>t("academic_level_id",a),children:[e.jsx(k,{children:e.jsx(D,{})}),e.jsx(w,{children:h.map(a=>e.jsx(F,{value:a.id.toString(),children:a.name},a.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"edit_start_date",children:"Start Date"}),e.jsx(n,{id:"edit_start_date",type:"date",value:i.start_date,onChange:a=>t("start_date",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"edit_end_date",children:"End Date"}),e.jsx(n,{id:"edit_end_date",type:"date",value:i.end_date,onChange:a=>t("end_date",a.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"edit_sort_order",children:"Sort Order"}),e.jsx(n,{id:"edit_sort_order",type:"number",value:i.sort_order,onChange:a=>t("sort_order",parseInt(a.target.value)||0),min:"0"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx("input",{id:"edit_is_active",type:"checkbox",checked:i.is_active,onChange:a=>t("is_active",a.target.checked),className:"rounded border-gray-300"}),e.jsx(d,{htmlFor:"edit_is_active",children:"Active"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(l,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(l,{onClick:V,disabled:x,children:x?"Updating...":"Update"})]})]})]})})]})}export{He as default};
