import{r as d,j as e,$ as C,S as w}from"./app-Df6pOt0B.js";import{S as $,H as z}from"./sidebar-BTD1oIgz.js";import{C as A,a as T,b as O,c as R}from"./card-SHz_gDUn.js";import{B as S}from"./badge-Bkne4UVS.js";import{B as c}from"./button-CFyY9r0y.js";import{I as k}from"./input-mTl52m7X.js";import{L as i}from"./label-B3zyMD-h.js";import{S as n,a as o,b as m,c as h,d as l}from"./select-BtRdLhZp.js";import{T as Y}from"./textarea-kP6ery2e.js";import{D as J,b as K,c as Q,d as W}from"./dialog-Dcn26bFY.js";import{A as X}from"./arrow-left-B3cUqWBV.js";import{B as L}from"./book-open-BpDwbA5s.js";import{P as Z}from"./plus-B2rVwKlp.js";import{U as ee}from"./user-B9YJVwYS.js";import{C as se}from"./calendar-DimjFSXo.js";import{U as ae}from"./users-Cwfi7fnc.js";import{S as re}from"./square-pen-Dn7W_1zE.js";import{T as te}from"./trash-2-BFVtT94r.js";/* empty css            */import"./dropdown-menu-DCFTfiW8.js";import"./Combination-C13395JR.js";import"./index-7xy96iGh.js";import"./separator-DhuRV2zM.js";import"./chevron-right-DX0o-eYc.js";import"./crown-CdvO5j-f.js";import"./building-2-DbU8A1Zs.js";import"./user-cog-BIV7GiYb.js";import"./user-check-DMRRE-zN.js";import"./graduation-cap-CpXDudwQ.js";import"./notebook-CFHP8tRP.js";import"./chart-no-axes-column-increasing-CDzR4_mt.js";import"./index-D6Kny6bb.js";import"./index-BVflLaBC.js";import"./check-C1mo-YGR.js";function He({user:N,assignments:F,teachers:D,subjects:b,academicLevels:B,gradingPeriods:V,strands:q}){const[u,E]=d.useState(""),[x,p]=d.useState(""),[G,y]=d.useState([]),[U,j]=d.useState(!1),[g,v]=d.useState(null),[t,r]=d.useState({teacher_id:"",subject_id:"",academic_level_id:"",grade_level:"",strand_id:"",grading_period_id:"",school_year:"2024-2025",notes:"",auto_enroll_students:!0});d.useEffect(()=>{y(x?b.filter(s=>s.academic_level_id.toString()===x):[])},[x,b]);const H=s=>{s.preventDefault();const a=g?`/registrar/academic/assign-teachers-subjects/${g.id}`:"/registrar/academic/assign-teachers-subjects",P=g?"put":"post";w.visit(a,{method:P,data:t,onSuccess:()=>{j(!1),v(null),_()}})},I=s=>{var a;v(s),r({teacher_id:s.teacher_id.toString(),subject_id:s.subject_id.toString(),academic_level_id:s.academic_level_id.toString(),grade_level:s.grade_level||"",strand_id:s.strand_id?s.strand_id.toString():"",grading_period_id:((a=s.grading_period_id)==null?void 0:a.toString())||"",school_year:s.school_year,notes:s.notes||"",auto_enroll_students:!0}),p(s.academic_level_id.toString()),j(!0)},M=s=>{confirm("Are you sure you want to delete this assignment?")&&w.delete(`/registrar/academic/assign-teachers-subjects/${s.id}`)},_=()=>{r({teacher_id:"",subject_id:"",academic_level_id:"",grade_level:"",strand_id:"",grading_period_id:"",school_year:"2024-2025",notes:"",auto_enroll_students:!0}),p(""),v(null)},f=F.filter(s=>{const a=u.toLowerCase();return s.teacher.name.toLowerCase().includes(a)||s.subject.name.toLowerCase().includes(a)||s.academicLevel.name.toLowerCase().includes(a)});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx($,{user:N}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(z,{user:N}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(C,{href:"/registrar/academic",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100",children:[e.jsx(X,{className:"h-4 w-4"}),"Back to Academic Management"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Assign Teachers (Subjects)"})]}),e.jsx(A,{className:"bg-emerald-50 border-emerald-200 dark:bg-emerald-900/20 dark:border-emerald-800",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(L,{className:"h-5 w-5 text-emerald-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-emerald-900 dark:text-emerald-100",children:"Teacher Subject Assignments"}),e.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-300 mt-1",children:"Assign teachers to subjects by academic level. Strand and grade level are optional."})]})]})})}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(k,{placeholder:"Search assignments...",value:u,onChange:s=>E(s.target.value),className:"w-full sm:w-64"}),e.jsxs(c,{onClick:()=>{_(),j(!0)},className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"})," Assign Teacher"]})]}),e.jsxs(A,{children:[e.jsx(O,{children:e.jsxs(R,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Teacher Subject Assignments"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f.length," assignments"]})]})}),e.jsx(T,{children:f.length?e.jsx("div",{className:"space-y-4",children:f.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.teacher.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.subject.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(S,{variant:"outline",className:"text-xs",children:s.academicLevel.name}),s.grade_level&&e.jsx(S,{variant:"secondary",className:"text-xs",children:s.grade_level==="grade_11"?"Grade 11":"Grade 12"})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.school_year})]}),e.jsx(S,{variant:s.is_active?"default":"secondary",className:s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:s.is_active?"Active":"Inactive"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(C,{href:route("registrar.assign-teachers-subjects.students",s.id),children:[e.jsx(ae,{className:"h-4 w-4 mr-2"})," Manage Students"]})}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>I(s),children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(c,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>M(s),children:e.jsx(te,{className:"h-4 w-4"})})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(L,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:u?"No assignments match your search.":"No teacher subject assignments yet."})]})})]})]})})]}),e.jsx(J,{open:U,onOpenChange:j,children:e.jsxs(K,{className:"max-w-2xl",children:[e.jsx(Q,{children:e.jsx(W,{children:g?"Edit Teacher Assignment":"Assign Teacher to Subject"})}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"teacher_id",children:"Teacher"}),e.jsxs(n,{value:t.teacher_id,onValueChange:s=>r(a=>({...a,teacher_id:s})),required:!0,children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select teacher"})}),e.jsx(h,{children:D.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"academic_level_id",children:"Academic Level"}),e.jsxs(n,{value:t.academic_level_id,onValueChange:s=>{r(a=>({...a,academic_level_id:s,subject_id:""})),p(s)},required:!0,children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select academic level"})}),e.jsx(h,{children:B.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"subject_id",children:"Subject"}),e.jsxs(n,{value:t.subject_id,onValueChange:s=>r(a=>({...a,subject_id:s})),disabled:!x,required:!0,children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select subject"})}),e.jsx(h,{children:G.map(s=>e.jsxs(l,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"strand_id",children:"Strand"}),e.jsxs(n,{value:t.strand_id,onValueChange:s=>r(a=>({...a,strand_id:s})),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select strand (optional)"})}),e.jsx(h,{children:q.filter(s=>s.academic_level_id.toString()===x).map(s=>e.jsxs(l,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"grade_level",children:"Grade Level"}),e.jsxs(n,{value:t.grade_level,onValueChange:s=>r(a=>({...a,grade_level:s})),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select grade level (optional)"})}),e.jsxs(h,{children:[e.jsx(l,{value:"grade_11",children:"Grade 11"}),e.jsx(l,{value:"grade_12",children:"Grade 12"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"grading_period_id",children:"Grading Period"}),e.jsxs(n,{value:t.grading_period_id,onValueChange:s=>r(a=>({...a,grading_period_id:s})),children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Select grading period (optional)"})}),e.jsxs(h,{children:[e.jsx(l,{value:"",children:"No grading period"}),V.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"school_year",children:"School Year"}),e.jsx(k,{id:"school_year",type:"text",value:t.school_year,onChange:s=>r(a=>({...a,school_year:s.target.value})),placeholder:"e.g., 2024-2025",required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"notes",children:"Notes"}),e.jsx(Y,{id:"notes",value:t.notes,onChange:s=>r(a=>({...a,notes:s.target.value})),rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>{j(!1),_()},children:"Cancel"}),e.jsx(c,{type:"submit",children:g?"Update Assignment":"Assign Teacher"})]})]})]})})]})}export{He as default};
