import{u as tl,r as p,K as nl,m as re,j as e,$ as ol,R as cl}from"./app-Ck9-0TqB.js";import{T as V}from"./index-CtBsO7PD.js";import{B as W}from"./button-SQcN5ZJM.js";import{C as O,a as Y,b as ae,c as se}from"./card-CWyc9tp0.js";import{L as _}from"./label-DvwAKa0y.js";import{S as u,a as x,b as R,c as v,d as o}from"./select-BFUK7okk.js";import{T as hl,a as ml,b as ie,c as de}from"./tabs-DorLMlRf.js";import{C as J}from"./checkbox-DAIKISfI.js";import{S as gl,H as _l}from"./sidebar-AS7s5NQp.js";import{U as fe}from"./users-cHYX9Gdr.js";import{G as ul}from"./graduation-cap-Dv1LQyxV.js";import{A as Se}from"./award-8JAhVCzt.js";import{F as q}from"./file-text-CqfXj75o.js";import{A as ye,F as te,a as we}from"./file-x-B5HZSb5j.js";import{D as Ae}from"./download-CI-N4nED.js";/* empty css            */import"./index-BO2biReo.js";import"./Combination-kTxkOAFQ.js";import"./index-zmItTumT.js";import"./index-BWw4CE-T.js";import"./check-3oDHMaQA.js";import"./dropdown-menu-rNj-SzCc.js";import"./separator-CY0c_gTU.js";import"./chevron-right-5bbd8Qnr.js";import"./crown-Kd2klxf2.js";import"./building-2-BAOgxG28.js";import"./user-cog-3tgFnn_7.js";import"./book-open-DC-7l_iN.js";import"./user-check-DtwTjMcS.js";import"./notebook-CouTlHc4.js";import"./chart-no-axes-column-increasing-CqZepaPA.js";function Ql({user:Ee,academicLevels:f,schoolYears:k,currentSchoolYear:K,gradingPeriods:X,honorTypes:Fe,sections:y,tracks:P,strands:D,departments:$,courses:w,stats:Q}){var De;const{addToast:T}=tl(),[Ve,Le]=p.useState("grade-reports"),[ne,U]=p.useState([]),[xl,He]=p.useState([]),[Oe,oe]=p.useState([]),[Rl,Ye]=p.useState([]),[Pe,ce]=p.useState([]),[he,me]=p.useState([]),[vl,$e]=p.useState([]),[qe,ge]=p.useState([]),[pl,Ue]=p.useState([]),[Be,_e]=p.useState([]),[ue,xe]=p.useState([]),[Me,Z]=p.useState([]),[ze,ee]=p.useState([]),[We,le]=p.useState([]),[Je,B]=p.useState([]),[Re,Ie]=p.useState([]),[Ke,Ge]=p.useState([]),[Xe,ve]=p.useState([]),[Qe,Te]=p.useState([]),[Ze,pe]=p.useState([]),{props:el}=nl(),F=el.csrf_token||((De=document.querySelector('meta[name="csrf-token"]'))==null?void 0:De.content)||"",[L,H]=p.useState(!1),{data:n,setData:I,processing:Ce}=re({academic_level_id:"all",grading_period_id:"all",school_year:K||k[0]||"",year_level:"all",track_id:"all",strand_id:"all",department_id:"all",course_id:"",section_id:"",format:"pdf",include_statistics:"1"}),{data:g,setData:C,processing:Ne}=re({academic_level_id:"all",school_year:K||k[0]||"",honor_type_id:"all",year_level:"all",track_id:"all",strand_id:"all",department_id:"all",course_id:"",section_id:"",format:"pdf"}),{data:h,setData:E,processing:be}=re({academic_level_id:"",school_year:k[0]||"",year_level:"all",track_id:"all",strand_id:"all",department_id:"all",course_id:"",section_id:"",include_grades:"1",include_honors:"1",include_certificates:"1",format:"excel"}),{data:c,setData:N,processing:ll}=re({academic_level_id:"",year_level:"all",track_id:"all",strand_id:"all",department_id:"all",course_id:"",section_id:"",school_year:K||k[0]||"",include_grades:!1,format:"pdf"});p.useEffect(()=>{console.log("=== [REGISTRAR] CLASS SECTION REPORT - PAGE LOADED ==="),console.log("[REGISTRAR] Available Academic Levels:",f),console.log("[REGISTRAR] Available School Years:",k),console.log("[REGISTRAR] Current School Year:",K),console.log("[REGISTRAR] Initial Section Data:",c),console.log("[REGISTRAR] Available Sections:",y),console.log("[REGISTRAR] Available Tracks:",P),console.log("[REGISTRAR] Available Strands:",D),console.log("[REGISTRAR] Available Departments:",$),console.log("[REGISTRAR] Available Courses:",w)},[]),p.useEffect(()=>{console.log("=== [REGISTRAR] CLASS SECTION FILTER TRIGGERED ==="),console.log("[REGISTRAR] Form Data:",{academic_level_id:c.academic_level_id,year_level:c.year_level,track_id:c.track_id,strand_id:c.strand_id,department_id:c.department_id,course_id:c.course_id,school_year:c.school_year}),console.log("[REGISTRAR] Total available sections:",y.length),console.log("[REGISTRAR] Sample sections:",y.slice(0,3).map(t=>({id:t.id,name:t.name,academic_level_id:t.academic_level_id,year_level:t.specific_year_level,track_id:t.track_id,strand_id:t.strand_id,department_id:t.department_id,course_id:t.course_id,school_year:t.school_year})));const i=y.filter(t=>{const a=f.find(l=>l.key==="college");return a&&t.academic_level_id===a.id});if(i.length>0&&(console.log("[REGISTRAR] College Sections Table:"),console.table(i.map(t=>({ID:t.id,Name:t.name,Year:t.specific_year_level,Dept:t.department_id,Course:t.course_id,"School Year":t.school_year})))),!c.academic_level_id){U([]),He([]),oe([]),Ye([]),ce([]);return}const d=parseInt(c.academic_level_id),r=f.find(t=>t.id===d);if(console.log("[REGISTRAR] Selected Level:",r),!r){U([]);return}let s=y.filter(t=>t.academic_level_id===d);if(console.log("[REGISTRAR] After academic level filter:",s.length,"sections"),c.school_year&&s.length>0){const t=s.length;s=s.filter(a=>{const l=a.school_year;return!l||l===c.school_year}),console.log(`[REGISTRAR] After school year filter (${c.school_year}):`,s.length,"sections (removed",t-s.length,"sections)")}if(c.year_level){const t=s.length;s=s.filter(a=>a.specific_year_level===c.year_level),console.log(`[REGISTRAR] After year level filter (${c.year_level}):`,s.length,"sections (removed",t-s.length,"sections)")}if(r.key==="senior_highschool"){if(c.track_id){const t=s.length;s=s.filter(a=>{var l;return((l=a.track_id)==null?void 0:l.toString())===c.track_id}),console.log(`[REGISTRAR] After track filter (${c.track_id}):`,s.length,"sections (removed",t-s.length,"sections)")}if(c.strand_id){const t=s.length;s=s.filter(a=>{var l;return((l=a.strand_id)==null?void 0:l.toString())===c.strand_id}),console.log(`[REGISTRAR] After strand filter (${c.strand_id}):`,s.length,"sections (removed",t-s.length,"sections)")}}if(r.key==="college"){if(c.department_id){const t=s.length;console.log("[REGISTRAR] === DEPARTMENT FILTER DEBUG ==="),console.log("[REGISTRAR] Looking for department_id:",c.department_id,`(type: ${typeof c.department_id})`),console.log("[REGISTRAR] Sample sections before department filter:",s.slice(0,3).map(a=>{var l,m;return{id:a.id,name:a.name,department_id:a.department_id,department_id_type:typeof a.department_id,toString:(l=a.department_id)==null?void 0:l.toString(),matches:((m=a.department_id)==null?void 0:m.toString())===c.department_id}})),s=s.filter(a=>{var m;const l=((m=a.department_id)==null?void 0:m.toString())===c.department_id;return!l&&a.department_id&&console.log(`[REGISTRAR] Section "${a.name}" filtered out: department_id ${a.department_id} (${typeof a.department_id}) !== ${c.department_id} (${typeof c.department_id})`),l}),console.log(`[REGISTRAR] After department filter (${c.department_id}):`,s.length,"sections (removed",t-s.length,"sections)"),s.length===0&&t>0&&(console.error("[REGISTRAR] ⚠️ DEPARTMENT FILTER ELIMINATED ALL SECTIONS!"),console.log("[REGISTRAR] Check if sections have department_id property and if values match"))}if(c.course_id){const t=s.length;console.log("[REGISTRAR] === COURSE FILTER DEBUG ==="),console.log("[REGISTRAR] Looking for course_id:",c.course_id,`(type: ${typeof c.course_id})`),console.log("[REGISTRAR] Sample sections before course filter:",s.slice(0,3).map(a=>{var l,m;return{id:a.id,name:a.name,course_id:a.course_id,course_id_type:typeof a.course_id,toString:(l=a.course_id)==null?void 0:l.toString(),matches:((m=a.course_id)==null?void 0:m.toString())===c.course_id}})),s=s.filter(a=>{var m;const l=((m=a.course_id)==null?void 0:m.toString())===c.course_id;return!l&&a.course_id&&console.log(`[REGISTRAR] Section "${a.name}" filtered out: course_id ${a.course_id} (${typeof a.course_id}) !== ${c.course_id} (${typeof c.course_id})`),l}),console.log(`[REGISTRAR] After course filter (${c.course_id}):`,s.length,"sections (removed",t-s.length,"sections)"),s.length===0&&t>0&&(console.error("[REGISTRAR] ⚠️ COURSE FILTER ELIMINATED ALL SECTIONS!"),console.log("[REGISTRAR] Check if sections have course_id property and if values match"))}}console.log("[REGISTRAR] === FINAL FILTERED SECTIONS ==="),console.log("[REGISTRAR] Count:",s.length),s.length===0?(console.warn("[REGISTRAR] ⚠️ WARNING: No sections matched the filters!"),console.log("[REGISTRAR] Debugging tips:"),console.log("[REGISTRAR] 1. Check if sections exist for this academic level"),console.log("[REGISTRAR] 2. Try removing filters one by one to find which filter eliminates all sections"),console.log("[REGISTRAR] 3. Check section properties match your filter values")):console.log("[REGISTRAR] Filtered sections:",s.map(t=>({id:t.id,name:t.name,year_level:t.specific_year_level,track_id:t.track_id,strand_id:t.strand_id,department_id:t.department_id,course_id:t.course_id}))),U(s)},[c.academic_level_id,c.year_level,c.track_id,c.strand_id,c.department_id,c.course_id,c.school_year,y,f]),p.useEffect(()=>{if(c.track_id){const i=parseInt(c.track_id),d=D.filter(r=>r.track_id===i);console.log("[REGISTRAR] Filtered Strands for Track:",d),oe(d)}else oe([])},[c.track_id,D]),p.useEffect(()=>{if(c.department_id){const i=parseInt(c.department_id),d=w.filter(r=>r.department_id===i);console.log("[REGISTRAR] Filtered Courses for Department:",d),ce(d)}else ce([])},[c.department_id,w]),p.useEffect(()=>{if(console.log("=== [REGISTRAR] HONOR STATISTICS FILTER TRIGGERED ==="),console.log("[REGISTRAR HONOR] Academic Level ID:",g.academic_level_id),!g.academic_level_id||g.academic_level_id==="all"){me([]),$e([]),ge([]),Ue([]),_e([]);return}const i=parseInt(g.academic_level_id),d=f.find(s=>s.id===i);if(console.log("[REGISTRAR HONOR] Selected Level:",d),!d){me([]);return}let r=y.filter(s=>s.academic_level_id===i);g.year_level&&(r=r.filter(s=>s.specific_year_level===g.year_level)),d.key==="senior_highschool"&&(g.track_id&&(r=r.filter(s=>{var t;return((t=s.track_id)==null?void 0:t.toString())===g.track_id})),g.strand_id&&(r=r.filter(s=>{var t;return((t=s.strand_id)==null?void 0:t.toString())===g.strand_id}))),d.key==="college"&&(g.department_id&&(r=r.filter(s=>{var t;return((t=s.department_id)==null?void 0:t.toString())===g.department_id})),g.course_id&&(r=r.filter(s=>{var t;return((t=s.course_id)==null?void 0:t.toString())===g.course_id}))),me(r)},[g.academic_level_id,g.year_level,g.track_id,g.strand_id,g.department_id,g.course_id,y,f]),p.useEffect(()=>{if(g.track_id){const i=parseInt(g.track_id),d=D.filter(r=>r.track_id===i);ge(d)}else ge([])},[g.track_id,D]),p.useEffect(()=>{if(g.department_id){const i=parseInt(g.department_id),d=w.filter(r=>r.department_id===i);_e(d)}else _e([])},[g.department_id,w]),p.useEffect(()=>{if(console.log("=== [REGISTRAR] GRADE REPORTS FILTER TRIGGERED ==="),console.log("[REGISTRAR GRADE] Academic Level ID:",n.academic_level_id),!n.academic_level_id||n.academic_level_id==="all"){xe([]),Z([]),ee([]),le([]),B([]);return}const i=parseInt(n.academic_level_id),d=f.find(s=>s.id===i);if(console.log("[REGISTRAR GRADE] Selected Level:",d),!d){xe([]);return}let r=y.filter(s=>s.academic_level_id===i);n.year_level&&n.year_level!=="all"&&(r=r.filter(s=>s.specific_year_level===n.year_level)),d.key==="senior_highschool"&&(n.track_id&&n.track_id!=="all"&&(r=r.filter(s=>{var t;return((t=s.track_id)==null?void 0:t.toString())===n.track_id})),n.strand_id&&n.strand_id!=="all"&&(r=r.filter(s=>{var t;return((t=s.strand_id)==null?void 0:t.toString())===n.strand_id}))),d.key==="college"&&(n.department_id&&n.department_id!=="all"&&(r=r.filter(s=>{var t;return((t=s.department_id)==null?void 0:t.toString())===n.department_id})),n.course_id&&n.course_id!==""&&(r=r.filter(s=>{var t;return((t=s.course_id)==null?void 0:t.toString())===n.course_id}))),xe(r)},[n.academic_level_id,n.year_level,n.track_id,n.strand_id,n.department_id,n.course_id,y,f]),p.useEffect(()=>{if(console.log("[REGISTRAR GRADE] Filtering strands by year level and track"),n.academic_level_id&&n.academic_level_id!=="all"){const i=parseInt(n.academic_level_id),d=f.find(r=>r.id===i);if((d==null?void 0:d.key)==="senior_highschool"){let r=y.filter(a=>a.academic_level_id===i);if(n.year_level&&n.year_level!=="all"&&(r=r.filter(a=>a.specific_year_level===n.year_level)),n.track_id&&n.track_id!=="all"){const a=parseInt(n.track_id);r=r.filter(l=>l.track_id===a)}const s=new Set(r.map(a=>a.strand_id).filter(a=>a!=null)),t=D.filter(a=>s.has(a.id));console.log("[REGISTRAR GRADE] Filtered strands count:",t.length,"Strand IDs:",Array.from(s)),ee(t)}else ee([])}else ee([])},[n.academic_level_id,n.year_level,n.track_id,y,f,D]),p.useEffect(()=>{if(console.log("[REGISTRAR GRADE] Filtering courses by department"),n.academic_level_id&&n.academic_level_id!=="all"){const i=parseInt(n.academic_level_id),d=f.find(r=>r.id===i);if((d==null?void 0:d.key)==="college")if(n.department_id&&n.department_id!=="all"){const r=parseInt(n.department_id),s=w.filter(t=>t.department_id===r);console.log("[REGISTRAR GRADE] Filtered courses for department:",s.length),B(s)}else B([]);else B([])}else B([])},[n.academic_level_id,n.department_id,f,w]),p.useEffect(()=>{if(console.log("[REGISTRAR GRADE] Filtering departments by year level"),n.academic_level_id&&n.academic_level_id!=="all"){const i=parseInt(n.academic_level_id),d=f.find(r=>r.id===i);if((d==null?void 0:d.key)==="college"){let r=y.filter(a=>a.academic_level_id===i);console.log("[REGISTRAR GRADE] Total college sections:",r.length),n.year_level&&n.year_level!=="all"&&(r=r.filter(a=>a.specific_year_level===n.year_level),console.log("[REGISTRAR GRADE] Sections matching year level:",r.length));const s=new Set(r.map(a=>a.department_id).filter(a=>a!=null));console.log("[REGISTRAR GRADE] Unique department IDs:",Array.from(s));const t=$.filter(a=>s.has(a.id));console.log("[REGISTRAR GRADE] Filtered departments:",t.length),le(t)}else le([])}else le([])},[n.academic_level_id,n.year_level,y,f,$]),p.useEffect(()=>{if(console.log("[REGISTRAR GRADE] Filtering tracks by year level"),n.academic_level_id&&n.academic_level_id!=="all"){const i=parseInt(n.academic_level_id),d=f.find(r=>r.id===i);if((d==null?void 0:d.key)==="senior_highschool"){let r=y.filter(a=>a.academic_level_id===i);n.year_level&&n.year_level!=="all"&&(r=r.filter(a=>a.specific_year_level===n.year_level));const s=new Set(r.map(a=>a.track_id).filter(a=>a!=null)),t=P.filter(a=>s.has(a.id));console.log("[REGISTRAR GRADE] Filtered tracks count:",t.length,"Track IDs:",Array.from(s)),Z(t)}else Z([])}else Z([])},[n.academic_level_id,n.year_level,y,f,P]),p.useEffect(()=>{if(console.log("=== [REGISTRAR] ARCHIVE FILTER TRIGGERED ==="),console.log("[REGISTRAR ARCHIVE] Academic Level ID:",h.academic_level_id),!h.academic_level_id){Ie([]),Ge([]),ve([]),Te([]),pe([]);return}const i=parseInt(h.academic_level_id),d=f.find(s=>s.id===i);if(!d){console.log("[REGISTRAR ARCHIVE] Selected level not found");return}console.log("[REGISTRAR ARCHIVE] Selected Level:",d.name,d.key);let r=y.filter(s=>s.academic_level_id===i);console.log("[REGISTRAR ARCHIVE] Sections for level:",r.length),d.key==="senior_highschool"&&(console.log("[REGISTRAR ARCHIVE] Processing SHS filters"),Ge(P),h.track_id&&h.track_id!=="all"&&(console.log("[REGISTRAR ARCHIVE] Filtering by Track ID:",h.track_id),r=r.filter(s=>{var t;return((t=s.track_id)==null?void 0:t.toString())===h.track_id})),h.strand_id&&h.strand_id!=="all"&&(console.log("[REGISTRAR ARCHIVE] Filtering by Strand ID:",h.strand_id),r=r.filter(s=>{var t;return((t=s.strand_id)==null?void 0:t.toString())===h.strand_id})),h.year_level&&h.year_level!=="all"&&(console.log("[REGISTRAR ARCHIVE] Filtering by Year Level:",h.year_level),r=r.filter(s=>s.specific_year_level===h.year_level))),d.key==="college"&&(console.log("[REGISTRAR ARCHIVE] Processing College filters"),Te($),h.department_id&&h.department_id!=="all"&&(console.log("[REGISTRAR ARCHIVE] Filtering by Department ID:",h.department_id),r=r.filter(s=>{var t;return((t=s.department_id)==null?void 0:t.toString())===h.department_id})),h.course_id&&h.course_id!=="all"&&(console.log("[REGISTRAR ARCHIVE] Filtering by Course ID:",h.course_id),r=r.filter(s=>{var t;return((t=s.course_id)==null?void 0:t.toString())===h.course_id})),h.year_level&&h.year_level!=="all"&&(console.log("[REGISTRAR ARCHIVE] Filtering by Year Level:",h.year_level),r=r.filter(s=>s.specific_year_level===h.year_level))),(d.key==="elementary"||d.key==="junior_highschool")&&(console.log("[REGISTRAR ARCHIVE] Processing Elementary/JHS filters"),h.year_level&&h.year_level!=="all"&&(console.log("[REGISTRAR ARCHIVE] Filtering by Year Level:",h.year_level),r=r.filter(s=>s.specific_year_level===h.year_level))),console.log("[REGISTRAR ARCHIVE] Final filtered sections:",r.length),Ie(r)},[h.academic_level_id,h.year_level,h.track_id,h.strand_id,h.department_id,h.course_id,y,f,P,$]),p.useEffect(()=>{if(h.track_id&&h.track_id!=="all"){const i=parseInt(h.track_id),d=D.filter(r=>r.track_id===i);ve(d)}else ve([])},[h.track_id,D]),p.useEffect(()=>{if(h.department_id&&h.department_id!=="all"){const i=parseInt(h.department_id),d=w.filter(r=>r.department_id===i);pe(d)}else pe([])},[h.department_id,w]);const rl=i=>{if(console.log("[REGISTRAR] === GRADE REPORT SUBMISSION STARTED ==="),i.preventDefault(),!F){console.error("[REGISTRAR] CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}if(!n.school_year){console.error("[REGISTRAR] School year not selected"),alert("Please select a school year.");return}console.log("[REGISTRAR] Grade report data:",n),console.log("[REGISTRAR] Route URL:",V("registrar.reports.grade-report")),H(!0);let d=document.getElementById("download-iframe");d?(d.name="download-iframe",console.log("[REGISTRAR] Using existing download iframe, name set to:",d.name)):(d=document.createElement("iframe"),d.id="download-iframe",d.name="download-iframe",d.style.display="none",document.body.appendChild(d),console.log("[REGISTRAR] Created download iframe with name:",d.name));const r=document.createElement("form");r.method="POST",r.action=V("registrar.reports.grade-report"),r.target="download-iframe";const s=document.createElement("input");s.type="hidden",s.name="_token",s.value=F,r.appendChild(s),Object.entries(n).forEach(([t,a])=>{const l=document.createElement("input");l.type="hidden",l.name=t,l.value=(a==null?void 0:a.toString())||"",r.appendChild(l)}),d.onload=()=>{var t,a,l,m,b;console.log("[REGISTRAR] Iframe loaded at:",new Date().toISOString());try{const G=d.contentDocument||((t=d.contentWindow)==null?void 0:t.document);if(G){const j=G.body;if(j==null?void 0:j.querySelector('[data-error-type="no-data"]')){const A=((l=(a=j==null?void 0:j.querySelector(".error-title"))==null?void 0:a.textContent)==null?void 0:l.trim())||"No data found",M=((b=(m=j==null?void 0:j.querySelector(".error-message"))==null?void 0:m.textContent)==null?void 0:b.trim())||"Please adjust your filters and try again.";console.warn("[REGISTRAR] No data found:",A),T(`${A} ${M}`,"warning",{duration:5e3}),setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed after error detection"))},100);return}T("Report generated successfully! Download should start automatically.","success",{duration:3e3})}}catch(G){console.log("[REGISTRAR] Could not access iframe content (normal for downloads):",G),T("Report generated! Check your downloads folder.","success",{duration:3e3})}setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed from body after iframe load"))},100)},document.body.appendChild(r),console.log("[REGISTRAR] Form appended to body"),setTimeout(()=>{console.log("[REGISTRAR] Submitting form to iframe:",r.target),r.submit(),console.log("[REGISTRAR] Form submitted at:",new Date().toISOString())},50),setTimeout(()=>{H(!1)},2e3)},al=i=>{if(console.log("[REGISTRAR] === HONOR STATISTICS SUBMISSION STARTED ==="),i.preventDefault(),!F){console.error("[REGISTRAR] CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}if(console.log("[REGISTRAR] Honor statistics data:",g),console.log("[REGISTRAR] Route URL:",V("registrar.reports.honor-statistics")),!g.school_year){console.error("[REGISTRAR] School year is required"),alert("Please select a school year before generating the report.");return}H(!0);let d=document.getElementById("download-iframe");d?(d.name="download-iframe",console.log("[REGISTRAR] Using existing download iframe, name set to:",d.name)):(d=document.createElement("iframe"),d.id="download-iframe",d.name="download-iframe",d.style.display="none",document.body.appendChild(d),console.log("[REGISTRAR] Created download iframe with name:",d.name));const r=document.createElement("form");r.method="POST",r.action=V("registrar.reports.honor-statistics"),r.target="download-iframe",console.log("[REGISTRAR] Form action URL:",r.action),console.log("[REGISTRAR] Form target:",r.target);const s=document.createElement("input");s.type="hidden",s.name="_token",s.value=F,r.appendChild(s);const t={};Object.entries(g).forEach(([a,l])=>{const m=document.createElement("input");m.type="hidden",m.name=a,typeof l=="boolean"?m.value=l?"1":"0":m.value=(l==null?void 0:l.toString())||"",t[a]=m.value,r.appendChild(m)}),console.log("[REGISTRAR] Form data being submitted:",t),d.onload=()=>{var a,l,m,b,G;console.log("[REGISTRAR] Iframe loaded at:",new Date().toISOString());try{const j=d.contentDocument||((a=d.contentWindow)==null?void 0:a.document);if(j){const S=j.body,A=(S==null?void 0:S.textContent)||"";if(console.log("[REGISTRAR] Iframe body content length:",A.length),console.log("[REGISTRAR] Iframe body preview:",A.substring(0,500)),S==null?void 0:S.querySelector('[data-error-type="no-data"]')){const z=((m=(l=S==null?void 0:S.querySelector(".error-title"))==null?void 0:l.textContent)==null?void 0:m.trim())||"No data found",je=((G=(b=S==null?void 0:S.querySelector(".error-message"))==null?void 0:b.textContent)==null?void 0:G.trim())||"Please adjust your filters and try again.";console.warn("[REGISTRAR] No data found:",z),T(`${z} ${je}`,"warning",{duration:5e3}),setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed after error detection"))},100);return}A.includes("error")||A.includes("Error")||A.includes("Exception")?(console.error("[REGISTRAR] Error detected in response:",A.substring(0,1e3)),T("An error occurred while generating the report. Please check the Laravel logs.","error",{duration:7e3})):T("Report generated successfully! Download should start automatically.","success",{duration:3e3})}}catch(j){console.log("[REGISTRAR] Could not access iframe content (this is normal for successful downloads):",j),T("Report generated! Check your downloads folder.","success",{duration:3e3})}setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed from body after iframe load"))},100)},document.body.appendChild(r),console.log("[REGISTRAR] Form appended to body"),setTimeout(()=>{console.log("[REGISTRAR] Submitting form to iframe:",r.target),r.submit(),console.log("[REGISTRAR] Form submitted at:",new Date().toISOString())},50),setTimeout(()=>{console.log("[REGISTRAR] Resetting loading state at:",new Date().toISOString()),H(!1)},3e3)},sl=i=>{if(console.log("[REGISTRAR] === ARCHIVE RECORDS SUBMISSION STARTED ==="),i.preventDefault(),!F){console.error("[REGISTRAR] CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}if(console.log("[REGISTRAR] Archive data:",h),console.log("[REGISTRAR] Route URL:",V("registrar.reports.archive-records")),!h.academic_level_id){console.error("[REGISTRAR] Academic level is required"),alert("Please select an academic level before creating the archive.");return}if(!h.school_year){console.error("[REGISTRAR] School year is required"),alert("Please select a school year before creating the archive.");return}if(!h.include_grades&&!h.include_honors&&!h.include_certificates){console.error("[REGISTRAR] No data types selected"),alert("Please select at least one data type to include in the archive (grades, honors, or certificates).");return}H(!0);let d=document.getElementById("download-iframe");d?(d.name="download-iframe",console.log("[REGISTRAR] Using existing download iframe, name set to:",d.name)):(d=document.createElement("iframe"),d.id="download-iframe",d.name="download-iframe",d.style.display="none",document.body.appendChild(d),console.log("[REGISTRAR] Created download iframe with name:",d.name));const r=document.createElement("form");r.method="POST",r.action=V("registrar.reports.archive-records"),r.target="download-iframe",console.log("[REGISTRAR] Form action URL:",r.action),console.log("[REGISTRAR] Form target:",r.target);const s=document.createElement("input");s.type="hidden",s.name="_token",s.value=F,r.appendChild(s);const t={};Object.entries(h).forEach(([a,l])=>{const m=document.createElement("input");m.type="hidden",m.name=a,typeof l=="boolean"?m.value=l?"1":"0":m.value=(l==null?void 0:l.toString())||"",t[a]=m.value,r.appendChild(m)}),console.log("[REGISTRAR] Form data being submitted:",t),d.onload=()=>{var a,l,m,b,G;console.log("[REGISTRAR] Iframe loaded at:",new Date().toISOString());try{const j=d.contentDocument||((a=d.contentWindow)==null?void 0:a.document);if(j){const S=j.body,A=(S==null?void 0:S.textContent)||"";if(console.log("[REGISTRAR] Iframe body content length:",A.length),console.log("[REGISTRAR] Iframe body preview:",A.substring(0,500)),S==null?void 0:S.querySelector('[data-error-type="no-data"]')){const z=((m=(l=S==null?void 0:S.querySelector(".error-title"))==null?void 0:l.textContent)==null?void 0:m.trim())||"No data found",je=((G=(b=S==null?void 0:S.querySelector(".error-message"))==null?void 0:b.textContent)==null?void 0:G.trim())||"Please adjust your filters and try again.";console.warn("[REGISTRAR] No data found:",z),T(`${z} ${je}`,"warning",{duration:5e3}),setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed after error detection"))},100);return}A.includes("error")||A.includes("Error")||A.includes("Exception")?(console.error("[REGISTRAR] Error detected in response:",A.substring(0,1e3)),T("An error occurred while creating the archive. Please check the Laravel logs.","error",{duration:7e3})):T("Archive created successfully! Download should start automatically.","success",{duration:3e3})}}catch(j){console.log("[REGISTRAR] Could not access iframe content (this is normal for successful downloads):",j),T("Archive created! Check your downloads folder.","success",{duration:3e3})}setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed from body after iframe load"))},100)},document.body.appendChild(r),console.log("[REGISTRAR] Form appended to body"),setTimeout(()=>{console.log("[REGISTRAR] Submitting form to iframe:",r.target),r.submit(),console.log("[REGISTRAR] Form submitted at:",new Date().toISOString())},50),setTimeout(()=>{console.log("[REGISTRAR] Resetting loading state at:",new Date().toISOString()),H(!1)},3e3)},il=i=>{if(console.log("=== [REGISTRAR] handleClassSectionReport CALLED ==="),i.preventDefault(),i.stopPropagation(),console.log("=== [REGISTRAR] CLASS SECTION REPORT FORM SUBMISSION ==="),console.log("[REGISTRAR] Form Data:",c),!F){console.error("[REGISTRAR] CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}if(console.log("[REGISTRAR] CSRF Token:",F),!c.academic_level_id){console.error("[REGISTRAR] Validation failed: academic_level_id is required"),alert("Please select an academic level.");return}if(!c.school_year){console.error("[REGISTRAR] Validation failed: school_year is required"),alert("Please select a school year.");return}console.log("[REGISTRAR] Validation passed!"),console.log("[REGISTRAR] Route URL:",V("registrar.reports.class-section-report")),H(!0);let d=document.getElementById("download-iframe");d?(d.name="download-iframe",console.log("[REGISTRAR] Using existing download iframe, name set to:",d.name)):(d=document.createElement("iframe"),d.id="download-iframe",d.name="download-iframe",d.style.display="none",document.body.appendChild(d),console.log("[REGISTRAR] Created download iframe with name:",d.name));const r=document.createElement("form");r.method="POST",r.action=V("registrar.reports.class-section-report"),r.target="download-iframe",console.log("[REGISTRAR] Form action URL:",r.action),console.log("[REGISTRAR] Form target:",r.target);const s=document.createElement("input");s.type="hidden",s.name="_token",s.value=F,r.appendChild(s),Object.entries(c).forEach(([t,a])=>{const l=document.createElement("input");l.type="hidden",l.name=t,t==="include_grades"?l.value=a?"1":"0":l.value=(a==null?void 0:a.toString())||"",r.appendChild(l)}),console.log("[REGISTRAR] Form data being submitted"),d.onload=()=>{var t,a,l,m,b;console.log("[REGISTRAR] Iframe loaded at:",new Date().toISOString());try{const G=d.contentDocument||((t=d.contentWindow)==null?void 0:t.document);if(G){const j=G.body;if(j==null?void 0:j.querySelector('[data-error-type="no-data"]')){const A=((l=(a=j==null?void 0:j.querySelector(".error-title"))==null?void 0:a.textContent)==null?void 0:l.trim())||"No data found",M=((b=(m=j==null?void 0:j.querySelector(".error-message"))==null?void 0:m.textContent)==null?void 0:b.trim())||"Please adjust your filters and try again.";console.warn("[REGISTRAR] No data found:",A),T(`${A} ${M}`,"warning",{duration:5e3}),setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed after error detection"))},100);return}T("Report generated successfully! Download should start automatically.","success",{duration:3e3})}}catch(G){console.log("[REGISTRAR] Could not access iframe content (normal for downloads):",G),T("Report generated! Check your downloads folder.","success",{duration:3e3})}setTimeout(()=>{r.parentNode&&(document.body.removeChild(r),console.log("[REGISTRAR] Form removed from body after iframe load"))},100)},document.body.appendChild(r),console.log("[REGISTRAR] Form appended to body"),setTimeout(()=>{console.log("[REGISTRAR] Submitting form to iframe:",r.target),r.submit(),console.log("[REGISTRAR] Form submitted at:",new Date().toISOString())},50),setTimeout(()=>{H(!1)},2e3)};p.useEffect(()=>{if(c.academic_level_id){const i=parseInt(c.academic_level_id),d=y.filter(r=>r.academic_level_id===i);U(d)}else U([])},[c.academic_level_id,y]);const ke=(()=>{if(console.log("[REGISTRAR GRADE] Organizing grading periods for academic level:",n.academic_level_id),n.academic_level_id==="all"){const s=X.filter(t=>!t.parent_id).sort((t,a)=>(t.sort_order||0)-(a.sort_order||0));return console.log('[REGISTRAR GRADE] Showing root periods for "All":',s.length),s}const i=parseInt(n.academic_level_id),d=f.find(s=>s.id===i);if(!d)return console.log("[REGISTRAR GRADE] Selected level not found"),[];console.log("[REGISTRAR GRADE] Selected level:",d.name,d.key);let r=X.filter(s=>s.academic_level_id===i);return console.log("[REGISTRAR GRADE] Periods for level:",r.length),["elementary","junior_highschool","senior_highschool"].includes(d.key)&&(r=r.filter(s=>s.type==="quarter"&&!s.parent_id),console.log("[REGISTRAR GRADE] Filtered quarter periods:",r.length)),d.key==="college"&&(r=r.filter(s=>s.parent_id!==null),console.log("[REGISTRAR GRADE] Filtered child periods for college:",r.length)),r.sort((s,t)=>s.sort_order!==t.sort_order?(s.sort_order||0)-(t.sort_order||0):s.name.localeCompare(t.name))})(),dl=()=>{if(n.academic_level_id==="all")return ke.map(r=>e.jsx(o,{value:r.id.toString(),children:r.name},r.id));const i=parseInt(n.academic_level_id),d=f.find(r=>r.id===i);if((d==null?void 0:d.key)==="college"){const r=X.filter(s=>s.academic_level_id===i&&!s.parent_id&&s.type==="semester").sort((s,t)=>(s.semester_number||0)-(t.semester_number||0));return console.log("[REGISTRAR GRADE] Rendering hierarchical semesters:",r.length),r.map(s=>{const t=X.filter(a=>a.parent_id===s.id).sort((a,l)=>(a.sort_order||0)-(l.sort_order||0));return console.log(`[REGISTRAR GRADE] Semester "${s.name}" has ${t.length} children`),e.jsxs(cl.Fragment,{children:[e.jsx(o,{value:s.id.toString(),disabled:!0,className:"font-semibold text-gray-700",children:s.name}),t.map(a=>e.jsxs(o,{value:a.id.toString(),className:"pl-6",children:["└─ ",a.name]},a.id))]},s.id)})}else return ke.map(r=>e.jsx(o,{value:r.id.toString(),children:r.name},r.id))};return e.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(gl,{user:Ee}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(_l,{user:Ee}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 min-h-0",children:e.jsxs("div",{className:"flex flex-col gap-6 pb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Reports & Archiving"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Generate comprehensive reports and archive academic records."})]}),e.jsx(ol,{href:V("registrar.dashboard"),children:e.jsx(W,{variant:"outline",children:"Back to Dashboard"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(fe,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:Q.total_students})]})]})})}),e.jsx(O,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(ul,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Periods"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:Q.active_periods})]})]})})}),e.jsx(O,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Se,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Honors"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:Q.total_honors})]})]})})}),e.jsx(O,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900 rounded-lg",children:e.jsx(q,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Certificates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:Q.total_certificates})]})]})})})]}),e.jsxs(hl,{value:Ve,onValueChange:Le,className:"w-full",children:[e.jsxs(ml,{className:"grid w-full grid-cols-4",children:[e.jsxs(ie,{value:"grade-reports",className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Grade Reports"]}),e.jsxs(ie,{value:"honor-statistics",className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Honor Statistics"]}),e.jsxs(ie,{value:"archiving",className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),"Archiving"]}),e.jsxs(ie,{value:"class-section-reports",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Class Section Reports"]})]}),e.jsx(de,{value:"grade-reports",className:"mt-6",children:e.jsxs(O,{children:[e.jsx(ae,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),"Generate Grade Reports"]})}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:rl,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"academic_level",children:"Academic Level"}),e.jsxs(u,{value:n.academic_level_id,onValueChange:i=>{console.log("[REGISTRAR GRADE] Academic Level Changed:",i),I({...n,academic_level_id:i,year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select academic level"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Levels"}),f.map(i=>e.jsx(o,{value:i.id.toString(),children:i.name},i.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"grading_period",children:"Grading Period"}),e.jsxs(u,{value:n.grading_period_id,onValueChange:i=>I("grading_period_id",i),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select grading period"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Periods"}),dl()]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"school_year",children:"School Year"}),e.jsxs(u,{value:n.school_year,onValueChange:i=>I("school_year",i),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select school year"})}),e.jsx(v,{children:k.map(i=>e.jsx(o,{value:i,children:i},i))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"format",children:"Format"}),e.jsxs(u,{value:n.format,onValueChange:i=>I("format",i),children:[e.jsx(x,{children:e.jsx(R,{})}),e.jsxs(v,{children:[e.jsx(o,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"PDF"]})}),e.jsx(o,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Excel"]})})]})]})]})]}),(()=>{if(!n.academic_level_id||n.academic_level_id==="all")return null;const i=parseInt(n.academic_level_id),d=f.find(l=>l.id===i);if(!d)return null;const r=d.key==="elementary",s=d.key==="junior_highschool",t=d.key==="senior_highschool",a=d.key==="college";if(console.log("[REGISTRAR GRADE] Rendering cascading filters for:",d.key),r||s){const l=r?[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}]:[{value:"grade_7",label:"Grade 7"},{value:"grade_8",label:"Grade 8"},{value:"grade_9",label:"Grade 9"},{value:"grade_10",label:"Grade 10"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Year Level"}),e.jsxs(u,{value:n.year_level,onValueChange:m=>{console.log("[REGISTRAR GRADE] Year Level Changed:",m),I({...n,year_level:m,section_id:""})},disabled:!n.school_year||n.school_year==="",children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Year Levels"}),l.map(m=>e.jsx(o,{value:m.value,children:m.label},m.value))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Section"}),e.jsxs(u,{value:n.section_id,onValueChange:m=>{console.log("[REGISTRAR GRADE] Section Changed:",m),I({...n,section_id:m})},disabled:!n.year_level||n.year_level==="all",children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select a section"})}),e.jsx(v,{children:ue.map(m=>e.jsx(o,{value:m.id.toString(),children:m.name},m.id))})]})]})]})}return t?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Year Level"}),e.jsxs(u,{value:n.year_level,onValueChange:l=>{console.log("[REGISTRAR GRADE] Year Level Changed:",l),I({...n,year_level:l,track_id:"all",strand_id:"all",section_id:""})},disabled:!n.school_year||n.school_year==="",children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Year Levels"}),e.jsx(o,{value:"grade_11",children:"Grade 11"}),e.jsx(o,{value:"grade_12",children:"Grade 12"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Track"}),e.jsxs(u,{value:n.track_id,onValueChange:l=>{console.log("[REGISTRAR GRADE] Track Changed:",l),I({...n,track_id:l,strand_id:"all",section_id:""})},disabled:!n.year_level||n.year_level==="all",children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All tracks"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Tracks"}),Me.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Strand"}),e.jsxs(u,{value:n.strand_id,onValueChange:l=>{console.log("[REGISTRAR GRADE] Strand Changed:",l),I({...n,strand_id:l,section_id:""})},disabled:!n.track_id||n.track_id==="all",children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All strands"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Strands"}),ze.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Section"}),e.jsxs(u,{value:n.section_id,onValueChange:l=>{console.log("[REGISTRAR GRADE] Section Changed:",l),I({...n,section_id:l})},disabled:!n.strand_id||n.strand_id==="all",children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select a section"})}),e.jsx(v,{children:ue.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))})]})]})]}):a?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Year Level"}),e.jsxs(u,{value:n.year_level,onValueChange:l=>{console.log("[REGISTRAR GRADE] Year Level Changed:",l),I({...n,year_level:l,department_id:"all",course_id:"",section_id:""})},disabled:!n.school_year||n.school_year==="",children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Year Levels"}),e.jsx(o,{value:"first_year",children:"1st Year"}),e.jsx(o,{value:"second_year",children:"2nd Year"}),e.jsx(o,{value:"third_year",children:"3rd Year"}),e.jsx(o,{value:"fourth_year",children:"4th Year"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Department"}),e.jsxs(u,{value:n.department_id,onValueChange:l=>{console.log("[REGISTRAR GRADE] Department Changed:",l),I({...n,department_id:l,course_id:"",section_id:""})},disabled:!n.year_level||n.year_level==="all",children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All departments"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Departments"}),We.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Course"}),e.jsxs(u,{value:n.course_id,onValueChange:l=>{console.log("[REGISTRAR GRADE] Course Changed:",l),I({...n,course_id:l,section_id:""})},disabled:!n.department_id||n.department_id==="all",children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select a course"})}),e.jsx(v,{children:Je.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Section"}),e.jsxs(u,{value:n.section_id,onValueChange:l=>{console.log("[REGISTRAR GRADE] Section Changed:",l),I({...n,section_id:l})},disabled:!n.course_id||n.course_id==="all",children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select a section"})}),e.jsx(v,{children:ue.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))})]})]})]}):null})(),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{id:"include_statistics",checked:n.include_statistics==="1",onCheckedChange:i=>I("include_statistics",i===!0?"1":"0")}),e.jsx(_,{htmlFor:"include_statistics",children:"Include statistical analysis"})]}),e.jsx(W,{type:"submit",disabled:Ce||L,className:"w-full md:w-auto",children:Ce||L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating Report..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Generate Grade Report"]})})]})})]})}),e.jsx(de,{value:"honor-statistics",className:"mt-6",children:e.jsxs(O,{children:[e.jsx(ae,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5"}),"Generate Honor Statistics"]})}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:al,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"honor_academic_level",children:"Academic Level"}),e.jsxs(u,{value:g.academic_level_id,onValueChange:i=>{console.log("[REGISTRAR HONOR] Academic Level Changed:",i),C({...g,academic_level_id:i,year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select academic level"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Levels"}),f.map(i=>e.jsx(o,{value:i.id.toString(),children:i.name},i.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"honor_school_year",children:"School Year"}),e.jsxs(u,{value:g.school_year,onValueChange:i=>C("school_year",i),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select school year"})}),e.jsx(v,{children:k.map(i=>e.jsx(o,{value:i,children:i},i))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"honor_type",children:"Honor Type"}),e.jsxs(u,{value:g.honor_type_id,onValueChange:i=>C("honor_type_id",i),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select honor type"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Types"}),Fe.map(i=>e.jsx(o,{value:i.id.toString(),children:i.name},i.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"honor_format",children:"Format"}),e.jsxs(u,{value:g.format,onValueChange:i=>C("format",i),children:[e.jsx(x,{children:e.jsx(R,{})}),e.jsxs(v,{children:[e.jsx(o,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"PDF"]})}),e.jsx(o,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Excel"]})})]})]})]})]}),(()=>{if(!g.academic_level_id||g.academic_level_id==="all")return null;const i=f.find(a=>a.id.toString()===g.academic_level_id);if(!i)return null;const d=i.key==="elementary",r=i.key==="junior_highschool",s=i.key==="senior_highschool",t=i.key==="college";if(d||r){const a=d?[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}]:[{value:"grade_7",label:"Grade 7"},{value:"grade_8",label:"Grade 8"},{value:"grade_9",label:"Grade 9"},{value:"grade_10",label:"Grade 10"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Year Level"}),e.jsxs(u,{value:g.year_level,onValueChange:l=>C({...g,year_level:l,section_id:""}),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsx(v,{children:a.map(l=>e.jsx(o,{value:l.value,children:l.label},l.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Section"}),e.jsxs(u,{value:g.section_id,onValueChange:l=>C({...g,section_id:l}),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Sections"}),he.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))]})]})]})]})}return s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Year Level"}),e.jsxs(u,{value:g.year_level,onValueChange:a=>C({...g,year_level:a,track_id:"",strand_id:"",section_id:""}),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(v,{children:[e.jsx(o,{value:"grade_11",children:"Grade 11"}),e.jsx(o,{value:"grade_12",children:"Grade 12"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Track"}),e.jsxs(u,{value:g.track_id,onValueChange:a=>C({...g,track_id:a,strand_id:"",section_id:""}),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All tracks"})}),e.jsx(v,{children:P.map(a=>e.jsxs(o,{value:a.id.toString(),children:[a.name," (",a.code,")"]},a.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Strand"}),e.jsxs(u,{value:g.strand_id,onValueChange:a=>C({...g,strand_id:a,section_id:""}),disabled:!g.track_id,children:[e.jsx(x,{children:e.jsx(R,{placeholder:g.track_id?"All strands":"Select track first"})}),e.jsx(v,{children:qe.map(a=>e.jsxs(o,{value:a.id.toString(),children:[a.name," (",a.code,")"]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Section"}),e.jsxs(u,{value:g.section_id,onValueChange:a=>C({...g,section_id:a}),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Sections"}),he.map(a=>e.jsx(o,{value:a.id.toString(),children:a.name},a.id))]})]})]})]})]}):t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Year Level"}),e.jsxs(u,{value:g.year_level,onValueChange:a=>C({...g,year_level:a,department_id:"",course_id:"",section_id:""}),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(v,{children:[e.jsx(o,{value:"1st_year",children:"1st Year"}),e.jsx(o,{value:"2nd_year",children:"2nd Year"}),e.jsx(o,{value:"3rd_year",children:"3rd Year"}),e.jsx(o,{value:"4th_year",children:"4th Year"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Department"}),e.jsxs(u,{value:g.department_id,onValueChange:a=>C({...g,department_id:a,course_id:"",section_id:""}),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All departments"})}),e.jsx(v,{children:$.map(a=>e.jsxs(o,{value:a.id.toString(),children:[a.name," (",a.code,")"]},a.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Course"}),e.jsxs(u,{value:g.course_id,onValueChange:a=>C({...g,course_id:a,section_id:""}),disabled:!g.department_id,children:[e.jsx(x,{children:e.jsx(R,{placeholder:g.department_id?"All courses":"Select department first"})}),e.jsx(v,{children:Be.map(a=>e.jsxs(o,{value:a.id.toString(),children:[a.name," (",a.code,")"]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Section"}),e.jsxs(u,{value:g.section_id,onValueChange:a=>C({...g,section_id:a}),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Sections"}),he.map(a=>e.jsx(o,{value:a.id.toString(),children:a.name},a.id))]})]})]})]})]}):null})(),e.jsx(W,{type:"submit",disabled:Ne||L,className:"w-full md:w-auto",children:Ne||L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating Statistics..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Generate Honor Statistics"]})})]})})]})}),e.jsx(de,{value:"archiving",className:"mt-6",children:e.jsxs(O,{children:[e.jsx(ae,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5"}),"Archive Academic Records"]})}),e.jsxs(Y,{children:[e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Note:"})," Archiving will create a backup of academic records for the specified period. This process helps maintain system performance while preserving historical data."]})}),e.jsxs("form",{onSubmit:sl,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"archive_academic_level",children:"Academic Level"}),e.jsxs(u,{value:h.academic_level_id,onValueChange:i=>{console.log("[REGISTRAR ARCHIVE] Academic Level Changed:",i),E({...h,academic_level_id:i,year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select academic level"})}),e.jsx(v,{children:f.map(i=>e.jsx(o,{value:i.id.toString(),children:i.name},i.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"archive_school_year",children:"School Year"}),e.jsxs(u,{value:h.school_year,onValueChange:i=>E("school_year",i),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select school year"})}),e.jsx(v,{children:k.map(i=>e.jsx(o,{value:i,children:i},i))})]})]})]}),(()=>{if(!h.academic_level_id)return null;const i=parseInt(h.academic_level_id),d=f.find(l=>l.id===i);if(!d)return null;const r=d.key==="elementary",s=d.key==="junior_highschool",t=d.key==="senior_highschool",a=d.key==="college";if(console.log("[REGISTRAR ARCHIVE] Rendering cascading filters for:",d.key),r||s){const l=r?[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}]:[{value:"grade_7",label:"Grade 7"},{value:"grade_8",label:"Grade 8"},{value:"grade_9",label:"Grade 9"},{value:"grade_10",label:"Grade 10"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Year Level"}),e.jsxs(u,{value:h.year_level,onValueChange:m=>{console.log("[REGISTRAR ARCHIVE] Year Level Changed:",m),E({...h,year_level:m,section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Year Levels"}),l.map(m=>e.jsx(o,{value:m.value,children:m.label},m.value))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Section"}),e.jsxs(u,{value:h.section_id,onValueChange:m=>{console.log("[REGISTRAR ARCHIVE] Section Changed:",m),E({...h,section_id:m})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Sections"}),Re.map(m=>e.jsx(o,{value:m.id.toString(),children:m.name},m.id))]})]})]})]})}return t?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Year Level"}),e.jsxs(u,{value:h.year_level,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Year Level Changed:",l),E({...h,year_level:l,track_id:"all",strand_id:"all",section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Year Levels"}),e.jsx(o,{value:"grade_11",children:"Grade 11"}),e.jsx(o,{value:"grade_12",children:"Grade 12"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Track"}),e.jsxs(u,{value:h.track_id,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Track Changed:",l),E({...h,track_id:l,strand_id:"all",section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All tracks"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Tracks"}),Ke.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Strand"}),e.jsxs(u,{value:h.strand_id,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Strand Changed:",l),E({...h,strand_id:l,section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All strands"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Strands"}),Xe.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Section"}),e.jsxs(u,{value:h.section_id,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Section Changed:",l),E({...h,section_id:l})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Sections"}),Re.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))]})]})]})]}):a?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Year Level"}),e.jsxs(u,{value:h.year_level,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Year Level Changed:",l),E({...h,year_level:l,department_id:"all",course_id:"",section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All year levels"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Year Levels"}),e.jsx(o,{value:"first_year",children:"1st Year"}),e.jsx(o,{value:"second_year",children:"2nd Year"}),e.jsx(o,{value:"third_year",children:"3rd Year"}),e.jsx(o,{value:"fourth_year",children:"4th Year"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Department"}),e.jsxs(u,{value:h.department_id,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Department Changed:",l),E({...h,department_id:l,course_id:"",section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All departments"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Departments"}),Qe.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Course"}),e.jsxs(u,{value:h.course_id,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Course Changed:",l),E({...h,course_id:l,section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All courses"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Courses"}),Ze.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Section"}),e.jsxs(u,{value:h.section_id,onValueChange:l=>{console.log("[REGISTRAR ARCHIVE] Section Changed:",l),E({...h,section_id:l})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Sections"}),Re.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))]})]})]})]}):null})(),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Include in Archive"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{id:"include_grades",checked:h.include_grades==="1",onCheckedChange:i=>E("include_grades",i===!0?"1":"0")}),e.jsx(_,{htmlFor:"include_grades",children:"Student Grades"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{id:"include_honors",checked:h.include_honors==="1",onCheckedChange:i=>E("include_honors",i===!0?"1":"0")}),e.jsx(_,{htmlFor:"include_honors",children:"Honor Records"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{id:"include_certificates",checked:h.include_certificates==="1",onCheckedChange:i=>E("include_certificates",i===!0?"1":"0")}),e.jsx(_,{htmlFor:"include_certificates",children:"Certificates"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"archive_format",children:"Archive Format"}),e.jsxs(u,{value:h.format,onValueChange:i=>E("format",i),children:[e.jsx(x,{children:e.jsx(R,{})}),e.jsxs(v,{children:[e.jsx(o,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Excel"]})}),e.jsx(o,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),"CSV"]})})]})]})]}),e.jsx(W,{type:"submit",disabled:be||L,className:"w-full md:w-auto",children:be||L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Archiving Records..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Archive Records"]})})]})]})]})}),e.jsx(de,{value:"class-section-reports",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(ae,{children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5"}),"Generate Class Section Reports"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate comprehensive class section rosters and student lists by academic level."})]}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:il,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{children:"Academic Level *"}),e.jsxs(u,{value:c.academic_level_id,onValueChange:i=>{console.log("[REGISTRAR] Academic Level Changed:",i),N({...c,academic_level_id:i,year_level:"",track_id:"",strand_id:"",department_id:"",course_id:"",section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select level"})}),e.jsx(v,{children:f.map(i=>e.jsx(o,{value:i.id.toString(),children:i.name},i.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Academic level is required for class section reports"})]}),(()=>{if(!c.academic_level_id)return null;const i=f.find(a=>a.id.toString()===c.academic_level_id);if(!i)return null;const d=i.key==="elementary",r=i.key==="junior_highschool",s=i.key==="senior_highschool",t=i.key==="college";if(d||r){const a=d?[{value:"grade_1",label:"Grade 1"},{value:"grade_2",label:"Grade 2"},{value:"grade_3",label:"Grade 3"},{value:"grade_4",label:"Grade 4"},{value:"grade_5",label:"Grade 5"},{value:"grade_6",label:"Grade 6"}]:[{value:"grade_7",label:"Grade 7"},{value:"grade_8",label:"Grade 8"},{value:"grade_9",label:"Grade 9"},{value:"grade_10",label:"Grade 10"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{children:"Year Level"}),e.jsxs(u,{value:c.year_level,onValueChange:l=>{console.log("[REGISTRAR] Year Level Changed:",l),N({...c,year_level:l,section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select year level"})}),e.jsx(v,{children:a.map(l=>e.jsx(o,{value:l.value,children:l.label},l.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Filter by year level"})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Section"}),e.jsxs(u,{value:c.section_id,onValueChange:l=>N({...c,section_id:l}),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Sections"}),ne.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})}if(s){const a=[{value:"grade_11",label:"Grade 11"},{value:"grade_12",label:"Grade 12"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{children:"Year Level"}),e.jsxs(u,{value:c.year_level,onValueChange:l=>{console.log("[REGISTRAR] Year Level Changed:",l),N({...c,year_level:l,track_id:"",strand_id:"",section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select year level"})}),e.jsx(v,{children:a.map(l=>e.jsx(o,{value:l.value,children:l.label},l.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select year level"})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Track"}),e.jsxs(u,{value:c.track_id,onValueChange:l=>{console.log("[REGISTRAR] Track Changed:",l),N({...c,track_id:l,strand_id:"",section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select track"})}),e.jsx(v,{children:P.map(l=>e.jsxs(o,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select track"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{children:"Strand"}),e.jsxs(u,{value:c.strand_id,onValueChange:l=>{console.log("[REGISTRAR] Strand Changed:",l),N({...c,strand_id:l,section_id:""})},disabled:!c.track_id,children:[e.jsx(x,{children:e.jsx(R,{placeholder:c.track_id?"Select strand":"Select track first"})}),e.jsx(v,{children:Oe.map(l=>e.jsxs(o,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select strand"})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Section"}),e.jsxs(u,{value:c.section_id,onValueChange:l=>N({...c,section_id:l}),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Sections"}),ne.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})]})}if(t){const a=[{value:"first_year",label:"1st Year"},{value:"second_year",label:"2nd Year"},{value:"third_year",label:"3rd Year"},{value:"fourth_year",label:"4th Year"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{children:"Year Level"}),e.jsxs(u,{value:c.year_level,onValueChange:l=>{console.log("[REGISTRAR] Year Level Changed:",l),N({...c,year_level:l,department_id:"",course_id:"",section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select year level"})}),e.jsx(v,{children:a.map(l=>e.jsx(o,{value:l.value,children:l.label},l.value))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select year level"})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Department"}),e.jsxs(u,{value:c.department_id,onValueChange:l=>{console.log("[REGISTRAR] Department Changed:",l),N({...c,department_id:l,course_id:"",section_id:""})},children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select department"})}),e.jsx(v,{children:$.map(l=>e.jsxs(o,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select department"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{children:"Course"}),e.jsxs(u,{value:c.course_id,onValueChange:l=>{console.log("[REGISTRAR] Course Changed:",l),N({...c,course_id:l,section_id:""})},disabled:!c.department_id,children:[e.jsx(x,{children:e.jsx(R,{placeholder:c.department_id?"Select course":"Select department first"})}),e.jsx(v,{children:Pe.map(l=>e.jsxs(o,{value:l.id.toString(),children:[l.name," (",l.code,")"]},l.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select course"})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Section"}),e.jsxs(u,{value:c.section_id,onValueChange:l=>N({...c,section_id:l}),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"All sections"})}),e.jsxs(v,{children:[e.jsx(o,{value:"all",children:"All Sections"}),ne.map(l=>e.jsx(o,{value:l.id.toString(),children:l.name},l.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "All" for all sections'})]})]})]})}return null})(),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{children:"School Year *"}),e.jsxs(u,{value:c.school_year,onValueChange:i=>N({...c,school_year:i}),children:[e.jsx(x,{children:e.jsx(R,{placeholder:"Select year"})}),e.jsx(v,{children:k.map(i=>e.jsx(o,{value:i,children:i},i))})]})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Export Format"}),e.jsxs(u,{value:c.format,onValueChange:i=>N({...c,format:i}),children:[e.jsx(x,{children:e.jsx(R,{})}),e.jsxs(v,{children:[e.jsx(o,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"PDF Report"]})}),e.jsx(o,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Excel Spreadsheet"]})}),e.jsx(o,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),"CSV File"]})})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{id:"include_grades_section",checked:c.include_grades,onCheckedChange:i=>{const d=i===!0?"1":"0";console.log("[REGISTRAR] Section include_grades changed to:",d),N({...c,include_grades:d})}}),e.jsx(_,{htmlFor:"include_grades_section",children:"Include student average grades in the report"})]}),(!c.academic_level_id||!c.school_year)&&e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Required:"})," Please select Academic Level and School Year to generate the report."]})}),e.jsx(W,{type:"submit",disabled:ll||!c.academic_level_id||!c.school_year||L,className:"flex items-center gap-2",children:L?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-4 w-4"}),"Generate Class Section Report"]})})]})})]})})]})]})})]})]})}export{Ql as default};
