import{r as v,j as a,$ as u}from"./app-BAqdKzRe.js";import{S as V,H as D}from"./sidebar-B53tWbZP.js";import{C as k,b as w,c as S,a as G}from"./card-DGY5CJ_r.js";import{B as x}from"./button-Dgg7RRwo.js";import{B as C}from"./badge-YBJD95uJ.js";import{I as F}from"./input-CoCepmjE.js";import{S as B}from"./search-CcjiKl-C.js";import{P as L}from"./plus-CC2NAYO2.js";import{U as H}from"./upload-B63ZtUBD.js";import{S as U}from"./square-pen-CJyDCZot.js";/* empty css            */import"./dropdown-menu-CQybs8HY.js";import"./Combination-5NOhm_Dh.js";import"./index-C93lzRn6.js";import"./book-open-DabesNP2.js";import"./graduation-cap-BX1Tk1aW.js";import"./crown-CxBrFsG-.js";import"./user-dAO1XXi5.js";function se({user:f,grades:l,assignedSubjects:i}){var y;const[c,_]=v.useState(""),[d,A]=v.useState(""),I=(e,r)=>r==="college"?e<=1.5?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":e<=2.5?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":e<=3?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":e>=90?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":e>=80?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":e>=75?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",m=(e,r)=>e===0?"No Grade":r==="college"?e<=1.5?"Superior":e<=2?"Very Good":e<=2.5?"Good":e<=3?"Satisfactory":"Failing":e>=95?"Outstanding":e>=90?"Very Good":e>=85?"Good":e>=80?"Satisfactory":e>=75?"Fair":"Failing",$=e=>{if(!e||!i||!Array.isArray(i))return[];const r=i.find(t=>{var s,n;return((n=(s=t.subject)==null?void 0:s.id)==null?void 0:n.toString())===e});return!r||!r.enrolled_students?[]:r.enrolled_students.map(t=>{var p,j,N,b;const s=(p=l==null?void 0:l.data)==null?void 0:p.find(o=>o.student.id===t.student.id&&o.subject.id===parseInt(e)),n=(j=l==null?void 0:l.data)==null?void 0:j.find(o=>o.student.id===t.student.id);return{id:t.student.id,name:t.student.name,email:t.student.email,latestGrade:s?s.grade:0,latestGradeDate:s?s.updated_at:"",hasGradesInCurrentSubject:!!s,actualGradeSubjectId:n?n.subject.id:parseInt(e),academicLevel:{key:((N=r.academicLevel)==null?void 0:N.key)||"",name:((b=r.academicLevel)==null?void 0:b.name)||""},gradingPeriod:r.gradingPeriod?{name:r.gradingPeriod.name}:void 0,schoolYear:t.school_year}})},h=(i||[]).map(e=>{var r,t,s;return!((r=e==null?void 0:e.subject)!=null&&r.id)||!((t=e==null?void 0:e.subject)!=null&&t.name)||!((s=e==null?void 0:e.academicLevel)!=null&&s.name)?null:{id:e.subject.id.toString(),name:e.subject.name,code:e.subject.code||"N/A",academicLevel:e.academicLevel.name,schoolYear:e.school_year||"N/A"}}).filter(e=>e!==null),P=e=>{const r=i.find(t=>t.enrolled_students.some(s=>s.student.id===e.id));r&&(window.location.href=route("adviser.grades.create")+`?student_id=${e.id}&subject_id=${r.subject.id}&academic_level_id=${r.academicLevel.id}&academic_level_key=${r.academicLevel.key}&school_year=${r.school_year}`)},g=d?$(d).filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.email.toLowerCase().includes(c.toLowerCase())):[];return a.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[a.jsx(V,{user:f}),a.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[a.jsx(D,{user:f}),a.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Grade Management"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"View and manage student grades for your advisory subjects."})]}),a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:a.jsxs("div",{className:"relative",children:[a.jsx(B,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),a.jsx(F,{placeholder:"Search students or subjects...",value:c,onChange:e=>_(e.target.value),className:"pl-10 w-full sm:w-64"})]})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(u,{href:route("adviser.grades.create"),className:d?"":"pointer-events-none",children:a.jsxs(x,{className:"flex items-center gap-2",disabled:!d,children:[a.jsx(L,{className:"h-4 w-4"}),"Input Grade"]})}),a.jsx(u,{href:route("adviser.grades.upload"),children:a.jsxs(x,{variant:"outline",className:"flex items-center gap-2",children:[a.jsx(H,{className:"h-4 w-4"}),"Upload CSV"]})})]})]}),a.jsxs(k,{children:[a.jsxs(w,{children:[a.jsx(S,{className:"text-lg",children:"Select Subject"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a subject to view and manage student grades"})]}),a.jsx(G,{children:h.length>0?a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:h.map(e=>a.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${d===e.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-gray-300 hover:bg-gray-50 dark:border-gray-700 dark:hover:border-gray-600 dark:hover:bg-gray-800/50"}`,onClick:()=>A(d===e.id?"":e.id),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.code}),a.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:[e.academicLevel," â€¢ ",e.schoolYear]})]}),a.jsx("div",{className:`w-3 h-3 rounded-full ${d===e.id?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"}`})]})},e.id))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 text-gray-400 mx-auto mb-4",children:"ðŸ“š"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No Subjects Assigned"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You haven't been assigned to any subjects yet."})]})})]}),d&&a.jsxs(k,{children:[a.jsx(w,{children:a.jsxs(S,{className:"flex items-center justify-between",children:[a.jsxs("span",{children:["Student Grades - ",(y=h.find(e=>e.id===d))==null?void 0:y.name]}),a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[g.length," students"]})]})}),a.jsx(G,{children:g.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left p-3 font-medium",children:"Student"}),a.jsx("th",{className:"text-left p-3 font-medium",children:"Latest Grade"}),a.jsx("th",{className:"text-left p-3 font-medium",children:"Status"}),a.jsx("th",{className:"text-left p-3 font-medium",children:"Last Updated"}),a.jsx("th",{className:"text-left p-3 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:g.map(e=>a.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[a.jsx("td",{className:"p-3",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email})]})}),a.jsx("td",{className:"p-3",children:e.latestGrade===0?a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(C,{variant:"outline",className:"text-gray-500",children:"No Grade"}),!e.hasGradesInCurrentSubject&&a.jsx("span",{className:"text-xs text-blue-600",children:"Has grades in other subjects"})]}):a.jsx(C,{className:I(e.latestGrade,e.academicLevel.key),children:e.latestGrade})}),a.jsx("td",{className:"p-3",children:a.jsx("span",{className:`text-sm ${m(e.latestGrade,e.academicLevel.key)==="No Grade"?"text-gray-600 dark:text-gray-400":["Superior","Very Good","Good","Satisfactory","Fair","Outstanding"].includes(m(e.latestGrade,e.academicLevel.key))?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:m(e.latestGrade,e.academicLevel.key)})}),a.jsx("td",{className:"p-3 text-sm text-gray-600 dark:text-gray-400",children:e.latestGradeDate?new Date(e.latestGradeDate).toLocaleDateString():"N/A"}),a.jsx("td",{className:"p-3",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(u,{href:route("adviser.grades.student.subject",{student:e.id,subject:e.actualGradeSubjectId}),children:a.jsxs(x,{variant:"outline",size:"sm",onClick:r=>r.stopPropagation(),title:e.hasGradesInCurrentSubject?"View grade details":"View grades in other subject",children:[a.jsx(U,{className:"h-4 w-4 mr-2"}),"View Details"]})}),a.jsxs(x,{size:"sm",onClick:r=>{r.stopPropagation(),P(e)},children:[a.jsx(L,{className:"h-4 w-4 mr-2"}),"Input Grade"]})]})})]},e.id))})]})}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 text-gray-400 mx-auto mb-4",children:"ðŸ‘¥"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No Students Found"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:c?"No students match your search criteria.":"No students are enrolled in this subject."})]})})]})]})})]})]})}export{se as default};
