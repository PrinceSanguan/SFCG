import{r as T,u as Fe,m as ke,j as e,C as he,S as Oe}from"./app-CYvxa7jT.js";import{H as Ee}from"./header-DYyqGJYt.js";import{S as Pe}from"./sidebar-BuHd-re9.js";import{C as w,b as C,c as S,a as A}from"./card-NQw11Qdd.js";import{B as g}from"./button-V-FopNJN.js";import{I as p}from"./input-9ChW2aP7.js";import{L as x}from"./label-CH-1azTc.js";import{S as G,a as H,b as $,c as M,d as _}from"./select-DG6ocbrG.js";import{C as ge}from"./checkbox-CQXM5Zyv.js";import{B as c}from"./badge-02MczTBV.js";import{A as pe,a as ue}from"./alert-Bhh098j_.js";import{A as Te}from"./arrow-left-yUMHYQ5M.js";import{P as Ge}from"./plus-DjOJiXgS.js";import{T as F}from"./trophy-BXQZbVMg.js";import{U as He}from"./upload-p_3PcSip.js";/* empty css            */import"./dropdown-menu-BhRqOfwu.js";import"./Combination-tNc9cCf7.js";import"./index-FsUecGkA.js";import"./separator-BhoL3C1-.js";import"./users-B5hrOHIn.js";import"./chevron-right-IDXlFOh3.js";import"./crown-ChNBq_U7.js";import"./building-2-DvW0Do50.js";import"./user-cog-BdTi3Fgc.js";import"./book-open-BDDsgmpM.js";import"./user-check-ncwx06AD.js";import"./graduation-cap-DYpiabXW.js";import"./notebook-JjuWrKKS.js";import"./chart-no-axes-column-increasing-BkdnlQxf.js";import"./shield-DtRn9Rpr.js";import"./index-SMqgKLad.js";import"./index-JUXPyEUT.js";import"./check-Cbc373iW.js";function us({user:W,honorTypes:V,criteria:j,schoolYears:q,qualifiedStudents:k=[],honorResults:b=[],currentSchoolYear:f="2024-2025",gradeLevels:h={},departments:L=[],courses:U=[],sections:R=[],filters:r}){var D,ee,se,ae,le,re,ne,te,de,ie,oe,ce,me;console.log("=== COLLEGE HONORS FRONTEND DEBUG ==="),console.log("Criteria received:",j),console.log("First criterion:",j[0]),j[0]&&(console.log("First criterion keys:",Object.keys(j[0])),console.log("honorType property:",j[0].honorType),console.log("honor_type property (snake_case):",j[0].honor_type)),console.log("[COLLEGE HONORS FRONTEND] Data received:",{qualifiedStudentsCount:k.length,honorResultsCount:b.length,currentSchoolYear:f,filters:r,qualifiedStudentsPreview:k.slice(0,2).map(s=>{var a,l,n,d;return{student_id:(a=s.student)==null?void 0:a.id,student_name:(l=s.student)==null?void 0:l.name,qualifications:(d=(n=s.result)==null?void 0:n.qualifications)==null?void 0:d.map(t=>{var o;return(o=t.honor_type)==null?void 0:o.name})}}),honorResultsPreview:b.slice(0,2).map(s=>{var a,l,n;return{id:s.id,student_id:s.student_id,student_name:(a=s.student)==null?void 0:a.name,honor_type:((l=s.honor_type)==null?void 0:l.name)||((n=s.honorType)==null?void 0:n.name),is_approved:s.is_approved}})}),console.log("[COLLEGE HONORS] === QUALIFICATION STATUS CHECK ==="),console.log("[COLLEGE HONORS] Total students in qualifiedStudents array:",k.length);const u=k.filter(s=>{var a;return((a=s.result)==null?void 0:a.qualified)===!0}),O=k.filter(s=>{var a;return((a=s.result)==null?void 0:a.qualified)===!1});console.log("[COLLEGE HONORS] Actually QUALIFIED students:",u.length),console.log("[COLLEGE HONORS] NOT qualified students:",O.length),O.length>0&&(console.warn("[COLLEGE HONORS] ‚ö†Ô∏è WARNING: Found unqualified students in the list!"),console.log("[COLLEGE HONORS] Unqualified students details:",O.map(s=>{var a,l,n,d,t,o;return{student_id:(a=s.student)==null?void 0:a.id,student_name:(l=s.student)==null?void 0:l.name,qualified:(n=s.result)==null?void 0:n.qualified,reason:(d=s.result)==null?void 0:d.reason,average_grade:(t=s.result)==null?void 0:t.average_grade,min_grade:(o=s.result)==null?void 0:o.min_grade}}))),console.log("[COLLEGE HONORS] Qualified students details:",u.map(s=>{var a,l,n,d,t,o,P;return{student_id:(a=s.student)==null?void 0:a.id,student_name:(l=s.student)==null?void 0:l.name,qualified:(n=s.result)==null?void 0:n.qualified,average_grade:(d=s.result)==null?void 0:d.average_grade,min_grade:(t=s.result)==null?void 0:t.min_grade,qualifications:(P=(o=s.result)==null?void 0:o.qualifications)==null?void 0:P.map(Ae=>{var xe;return(xe=Ae.honor_type)==null?void 0:xe.name})}}));const[Q,E]=T.useState(null),[i,X]=T.useState(null),[_e,Y]=T.useState(!1),[I,B]=T.useState(null),[m,y]=T.useState({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),[je,z]=T.useState(!1),{addToast:K}=Fe(),{data:v,setData:N,post:be,processing:ye,errors:J,reset:ve}=ke({academic_level_id:"4",honor_type_id:"",school_year:"2024-2025",min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),Ne=s=>{s.preventDefault(),be("/admin/academic/honors/criteria",{onSuccess:()=>{E({type:"success",text:"Criteria saved successfully!"}),ve(),z(!1),window.location.reload()},onError:()=>E({type:"error",text:"Failed to save criteria."})})},fe=s=>{var a,l,n,d,t,o;B(s),y({min_gpa:((a=s.min_gpa)==null?void 0:a.toString())||"",max_gpa:((l=s.max_gpa)==null?void 0:l.toString())||"",min_grade:((n=s.min_grade)==null?void 0:n.toString())||"",min_grade_all:((d=s.min_grade_all)==null?void 0:d.toString())||"",min_year:((t=s.min_year)==null?void 0:t.toString())||"",max_year:((o=s.max_year)==null?void 0:o.toString())||"",require_consistent_honor:s.require_consistent_honor})},we=()=>{B(null),y({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1})},Z=s=>{X(s),Y(!0)},Ce=s=>{var l;const a={...I,min_gpa:parseFloat(m.min_gpa)||null,max_gpa:parseFloat(m.max_gpa)||null,min_grade:parseFloat(m.min_grade)||null,min_grade_all:parseFloat(m.min_grade_all)||null,min_year:parseInt(m.min_year)||null,max_year:parseInt(m.max_year)||null,require_consistent_honor:m.require_consistent_honor};fetch(`/admin/academic/honors/criteria/${s}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify(a)}).then(n=>{if(!n.ok)throw new Error(`HTTP ${n.status}`);return n.json()}).then(()=>{E({type:"success",text:"Criteria updated successfully!"}),B(null),window.location.reload()}).catch(()=>E({type:"error",text:"Failed to update criteria."}))},Se=s=>{var a;window.confirm("Are you sure you want to delete this criterion?")&&fetch(`/admin/academic/honors/criteria/${s}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""}}).then(l=>{if(!l.ok)throw new Error(`HTTP ${l.status}`);return l.json()}).then(()=>{E({type:"success",text:"Criteria deleted successfully!"}),window.location.reload()}).catch(()=>E({type:"error",text:"Failed to delete criteria."}))};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(Pe,{user:W}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(Ee,{user:W}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),"Back"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"College Honor Criteria"})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage honor criteria for College level students."})]})}),Q&&e.jsxs(pe,{className:Q.type==="success"?"border-green-500":"border-red-500",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx(ue,{children:Q.text})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(g,{onClick:()=>z(!0),className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-4 w-4"}),"Add New Criteria"]})}),je&&e.jsxs(w,{children:[e.jsx(C,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Add Honor Criteria"]})}),e.jsx(A,{children:e.jsxs("form",{onSubmit:Ne,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"honor_type_id",children:"Honor Type"}),V&&V.length>0?e.jsxs(G,{value:v.honor_type_id||"",onValueChange:s=>N("honor_type_id",s),children:[e.jsx(H,{children:e.jsx($,{placeholder:"Select honor"})}),e.jsx(M,{children:V.filter(s=>s.id&&s.name).map(s=>e.jsx(_,{value:s.id.toString(),children:s.name},s.id))})]}):e.jsx("div",{className:"p-2 text-sm text-gray-500 bg-gray-100 rounded border",children:"Loading honor types..."}),J.honor_type_id&&e.jsx("p",{className:"text-sm text-red-500",children:J.honor_type_id})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"school_year",children:"School Year"}),e.jsxs(G,{value:v.school_year||"",onValueChange:s=>N("school_year",s),children:[e.jsx(H,{children:e.jsx($,{placeholder:"Select school year"})}),e.jsx(M,{children:(q!=null&&q.length?q:["2024-2025"]).filter(s=>s&&s.trim()!=="").map(s=>e.jsx(_,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"min_gpa",children:"Min GPA (5-1 scale)"}),e.jsx(p,{id:"min_gpa",type:"number",step:"0.1",value:v.min_gpa,onChange:s=>N("min_gpa",s.target.value),placeholder:"e.g., 3.5 (5=lowest, 1=highest)"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"max_gpa",children:"Max GPA (5-1 scale)"}),e.jsx(p,{id:"max_gpa",type:"number",step:"0.1",value:v.max_gpa,onChange:s=>N("max_gpa",s.target.value),placeholder:"e.g., 1.5 (5=lowest, 1=highest)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"min_grade",children:"Min Grade (any) (5-1 scale)"}),e.jsx(p,{id:"min_grade",type:"number",value:v.min_grade,onChange:s=>N("min_grade",s.target.value),placeholder:"e.g., 3 (5=lowest, 1=highest)"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"min_grade_all",children:"Min Grade (all) (5-1 scale)"}),e.jsx(p,{id:"min_grade_all",type:"number",value:v.min_grade_all,onChange:s=>N("min_grade_all",s.target.value),placeholder:"e.g., 2 (5=lowest, 1=highest)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"min_year",children:"Min Year"}),e.jsx(p,{id:"min_year",type:"number",value:v.min_year,onChange:s=>N("min_year",s.target.value),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"max_year",children:"Max Year"}),e.jsx(p,{id:"max_year",type:"number",value:v.max_year,onChange:s=>N("max_year",s.target.value),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{id:"require_consistent_honor",checked:!!v.require_consistent_honor,onCheckedChange:s=>N("require_consistent_honor",s)}),e.jsx(x,{htmlFor:"require_consistent_honor",children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{type:"submit",disabled:ye,children:"Save Criteria"}),e.jsx(g,{type:"button",variant:"outline",onClick:()=>z(!1),children:"Cancel"})]})]})})]}),e.jsxs(w,{children:[e.jsx(C,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Existing Criteria (",j.length,")"]})}),e.jsx(A,{children:j.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(F,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No honor criteria set for College"}),e.jsx("p",{className:"text-sm",children:'Use the "Add New Criteria" button to create criteria for this level.'})]}):e.jsx("div",{className:"grid gap-4",children:j.map(s=>{var a,l,n,d;return e.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:(I==null?void 0:I.id)===s.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:((a=s.honor_type||s.honorType)==null?void 0:a.name)||"Unknown Honor Type"}),e.jsx(c,{variant:"secondary",children:((l=s.honor_type||s.honorType)==null?void 0:l.scope)||"Unknown"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:`edit_min_gpa_${s.id}`,children:"Min GPA (5-1 scale)"}),e.jsx(p,{id:`edit_min_gpa_${s.id}`,type:"number",step:"0.1",value:m.min_gpa,onChange:t=>y({...m,min_gpa:t.target.value}),placeholder:"e.g., 3.5"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:`edit_max_gpa_${s.id}`,children:"Max GPA (5-1 scale)"}),e.jsx(p,{id:`edit_max_gpa_${s.id}`,type:"number",step:"0.1",value:m.max_gpa,onChange:t=>y({...m,max_gpa:t.target.value}),placeholder:"e.g., 1.5"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:`edit_min_grade_${s.id}`,children:"Min Grade (any) (5-1 scale)"}),e.jsx(p,{id:`edit_min_grade_${s.id}`,type:"number",value:m.min_grade,onChange:t=>y({...m,min_grade:t.target.value}),placeholder:"e.g., 3"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:`edit_min_grade_all_${s.id}`,children:"Min Grade (all) (5-1 scale)"}),e.jsx(p,{id:`edit_min_grade_all_${s.id}`,type:"number",value:m.min_grade_all,onChange:t=>y({...m,min_grade_all:t.target.value}),placeholder:"e.g., 2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:`edit_min_year_${s.id}`,children:"Min Year"}),e.jsx(p,{id:`edit_min_year_${s.id}`,type:"number",value:m.min_year,onChange:t=>y({...m,min_year:t.target.value}),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:`edit_max_year_${s.id}`,children:"Max Year"}),e.jsx(p,{id:`edit_max_year_${s.id}`,type:"number",value:m.max_year,onChange:t=>y({...m,max_year:t.target.value}),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{id:`edit_require_consistent_${s.id}`,checked:m.require_consistent_honor,onCheckedChange:t=>y({...m,require_consistent_honor:t})}),e.jsx(x,{htmlFor:`edit_require_consistent_${s.id}`,children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:we,children:"Cancel"}),e.jsx(g,{size:"sm",onClick:()=>Ce(s.id),children:"Update Criteria"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:((n=s.honor_type||s.honorType)==null?void 0:n.name)||"Unknown Honor Type"}),e.jsx(c,{variant:"secondary",children:((d=s.honor_type||s.honorType)==null?void 0:d.scope)||"Unknown"})]}),(s.min_gpa&&(s.min_gpa<1||s.min_gpa>5)||s.max_gpa&&(s.max_gpa<1||s.max_gpa>5)||s.min_grade&&(s.min_grade<1||s.min_grade>5)||s.min_grade_all&&(s.min_grade_all<1||s.min_grade_all>5))&&e.jsx(pe,{className:"mb-3 border-orange-500 bg-orange-50",children:e.jsx(ue,{className:"text-orange-700",children:"‚ö†Ô∏è Warning: College uses 1.0-5.0 grading scale (1=Highest, 5=Lowest). Values outside this range may be incorrect."})}),e.jsx("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg border border-blue-200",children:e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"üìò College Grading Scale: 1.0 = Highest | 5.0 = Lowest | Lower values = Better performance"})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[s.min_gpa&&e.jsxs("div",{className:`${s.min_gpa<1||s.min_gpa>5?"bg-orange-50 border-orange-200":"bg-blue-50"} p-2 rounded border`,children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Min GPA:"})," ",s.min_gpa,s.min_gpa<1||s.min_gpa>5?" ‚ö†Ô∏è":""]}),s.max_gpa&&e.jsxs("div",{className:`${s.max_gpa<1||s.max_gpa>5?"bg-orange-50 border-orange-200":"bg-green-50"} p-2 rounded border`,children:[e.jsx("span",{className:"font-medium text-green-700",children:"Max GPA:"})," ",s.max_gpa,s.max_gpa<1||s.max_gpa>5?" ‚ö†Ô∏è":""]}),s.min_grade&&e.jsxs("div",{className:`${s.min_grade<1||s.min_grade>5?"bg-orange-50 border-orange-200":"bg-yellow-50"} p-2 rounded border`,children:[e.jsx("span",{className:"font-medium text-yellow-700",children:"Min Grade (any):"})," ",s.min_grade,s.min_grade<1||s.min_grade>5?" ‚ö†Ô∏è":""]}),s.min_grade_all&&e.jsxs("div",{className:`${s.min_grade_all<1||s.min_grade_all>5?"bg-orange-50 border-orange-200":"bg-purple-50"} p-2 rounded border`,children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Min Grade (all):"})," ",s.min_grade_all,s.min_grade_all<1||s.min_grade_all>5?" ‚ö†Ô∏è":""]}),s.min_year&&s.max_year&&e.jsxs("div",{className:"bg-indigo-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-indigo-700",children:"Years:"})," ",s.min_year,"-",s.max_year]}),s.require_consistent_honor&&e.jsx("div",{className:"col-span-2",children:e.jsx(c,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:"Requires Consistent Honor Standing"})})]}),e.jsxs("div",{className:"flex justify-end mt-4 gap-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:()=>fe(s),children:"Edit"}),e.jsx(g,{variant:"destructive",size:"sm",onClick:()=>Se(s.id),children:"Delete"})]})]})},s.id)})})})]}),e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Qualified College Students (",k.length,")"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["School Year: ",f," ‚Ä¢ Click on a student to view detailed grades and honor calculation"]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"grade_level_filter",children:"Year Level"}),e.jsxs(G,{value:(r==null?void 0:r.grade_level)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("grade_level",s):a.searchParams.delete("grade_level"),a.searchParams.delete("department_id"),a.searchParams.delete("course_id"),a.searchParams.delete("section_id"),window.location.href=a.toString()},children:[e.jsx(H,{children:e.jsx($,{placeholder:"All Year Levels"})}),e.jsxs(M,{children:[e.jsx(_,{value:"all",children:"All Year Levels"}),h&&Object.entries(h).map(([s,a])=>e.jsx(_,{value:s,children:a},s))]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"department_filter",children:"Department"}),e.jsxs(G,{value:(r==null?void 0:r.department_id)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("department_id",s):a.searchParams.delete("department_id"),a.searchParams.delete("course_id"),a.searchParams.delete("section_id"),window.location.href=a.toString()},children:[e.jsx(H,{children:e.jsx($,{placeholder:"All Departments"})}),e.jsxs(M,{children:[e.jsx(_,{value:"all",children:"All Departments"}),L&&L.map(s=>e.jsxs(_,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"course_filter",children:"Course"}),e.jsxs(G,{value:(r==null?void 0:r.course_id)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("course_id",s):a.searchParams.delete("course_id"),a.searchParams.delete("section_id"),window.location.href=a.toString()},children:[e.jsx(H,{children:e.jsx($,{placeholder:"All Courses"})}),e.jsxs(M,{children:[e.jsx(_,{value:"all",children:"All Courses"}),U&&U.map(s=>e.jsxs(_,{value:s.id.toString(),children:[s.name," (",s.code,")",s.department&&` - ${s.department.name}`]},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"section_filter",children:"Section"}),e.jsxs(G,{value:(r==null?void 0:r.section_id)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("section_id",s):a.searchParams.delete("section_id"),window.location.href=a.toString()},children:[e.jsx(H,{children:e.jsx($,{placeholder:"All Sections"})}),e.jsxs(M,{children:[e.jsx(_,{value:"all",children:"All Sections"}),R&&R.map(s=>e.jsxs(_,{value:s.id.toString(),children:[s.name," (",s.code,")",s.specific_year_level&&` - ${s.specific_year_level.replace("_"," ").replace(/\b\w/g,a=>a.toUpperCase())}`]},s.id))]})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(g,{variant:"outline",onClick:()=>{const s=new URL(window.location.href);s.searchParams.delete("grade_level"),s.searchParams.delete("department_id"),s.searchParams.delete("course_id"),s.searchParams.delete("section_id"),window.location.href=s.toString()},className:"w-full md:w-auto",children:"Clear All Filters"})}),((r==null?void 0:r.grade_level)||(r==null?void 0:r.department_id)||(r==null?void 0:r.course_id)||(r==null?void 0:r.section_id))&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Active Filters:"}),(r==null?void 0:r.grade_level)&&e.jsxs("span",{className:"ml-2",children:["Year Level: ",e.jsx(c,{variant:"secondary",children:(h==null?void 0:h[r.grade_level])||r.grade_level})]}),(r==null?void 0:r.department_id)&&e.jsxs("span",{className:"ml-2",children:["Department: ",e.jsx(c,{variant:"secondary",children:((D=L==null?void 0:L.find(s=>s.id.toString()===r.department_id))==null?void 0:D.name)||r.department_id})]}),(r==null?void 0:r.course_id)&&e.jsxs("span",{className:"ml-2",children:["Course: ",e.jsx(c,{variant:"secondary",children:((ee=U==null?void 0:U.find(s=>s.id.toString()===r.course_id))==null?void 0:ee.name)||r.course_id})]}),(r==null?void 0:r.section_id)&&e.jsxs("span",{className:"ml-2",children:["Section: ",e.jsx(c,{variant:"secondary",children:((se=R==null?void 0:R.find(s=>s.id.toString()===r.section_id))==null?void 0:se.name)||r.section_id})]})]})})]})]}),e.jsx(A,{children:u.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(F,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No qualified students found"}),e.jsx("p",{className:"text-sm",children:"Students need to meet honor criteria to appear here."}),O.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-left",children:[e.jsxs("p",{className:"text-sm font-semibold text-yellow-800 mb-2",children:["‚ö†Ô∏è Note: ",O.length," student",O.length!==1?"s":""," did not qualify for honors"]}),e.jsx("p",{className:"text-xs text-yellow-700",children:"Check browser console for details about why students were disqualified."})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Ready to submit ",u.length," student",u.length!==1?"s":""," for approval"]}),e.jsxs(g,{onClick:()=>{console.log("[College Submit] Starting submission process..."),console.log("[College Submit] Actually qualified students count:",u.length),console.log("[College Submit] Current school year:",f),console.log("[College Submit] Honor results count:",b.length);const s=u.filter(l=>!b.some(d=>d.student_id===l.student.id&&d.school_year===f)),a=u.length-s.length;if(console.log("[College Submit] Total qualified students:",u.length),console.log("[College Submit] Already submitted count:",a),console.log("[College Submit] Students to submit count:",s.length),console.log("[College Submit] Student names to submit:",s.map(l=>l.student.name)),a>0&&console.log("[College Submit] Already submitted students:",u.filter(l=>b.some(n=>n.student_id===l.student.id&&n.school_year===f)).map(l=>l.student.name)),s.length===0){console.log("[College Submit] All students already submitted - blocking submission"),K("All qualified students have already been submitted for approval.","warning");return}confirm(`Submit ${s.length} qualified student(s) for chairperson approval?`)?(console.log("[College Submit] User confirmed. Sending data..."),console.log("[College Submit] Submitting students:",s.map(l=>({id:l.student.id,name:l.student.name}))),Oe.post(route("admin.academic.honors.college.generate-results"),{school_year:f},{onSuccess:l=>{console.log("[College Submit] Success response:",l),K(`Successfully submitted ${s.length} student(s) for approval!`,"success")},onError:l=>{console.error("[College Submit] Error response:",l),K("Failed to submit students for approval. Please try again.","error")}})):console.log("[College Submit] User cancelled submission")},className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Submit for Approval"]})]}),e.jsx("div",{className:"grid gap-4",children:u.map((s,a)=>{var l,n,d,t;return e.jsx("div",{onClick:()=>Z(s),className:"border rounded-lg p-4 bg-white shadow-sm hover:shadow-md cursor-pointer transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",a+1]}),e.jsx("h4",{className:"font-semibold text-lg",children:s.student.name})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(c,{variant:"outline",className:"text-xs",children:s.student.student_number}),s.student.specific_year_level&&e.jsx(c,{variant:"secondary",className:"text-xs",children:(h==null?void 0:h[s.student.specific_year_level])||s.student.specific_year_level.replace("_"," ").replace(/\b\w/g,o=>o.toUpperCase())}),s.student.department&&e.jsx(c,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:s.student.department.name}),s.student.course&&e.jsx(c,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700",children:s.student.course.name}),s.student.section&&e.jsx(c,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:s.student.section.name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Average Grade:"}),e.jsx("div",{className:"text-lg font-bold",children:s.result.average_grade})]}),e.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-yellow-700",children:"Min Grade:"}),e.jsx("div",{className:"text-lg font-bold",children:s.result.min_grade})]}),e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Total Quarters:"}),e.jsx("div",{className:"text-lg font-bold",children:s.result.total_quarters??0})]}),e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Honor:"}),e.jsx("div",{className:"font-bold",children:((l=s.result.qualifications)==null?void 0:l.length)>0?e.jsx(c,{className:"bg-purple-100 text-purple-800 border-purple-200",children:((t=(d=(n=s.result.qualifications)==null?void 0:n[0])==null?void 0:d.honor_type)==null?void 0:t.name)||"N/A"}):e.jsx("span",{className:"text-gray-500",children:"N/A"})})]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx(g,{variant:"outline",size:"sm",onClick:o=>{o.stopPropagation(),Z(s)},children:"View Details"})})]})},s.student.id)})})]})})]}),e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5"}),"Results of ",b.length," student",b.length!==1?"s":""," for approval"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["School Year: ",f," ‚Ä¢ Students who have been submitted for chairperson/principal approval"]})]}),e.jsx(A,{children:b.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(F,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No students have been submitted for approval yet"}),e.jsx("p",{className:"text-sm",children:'Use the "Submit for Approval" button above to submit qualified students.'})]}):e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:b.map((s,a)=>{const l=s.student,n=s.honor_type||s.honorType,d=s.is_approved,t=!s.is_approved&&!s.approved_at;return e.jsx("div",{className:`border rounded-lg p-4 shadow-sm ${d?"bg-green-50 border-green-200":t?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200"}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",a+1]}),e.jsx("h4",{className:"font-semibold text-lg",children:(l==null?void 0:l.name)||"Unknown Student"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(c,{variant:"outline",className:"text-xs",children:(l==null?void 0:l.student_number)||"N/A"}),(l==null?void 0:l.specific_year_level)&&e.jsx(c,{variant:"secondary",className:"text-xs",children:(h==null?void 0:h[l.specific_year_level])||l.specific_year_level.replace("_"," ").replace(/\b\w/g,o=>o.toUpperCase())}),(l==null?void 0:l.department)&&e.jsx(c,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:l.department.name}),(l==null?void 0:l.course)&&e.jsx(c,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700",children:l.course.name}),(l==null?void 0:l.section)&&e.jsx(c,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:l.section.name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Honor Type:"}),e.jsx("div",{className:"font-bold",children:(n==null?void 0:n.name)||"N/A"})]}),e.jsxs("div",{className:`p-2 rounded ${d?"bg-green-100":t?"bg-yellow-100":"bg-gray-100"}`,children:[e.jsx("span",{className:`font-medium ${d?"text-green-700":t?"text-yellow-700":"text-gray-700"}`,children:"Status:"}),e.jsx("div",{className:"font-bold",children:d?e.jsx(c,{className:"bg-green-600 text-white",children:"Approved"}):t?e.jsx(c,{className:"bg-yellow-600 text-white",children:"Pending"}):e.jsx(c,{className:"bg-gray-600 text-white",children:"Submitted"})})]}),s.approved_at&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Approved Date:"}),e.jsx("div",{className:"text-sm",children:new Date(s.approved_at).toLocaleDateString()})]}),s.created_at&&e.jsxs("div",{className:"bg-gray-100 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Submitted:"}),e.jsx("div",{className:"text-sm",children:new Date(s.created_at).toLocaleDateString()})]})]})]})})},s.id)})})})})]}),i&&_e&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[i.student.name," - Honor Details"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Student Number: ",i.student.student_number," | School Year: ",f,i.student.specific_year_level&&e.jsxs(e.Fragment,{children:[" | Year Level: ",(h==null?void 0:h[i.student.specific_year_level])||i.student.specific_year_level.replace("_"," ").replace(/\b\w/g,s=>s.toUpperCase())]}),i.student.course&&e.jsxs(e.Fragment,{children:[" | Course: ",i.student.course.name," (",i.student.course.code,")"]}),i.student.section&&e.jsxs(e.Fragment,{children:[" | Section: ",i.student.section.name," (",i.student.section.code,")"]})]})]}),e.jsx(g,{variant:"outline",onClick:()=>{Y(!1),X(null)},children:"Close"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(w,{children:[e.jsx(C,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Honor Qualification Summary"]})}),e.jsxs(A,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Average Grade"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:i.result.average_grade})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-yellow-700",children:"Min Grade"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:i.result.min_grade})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-green-700",children:"Total Quarters"}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:i.result.total_quarters??0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700",children:"Honor"}),e.jsx("div",{className:"mt-1",children:((ae=i.result.qualifications)==null?void 0:ae.length)>0?e.jsx(c,{className:"bg-purple-100 text-purple-800 border-purple-200",children:((ne=(re=(le=i.result.qualifications)==null?void 0:le[0])==null?void 0:re.honor_type)==null?void 0:ne.name)||"N/A"}):e.jsx("span",{className:"text-gray-500",children:"N/A"})})]})]})]}),((te=i.result.grades_breakdown)==null?void 0:te.subjects)&&Object.keys(i.result.grades_breakdown.subjects).length>0&&e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(S,{children:"First Semester Grades"}),((ie=(de=i.result.grades_breakdown)==null?void 0:de.semester_summaries)==null?void 0:ie.first_semester)&&e.jsxs("div",{className:"text-2xl font-bold text-green-700 mt-2",children:["Semester Average: ",i.result.grades_breakdown.semester_summaries.first_semester.average??"‚Äî"]})]}),e.jsx(A,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 p-3 text-left",children:"Subject"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Midterm"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Pre-Final"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Average"})]})}),e.jsx("tbody",{children:Object.entries(i.result.grades_breakdown.subjects).map(([s,a])=>{const l=(a==null?void 0:a.COL_S1_MT)??"‚Äî",n=(a==null?void 0:a.COL_S1_PF)??"‚Äî",d=[a==null?void 0:a.COL_S1_MT,a==null?void 0:a.COL_S1_PF].filter(o=>typeof o=="number"),t=d.length?(d.reduce((o,P)=>o+P,0)/d.length).toFixed(2):"‚Äî";return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:s}),e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:l}),e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:n}),e.jsx("td",{className:"border border-gray-300 p-3 text-center font-bold text-blue-600",children:t})]},s)})})]})})})]}),((oe=i.result.grades_breakdown)==null?void 0:oe.subjects)&&Object.keys(i.result.grades_breakdown.subjects).length>0&&e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(S,{children:"Second Semester Grades"}),((me=(ce=i.result.grades_breakdown)==null?void 0:ce.semester_summaries)==null?void 0:me.second_semester)&&e.jsxs("div",{className:"text-2xl font-bold text-green-700 mt-2",children:["Semester Average: ",i.result.grades_breakdown.semester_summaries.second_semester.average??"‚Äî"]})]}),e.jsx(A,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 p-3 text-left",children:"Subject"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Midterm"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Pre-Final"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Average"})]})}),e.jsx("tbody",{children:Object.entries(i.result.grades_breakdown.subjects).map(([s,a])=>{const l=(a==null?void 0:a.COL_S2_MT)??"‚Äî",n=(a==null?void 0:a.COL_S2_PF)??"‚Äî",d=[a==null?void 0:a.COL_S2_MT,a==null?void 0:a.COL_S2_PF].filter(o=>typeof o=="number"),t=d.length?(d.reduce((o,P)=>o+P,0)/d.length).toFixed(2):"‚Äî";return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:s}),e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:l}),e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:n}),e.jsx("td",{className:"border border-gray-300 p-3 text-center font-bold text-blue-600",children:t})]},s)})})]})})})]}),!i.result.qualified&&i.result.reason&&e.jsxs(w,{children:[e.jsx(C,{children:e.jsx(S,{children:"Reason"})}),e.jsx(A,{children:e.jsx("div",{className:"text-sm text-gray-700",children:i.result.reason})})]})]})]})})]})})]})]})}export{us as default};
