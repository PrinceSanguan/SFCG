import{r as w,u as Te,m as Ue,j as e,C as fe,S as Oe}from"./app--A-y9q65.js";import{H as Re}from"./header-DZdOTT0o.js";import{S as qe}from"./sidebar-BRZYrMR5.js";import{C as R,b as q,c as B,a as Q}from"./card-CvNO9Ryi.js";import{B as m}from"./button-DOdKBTvJ.js";import{I as x}from"./input-C_-K-XLv.js";import{L as c}from"./label-BnJHDeVI.js";import{S as A,a as k,b as H,c as G,d as N}from"./select-C1FMaDiO.js";import{C as we}from"./checkbox-CgqoA3nP.js";import{B as o}from"./badge-D7xmFNOP.js";import{A as Be,a as Qe}from"./alert-CiOWWSlb.js";import{D as Ve,b as ze,c as Ie,d as Ke,e as Xe}from"./dialog-ijkVTIr4.js";import{A as Je}from"./arrow-left-CvGp-wgz.js";import{P as We}from"./plus-xLrf0oHz.js";import{T as _}from"./trophy-DHJDWtIY.js";import{U as Ye}from"./upload-D0aiu3_-.js";/* empty css            */import"./dropdown-menu-C9sZscwq.js";import"./Combination-CduV8oXx.js";import"./index-0H-QO1X-.js";import"./separator-B116m-ZL.js";import"./users-CHWH5f1q.js";import"./chevron-right-h4DD-zrK.js";import"./crown-i2gb9RIz.js";import"./building-2-DwSqpj7C.js";import"./user-cog-bOaFb_BQ.js";import"./book-open-B594akuN.js";import"./user-check-DmNsF4-5.js";import"./graduation-cap-BfjxIAFA.js";import"./notebook-DuiV25aL.js";import"./chart-no-axes-column-increasing-lgG4rN-Y.js";import"./shield-lDetVDcT.js";import"./index-wZQYgDRC.js";import"./index-BJ5KUWbH.js";import"./check-BZPzWBXw.js";function Ms({user:V,honorTypes:g,criteria:y,schoolYears:P,qualifiedStudents:b=[],honorResults:Se=[],currentSchoolYear:$="2024-2025",gradeLevels:h={},sections:S=[],strands:C=[],filters:r}){var J,W,Y,Z,L,ee,se,ae,le,re,te,ne,de,ie,ce,oe,me,xe,he,ge,pe,ue;const[D,f]=w.useState(null),[M,E]=w.useState(null),[i,p]=w.useState({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),[Ce,T]=w.useState(!1),[d,Fe]=w.useState(null),[Ae,U]=w.useState(!1),{addToast:O}=Te(),{data:u,setData:j,post:ke,processing:He,errors:z,reset:Ge}=Ue({academic_level_id:"3",honor_type_id:"",school_year:"2024-2025",min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),I=s=>{var t;if(typeof s!="number"||!y||y.length===0)return null;const a=[...y].filter(l=>l.honorType&&(l.min_gpa!==null||l.max_gpa!==null)).sort((l,n)=>(n.min_gpa??0)-(l.min_gpa??0));for(const l of a){const n=l.min_gpa===null||s>=l.min_gpa,v=l.max_gpa===null||s<=l.max_gpa;if(n&&v)return((t=l.honorType)==null?void 0:t.name)||null}return null},K=s=>{var a,t,l;return((a=s==null?void 0:s.honor_type)==null?void 0:a.name)||((t=s==null?void 0:s.honorType)==null?void 0:t.name)||((l=g==null?void 0:g.find(n=>n.id===(s==null?void 0:s.honor_type_id)))==null?void 0:l.name)||"Unknown Honor Type"},X=s=>{var a,t,l;return((a=s==null?void 0:s.honor_type)==null?void 0:a.scope)||((t=s==null?void 0:s.honorType)==null?void 0:t.scope)||((l=g==null?void 0:g.find(n=>n.id===(s==null?void 0:s.honor_type_id)))==null?void 0:l.scope)||"Unknown"},Pe=s=>{s.preventDefault(),ke("/admin/academic/honors/criteria",{onSuccess:()=>{f({type:"success",text:"Criteria saved successfully!"}),Ge(),T(!1),window.location.reload()},onError:()=>f({type:"error",text:"Failed to save criteria."})})},Me=s=>{var a,t,l,n,v,F;E(s),p({min_gpa:((a=s.min_gpa)==null?void 0:a.toString())||"",max_gpa:((t=s.max_gpa)==null?void 0:t.toString())||"",min_grade:((l=s.min_grade)==null?void 0:l.toString())||"",min_grade_all:((n=s.min_grade_all)==null?void 0:n.toString())||"",min_year:((v=s.min_year)==null?void 0:v.toString())||"",max_year:((F=s.max_year)==null?void 0:F.toString())||"",require_consistent_honor:s.require_consistent_honor})},$e=()=>{E(null),p({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1})},De=s=>{var t;const a={...M,min_gpa:parseFloat(i.min_gpa)||null,max_gpa:parseFloat(i.max_gpa)||null,min_grade:parseFloat(i.min_grade)||null,min_grade_all:parseFloat(i.min_grade_all)||null,min_year:parseInt(i.min_year)||null,max_year:parseInt(i.max_year)||null,require_consistent_honor:i.require_consistent_honor};fetch(`/admin/academic/honors/criteria/${s}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify(a)}).then(l=>{if(!l.ok)throw new Error(`HTTP ${l.status}`);return l.json()}).then(()=>{f({type:"success",text:"Criteria updated successfully!"}),E(null),window.location.reload()}).catch(()=>f({type:"error",text:"Failed to update criteria."}))},Ee=s=>{var a;window.confirm("Are you sure you want to delete this criterion?")&&fetch(`/admin/academic/honors/criteria/${s}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""}}).then(t=>{if(!t.ok)throw new Error(`HTTP ${t.status}`);return t.json()}).then(()=>{f({type:"success",text:"Criteria deleted successfully!"}),window.location.reload()}).catch(()=>f({type:"error",text:"Failed to delete criteria."}))};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(qe,{user:V}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(Re,{user:V}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Back"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Senior High School Honor Criteria"})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage honor criteria for Senior High School level students."})]})}),D&&e.jsxs(Be,{className:D.type==="success"?"border-green-500":"border-red-500",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx(Qe,{children:D.text})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(m,{onClick:()=>T(!0),className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4"}),"Add New Criteria"]})}),Ce&&e.jsxs(R,{children:[e.jsx(q,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Add Honor Criteria"]})}),e.jsx(Q,{children:e.jsxs("form",{onSubmit:Pe,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"honor_type_id",children:"Honor Type"}),g&&g.length>0?e.jsxs(A,{value:u.honor_type_id||"",onValueChange:s=>j("honor_type_id",s),children:[e.jsx(k,{children:e.jsx(H,{placeholder:"Select honor"})}),e.jsx(G,{children:g.filter(s=>s.id&&s.name).map(s=>e.jsx(N,{value:s.id.toString(),children:s.name},s.id))})]}):e.jsx("div",{className:"p-2 text-sm text-gray-500 bg-gray-100 rounded border",children:"Loading honor types..."}),z.honor_type_id&&e.jsx("p",{className:"text-sm text-red-500",children:z.honor_type_id})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"school_year",children:"School Year"}),e.jsxs(A,{value:u.school_year||"",onValueChange:s=>j("school_year",s),children:[e.jsx(k,{children:e.jsx(H,{placeholder:"Select school year"})}),e.jsx(G,{children:(P!=null&&P.length?P:["2024-2025"]).filter(s=>s&&s.trim()!=="").map(s=>e.jsx(N,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"min_gpa",children:"Min GPA"}),e.jsx(x,{id:"min_gpa",type:"number",step:"0.01",value:u.min_gpa,onChange:s=>j("min_gpa",s.target.value),placeholder:"e.g., 90.0"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"max_gpa",children:"Max GPA"}),e.jsx(x,{id:"max_gpa",type:"number",step:"0.01",value:u.max_gpa,onChange:s=>j("max_gpa",s.target.value),placeholder:"e.g., 97.0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"min_grade",children:"Min Grade (any)"}),e.jsx(x,{id:"min_grade",type:"number",value:u.min_grade,onChange:s=>j("min_grade",s.target.value),placeholder:"e.g., 90"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"min_grade_all",children:"Min Grade (all)"}),e.jsx(x,{id:"min_grade_all",type:"number",value:u.min_grade_all,onChange:s=>j("min_grade_all",s.target.value),placeholder:"e.g., 93"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"min_year",children:"Min Year"}),e.jsx(x,{id:"min_year",type:"number",value:u.min_year,onChange:s=>j("min_year",s.target.value),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"max_year",children:"Max Year"}),e.jsx(x,{id:"max_year",type:"number",value:u.max_year,onChange:s=>j("max_year",s.target.value),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(we,{id:"require_consistent_honor",checked:!!u.require_consistent_honor,onCheckedChange:s=>j("require_consistent_honor",s)}),e.jsx(c,{htmlFor:"require_consistent_honor",children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:"submit",disabled:He,children:"Save Criteria"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>T(!1),children:"Cancel"})]})]})})]}),e.jsxs(R,{children:[e.jsx(q,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Existing Criteria (",y.length,")"]})}),e.jsx(Q,{children:y.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(_,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No honor criteria set for Senior High School"}),e.jsx("p",{className:"text-sm",children:'Use the "Add New Criteria" button to create criteria for this level.'})]}):e.jsx("div",{className:"grid gap-4",children:y.map(s=>e.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:(M==null?void 0:M.id)===s.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:K(s)}),e.jsx(o,{variant:"secondary",children:X(s)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:`edit_min_gpa_${s.id}`,children:"Min GPA"}),e.jsx(x,{id:`edit_min_gpa_${s.id}`,type:"number",step:"0.01",value:i.min_gpa,onChange:a=>p({...i,min_gpa:a.target.value}),placeholder:"e.g., 90.0"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:`edit_max_gpa_${s.id}`,children:"Max GPA"}),e.jsx(x,{id:`edit_max_gpa_${s.id}`,type:"number",step:"0.01",value:i.max_gpa,onChange:a=>p({...i,max_gpa:a.target.value}),placeholder:"e.g., 97.0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:`edit_min_grade_${s.id}`,children:"Min Grade (any)"}),e.jsx(x,{id:`edit_min_grade_${s.id}`,type:"number",value:i.min_grade,onChange:a=>p({...i,min_grade:a.target.value}),placeholder:"e.g., 90"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:`edit_min_grade_all_${s.id}`,children:"Min Grade (all)"}),e.jsx(x,{id:`edit_min_grade_all_${s.id}`,type:"number",value:i.min_grade_all,onChange:a=>p({...i,min_grade_all:a.target.value}),placeholder:"e.g., 93"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:`edit_min_year_${s.id}`,children:"Min Year"}),e.jsx(x,{id:`edit_min_year_${s.id}`,type:"number",value:i.min_year,onChange:a=>p({...i,min_year:a.target.value}),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:`edit_max_year_${s.id}`,children:"Max Year"}),e.jsx(x,{id:`edit_max_year_${s.id}`,type:"number",value:i.max_year,onChange:a=>p({...i,max_year:a.target.value}),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(we,{id:`edit_require_consistent_${s.id}`,checked:i.require_consistent_honor,onCheckedChange:a=>p({...i,require_consistent_honor:a})}),e.jsx(c,{htmlFor:`edit_require_consistent_${s.id}`,children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:$e,children:"Cancel"}),e.jsx(m,{size:"sm",onClick:()=>De(s.id),children:"Update Criteria"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:K(s)}),e.jsx(o,{variant:"secondary",children:X(s)})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[s.min_gpa&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Min GPA:"})," ",s.min_gpa]}),s.max_gpa&&e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Max GPA:"})," ",s.max_gpa]}),s.min_grade&&e.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-yellow-700",children:"Min Grade:"})," ",s.min_grade]}),s.min_grade_all&&e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Min Grade (All):"})," ",s.min_grade_all]}),s.min_year&&s.max_year&&e.jsxs("div",{className:"bg-indigo-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-indigo-700",children:"Years:"})," ",s.min_year,"-",s.max_year]}),s.require_consistent_honor&&e.jsx("div",{className:"col-span-2",children:e.jsx(o,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:"Requires Consistent Honor Standing"})})]}),e.jsxs("div",{className:"flex justify-end mt-4 gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>Me(s),children:"Edit"}),e.jsx(m,{variant:"destructive",size:"sm",onClick:()=>Ee(s.id),children:"Delete"})]})]})},s.id))})})]}),e.jsxs(R,{children:[e.jsxs(q,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Qualified Senior High School Students (",b.length,")"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["School Year: ",$," • Click on a student to view detailed grades and honor calculation"]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"grade_level_filter",children:"Grade Level"}),e.jsxs(A,{value:(r==null?void 0:r.grade_level)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("grade_level",s):a.searchParams.delete("grade_level"),window.location.href=a.toString()},children:[e.jsx(k,{children:e.jsx(H,{placeholder:"All Grade Levels"})}),e.jsxs(G,{children:[e.jsx(N,{value:"all",children:"All Grade Levels"}),h&&Object.entries(h).map(([s,a])=>e.jsx(N,{value:s,children:a},s))]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"strand_filter",children:"Strand"}),e.jsxs(A,{value:(r==null?void 0:r.strand_id)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("strand_id",s):a.searchParams.delete("strand_id"),window.location.href=a.toString()},children:[e.jsx(k,{children:e.jsx(H,{placeholder:"All Strands"})}),e.jsxs(G,{children:[e.jsx(N,{value:"all",children:"All Strands"}),C&&C.map(s=>e.jsx(N,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"section_filter",children:"Section"}),e.jsxs(A,{value:(r==null?void 0:r.section_id)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("section_id",s):a.searchParams.delete("section_id"),window.location.href=a.toString()},children:[e.jsx(k,{children:e.jsx(H,{placeholder:"All Sections"})}),e.jsxs(G,{children:[e.jsx(N,{value:"all",children:"All Sections"}),S&&S.map(s=>e.jsxs(N,{value:s.id.toString(),children:[s.name," (",s.code,")",s.specific_year_level&&` - ${s.specific_year_level.replace("grade_","Grade ")}`]},s.id))]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(m,{variant:"outline",onClick:()=>{const s=new URL(window.location.href);s.searchParams.delete("grade_level"),s.searchParams.delete("strand_id"),s.searchParams.delete("section_id"),window.location.href=s.toString()},className:"w-full",children:"Clear Filters"})})]}),((r==null?void 0:r.grade_level)||(r==null?void 0:r.section_id)||(r==null?void 0:r.strand_id))&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Active Filters:"}),(r==null?void 0:r.grade_level)&&e.jsxs("span",{className:"ml-2",children:["Grade Level: ",e.jsx(o,{variant:"secondary",children:(h==null?void 0:h[r.grade_level])||r.grade_level})]}),(r==null?void 0:r.strand_id)&&e.jsxs("span",{className:"ml-2",children:["Strand: ",e.jsx(o,{variant:"secondary",children:((J=C==null?void 0:C.find(s=>s.id.toString()===r.strand_id))==null?void 0:J.name)||r.strand_id})]}),(r==null?void 0:r.section_id)&&e.jsxs("span",{className:"ml-2",children:["Section: ",e.jsx(o,{variant:"secondary",children:((W=S==null?void 0:S.find(s=>s.id.toString()===r.section_id))==null?void 0:W.name)||r.section_id})]})]})})]})]}),e.jsx(Q,{children:b.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(_,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No qualified students found"}),e.jsx("p",{className:"text-sm",children:"Students need to meet honor criteria to appear here."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Ready to submit ",b.length," student",b.length!==1?"s":""," for approval"]}),e.jsxs(m,{onClick:()=>{if(b.some(a=>Se.some(t=>t.student_id===a.student.id&&t.school_year===$))){O("Some students have already been submitted for approval.","warning");return}confirm(`Submit ${b.length} qualified student(s) for principal approval?`)&&Oe.post(route("admin.academic.honors.senior-high-school.generate-results"),{school_year:$},{onSuccess:()=>{O(`Successfully submitted ${b.length} student(s) for approval!`,"success")},onError:()=>{O("Failed to submit students for approval. Please try again.","error")}})},className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),"Submit for Approval"]})]}),e.jsx("div",{className:"grid gap-4",children:b.map((s,a)=>{var t,l,n;return e.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm hover:shadow-md cursor-pointer transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",a+1]}),e.jsx("h4",{className:"font-semibold text-lg",children:s.student.name})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",className:"text-xs",children:s.student.student_number}),s.student.specific_year_level&&e.jsx(o,{variant:"secondary",className:"text-xs",children:(h==null?void 0:h[s.student.specific_year_level])||s.student.specific_year_level.replace("grade_","Grade ")}),s.student.section&&e.jsx(o,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:s.student.section.name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Average Grade:"}),e.jsx("div",{className:"text-lg font-bold",children:s.result.average_grade})]}),e.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-yellow-700",children:"Min Grade:"}),e.jsx("div",{className:"text-lg font-bold",children:s.result.min_grade})]}),e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Total Quarters:"}),e.jsx("div",{className:"text-lg font-bold",children:((t=s.result.quarter_averages)==null?void 0:t.length)??((n=(l=s.result.grades_breakdown)==null?void 0:l.periods)==null?void 0:n.length)??0})]}),e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Honor:"}),e.jsx("div",{className:"font-bold",children:(()=>{var F,je,_e,be,Ne,ve;if(((je=(F=s.result)==null?void 0:F.qualifications)==null?void 0:je.length)>0){const ye=(be=(_e=s.result.qualifications[0])==null?void 0:_e.honor_type)==null?void 0:be.name;if(ye)return e.jsx(o,{className:"bg-purple-100 text-purple-800 border-purple-200",children:ye})}const v=I((Ne=s.result)==null?void 0:Ne.average_grade);return v?e.jsx(o,{className:"bg-purple-100 text-purple-800 border-purple-200",children:v}):(ve=s.result)!=null&&ve.qualified?e.jsx(o,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"Computing..."}):e.jsx("span",{className:"text-gray-500",children:"N/A"})})()})]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{Fe(s),U(!0)},children:"View Details"})})]})},s.student.id)})})]})})]})]})})]}),e.jsx(Ve,{open:Ae,onOpenChange:U,children:e.jsxs(ze,{className:"max-w-[95vw] w-[95vw] max-h-[95vh] overflow-y-auto",children:[e.jsxs(Ie,{children:[e.jsxs(Ke,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-purple-600"}),"Student Honor Details"]}),e.jsx(Xe,{children:"Detailed grade breakdown and honor calculation"})]}),d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3 text-gray-900",children:"Student Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsx("p",{className:"font-semibold text-gray-900",children:d.student.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Student Number:"}),e.jsx("p",{className:"font-semibold text-gray-900",children:d.student.student_number})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Grade Level:"}),e.jsx("p",{className:"font-semibold text-gray-900",children:(h==null?void 0:h[d.student.specific_year_level||""])||((Y=d.student.specific_year_level)==null?void 0:Y.replace("grade_","Grade "))||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Section:"}),e.jsx("p",{className:"font-semibold text-gray-900",children:((Z=d.student.section)==null?void 0:Z.name)||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-lg border border-purple-200",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-gray-900 flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-purple-600"}),"Honor Achievement"]}),e.jsx("div",{className:"space-y-2",children:((ee=(L=d.result)==null?void 0:L.qualifications)==null?void 0:ee.length)>0?(()=>{var a;const s=d.result.qualifications[d.result.qualifications.length-1];return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-green-600"}),e.jsx(o,{className:"bg-purple-600 text-white text-base py-1 px-3",children:((a=s.honor_type)==null?void 0:a.name)||"Unknown Honor"})]})})():e.jsx("p",{className:"text-gray-600",children:I((se=d.result)==null?void 0:se.average_grade)||"No honor qualification found"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3 text-gray-900",children:"Grade Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[e.jsx("span",{className:"text-sm text-blue-700 font-medium",children:"Average Grade"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:((le=(ae=d.result)==null?void 0:ae.average_grade)==null?void 0:le.toFixed(2))||"N/A"}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"1.0 is highest"})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Best Grade"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:((te=(re=d.result)==null?void 0:re.min_grade)==null?void 0:te.toFixed(2))||"N/A"}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Lowest number"})]}),e.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[e.jsx("span",{className:"text-sm text-yellow-700 font-medium",children:"Worst Grade"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:((de=(ne=d.result)==null?void 0:ne.max_grade)==null?void 0:de.toFixed(2))||"N/A"}),e.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"Highest number"})]})]})]}),((ce=(ie=d.result)==null?void 0:ie.grades_breakdown)==null?void 0:ce.subjects)&&Object.keys(d.result.grades_breakdown.subjects).length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"font-semibold text-xl mb-4 text-gray-900",children:"Grade Breakdown by Semester"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-4",children:[e.jsxs("h4",{className:"font-bold text-lg text-white flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"First Semester"]}),((oe=d.result.grades_breakdown.semester_summaries)==null?void 0:oe.first_semester)&&e.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:["Average: ",e.jsx("span",{className:"font-bold text-white",children:((me=d.result.grades_breakdown.semester_summaries.first_semester.average)==null?void 0:me.toFixed(2))||"N/A"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-semibold text-gray-700",children:"Subject"}),e.jsx("th",{className:"text-center p-3 font-semibold text-gray-700",children:"Midterm"}),e.jsx("th",{className:"text-center p-3 font-semibold text-gray-700",children:"Pre-Final"}),e.jsx("th",{className:"text-center p-3 font-semibold text-gray-700 bg-blue-50",children:"Average"})]})}),e.jsx("tbody",{children:Object.entries(d.result.grades_breakdown.subjects).map(([s,a],t)=>{const l=a.SHS_S1_MT||a.m1||a.Q1||null,n=a.SHS_S1_PF||a["Pre-final"]||a.Q2||null;return l===null&&n===null?null:e.jsxs("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"p-3 font-medium text-gray-900",children:s}),e.jsx("td",{className:"p-3 text-center text-gray-700",children:l!==null?l.toFixed(2):"-"}),e.jsx("td",{className:"p-3 text-center text-gray-700",children:n!==null?n.toFixed(2):"-"}),e.jsx("td",{className:"p-3 text-center font-bold text-blue-900 bg-blue-50",children:l!==null&&n!==null?((l+n)/2).toFixed(2):l!==null?l.toFixed(2):n!==null?n.toFixed(2):"-"})]},t)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 p-4",children:[e.jsxs("h4",{className:"font-bold text-lg text-white flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Second Semester"]}),((xe=d.result.grades_breakdown.semester_summaries)==null?void 0:xe.second_semester)&&e.jsxs("p",{className:"text-purple-100 text-sm mt-1",children:["Average: ",e.jsx("span",{className:"font-bold text-white",children:((he=d.result.grades_breakdown.semester_summaries.second_semester.average)==null?void 0:he.toFixed(2))||"N/A"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-semibold text-gray-700",children:"Subject"}),e.jsx("th",{className:"text-center p-3 font-semibold text-gray-700",children:"Midterm"}),e.jsx("th",{className:"text-center p-3 font-semibold text-gray-700",children:"Pre-Final"}),e.jsx("th",{className:"text-center p-3 font-semibold text-gray-700 bg-purple-50",children:"Average"})]})}),e.jsx("tbody",{children:Object.entries(d.result.grades_breakdown.subjects).map(([s,a],t)=>{const l=a.SHS_S2_MT||a.m2||a.Q3||null,n=a.SHS_S2_PF||a["pre-final2"]||a.Q4||null;return l===null&&n===null?null:e.jsxs("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"p-3 font-medium text-gray-900",children:s}),e.jsx("td",{className:"p-3 text-center text-gray-700",children:l!==null?l.toFixed(2):"-"}),e.jsx("td",{className:"p-3 text-center text-gray-700",children:n!==null?n.toFixed(2):"-"}),e.jsx("td",{className:"p-3 text-center font-bold text-purple-900 bg-purple-50",children:l!==null&&n!==null?((l+n)/2).toFixed(2):l!==null?l.toFixed(2):n!==null?n.toFixed(2):"-"})]},t)})})]})})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border-2 border-green-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg text-green-900",children:"Overall Academic Performance"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Combined average across all semesters"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-4xl font-bold text-green-900",children:((pe=(ge=d.result)==null?void 0:ge.average_grade)==null?void 0:pe.toFixed(2))||"N/A"}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Final GPA (1.0 is highest)"})]})]})})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Qualification Status"}),e.jsx("p",{className:"text-sm text-gray-900",children:((ue=d.result)==null?void 0:ue.reason)||"N/A"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(m,{onClick:()=>U(!1),variant:"outline",children:"Close"})})]})]})})]})}export{Ms as default};
