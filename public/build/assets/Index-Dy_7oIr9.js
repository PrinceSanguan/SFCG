import{r as p,j as e,$ as E,C as T}from"./app-BUacVS3B.js";import{S as V,H as D}from"./sidebar-Dc40NoL6.js";import{C as w,b as C,c as k,a as A}from"./card-CgFlvjis.js";import{B as j}from"./button-hasTKr4q.js";import{B as c}from"./badge-BgcoyrbW.js";import{I as H}from"./input-Ct3tLlb6.js";import{S as N,a as g,b as S,c as b,d as a}from"./select-BNvhVA6b.js";import{F as $}from"./filter-CIRwAtrg.js";import{S as M}from"./search-DZ7gRu8h.js";import{E as X}from"./eye-Dpe8s5lU.js";import{C as q}from"./check-B3Yona0S.js";import{R as J}from"./rotate-ccw-DxgGN4bJ.js";import{C as K}from"./circle-x-DiCmnxcT.js";import{C as L}from"./clock-DPVmREcz.js";/* empty css            */import"./dropdown-menu-DUnoF0CX.js";import"./Combination-D3ne_WHq.js";import"./index-CdEKCKk_.js";import"./separator-BFGTiYSz.js";import"./user-cog-dNUKz5hM.js";import"./book-open-31XnliA-.js";import"./chevron-right-DzmeGSe9.js";import"./award-DBv6l_uB.js";import"./chart-no-axes-column-increasing-DpmpKgZA.js";import"./file-text-JPOQIzrn.js";import"./index-DtPi_XZZ.js";import"./index-m40YCXEv.js";function be({user:y,grades:d,academicLevels:P,gradingPeriods:R}){const[v,B]=p.useState(""),[m,F]=p.useState(""),[o,G]=p.useState(""),[t,I]=p.useState(""),U=s=>s.is_approved?e.jsx(c,{variant:"default",className:"bg-green-100 text-green-800",children:"Approved"}):s.is_returned?e.jsx(c,{variant:"destructive",children:"Returned"}):s.is_submitted_for_validation?e.jsx(c,{variant:"secondary",children:"Pending"}):e.jsx(c,{variant:"outline",children:"Draft"}),z=s=>s.is_approved?e.jsx(T,{className:"h-4 w-4 text-green-600"}):s.is_returned?e.jsx(K,{className:"h-4 w-4 text-red-600"}):s.is_submitted_for_validation?e.jsx(L,{className:"h-4 w-4 text-yellow-600"}):e.jsx(L,{className:"h-4 w-4 text-gray-400"}),f=d.data.filter(s=>{var i,n,l,_;const r=(((i=s.student)==null?void 0:i.name)||"").toLowerCase().includes(v.toLowerCase())||(((n=s.subject)==null?void 0:n.name)||"").toLowerCase().includes(v.toLowerCase()),x=!m||m==="all"||((l=s.academicLevel)==null?void 0:l.id.toString())===m,h=!o||o==="all"||((_=s.gradingPeriod)==null?void 0:_.id.toString())===o,u=!t||t==="all"||t==="approved"&&s.is_approved||t==="pending"&&s.is_submitted_for_validation&&!s.is_approved&&!s.is_returned||t==="returned"&&s.is_returned;return r&&x&&h&&u});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(V,{user:y}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(D,{user:y}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Grade Management"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Review and manage grade submissions across all departments."})]}),e.jsxs(w,{children:[e.jsx(C,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(A,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(H,{placeholder:"Search students or subjects...",value:v,onChange:s=>B(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Academic Level"}),e.jsxs(N,{value:m,onValueChange:F,children:[e.jsx(g,{children:e.jsx(S,{placeholder:"All levels"})}),e.jsxs(b,{children:[e.jsx(a,{value:"all",children:"All levels"}),P.map(s=>e.jsx(a,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Grading Period"}),e.jsxs(N,{value:o,onValueChange:G,children:[e.jsx(g,{children:e.jsx(S,{placeholder:"All periods"})}),e.jsxs(b,{children:[e.jsx(a,{value:"all",children:"All periods"}),R.map(s=>e.jsx(a,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(N,{value:t,onValueChange:I,children:[e.jsx(g,{children:e.jsx(S,{placeholder:"All statuses"})}),e.jsxs(b,{children:[e.jsx(a,{value:"all",children:"All statuses"}),e.jsx(a,{value:"pending",children:"Pending"}),e.jsx(a,{value:"approved",children:"Approved"}),e.jsx(a,{value:"returned",children:"Returned"})]})]})]})]})})]}),e.jsxs(w,{children:[e.jsx(C,{children:e.jsxs(k,{children:["Grade Submissions (",f.length,")"]})}),e.jsx(A,{children:e.jsxs("div",{className:"space-y-4",children:[f.map(s=>{var r,x,h,u,i,n;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[z(s),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium",children:((r=s.student)==null?void 0:r.name)||"Unknown Student"}),e.jsx(c,{variant:"outline",children:s.grade})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[((x=s.subject)==null?void 0:x.name)||"Unknown Subject"," - ",((u=(h=s.subject)==null?void 0:h.course)==null?void 0:u.name)||"Unknown Course"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((i=s.academicLevel)==null?void 0:i.name)||"Unknown Level"," - ",((n=s.gradingPeriod)==null?void 0:n.name)||"Unknown Period"," - ",s.school_year]}),s.return_reason&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Return reason: ",s.return_reason]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[U(s),e.jsx(E,{href:route("principal.grades.review",s.id),children:e.jsxs(j,{variant:"outline",size:"sm",children:[e.jsx(X,{className:"h-4 w-4 mr-1"}),"Review"]})}),s.is_submitted_for_validation&&!s.is_approved&&!s.is_returned&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("form",{onSubmit:l=>{l.preventDefault()},className:"inline",children:e.jsxs(j,{type:"submit",size:"sm",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),"Approve"]})}),e.jsx("form",{onSubmit:l=>{l.preventDefault()},className:"inline",children:e.jsxs(j,{type:"submit",size:"sm",variant:"destructive",children:[e.jsx(J,{className:"h-4 w-4 mr-1"}),"Return"]})})]})]})]},s.id)}),f.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No grades found matching your criteria."})})]})})]}),d.last_page>1&&e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"flex gap-2",children:Array.from({length:d.last_page},(s,r)=>r+1).map(s=>e.jsx(j,{variant:s===d.current_page?"default":"outline",size:"sm",children:s},s))})})]})})]})]})}export{be as default};
