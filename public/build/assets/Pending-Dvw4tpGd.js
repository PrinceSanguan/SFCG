import{j as e,r as y,m as F,$ as C,C as B}from"./app-DSZQfnm7.js";import{H as E}from"./header-ryT4_DAz.js";import{S as T}from"./sidebar-y04YIo52.js";import{C as _,b as k,c as w,a as R}from"./card-D1gZMjhf.js";import{B as a}from"./button-CZ7Coqpo.js";import{T as D}from"./textarea-CI3B8-q-.js";import{L as H}from"./label-_hDdIkx7.js";import{A as $}from"./arrow-left-Dn73pYAC.js";import{C as X}from"./clock-B9uVYx-A.js";import{E as Y}from"./eye-DHdXREgS.js";import{C as q}from"./circle-x-DvI1kl7w.js";/* empty css            */import"./dropdown-menu-BOr8hag3.js";import"./Combination-BBzj80KB.js";import"./index-BAbkNUiq.js";import"./separator-Bv-_BkiJ.js";import"./user-check-CdRpIeQL.js";import"./graduation-cap-Bpc-uA0i.js";import"./chevron-right-CJSz5GLV.js";import"./book-open--zfXQa9t.js";import"./award-C0D8_z-l.js";import"./chart-no-axes-column-increasing-BTHb3nS_.js";import"./trending-up-Dm-NhMnZ.js";import"./building-2-Hs83XjRV.js";import"./log-out-ac087Ozd.js";function je({user:n,grades:A}){var h,p;if(!n)return e.jsx("div",{children:"Loading..."});const r=A||{data:[],current_page:1,last_page:1,per_page:20,total:0},[t,i]=y.useState(null),[G,d]=y.useState(!1),{data:c,setData:o,post:m,processing:l,errors:x}=F({return_reason:""}),S=s=>{m(route("chairperson.grades.approve",s))},P=s=>{c.return_reason.trim()&&(m(route("chairperson.grades.return",s)),d(!1),i(null),o("return_reason",""))},L=s=>{i(s),d(!0)},z=()=>{d(!1),i(null),o("return_reason","")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(T,{user:n}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(E,{user:n}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a,{asChild:!0,variant:"outline",size:"sm",children:e.jsxs(C,{href:route("chairperson.grades.index"),children:[e.jsx($,{className:"h-4 w-4"}),"Back to Grades"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Pending Grades"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Review and approve grades submitted for validation"})]})]}),e.jsxs(_,{children:[e.jsx(k,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),"Summary"]})}),e.jsx(R,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Pending"}),e.jsx("p",{className:"text-2xl font-bold",children:r.total})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Current Page"}),e.jsxs("p",{className:"text-2xl font-bold",children:[r.current_page," of ",r.last_page]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Grades per Page"}),e.jsx("p",{className:"text-2xl font-bold",children:r.per_page})]})]})})]}),e.jsxs(_,{children:[e.jsx(k,{children:e.jsx(w,{children:"Grades Pending Approval"})}),e.jsx(R,{children:r.data.length===0?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No pending grades found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Student"}),e.jsx("th",{className:"text-left p-2",children:"Subject"}),e.jsx("th",{className:"text-left p-2",children:"Grade"}),e.jsx("th",{className:"text-left p-2",children:"Academic Level"}),e.jsx("th",{className:"text-left p-2",children:"Grading Period"}),e.jsx("th",{className:"text-left p-2",children:"School Year"}),e.jsx("th",{className:"text-left p-2",children:"Submitted"}),e.jsx("th",{className:"text-left p-2",children:"Actions"})]})}),e.jsx("tbody",{children:r.data.map(s=>{var j,u,g,f,N,v,b;return e.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"p-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:((j=s.student)==null?void 0:j.name)||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:((u=s.student)==null?void 0:u.student_number)||"N/A"})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:((g=s.subject)==null?void 0:g.name)||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:((N=(f=s.subject)==null?void 0:f.course)==null?void 0:N.name)||"N/A"})]})}),e.jsx("td",{className:"p-2 font-medium",children:s.grade}),e.jsx("td",{className:"p-2",children:((v=s.academicLevel)==null?void 0:v.name)||"N/A"}),e.jsx("td",{className:"p-2",children:((b=s.gradingPeriod)==null?void 0:b.name)||"N/A"}),e.jsx("td",{className:"p-2",children:s.school_year}),e.jsx("td",{className:"p-2",children:s.submitted_at?e.jsx("span",{className:"text-sm text-gray-500",children:new Date(s.submitted_at).toLocaleDateString()}):e.jsx("span",{className:"text-sm text-gray-400",children:"Not specified"})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(C,{href:route("chairperson.grades.review",s.id),children:e.jsx(Y,{className:"h-4 w-4"})})}),e.jsx(a,{size:"sm",onClick:()=>S(s.id),disabled:l,className:"bg-green-600 hover:bg-green-700",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx(a,{size:"sm",variant:"destructive",onClick:()=>L(s),disabled:l,children:e.jsx(q,{className:"h-4 w-4"})})]})})]},s.id)})})]})})})]})]})})]}),G&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Return Grade for Correction"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Returning grade for ",e.jsx("strong",{children:(h=t.student)==null?void 0:h.name})," in ",e.jsx("strong",{children:(p=t.subject)==null?void 0:p.name})]}),e.jsx(H,{htmlFor:"return_reason",children:"Reason for Return"}),e.jsx(D,{id:"return_reason",value:c.return_reason,onChange:s=>o("return_reason",s.target.value),placeholder:"Please provide a reason for returning this grade...",className:"mt-2",rows:4}),x.return_reason&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:x.return_reason})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(a,{variant:"outline",onClick:z,children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:()=>P(t.id),disabled:l||!c.return_reason.trim(),children:l?"Returning...":"Return Grade"})]})]})})]})}export{je as default};
