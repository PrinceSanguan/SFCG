import{m as G,j as e,$ as k}from"./app-d2xK5LGM.js";import{C as A,b as U,c as E,a as H}from"./card-BB1e4f3_.js";import{B as g}from"./button-Dj6p6Bgx.js";import{I as F}from"./input--ucnFqkV.js";import{L as C}from"./label-B_9Z86P9.js";import{S as D,a as I,b as P,c as B,d as o}from"./select-DxM_dQPm.js";import{S as O,H as q}from"./sidebar-BryQfP-t.js";import{A as K}from"./arrow-left-CYnYwbiq.js";import{S as T}from"./square-pen-BLq3bVki.js";import{S as V}from"./save-DU9EfBlT.js";/* empty css            */import"./index-TQ_oKcvR.js";import"./Combination-kchpgGg8.js";import"./index-B10hNrQW.js";import"./index-DDxUrH4u.js";import"./check-CLQ7eMI4.js";import"./dropdown-menu-DjgZvVV1.js";import"./user-DlxVy8ml.js";import"./log-out-Co0_-83j.js";import"./book-open-B1wH__bo.js";import"./graduation-cap-BdPMeDGn.js";import"./upload-jguwqVMR.js";import"./crown-ojof19ni.js";function ge({user:u,grade:s,gradingPeriods:x}){var f,v,b,N,y,S,_;const{data:h,setData:p,put:L,processing:j,errors:d}=G({grade:s.grade.toString(),grading_period_id:((f=s.grading_period_id)==null?void 0:f.toString())||"0"}),i=()=>{var c,a,l,n,t;if(console.log("Academic Level Data:",s.academicLevel),console.log("Academic Level Key:",(c=s.academicLevel)==null?void 0:c.key),console.log("Academic Level Name:",(a=s.academicLevel)==null?void 0:a.name),console.log("Subject Course:",(l=s.subject)==null?void 0:l.course),console.log("Full Grade Object:",s),(n=s.academicLevel)!=null&&n.key){const m=s.academicLevel.key==="college";return console.log("Using direct academic level, Is College:",m),m?"college":s.academicLevel.key}if((t=s.subject)!=null&&t.course)return console.log("Using course fallback, assuming college level"),"college";const r=parseFloat(s.grade);return r>=1&&r<=5?(console.log("Using grade value fallback, assuming college level (1-5 scale)"),"college"):(console.log("Using default fallback: elementary"),"elementary")},w=r=>{r.preventDefault(),L(route("instructor.grades.update",s.id),{onSuccess:()=>{console.log("Grade updated successfully")},onError:c=>{console.log("Grade update failed:",c)}})};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(O,{user:u}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(q,{user:u}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(k,{href:route("instructor.grades.show-student",[s.student_id,s.subject_id]),children:e.jsxs(g,{variant:"outline",size:"sm",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Back to Student"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Edit Grade"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Update the grade for ",s.student.name," in ",s.subject.name]})]})]})}),e.jsxs(A,{className:"max-w-2xl",children:[e.jsx(U,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Grade Information"]})}),e.jsxs(H,{children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Current Grade Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Student:"}),e.jsx("p",{className:"font-medium",children:((v=s.student)==null?void 0:v.name)||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Subject:"}),e.jsxs("p",{className:"font-medium",children:[((b=s.subject)==null?void 0:b.name)||"Unknown"," (",((N=s.subject)==null?void 0:N.code)||"N/A",")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Academic Level:"}),e.jsx("p",{className:"font-medium",children:((y=s.academicLevel)==null?void 0:y.name)||"Unknown"}),!((S=s.academicLevel)!=null&&S.name)&&e.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:["Detected: ",i()==="college"?"College (5-1 scale)":"Elementary/Senior High (75-100 scale)"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"School Year:"}),e.jsx("p",{className:"font-medium",children:s.school_year||"N/A"})]}),((_=s.subject)==null?void 0:_.course)&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Course:"}),e.jsxs("p",{className:"font-medium",children:[s.subject.course.name," (",s.subject.course.code,")"]})]})]})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(C,{htmlFor:"grade",children:"Grade"}),e.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded text-sm",children:[e.jsx("p",{className:"font-medium text-blue-800",children:i()==="college"?"ðŸŽ“ College Grading Scale (5-1)":"ðŸ« Elementary/Senior High Scale (75-100)"}),e.jsx("p",{className:"text-blue-600",children:i()==="college"?"1.0 = Highest, 5.0 = Lowest, 3.0 = Passing":"75 = Passing, 100 = Highest"})]}),e.jsx(F,{id:"grade",type:"number",step:i()==="college"?"0.1":"0.01",min:i()==="college"?"1.0":"75",max:i()==="college"?"5.0":"100",placeholder:i()==="college"?"Enter grade (1.0-5.0)":"Enter grade (75-100)",value:h.grade,onChange:r=>p("grade",r.target.value),className:d.grade?"border-red-500":"",autoFocus:!0}),d.grade&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.grade}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i()==="college"?"College: 1.0 (highest) to 5.0 (lowest). 3.0 is passing (equivalent to 75).":"Elementary to Senior High: 75 (passing) to 100 (highest)."})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"grading_period_id",children:"Grading Period"}),e.jsxs(D,{value:h.grading_period_id,onValueChange:r=>p("grading_period_id",r),children:[e.jsx(I,{className:d.grading_period_id?"border-red-500":"",children:e.jsx(P,{placeholder:"Select grading period"})}),e.jsxs(B,{children:[e.jsx(o,{value:"0",children:"No Period"}),x&&x.length>0?(()=>{var c;const r=x.filter(a=>a.academic_level_id===(s.academic_level_id||0));return((c=s.academicLevel)==null?void 0:c.key)==="college"?r.filter(l=>(l.code==="COL_S1"||l.code==="COL_S2")&&!l.code.includes("_")).map(l=>{const n=r.filter(t=>t.code.startsWith(l.code+"_")&&!t.code.includes("_FA")).sort((t,m)=>t.sort_order-m.sort_order);return e.jsxs("div",{children:[e.jsx(o,{value:l.id.toString(),className:"font-semibold",children:l.name}),n.map(t=>e.jsxs(o,{value:t.id.toString(),className:"pl-6 text-sm",children:["â€¢ ",t.name]},t.id))]},l.id)}):r.filter(a=>!a.name.toLowerCase().includes("final average")).sort((a,l)=>a.sort_order-l.sort_order).map(a=>e.jsx(o,{value:a.id.toString(),children:a.name},a.id))})():e.jsx(o,{value:"none",disabled:!0,children:"No grading periods available"})]})]}),d.grading_period_id&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.grading_period_id}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select which grading period this grade belongs to"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs(g,{type:"submit",disabled:j,className:"flex-1",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),j?"Updating...":"Update Grade"]}),e.jsx(k,{href:route("instructor.grades.show-student",[s.student_id,s.subject_id]),className:"flex-1",children:e.jsx(g,{type:"button",variant:"outline",className:"w-full",children:"Cancel"})})]})]})]})]})]})})]})]})}export{ge as default};
