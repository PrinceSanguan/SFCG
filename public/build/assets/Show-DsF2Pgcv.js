import{j as e,$ as y}from"./app-CIgz5fJy.js";import{S as G,H as S}from"./sidebar-BWD2gTp3.js";import{C as m,b as g,c as h,a as o}from"./card-B7WDDNzL.js";import{B as j}from"./button-DkblmdP4.js";import{B as n}from"./badge-BqyPFNfL.js";import{A as C}from"./arrow-left-bluHfsi4.js";import{U as p}from"./user-YrR4dQSE.js";import{M as A}from"./mail-DpYEqroZ.js";import{B as w}from"./book-open-B_bkaJPp.js";import{G as N}from"./graduation-cap-D53UCDJP.js";import{C as v}from"./calendar-Cigv5zDD.js";import{S as _}from"./square-pen-DxNhvNz6.js";import{P as E}from"./plus-CxAwB7Lh.js";/* empty css            */import"./dropdown-menu-DhHxeP21.js";import"./Combination-qI0y9H-S.js";import"./index-CLZOyu6G.js";import"./log-out-C4oi26KL.js";import"./upload-CL8oXsnM.js";import"./crown-C0b0qkwZ.js";function Q({user:b,student:d,subject:c,academicLevel:i,grades:a,gradingPeriods:u}){const s=a.length>0?a[0]:null,k=(r,l)=>l==="college"?r<=1.5?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":r<=2.5?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":r<=3?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":r>=90?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":r>=80?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":r>=75?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",f=(r,l)=>l==="college"?r<=1.5?"Superior":r<=2?"Very Good":r<=2.5?"Good":r<=3?"Satisfactory":"Failing":r>=95?"Outstanding":r>=90?"Very Good":r>=85?"Good":r>=80?"Satisfactory":r>=75?"Fair":"Failing";return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(G,{user:b}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(S,{user:b}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{href:route("teacher.grades.index"),children:e.jsxs(j,{variant:"outline",size:"sm",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Back to Grades"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Student Details"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["View and manage grades for ",d.name]})]})]})}),e.jsxs(m,{children:[e.jsx(g,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Personal Information"]})}),e.jsx(o,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx(p,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Name"}),e.jsx("p",{className:"font-medium",children:d.name})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center",children:e.jsx(p,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Student ID"}),e.jsx("p",{className:"font-medium",children:d.student_number||d.id})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:e.jsx(A,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium",children:d.email})]})]})]})})]}),d.parents&&d.parents.length>0&&e.jsxs(m,{children:[e.jsx(g,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Linked Parents"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-3",children:d.parents.map(r=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:r.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.email})]}),e.jsx(n,{variant:"outline",children:r.pivot.relationship_type.charAt(0).toUpperCase()+r.pivot.relationship_type.slice(1)})]}),r.pivot.emergency_contact&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Emergency Contact: ",r.pivot.emergency_contact]}),r.pivot.notes&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Notes: ",r.pivot.notes]})]})},r.id))})})]}),e.jsxs(m,{children:[e.jsx(g,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Subject & Course Information"]})}),e.jsx(o,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center",children:e.jsx(w,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Subject"}),e.jsxs("p",{className:"font-medium",children:[c.name," (",c.code,")"]})]})]}),c.course&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center",children:e.jsx(N,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Course"}),e.jsxs("p",{className:"font-medium",children:[c.course.name," (",c.course.code,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center",children:e.jsx(N,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Academic Level"}),e.jsx("p",{className:"font-medium",children:i.name})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 dark:bg-yellow-900 rounded-full flex items-center justify-center",children:e.jsx(v,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"School Year"}),e.jsx("p",{className:"font-medium",children:(s==null?void 0:s.school_year)||"N/A"})]})]})]})})]}),e.jsxs(m,{children:[e.jsxs(g,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Grading Periods"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Available grading periods for ",i.name]})]}),e.jsx(o,{children:u.length>0?e.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:u.map(r=>e.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:r.name}),e.jsx(n,{variant:"outline",className:"text-xs",children:r.code})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[new Date(r.start_date).toLocaleDateString()," - ",new Date(r.end_date).toLocaleDateString()]}),e.jsx("div",{className:"mt-2",children:e.jsx(n,{className:r.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",children:r.is_active?"Active":"Inactive"})})]},r.id))}):e.jsx("div",{className:"text-center py-4",children:e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["No grading periods configured for ",i.name]})})})]}),e.jsxs(m,{children:[e.jsx(g,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Current Grade Summary"]})}),e.jsx(o,{children:s?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Latest Grade"}),e.jsx(n,{className:`text-2xl px-6 py-3 ${k(s.grade,i.key)}`,children:s.grade})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Status"}),e.jsx("p",{className:`text-lg font-medium ${["Superior","Very Good","Good","Satisfactory","Fair","Outstanding"].includes(f(s.grade,i.key))?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:f(s.grade,i.key)})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Last Updated"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:new Date(s.updated_at).toLocaleDateString()})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(N,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No Grade Yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"This student hasn't received a grade for this subject yet."})]})})]}),a.length>0&&e.jsxs(m,{children:[e.jsx(g,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Grade History"]})}),e.jsx(o,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800 text-white",children:[e.jsx("th",{className:"text-left p-3 font-medium border-r border-gray-700",children:"Student ID"}),e.jsx("th",{className:"text-left p-3 font-medium border-r border-gray-700",children:"Subject"}),e.jsx("th",{className:"text-left p-3 font-medium border-r border-gray-700",children:"Faculty"}),u.filter(r=>!r.name.toLowerCase().includes("final average")&&!r.code.includes("FA")).map(r=>e.jsx("th",{className:"text-left p-3 font-medium border-r border-gray-700",children:r.name},r.id)),e.jsx("th",{className:"text-left p-3 font-medium border-r border-gray-700",children:"AVERAGE"}),e.jsx("th",{className:"text-left p-3 font-medium border-r border-gray-700",children:"Grade Status"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"border-b bg-gray-100 dark:bg-gray-800",children:[e.jsx("td",{className:"p-3 border-r border-gray-200 dark:border-gray-600 font-medium",children:d.student_number||d.id}),e.jsx("td",{className:"p-3 border-r border-gray-200 dark:border-gray-600",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:c.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.code})]})}),e.jsx("td",{className:"p-3 border-r border-gray-200 dark:border-gray-600",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.name})}),u.filter(r=>!r.name.toLowerCase().includes("final average")&&!r.code.includes("FA")).map(r=>{const l=a.find(x=>!!(x.gradingPeriod&&x.gradingPeriod.id===r.id||x.grading_period_id===r.id)),t=l?l.grade:null;return e.jsx("td",{className:"p-3 border-r border-gray-200 dark:border-gray-600 text-center",children:t?e.jsx(n,{className:k(t,i.key),children:t}):e.jsx("span",{className:"text-gray-400",children:"-"})},r.id)}),e.jsx("td",{className:"p-3 border-r border-gray-200 dark:border-gray-600 text-center",children:(()=>{const r=a.map(t=>t.grade).filter(t=>t!==null),l=r.length>0?r.reduce((t,x)=>t+x,0)/r.length:0;return l>0?e.jsx(n,{className:`text-lg px-3 py-1 ${k(l,i.key)}`,children:l.toFixed(1)}):e.jsx("span",{className:"text-gray-400",children:"-"})})()}),e.jsx("td",{className:"p-3 border-r border-gray-200 dark:border-gray-600 text-center",children:(()=>{const r=a.map(t=>t.grade).filter(t=>t!==null),l=r.length>0?r.reduce((t,x)=>t+x,0)/r.length:0;return l>0?e.jsx("span",{className:`text-sm font-medium ${["Superior","Very Good","Good","Satisfactory","Fair","Outstanding"].includes(f(l,i.key))?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:f(l,i.key)}):e.jsx("span",{className:"text-gray-400",children:"No Grade"})})()}),e.jsx("td",{className:"p-3 border-r border-gray-200 dark:border-gray-600 text-center",children:e.jsxs("div",{className:"flex justify-center gap-2 items-center",children:[a.length>0&&a[0].is_editable&&a[0].days_remaining!==void 0&&a[0].days_remaining<3&&e.jsxs(n,{variant:"secondary",className:"text-xs",children:[a[0].days_remaining," ",a[0].days_remaining===1?"day":"days"," left"]}),a.length>0&&a[0].is_editable&&e.jsx(y,{href:route("teacher.grades.edit",a[0].id),children:e.jsxs(j,{size:"sm",variant:"outline",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Edit"]})}),a.length>0&&!a[0].is_editable&&e.jsx(n,{variant:"outline",className:"text-xs",children:a[0].edit_status==="locked"?"🔒 Locked":"⏰ Expired"})]})})]})})]})})})]}),e.jsx(m,{children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-4 flex-col sm:flex-row",children:[e.jsx(y,{href:route("teacher.grades.create"),className:"flex-1",children:e.jsxs(j,{className:"w-full",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Input New Grade"]})}),s&&s.is_editable&&e.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[e.jsx(y,{href:route("teacher.grades.edit",s.id),className:"w-full",children:e.jsxs(j,{variant:"outline",className:"w-full",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Edit Current Grade"]})}),s.days_remaining!==void 0&&s.days_remaining<3&&e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:["⏰ Editable for ",s.days_remaining," more ",s.days_remaining===1?"day":"days"]})]}),s&&!s.is_editable&&e.jsxs("div",{className:"flex-1",children:[e.jsx(j,{variant:"outline",className:"w-full",disabled:!0,children:s.edit_status==="locked"?"🔒 Grade Locked":"⏰ Edit Window Expired"}),e.jsx("p",{className:"text-xs text-center text-muted-foreground mt-2",children:s.edit_status==="locked"?"Grade submitted for validation":"5-day edit period has ended"})]})]})})})]})})]})]})}export{Q as default};
