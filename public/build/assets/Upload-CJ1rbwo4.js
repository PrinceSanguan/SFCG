import{m as C,j as e,$ as N}from"./app-CwAilDmJ.js";import{S as w,H as D}from"./sidebar-CG9nXZ_o.js";import{C as V,b as U,c as k,a as F}from"./card-CwQ73FwS.js";import{B as u}from"./button-2LR9sYmP.js";import{I as _}from"./input-ChjALQnL.js";import{L as d}from"./label-CkQzTmfn.js";import{S as n,a as m,b as x,c as h,d as c}from"./select-Dh_MkD5o.js";import{U as G}from"./upload-BJRLRGIF.js";import{D as H}from"./download-C3ltAYTf.js";/* empty css            */import"./dropdown-menu-Cfl7VJny.js";import"./Combination-DwvEvkyY.js";import"./index-DrYiIGug.js";import"./book-open-CwKKKHEz.js";import"./graduation-cap-CZDr064K.js";import"./crown-BKqZHP4v.js";import"./user-Bk_bOO8x.js";import"./index-Dj_9XwOn.js";import"./index-CrRZT9YY.js";import"./check-BZ3IzoXY.js";function ee({user:j,assignedSubjects:f,academicLevels:p,gradingPeriods:v,schoolYear:b}){const{data:a,setData:l,post:S,processing:g,errors:r}=C({csv_file:null,subject_id:"",academic_level_id:"",grading_period_id:"0",school_year:b||"2024-2025",year_of_study:""}),y=s=>{s.preventDefault();const i=new FormData;Object.entries(a).forEach(([t,o])=>i.append(t,o)),S(route("adviser.grades.upload.process"),{forceFormData:!0})};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(w,{user:j}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(D,{user:j}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs(V,{children:[e.jsx(U,{children:e.jsx(k,{children:"Upload Grades CSV"})}),e.jsx(F,{children:e.jsxs("form",{onSubmit:y,className:"space-y-4 max-w-2xl",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Subject"}),e.jsxs(n,{value:a.subject_id,onValueChange:s=>l("subject_id",s),children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select subject"})}),e.jsx(h,{children:f.map(s=>e.jsx(c,{value:s.subject.id.toString(),children:s.subject.name},s.subject.id))})]}),r.subject_id&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.subject_id})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Academic Level"}),e.jsxs(n,{value:a.academic_level_id,onValueChange:s=>l({...a,academic_level_id:s,grading_period_id:"0"}),children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select academic level"})}),e.jsx(h,{children:p.map(s=>e.jsx(c,{value:s.id.toString(),children:s.name},s.id))})]}),r.academic_level_id&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.academic_level_id})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Grading Period"}),e.jsxs(n,{value:a.grading_period_id,onValueChange:s=>l("grading_period_id",s),disabled:!a.academic_level_id,children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select grading period (optional)"})}),e.jsxs(h,{children:[e.jsx(c,{value:"0",children:"No Period"}),a.academic_level_id&&v.filter(s=>{var t;if(((t=s.academic_level_id)==null?void 0:t.toString())!==a.academic_level_id)return!1;const i=p.find(o=>o.id.toString()===a.academic_level_id);return(i==null?void 0:i.key)==="senior_highschool"||(i==null?void 0:i.key)==="college"?!s.parent_id:!0}).map(s=>e.jsx(c,{value:s.id.toString(),children:s.name},s.id))]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(d,{children:"School Year"}),e.jsx(_,{value:a.school_year,onChange:s=>l("school_year",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{children:"CSV File"}),e.jsx(_,{type:"file",accept:".csv,text/csv",onChange:s=>l("csv_file",s.target.files?s.target.files[0]:null)}),r.csv_file&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.csv_file})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(u,{type:"submit",disabled:g,className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),g?"Uploading...":"Upload CSV"]}),e.jsx(N,{href:route("adviser.grades.template"),children:e.jsxs(u,{type:"button",variant:"outline",className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"Download Template"]})})]})]})})]})})]})]})}export{ee as default};
