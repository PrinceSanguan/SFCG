import{r as v,K as oe,m as T,j as e,$ as me}from"./app-BLpCIPlm.js";import{H as he}from"./header-BuIc8gQy.js";import{S as xe}from"./sidebar-CQ8UZFEv.js";import{C as j,a as f,b as R,c as P}from"./card-DOxVrz_X.js";import{B as D}from"./button-DhX-RdVG.js";import{L as n}from"./label-Cg3Aq2JO.js";import{S as o,a as m,b as h,c as x,d as t}from"./select-75WNd_R_.js";import{T as pe,a as je,b as B,c as O}from"./tabs-VWIw6Bth.js";import{C as I}from"./checkbox-w86TwCfa.js";import{U as K}from"./users-qWO7L20t.js";import{F as V}from"./file-text-BD55ZLDz.js";import{A as X}from"./award-D9ma3Qlu.js";import{C as fe}from"./calendar-CAMRbaJz.js";import{G as Z}from"./graduation-cap-5XyuasFs.js";import{T as ue}from"./trending-up-BE1bfMt_.js";import{F as z,a as L,A as J}from"./file-x-CRw7AJsT.js";import{D as Q}from"./download-Ccx4X-PQ.js";/* empty css            */import"./dropdown-menu-DarAmEMq.js";import"./Combination-G1g2XF09.js";import"./index-DSzTBsdo.js";import"./separator-DtNW8rAR.js";import"./chevron-right-DoYhJIcy.js";import"./crown-CpZyhGhW.js";import"./building-2--UJSzHQU.js";import"./user-cog-ByhxBAN_.js";import"./book-open-B_S6VV71.js";import"./user-check-B42cJFt8.js";import"./notebook-D_BMfuU0.js";import"./chart-no-axes-column-increasing-DzWgLAxz.js";import"./shield-dwUN9X4h.js";import"./index-5vTJNLpr.js";import"./index-2Dy34izM.js";import"./check-Cyn5T6SC.js";function rs({user:M,academicLevels:k,schoolYears:u,currentSchoolYear:E,gradingPeriods:G,honorTypes:Y,sections:W,stats:S}){var $;const[ee,se]=v.useState("honor-statistics"),[w,_]=v.useState(!1),[H,ge]=v.useState(""),[ve,q]=v.useState([]),[ae,U]=v.useState([]),{props:le}=oe(),N=le.csrf_token||(($=document.querySelector('meta[name="csrf-token"]'))==null?void 0:$.content)||"",{data:g,setData:_e,post:Ne,processing:ye}=T({academic_level_id:"all",semester_id:"",grading_period_id:"all",school_year:E||u[0]||"",format:"pdf",include_statistics:!0}),{data:b,setData:F,post:Ce,processing:te}=T({academic_level_id:"all",school_year:E||u[0]||"",honor_type_id:"all",format:"pdf"}),{data:p,setData:y,post:Se,processing:ie}=T({academic_level_id:"",school_year:E||u[0]||"",include_grades:!0,include_honors:!0,include_certificates:!0,format:"excel"}),{data:d,setData:C,post:we,processing:ce}=T({academic_level_id:"",section_id:"all",school_year:E||u[0]||"",include_grades:!1,format:"pdf"});v.useEffect(()=>{if(g.academic_level_id&&g.academic_level_id!=="all"){const s=parseInt(g.academic_level_id);let l=G.filter(a=>a.academic_level_id===s);if(H){const a=parseInt(H);l=l.filter(i=>i.id===a||i.parent_id===a)}q(l)}else q([])},[g.academic_level_id,H,G]),v.useEffect(()=>{if(d.academic_level_id){const s=parseInt(d.academic_level_id),l=W.filter(a=>a.academic_level_id===s);U(l)}else U([])},[d.academic_level_id,W]);const re=s=>{if(s.preventDefault(),!N){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}_(!0);let l=document.getElementById("download-iframe");l||(l=document.createElement("iframe"),l.id="download-iframe",l.style.display="none",document.body.appendChild(l));const a=document.createElement("form");a.method="POST",a.action=route("admin.reports.honor-statistics"),a.target="download-iframe";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=N,a.appendChild(i),Object.entries(b).forEach(([A,c])=>{const r=document.createElement("input");r.type="hidden",r.name=A,typeof c=="boolean"?r.value=c?"1":"0":r.value=(c==null?void 0:c.toString())||"",a.appendChild(r)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>_(!1),2e3)},ne=s=>{if(s.preventDefault(),!N){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}_(!0);let l=document.getElementById("download-iframe");l||(l=document.createElement("iframe"),l.id="download-iframe",l.style.display="none",document.body.appendChild(l));const a=document.createElement("form");a.method="POST",a.action=route("admin.reports.archive-records"),a.target="download-iframe";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=N,a.appendChild(i),Object.entries(p).forEach(([A,c])=>{const r=document.createElement("input");r.type="hidden",r.name=A,typeof c=="boolean"?r.value=c?"1":"0":r.value=(c==null?void 0:c.toString())||"",a.appendChild(r)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>_(!1),2e3)},de=s=>{if(s.preventDefault(),!N){console.error("CSRF token not found"),alert("Session expired. Please refresh the page and try again.");return}_(!0);let l=document.getElementById("download-iframe");l||(l=document.createElement("iframe"),l.id="download-iframe",l.style.display="none",document.body.appendChild(l));const a=document.createElement("form");a.method="POST",a.action=route("admin.reports.class-section-report"),a.target="download-iframe";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=N,a.appendChild(i),Object.entries(d).forEach(([A,c])=>{const r=document.createElement("input");r.type="hidden",r.name=A,typeof c=="boolean"?r.value=c?"1":"0":r.value=(c==null?void 0:c.toString())||"",a.appendChild(r)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>_(!1),2e3)};return(()=>{if(g.academic_level_id&&g.academic_level_id!=="all"){const s=parseInt(g.academic_level_id),l=k.find(a=>a.id===s);if(l&&(l.key==="college"||l.key==="senior_highschool"))return G.filter(a=>a.academic_level_id===s&&a.parent_id===null&&a.type==="semester")}return[]})(),e.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(xe,{user:M}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(he,{user:M}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 min-h-0",children:e.jsxs("div",{className:"flex flex-col gap-6 pb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Reports & Archiving"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Generate comprehensive reports and archive academic records."})]}),e.jsx(me,{href:route("admin.dashboard"),children:e.jsx(D,{variant:"outline",children:"Back to Dashboard"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(j,{children:e.jsxs(f,{className:"flex items-center p-6",children:[e.jsx(K,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.total_students})]})]})}),e.jsx(j,{children:e.jsxs(f,{className:"flex items-center p-6",children:[e.jsx(V,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Certificates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.total_certificates})]})]})}),e.jsx(j,{children:e.jsxs(f,{className:"flex items-center p-6",children:[e.jsx(X,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Honor Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.total_honors})]})]})}),e.jsx(j,{children:e.jsxs(f,{className:"flex items-center p-6",children:[e.jsx(fe,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Periods"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.active_periods})]})]})}),e.jsx(j,{children:e.jsxs(f,{className:"flex items-center p-6",children:[e.jsx(Z,{className:"h-8 w-8 text-indigo-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Sections"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.active_sections})]})]})})]}),e.jsxs(pe,{value:ee,onValueChange:se,className:"w-full",children:[e.jsxs(je,{className:"grid w-full grid-cols-3",children:[e.jsx(B,{value:"honor-statistics",children:"Honor Statistics"}),e.jsx(B,{value:"archive-records",children:"Archive Records"}),e.jsx(B,{value:"class-section-reports",children:"Class Section Reports"})]}),e.jsx(O,{value:"honor-statistics",className:"space-y-6",children:e.jsxs(j,{children:[e.jsxs(R,{children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),"Generate Honor Statistics"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate comprehensive honor roll statistics and distribution analysis."})]}),e.jsx(f,{children:e.jsxs("form",{onSubmit:re,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Academic Level"}),e.jsxs(o,{value:b.academic_level_id,onValueChange:s=>F("academic_level_id",s),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"All levels"})}),e.jsxs(x,{children:[e.jsx(t,{value:"all",children:"All Levels"}),k.map(s=>e.jsx(t,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Honor Type"}),e.jsxs(o,{value:b.honor_type_id,onValueChange:s=>F("honor_type_id",s),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"All types"})}),e.jsxs(x,{children:[e.jsx(t,{value:"all",children:"All Types"}),Y.map(s=>e.jsx(t,{value:s.id.toString(),children:s.name},s.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"School Year"}),e.jsxs(o,{value:b.school_year,onValueChange:s=>F("school_year",s),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select year"})}),e.jsx(x,{children:u.map(s=>e.jsx(t,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Export Format"}),e.jsxs(o,{value:b.format,onValueChange:s=>F("format",s),children:[e.jsx(m,{children:e.jsx(h,{})}),e.jsxs(x,{children:[e.jsx(t,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"PDF Report"]})}),e.jsx(t,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Excel Spreadsheet"]})}),e.jsx(t,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"CSV File"]})})]})]})]})]}),e.jsx(D,{type:"submit",disabled:te||w,className:"flex items-center gap-2",children:w?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"h-4 w-4"}),"Generate Honor Statistics"]})})]})})]})}),e.jsx(O,{value:"archive-records",className:"space-y-6",children:e.jsxs(j,{children:[e.jsxs(R,{children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Archive Academic Records"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create comprehensive archives of academic records for specific levels and years."})]}),e.jsx(f,{children:e.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Academic Level *"}),e.jsxs(o,{value:p.academic_level_id,onValueChange:s=>y("academic_level_id",s),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select level"})}),e.jsx(x,{children:k.map(s=>e.jsx(t,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Academic level is required for archiving"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"School Year *"}),e.jsxs(o,{value:p.school_year,onValueChange:s=>y("school_year",s),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select year"})}),e.jsx(x,{children:u.map(s=>e.jsx(t,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Include in Archive"}),e.jsxs("div",{className:"space-y-3 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{id:"include_grades",checked:p.include_grades,onCheckedChange:s=>y("include_grades",s===!0)}),e.jsxs(n,{htmlFor:"include_grades",className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Student grades and academic records"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{id:"include_honors",checked:p.include_honors,onCheckedChange:s=>y("include_honors",s===!0)}),e.jsxs(n,{htmlFor:"include_honors",className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"Honor roll and academic achievements"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{id:"include_certificates",checked:p.include_certificates,onCheckedChange:s=>y("include_certificates",s===!0)}),e.jsxs(n,{htmlFor:"include_certificates",className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Certificates and recognitions"]})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Export Format"}),e.jsxs(o,{value:p.format,onValueChange:s=>y("format",s),children:[e.jsx(m,{children:e.jsx(h,{})}),e.jsxs(x,{children:[e.jsx(t,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Excel Workbook (Multiple Sheets)"]})}),e.jsx(t,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"CSV Files (Zip Archive)"]})})]})]})]}),e.jsxs(D,{type:"submit",disabled:ie||!p.academic_level_id||!p.school_year,className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),w?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Archive..."]}):"Create Academic Archive"]})]})})]})}),e.jsx(O,{value:"class-section-reports",className:"space-y-6",children:e.jsxs(j,{children:[e.jsxs(R,{children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Generate Class Section Reports"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate comprehensive class section rosters and student lists by academic level."})]}),e.jsx(f,{children:e.jsxs("form",{onSubmit:de,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Academic Level *"}),e.jsxs(o,{value:d.academic_level_id,onValueChange:s=>{C("academic_level_id",s),C("section_id","all")},children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select level"})}),e.jsx(x,{children:k.map(s=>e.jsx(t,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Academic level is required for class section reports"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Section"}),e.jsxs(o,{value:d.section_id,onValueChange:s=>C("section_id",s),disabled:!d.academic_level_id,children:[e.jsx(m,{children:e.jsx(h,{placeholder:d.academic_level_id?"All sections":"Select level first"})}),e.jsxs(x,{children:[e.jsx(t,{value:"all",children:"All Sections"}),ae.map(s=>e.jsxs(t,{value:s.id.toString(),children:[s.name," ",s.specific_year_level?`(${s.specific_year_level})`:""]},s.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to generate for all sections"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"School Year *"}),e.jsxs(o,{value:d.school_year,onValueChange:s=>C("school_year",s),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select year"})}),e.jsx(x,{children:u.map(s=>e.jsx(t,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Export Format"}),e.jsxs(o,{value:d.format,onValueChange:s=>C("format",s),children:[e.jsx(m,{children:e.jsx(h,{})}),e.jsxs(x,{children:[e.jsx(t,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"PDF Report"]})}),e.jsx(t,{value:"excel",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Excel Spreadsheet"]})}),e.jsx(t,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"CSV File"]})})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{id:"include_grades_section",checked:d.include_grades,onCheckedChange:s=>C("include_grades",s===!0)}),e.jsx(n,{htmlFor:"include_grades_section",children:"Include student average grades in the report"})]}),e.jsx(D,{type:"submit",disabled:ce||!d.academic_level_id||!d.school_year||w,className:"flex items-center gap-2",children:w?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"h-4 w-4"}),"Generate Class Section Report"]})})]})})]})})]})]})})]})]})}export{rs as default};
