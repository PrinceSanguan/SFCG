import{r as k,u as we,m as fe,j as e,C as Ce,S as Se}from"./app--A-y9q65.js";import{H as Fe}from"./header-DZdOTT0o.js";import{S as ke}from"./sidebar-BRZYrMR5.js";import{C as w,b as f,c as C,a as S}from"./card-CvNO9Ryi.js";import{B as m}from"./button-DOdKBTvJ.js";import{I as x}from"./input-C_-K-XLv.js";import{L as i}from"./label-BnJHDeVI.js";import{S as A,a as P,b as M,c as T,d as p}from"./select-C1FMaDiO.js";import{C as ce}from"./checkbox-CgqoA3nP.js";import{B as o}from"./badge-D7xmFNOP.js";import{A as Ae,a as Pe}from"./alert-CiOWWSlb.js";import{A as Me}from"./arrow-left-CvGp-wgz.js";import{P as Te}from"./plus-xLrf0oHz.js";import{T as $}from"./trophy-DHJDWtIY.js";import{U as $e}from"./upload-D0aiu3_-.js";/* empty css            */import"./dropdown-menu-C9sZscwq.js";import"./Combination-CduV8oXx.js";import"./index-0H-QO1X-.js";import"./separator-B116m-ZL.js";import"./users-CHWH5f1q.js";import"./chevron-right-h4DD-zrK.js";import"./crown-i2gb9RIz.js";import"./building-2-DwSqpj7C.js";import"./user-cog-bOaFb_BQ.js";import"./book-open-B594akuN.js";import"./user-check-DmNsF4-5.js";import"./graduation-cap-BfjxIAFA.js";import"./notebook-DuiV25aL.js";import"./chart-no-axes-column-increasing-lgG4rN-Y.js";import"./shield-lDetVDcT.js";import"./index-wZQYgDRC.js";import"./index-BJ5KUWbH.js";import"./check-BZPzWBXw.js";function gs({user:K,honorTypes:Q,criteria:z,schoolYears:H,qualifiedStudents:y=[],honorResults:oe=[],currentSchoolYear:R="2024-2025",gradeLevels:h={},departments:E=[],courses:G=[],sections:U=[],filters:a}){var L,D,ee,se,re,ae,le,ne,de,te,ie;const[B,F]=k.useState(null),[l,X]=k.useState(null),[me,J]=k.useState(!1),[V,O]=k.useState(null),[d,_]=k.useState({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),[xe,q]=k.useState(!1),{addToast:I}=we(),{data:j,setData:u,post:he,processing:ge,errors:W,reset:pe}=fe({academic_level_id:"4",honor_type_id:"",school_year:"2024-2025",min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),_e=s=>{s.preventDefault(),he("/admin/academic/honors/criteria",{onSuccess:()=>{F({type:"success",text:"Criteria saved successfully!"}),pe(),q(!1),window.location.reload()},onError:()=>F({type:"error",text:"Failed to save criteria."})})},je=s=>{var r,n,c,g,t,v;O(s),_({min_gpa:((r=s.min_gpa)==null?void 0:r.toString())||"",max_gpa:((n=s.max_gpa)==null?void 0:n.toString())||"",min_grade:((c=s.min_grade)==null?void 0:c.toString())||"",min_grade_all:((g=s.min_grade_all)==null?void 0:g.toString())||"",min_year:((t=s.min_year)==null?void 0:t.toString())||"",max_year:((v=s.max_year)==null?void 0:v.toString())||"",require_consistent_honor:s.require_consistent_honor})},ue=()=>{O(null),_({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1})},Z=s=>{X(s),J(!0)},ve=s=>{var n;const r={...V,min_gpa:parseFloat(d.min_gpa)||null,max_gpa:parseFloat(d.max_gpa)||null,min_grade:parseFloat(d.min_grade)||null,min_grade_all:parseFloat(d.min_grade_all)||null,min_year:parseInt(d.min_year)||null,max_year:parseInt(d.max_year)||null,require_consistent_honor:d.require_consistent_honor};fetch(`/admin/academic/honors/criteria/${s}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""},body:JSON.stringify(r)}).then(c=>{if(!c.ok)throw new Error(`HTTP ${c.status}`);return c.json()}).then(()=>{F({type:"success",text:"Criteria updated successfully!"}),O(null),window.location.reload()}).catch(()=>F({type:"error",text:"Failed to update criteria."}))},ye=s=>{var r;window.confirm("Are you sure you want to delete this criterion?")&&fetch(`/admin/academic/honors/criteria/${s}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""}}).then(n=>{if(!n.ok)throw new Error(`HTTP ${n.status}`);return n.json()}).then(()=>{F({type:"success",text:"Criteria deleted successfully!"}),window.location.reload()}).catch(()=>F({type:"error",text:"Failed to delete criteria."}))};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(ke,{user:K}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(Fe,{user:K}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),"Back"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"College Honor Criteria"})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage honor criteria for College level students."})]})}),B&&e.jsxs(Ae,{className:B.type==="success"?"border-green-500":"border-red-500",children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx(Pe,{children:B.text})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(m,{onClick:()=>q(!0),className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),"Add New Criteria"]})}),xe&&e.jsxs(w,{children:[e.jsx(f,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Add Honor Criteria"]})}),e.jsx(S,{children:e.jsxs("form",{onSubmit:_e,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"honor_type_id",children:"Honor Type"}),Q&&Q.length>0?e.jsxs(A,{value:j.honor_type_id||"",onValueChange:s=>u("honor_type_id",s),children:[e.jsx(P,{children:e.jsx(M,{placeholder:"Select honor"})}),e.jsx(T,{children:Q.filter(s=>s.id&&s.name).map(s=>e.jsx(p,{value:s.id.toString(),children:s.name},s.id))})]}):e.jsx("div",{className:"p-2 text-sm text-gray-500 bg-gray-100 rounded border",children:"Loading honor types..."}),W.honor_type_id&&e.jsx("p",{className:"text-sm text-red-500",children:W.honor_type_id})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"school_year",children:"School Year"}),e.jsxs(A,{value:j.school_year||"",onValueChange:s=>u("school_year",s),children:[e.jsx(P,{children:e.jsx(M,{placeholder:"Select school year"})}),e.jsx(T,{children:(H!=null&&H.length?H:["2024-2025"]).filter(s=>s&&s.trim()!=="").map(s=>e.jsx(p,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"min_gpa",children:"Min GPA (5-1 scale)"}),e.jsx(x,{id:"min_gpa",type:"number",step:"0.1",value:j.min_gpa,onChange:s=>u("min_gpa",s.target.value),placeholder:"e.g., 3.5 (5=lowest, 1=highest)"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"max_gpa",children:"Max GPA (5-1 scale)"}),e.jsx(x,{id:"max_gpa",type:"number",step:"0.1",value:j.max_gpa,onChange:s=>u("max_gpa",s.target.value),placeholder:"e.g., 1.5 (5=lowest, 1=highest)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"min_grade",children:"Min Grade (any) (5-1 scale)"}),e.jsx(x,{id:"min_grade",type:"number",value:j.min_grade,onChange:s=>u("min_grade",s.target.value),placeholder:"e.g., 3 (5=lowest, 1=highest)"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"min_grade_all",children:"Min Grade (all) (5-1 scale)"}),e.jsx(x,{id:"min_grade_all",type:"number",value:j.min_grade_all,onChange:s=>u("min_grade_all",s.target.value),placeholder:"e.g., 2 (5=lowest, 1=highest)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"min_year",children:"Min Year"}),e.jsx(x,{id:"min_year",type:"number",value:j.min_year,onChange:s=>u("min_year",s.target.value),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"max_year",children:"Max Year"}),e.jsx(x,{id:"max_year",type:"number",value:j.max_year,onChange:s=>u("max_year",s.target.value),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{id:"require_consistent_honor",checked:!!j.require_consistent_honor,onCheckedChange:s=>u("require_consistent_honor",s)}),e.jsx(i,{htmlFor:"require_consistent_honor",children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:"submit",disabled:ge,children:"Save Criteria"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>q(!1),children:"Cancel"})]})]})})]}),e.jsxs(w,{children:[e.jsx(f,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Existing Criteria (",z.length,")"]})}),e.jsx(S,{children:z.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No honor criteria set for College"}),e.jsx("p",{className:"text-sm",children:'Use the "Add New Criteria" button to create criteria for this level.'})]}):e.jsx("div",{className:"grid gap-4",children:z.map(s=>{var r,n,c,g;return e.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:(V==null?void 0:V.id)===s.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:((r=s.honorType)==null?void 0:r.name)||"Unknown Honor Type"}),e.jsx(o,{variant:"secondary",children:((n=s.honorType)==null?void 0:n.scope)||"Unknown"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:`edit_min_gpa_${s.id}`,children:"Min GPA (5-1 scale)"}),e.jsx(x,{id:`edit_min_gpa_${s.id}`,type:"number",step:"0.1",value:d.min_gpa,onChange:t=>_({...d,min_gpa:t.target.value}),placeholder:"e.g., 3.5"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:`edit_max_gpa_${s.id}`,children:"Max GPA (5-1 scale)"}),e.jsx(x,{id:`edit_max_gpa_${s.id}`,type:"number",step:"0.1",value:d.max_gpa,onChange:t=>_({...d,max_gpa:t.target.value}),placeholder:"e.g., 1.5"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:`edit_min_grade_${s.id}`,children:"Min Grade (any) (5-1 scale)"}),e.jsx(x,{id:`edit_min_grade_${s.id}`,type:"number",value:d.min_grade,onChange:t=>_({...d,min_grade:t.target.value}),placeholder:"e.g., 3"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:`edit_min_grade_all_${s.id}`,children:"Min Grade (all) (5-1 scale)"}),e.jsx(x,{id:`edit_min_grade_all_${s.id}`,type:"number",value:d.min_grade_all,onChange:t=>_({...d,min_grade_all:t.target.value}),placeholder:"e.g., 2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:`edit_min_year_${s.id}`,children:"Min Year"}),e.jsx(x,{id:`edit_min_year_${s.id}`,type:"number",value:d.min_year,onChange:t=>_({...d,min_year:t.target.value}),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:`edit_max_year_${s.id}`,children:"Max Year"}),e.jsx(x,{id:`edit_max_year_${s.id}`,type:"number",value:d.max_year,onChange:t=>_({...d,max_year:t.target.value}),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{id:`edit_require_consistent_${s.id}`,checked:d.require_consistent_honor,onCheckedChange:t=>_({...d,require_consistent_honor:t})}),e.jsx(i,{htmlFor:`edit_require_consistent_${s.id}`,children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:ue,children:"Cancel"}),e.jsx(m,{size:"sm",onClick:()=>ve(s.id),children:"Update Criteria"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:((c=s.honorType)==null?void 0:c.name)||"Unknown Honor Type"}),e.jsx(o,{variant:"secondary",children:((g=s.honorType)==null?void 0:g.scope)||"Unknown"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[s.min_gpa&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Min GPA:"})," ",s.min_gpa]}),s.max_gpa&&e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Max GPA:"})," ",s.max_gpa]}),s.min_grade&&e.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-yellow-700",children:"Min Grade:"})," ",s.min_grade]}),s.min_grade_all&&e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Min Grade (All):"})," ",s.min_grade_all]}),s.min_year&&s.max_year&&e.jsxs("div",{className:"bg-indigo-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-indigo-700",children:"Years:"})," ",s.min_year,"-",s.max_year]}),s.require_consistent_honor&&e.jsx("div",{className:"col-span-2",children:e.jsx(o,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:"Requires Consistent Honor Standing"})})]}),e.jsxs("div",{className:"flex justify-end mt-4 gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>je(s),children:"Edit"}),e.jsx(m,{variant:"destructive",size:"sm",onClick:()=>ye(s.id),children:"Delete"})]})]})},s.id)})})})]}),e.jsxs(w,{children:[e.jsxs(f,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Qualified College Students (",y.length,")"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["School Year: ",R," • Click on a student to view detailed grades and honor calculation"]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"grade_level_filter",children:"Year Level"}),e.jsxs(A,{value:(a==null?void 0:a.grade_level)||"all",onValueChange:s=>{const r=new URL(window.location.href);s&&s!=="all"?r.searchParams.set("grade_level",s):r.searchParams.delete("grade_level"),r.searchParams.delete("department_id"),r.searchParams.delete("course_id"),r.searchParams.delete("section_id"),window.location.href=r.toString()},children:[e.jsx(P,{children:e.jsx(M,{placeholder:"All Year Levels"})}),e.jsxs(T,{children:[e.jsx(p,{value:"all",children:"All Year Levels"}),h&&Object.entries(h).map(([s,r])=>e.jsx(p,{value:s,children:r},s))]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"department_filter",children:"Department"}),e.jsxs(A,{value:(a==null?void 0:a.department_id)||"all",onValueChange:s=>{const r=new URL(window.location.href);s&&s!=="all"?r.searchParams.set("department_id",s):r.searchParams.delete("department_id"),r.searchParams.delete("course_id"),r.searchParams.delete("section_id"),window.location.href=r.toString()},children:[e.jsx(P,{children:e.jsx(M,{placeholder:"All Departments"})}),e.jsxs(T,{children:[e.jsx(p,{value:"all",children:"All Departments"}),E&&E.map(s=>e.jsxs(p,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"course_filter",children:"Course"}),e.jsxs(A,{value:(a==null?void 0:a.course_id)||"all",onValueChange:s=>{const r=new URL(window.location.href);s&&s!=="all"?r.searchParams.set("course_id",s):r.searchParams.delete("course_id"),r.searchParams.delete("section_id"),window.location.href=r.toString()},children:[e.jsx(P,{children:e.jsx(M,{placeholder:"All Courses"})}),e.jsxs(T,{children:[e.jsx(p,{value:"all",children:"All Courses"}),G&&G.map(s=>e.jsxs(p,{value:s.id.toString(),children:[s.name," (",s.code,")",s.department&&` - ${s.department.name}`]},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"section_filter",children:"Section"}),e.jsxs(A,{value:(a==null?void 0:a.section_id)||"all",onValueChange:s=>{const r=new URL(window.location.href);s&&s!=="all"?r.searchParams.set("section_id",s):r.searchParams.delete("section_id"),window.location.href=r.toString()},children:[e.jsx(P,{children:e.jsx(M,{placeholder:"All Sections"})}),e.jsxs(T,{children:[e.jsx(p,{value:"all",children:"All Sections"}),U&&U.map(s=>e.jsxs(p,{value:s.id.toString(),children:[s.name," (",s.code,")",s.specific_year_level&&` - ${s.specific_year_level.replace("_"," ").replace(/\b\w/g,r=>r.toUpperCase())}`]},s.id))]})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(m,{variant:"outline",onClick:()=>{const s=new URL(window.location.href);s.searchParams.delete("grade_level"),s.searchParams.delete("department_id"),s.searchParams.delete("course_id"),s.searchParams.delete("section_id"),window.location.href=s.toString()},className:"w-full md:w-auto",children:"Clear All Filters"})}),((a==null?void 0:a.grade_level)||(a==null?void 0:a.department_id)||(a==null?void 0:a.course_id)||(a==null?void 0:a.section_id))&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Active Filters:"}),(a==null?void 0:a.grade_level)&&e.jsxs("span",{className:"ml-2",children:["Year Level: ",e.jsx(o,{variant:"secondary",children:(h==null?void 0:h[a.grade_level])||a.grade_level})]}),(a==null?void 0:a.department_id)&&e.jsxs("span",{className:"ml-2",children:["Department: ",e.jsx(o,{variant:"secondary",children:((L=E==null?void 0:E.find(s=>s.id.toString()===a.department_id))==null?void 0:L.name)||a.department_id})]}),(a==null?void 0:a.course_id)&&e.jsxs("span",{className:"ml-2",children:["Course: ",e.jsx(o,{variant:"secondary",children:((D=G==null?void 0:G.find(s=>s.id.toString()===a.course_id))==null?void 0:D.name)||a.course_id})]}),(a==null?void 0:a.section_id)&&e.jsxs("span",{className:"ml-2",children:["Section: ",e.jsx(o,{variant:"secondary",children:((ee=U==null?void 0:U.find(s=>s.id.toString()===a.section_id))==null?void 0:ee.name)||a.section_id})]})]})})]})]}),e.jsx(S,{children:y.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No qualified students found"}),e.jsx("p",{className:"text-sm",children:"Students need to meet honor criteria to appear here."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Ready to submit ",y.length," student",y.length!==1?"s":""," for approval"]}),e.jsxs(m,{onClick:()=>{if(y.some(r=>oe.some(n=>n.student_id===r.student.id&&n.school_year===R))){I("Some students have already been submitted for approval.","warning");return}confirm(`Submit ${y.length} qualified student(s) for chairperson approval?`)&&Se.post(route("admin.academic.honors.college.generate-results"),{school_year:R},{onSuccess:()=>{I(`Successfully submitted ${y.length} student(s) for approval!`,"success")},onError:()=>{I("Failed to submit students for approval. Please try again.","error")}})},className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4"}),"Submit for Approval"]})]}),e.jsx("div",{className:"grid gap-4",children:y.map((s,r)=>{var n,c,g,t,v;return e.jsx("div",{onClick:()=>Z(s),className:"border rounded-lg p-4 bg-white shadow-sm hover:shadow-md cursor-pointer transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",r+1]}),e.jsx("h4",{className:"font-semibold text-lg",children:s.student.name})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(o,{variant:"outline",className:"text-xs",children:s.student.student_number}),s.student.specific_year_level&&e.jsx(o,{variant:"secondary",className:"text-xs",children:(h==null?void 0:h[s.student.specific_year_level])||s.student.specific_year_level.replace("_"," ").replace(/\b\w/g,N=>N.toUpperCase())}),s.student.department&&e.jsx(o,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:s.student.department.name}),s.student.course&&e.jsx(o,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700",children:s.student.course.name}),s.student.section&&e.jsx(o,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:s.student.section.name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Average Grade:"}),e.jsx("div",{className:"text-lg font-bold",children:s.result.average_grade})]}),e.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-yellow-700",children:"Min Grade:"}),e.jsx("div",{className:"text-lg font-bold",children:s.result.min_grade})]}),e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Total Quarters:"}),e.jsx("div",{className:"text-lg font-bold",children:((n=s.result.quarter_averages)==null?void 0:n.length)??0})]}),e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Honor:"}),e.jsx("div",{className:"font-bold",children:((c=s.result.qualifications)==null?void 0:c.length)>0?e.jsx(o,{className:"bg-purple-100 text-purple-800 border-purple-200",children:((v=(t=(g=s.result.qualifications)==null?void 0:g[0])==null?void 0:t.honor_type)==null?void 0:v.name)||"N/A"}):e.jsx("span",{className:"text-gray-500",children:"N/A"})})]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx(m,{variant:"outline",size:"sm",onClick:N=>{N.stopPropagation(),Z(s)},children:"View Details"})})]})},s.student.id)})})]})})]}),l&&me&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[l.student.name," - Honor Details"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Student Number: ",l.student.student_number," | School Year: ",R,l.student.specific_year_level&&e.jsxs(e.Fragment,{children:[" | Year Level: ",(h==null?void 0:h[l.student.specific_year_level])||l.student.specific_year_level.replace("_"," ").replace(/\b\w/g,s=>s.toUpperCase())]}),l.student.course&&e.jsxs(e.Fragment,{children:[" | Course: ",l.student.course.name," (",l.student.course.code,")"]}),l.student.section&&e.jsxs(e.Fragment,{children:[" | Section: ",l.student.section.name," (",l.student.section.code,")"]})]})]}),e.jsx(m,{variant:"outline",onClick:()=>{J(!1),X(null)},children:"Close"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(w,{children:[e.jsx(f,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Honor Qualification Summary"]})}),e.jsxs(S,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Average Grade"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:l.result.average_grade})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-yellow-700",children:"Min Grade"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:l.result.min_grade})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-green-700",children:"Total Quarters"}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:((se=l.result.quarter_averages)==null?void 0:se.length)??0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700",children:"Honor"}),e.jsx("div",{className:"mt-1",children:((re=l.result.qualifications)==null?void 0:re.length)>0?e.jsx(o,{className:"bg-purple-100 text-purple-800 border-purple-200",children:((ne=(le=(ae=l.result.qualifications)==null?void 0:ae[0])==null?void 0:le.honor_type)==null?void 0:ne.name)||"N/A"}):e.jsx("span",{className:"text-gray-500",children:"N/A"})})]})]})]}),((de=l.result.grades_breakdown)==null?void 0:de.periods)&&l.result.grades_breakdown.periods.length>0&&e.jsxs(w,{children:[e.jsx(f,{children:e.jsx(C,{children:"Semester Averages"})}),e.jsx(S,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:l.result.grades_breakdown.periods.map(s=>e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:s.grade?s.grade.toFixed(2):"—"}),e.jsx("div",{className:"text-sm text-green-700",children:s.period}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.count," subjects"]})]},s.period_code))})})]}),((te=l.result.grades_breakdown)==null?void 0:te.subjects)&&Object.keys(l.result.grades_breakdown.subjects).length>0&&e.jsxs(w,{children:[e.jsx(f,{children:e.jsx(C,{children:"Subject Grades Breakdown"})}),e.jsxs(S,{children:[((ie=l.result.grades_breakdown)==null?void 0:ie.semester_summaries)&&e.jsx("div",{className:"mb-4 flex flex-wrap gap-2",children:["first_semester","second_semester"].map(s=>{var n,c;const r=(c=(n=l.result.grades_breakdown)==null?void 0:n.semester_summaries)==null?void 0:c[s];return e.jsxs(o,{variant:"secondary",className:"text-sm",children:[r==null?void 0:r.label,": ",(r==null?void 0:r.average)??"—"]},`summary-${s}`)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 p-3 text-left",rowSpan:2,children:"Subject"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",colSpan:2,children:"First Semester"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",rowSpan:2,children:"1st Sem Avg"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",colSpan:2,children:"Second Semester"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",rowSpan:2,children:"2nd Sem Avg"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",rowSpan:2,children:"Overall Avg"})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"border border-gray-300 p-2 text-center",children:"Pre-Final"}),e.jsx("th",{className:"border border-gray-300 p-2 text-center",children:"First Quarter"}),e.jsx("th",{className:"border border-gray-300 p-2 text-center",children:"Midterm"}),e.jsx("th",{className:"border border-gray-300 p-2 text-center",children:"Pre-Final"})]})]}),e.jsx("tbody",{children:Object.entries(l.result.grades_breakdown.subjects).map(([s,r])=>{const n=(r==null?void 0:r.p1)??"—",c=(r==null?void 0:r.Q1)??"—",g=(r==null?void 0:r["S2-MT"])??"—",t=(r==null?void 0:r["S2-PF"])??"—",v=[r==null?void 0:r.p1,r==null?void 0:r.Q1].filter(b=>typeof b=="number"),N=[r==null?void 0:r["S2-MT"],r==null?void 0:r["S2-PF"]].filter(b=>typeof b=="number"),Ne=v.length?(v.reduce((b,Y)=>b+Y,0)/v.length).toFixed(2):"—",be=N.length?(N.reduce((b,Y)=>b+Y,0)/N.length).toFixed(2):"—";return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:s}),e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:n}),e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:c}),e.jsx("td",{className:"border border-gray-300 p-3 text-center font-semibold",children:Ne}),e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:g}),e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:t}),e.jsx("td",{className:"border border-gray-300 p-3 text-center font-semibold",children:be}),e.jsx("td",{className:"border border-gray-300 p-3 text-center font-bold text-blue-600",children:(r==null?void 0:r.average)??"—"})]},s)})})]})})]})]}),!l.result.qualified&&l.result.reason&&e.jsxs(w,{children:[e.jsx(f,{children:e.jsx(C,{children:"Reason"})}),e.jsx(S,{children:e.jsx("div",{className:"text-sm text-gray-700",children:l.result.reason})})]})]})]})})]})})]})]})}export{gs as default};
