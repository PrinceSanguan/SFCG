import{u as we,r as b,m as Se,j as e,C as Ce,S as ke}from"./app-Dx5wNk5j.js";import{H as Fe}from"./header-CibeWQvD.js";import{S as Ae}from"./sidebar-BNHWwgqC.js";import{C as w,b as S,c as C,a as k}from"./card-BMH1KQmK.js";import{B as m}from"./button-etGNcxL8.js";import{I as h}from"./input-BEaMQ84V.js";import{L as i}from"./label-BOQbYBnq.js";import{S as G,a as P,b as $,c as q,d as N}from"./select-j2YPB6Lu.js";import{C as ne}from"./checkbox-9NhzPk0a.js";import{B as c}from"./badge-C-djbvNJ.js";import{A as Ee,a as He}from"./alert-DN7edruV.js";import{A as Te}from"./arrow-left-C2ZxgBSs.js";import{P as re}from"./plus-BhkcwfuR.js";import{T as A}from"./trophy-BdzcASvz.js";import{U as Ge}from"./upload-SwD0M6iR.js";import"./dropdown-menu-CEEk6xRP.js";import"./Combination-BQzR5vku.js";import"./index-DxaACQP9.js";import"./separator-DGL766Lm.js";import"./chevron-down-wF6ejKKe.js";import"./users-BUKT3z__.js";import"./chevron-right-BtJ-VpPz.js";import"./crown-D-tQwAyU.js";import"./building-2-BCbyEr4C.js";import"./user-cog-B4td0U_S.js";import"./book-open-DgKNStGF.js";import"./user-check-Gjs4xNas.js";import"./graduation-cap-BFIq8Weu.js";import"./notebook-1KRFCdnL.js";import"./chart-no-axes-column-increasing-CYhyNlz1.js";import"./shield-DTb1zVg7.js";import"./index-DIqt_v0N.js";import"./index-UV7Lx2p3.js";import"./check-CoS5fav-.js";function gs({user:Y,honorTypes:E,criteria:M,schoolYears:U,qualifiedStudents:te,honorResults:le,currentSchoolYear:de,gradeLevels:x,sections:T,filters:l,cacheBuster:J}){var ee,se,ae;const p=te||[],f=le||[],H=de||"2024-2025",X=J||Date.now(),{addToast:D}=we(),ie=s=>{var n,r;if((n=s==null?void 0:s.honor_type)!=null&&n.name)return s.honor_type.name;if((r=s==null?void 0:s.honorType)!=null&&r.name)return s.honorType.name;const a=E.find(g=>g.id===s.honor_type_id);return(a==null?void 0:a.name)||"Unknown Honor Type"},ce=s=>{var n,r;if((n=s==null?void 0:s.honor_type)!=null&&n.scope)return s.honor_type.scope;if((r=s==null?void 0:s.honorType)!=null&&r.scope)return s.honorType.scope;const a=E.find(g=>g.id===s.honor_type_id);return(a==null?void 0:a.scope)||"Unknown"},oe=s=>{var n,r;if((n=s==null?void 0:s.honor_type)!=null&&n.name)return s.honor_type.name;if((r=s==null?void 0:s.honorType)!=null&&r.name)return s.honorType.name;const a=E.find(g=>g.id===s.honor_type_id);return(a==null?void 0:a.name)||"Unknown Honor Type"},W=s=>{var a;return(a=s==null?void 0:s.section)!=null&&a.name?s.section.name:s!=null&&s.sectionName?s.sectionName:"No Section"};b.useEffect(()=>{},[J]);const[B,u]=b.useState(null),[Q,V]=b.useState(null),[d,j]=b.useState({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),[me,I]=b.useState(!1),[xe,O]=b.useState(!1),[F,z]=b.useState({name:"",key:"",scope:"basic"}),[t,Z]=b.useState(null),[he,R]=b.useState(!1),{data:_,setData:y,post:ge,processing:pe,errors:L,reset:ue}=Se({academic_level_id:"1",honor_type_id:"",school_year:"2024-2025",min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1}),je=s=>{s.preventDefault(),ge("/admin/academic/honors/criteria",{onSuccess:()=>{u({type:"success",text:"Criteria saved successfully!"}),ue(),I(!1),window.location.reload()},onError:()=>u({type:"error",text:"Failed to save criteria."})})},_e=s=>{var a;s.preventDefault(),fetch("/admin/academic/honors/types",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify(F)}).then(n=>n.json()).then(n=>{n.success?(u({type:"success",text:"Honor type created successfully!"}),z({name:"",key:"",scope:"basic"}),O(!1),window.location.reload()):u({type:"error",text:"Failed to create honor type."})}).catch(()=>u({type:"error",text:"Failed to create honor type."}))},ye=s=>{var a,n,r,g,o,v;V(s),j({min_gpa:((a=s.min_gpa)==null?void 0:a.toString())||"",max_gpa:((n=s.max_gpa)==null?void 0:n.toString())||"",min_grade:((r=s.min_grade)==null?void 0:r.toString())||"",min_grade_all:((g=s.min_grade_all)==null?void 0:g.toString())||"",min_year:((o=s.min_year)==null?void 0:o.toString())||"",max_year:((v=s.max_year)==null?void 0:v.toString())||"",require_consistent_honor:s.require_consistent_honor})},ve=()=>{V(null),j({min_gpa:"",max_gpa:"",min_grade:"",min_grade_all:"",min_year:"",max_year:"",require_consistent_honor:!1})},be=s=>{Z(s),R(!0)},Ne=s=>{var n;const a={...Q,min_gpa:parseFloat(d.min_gpa)||null,max_gpa:parseFloat(d.max_gpa)||null,min_grade:parseFloat(d.min_grade)||null,min_grade_all:parseFloat(d.min_grade_all)||null,min_year:parseInt(d.min_year)||null,max_year:parseInt(d.max_year)||null,require_consistent_honor:d.require_consistent_honor};fetch(`/admin/academic/honors/criteria/${s}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""},body:JSON.stringify(a)}).then(r=>{if(!r.ok)throw new Error(`HTTP ${r.status}`);return r.json()}).then(()=>{u({type:"success",text:"Criteria updated successfully!"}),V(null),window.location.reload()}).catch(()=>u({type:"error",text:"Failed to update criteria."}))},fe=s=>{var a;window.confirm("Are you sure you want to delete this criterion?")&&fetch(`/admin/academic/honors/criteria/${s}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""}}).then(n=>{if(!n.ok)throw new Error(`HTTP ${n.status}`);return n.json()}).then(()=>{u({type:"success",text:"Criteria deleted successfully!"}),window.location.reload()}).catch(()=>u({type:"error",text:"Failed to delete criteria."}))};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(Ae,{user:Y}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(Fe,{user:Y}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 md:p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),"Back"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Elementary Honor Criteria"})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage honor criteria and types specifically for Elementary level students."})]})}),B&&e.jsxs(Ee,{className:B.type==="success"?"border-green-500":"border-red-500",children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx(He,{children:B.text})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(m,{variant:"outline",onClick:()=>O(!0),className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),"Add Honor Type"]}),e.jsxs(m,{onClick:()=>I(!0),className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),"Add New Criteria"]})]}),me&&e.jsxs(w,{children:[e.jsx(S,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Add Honor Criteria"]})}),e.jsx(k,{children:e.jsxs("form",{onSubmit:je,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(i,{htmlFor:"honor_type_id",children:"Honor Type"}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>O(!0),className:"text-xs",children:"+ Add New"})]}),E&&E.length>0?e.jsxs(G,{value:_.honor_type_id||"",onValueChange:s=>y("honor_type_id",s),children:[e.jsx(P,{children:e.jsx($,{placeholder:"Select honor type"})}),e.jsx(q,{children:E.filter(s=>s.scope==="basic"||s.scope==="advanced").map(s=>e.jsxs(N,{value:s.id.toString(),children:[s.name," (",s.scope,")"]},s.id))})]}):e.jsx("div",{className:"p-2 text-sm text-gray-500 bg-gray-100 rounded border",children:"Loading honor types..."}),L.honor_type_id&&e.jsx("p",{className:"text-sm text-red-500",children:L.honor_type_id})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"school_year",children:"School Year"}),e.jsxs(G,{value:_.school_year||"",onValueChange:s=>y("school_year",s),children:[e.jsx(P,{children:e.jsx($,{placeholder:"Select school year"})}),e.jsx(q,{children:(U!=null&&U.length?U:["2024-2025"]).filter(s=>s&&s.trim()!=="").map(s=>e.jsx(N,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"min_gpa",children:"Min GPA"}),e.jsx(h,{id:"min_gpa",type:"number",step:"0.01",value:_.min_gpa,onChange:s=>y("min_gpa",s.target.value),placeholder:"e.g., 90.0"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"max_gpa",children:"Max GPA"}),e.jsx(h,{id:"max_gpa",type:"number",step:"0.01",value:_.max_gpa,onChange:s=>y("max_gpa",s.target.value),placeholder:"e.g., 97.0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"min_grade",children:"Min Grade (any)"}),e.jsx(h,{id:"min_grade",type:"number",value:_.min_grade,onChange:s=>y("min_grade",s.target.value),placeholder:"e.g., 90"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"min_grade_all",children:"Min Grade (all)"}),e.jsx(h,{id:"min_grade_all",type:"number",value:_.min_grade_all,onChange:s=>y("min_grade_all",s.target.value),placeholder:"e.g., 93"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"min_year",children:"Min Year"}),e.jsx(h,{id:"min_year",type:"number",value:_.min_year,onChange:s=>y("min_year",s.target.value),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"max_year",children:"Max Year"}),e.jsx(h,{id:"max_year",type:"number",value:_.max_year,onChange:s=>y("max_year",s.target.value),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{id:"require_consistent_honor",checked:!!_.require_consistent_honor,onCheckedChange:s=>y("require_consistent_honor",s)}),e.jsx(i,{htmlFor:"require_consistent_honor",children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:"submit",disabled:pe,children:"Save Criteria"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>I(!1),children:"Cancel"})]})]})})]}),xe&&e.jsxs(w,{children:[e.jsx(S,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Add New Honor Type"]})}),e.jsx(k,{children:e.jsxs("form",{onSubmit:_e,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"honor_type_name",children:"Honor Type Name"}),e.jsx(h,{id:"honor_type_name",type:"text",value:F.name,onChange:s=>z({...F,name:s.target.value}),placeholder:"e.g., Academic Excellence",required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"honor_type_key",children:"Key (URL-friendly)"}),e.jsx(h,{id:"honor_type_key",type:"text",value:F.key,onChange:s=>z({...F,key:s.target.value.toLowerCase().replace(/[^a-z0-9]/g,"_")}),placeholder:"e.g., academic_excellence",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"honor_type_scope",children:"Scope"}),e.jsxs(G,{value:F.scope,onValueChange:s=>z({...F,scope:s}),children:[e.jsx(P,{children:e.jsx($,{placeholder:"Select scope"})}),e.jsxs(q,{children:[e.jsx(N,{value:"basic",children:"Basic (Elementary/JHS/SHS)"}),e.jsx(N,{value:"advanced",children:"Advanced (SHS/College)"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:"submit",children:"Create Honor Type"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>O(!1),children:"Cancel"})]})]})})]}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Existing Criteria (",M.length,")"]})}),e.jsx(k,{children:M.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(A,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No honor criteria set for Elementary"}),e.jsx("p",{className:"text-sm",children:'Use the "Add New Criteria" button to create criteria for this level.'})]}):e.jsx("div",{className:"grid gap-4",children:M.map(s=>{var a,n;return e.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:(Q==null?void 0:Q.id)===s.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:((a=s.honorType)==null?void 0:a.name)||"Unknown Honor Type"}),e.jsx(c,{variant:"secondary",children:((n=s.honorType)==null?void 0:n.scope)||"Unknown"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:`edit_min_gpa_${s.id}`,children:"Min GPA"}),e.jsx(h,{id:`edit_min_gpa_${s.id}`,type:"number",step:"0.01",value:d.min_gpa,onChange:r=>j({...d,min_gpa:r.target.value}),placeholder:"e.g., 90.0"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:`edit_max_gpa_${s.id}`,children:"Max GPA"}),e.jsx(h,{id:`edit_max_gpa_${s.id}`,type:"number",step:"0.01",value:d.max_gpa,onChange:r=>j({...d,max_gpa:r.target.value}),placeholder:"e.g., 97.0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:`edit_min_grade_${s.id}`,children:"Min Grade (any)"}),e.jsx(h,{id:`edit_min_grade_${s.id}`,type:"number",value:d.min_grade,onChange:r=>j({...d,min_grade:r.target.value}),placeholder:"e.g., 90"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:`edit_min_grade_all_${s.id}`,children:"Min Grade (all)"}),e.jsx(h,{id:`edit_min_grade_all_${s.id}`,type:"number",value:d.min_grade_all,onChange:r=>j({...d,min_grade_all:r.target.value}),placeholder:"e.g., 93"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:`edit_min_year_${s.id}`,children:"Min Year"}),e.jsx(h,{id:`edit_min_year_${s.id}`,type:"number",value:d.min_year,onChange:r=>j({...d,min_year:r.target.value}),placeholder:"e.g., 2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:`edit_max_year_${s.id}`,children:"Max Year"}),e.jsx(h,{id:`edit_max_year_${s.id}`,type:"number",value:d.max_year,onChange:r=>j({...d,max_year:r.target.value}),placeholder:"e.g., 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{id:`edit_require_consistent_${s.id}`,checked:d.require_consistent_honor,onCheckedChange:r=>j({...d,require_consistent_honor:r})}),e.jsx(i,{htmlFor:`edit_require_consistent_${s.id}`,children:"Require consistent honor standing"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:ve,children:"Cancel"}),e.jsx(m,{size:"sm",onClick:()=>Ne(s.id),children:"Update Criteria"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-lg",children:ie(s)}),e.jsx(c,{variant:"secondary",children:ce(s)})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[s.min_gpa&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Min GPA:"})," ",s.min_gpa]}),s.max_gpa&&e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Max GPA:"})," ",s.max_gpa]}),s.min_grade&&e.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-yellow-700",children:"Min Grade:"})," ",s.min_grade]}),s.min_grade_all&&e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Min Grade (All):"})," ",s.min_grade_all]}),s.min_year&&s.max_year&&e.jsxs("div",{className:"bg-indigo-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-indigo-700",children:"Years:"})," ",s.min_year,"-",s.max_year]}),s.require_consistent_honor&&e.jsx("div",{className:"col-span-2",children:e.jsx(c,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:"Requires Consistent Honor Standing"})})]}),e.jsxs("div",{className:"flex justify-end mt-4 gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>ye(s),children:"Edit"}),e.jsx(m,{variant:"destructive",size:"sm",onClick:()=>fe(s.id),children:"Delete"})]})]})},s.id)})})})]}),e.jsxs(w,{children:[e.jsxs(S,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Elementary Honor Results (",f.length,") | Qualified Students (",p.length,")"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["School Year: ",H," • Click on a student to view detailed grades and honor calculation"]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"grade_level_filter",children:"Grade Level"}),e.jsxs(G,{value:(l==null?void 0:l.grade_level)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("grade_level",s):a.searchParams.delete("grade_level"),window.location.href=a.toString()},children:[e.jsx(P,{children:e.jsx($,{placeholder:"All Grade Levels"})}),e.jsxs(q,{children:[e.jsx(N,{value:"all",children:"All Grade Levels"}),x&&Object.entries(x).map(([s,a])=>e.jsx(N,{value:s,children:a},s))]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"section_filter",children:"Section"}),e.jsxs(G,{value:(l==null?void 0:l.section_id)||"all",onValueChange:s=>{const a=new URL(window.location.href);s&&s!=="all"?a.searchParams.set("section_id",s):a.searchParams.delete("section_id"),window.location.href=a.toString()},children:[e.jsx(P,{children:e.jsx($,{placeholder:"All Sections"})}),e.jsxs(q,{children:[e.jsx(N,{value:"all",children:"All Sections"}),e.jsx(N,{value:"no_section",children:"No Section"}),T&&T.map(s=>e.jsxs(N,{value:s.id.toString(),children:[s.name," (",s.code,")",s.specific_year_level&&` - ${s.specific_year_level.replace("grade_","Grade ")}`]},s.id))]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(m,{variant:"outline",onClick:()=>{const s=new URL(window.location.href);s.searchParams.delete("grade_level"),s.searchParams.delete("section_id"),window.location.href=s.toString()},className:"w-full",children:"Clear Filters"})})]}),((l==null?void 0:l.grade_level)||(l==null?void 0:l.section_id))&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Active Filters:"}),(l==null?void 0:l.grade_level)&&e.jsxs("span",{className:"ml-2",children:["Grade Level: ",e.jsx(c,{variant:"secondary",children:(x==null?void 0:x[l.grade_level])||l.grade_level})]}),(l==null?void 0:l.section_id)&&e.jsxs("span",{className:"ml-2",children:["Section: ",e.jsx(c,{variant:"secondary",children:l.section_id==="no_section"?"No Section":((ee=T==null?void 0:T.find(s=>s.id.toString()===l.section_id))==null?void 0:ee.name)||l.section_id})]})]})})]})]}),e.jsx(k,{children:f.length===0&&p.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(A,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No honor results or qualified students found"}),e.jsx("p",{className:"text-sm",children:"Students need to meet honor criteria and have approved honors to appear here."})]}):e.jsxs("div",{className:"space-y-6",children:[f.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:["Approved Honor Results (",f.length,")"]}),e.jsx("div",{className:"grid gap-4",children:f.map((s,a)=>e.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",a+1]}),e.jsx("h4",{className:"font-semibold text-lg",children:s.student.name})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",className:"text-xs",children:s.student.student_number}),s.student.specific_year_level&&e.jsx(c,{variant:"secondary",className:"text-xs",children:(x==null?void 0:x[s.student.specific_year_level])||s.student.specific_year_level.replace("grade_","Grade ")}),s.student.section?e.jsx(c,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:W(s.student)}):e.jsx(c,{variant:"outline",className:"text-xs bg-gray-50 text-gray-500",children:"No Section"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"GPA:"}),e.jsx("div",{className:"text-lg font-bold",children:s.gpa})]}),e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Honor Type:"}),e.jsx("div",{className:"font-bold",children:e.jsx(c,{className:"bg-purple-100 text-purple-800 border-purple-200",children:oe(s)})})]}),e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Status:"}),e.jsx("div",{className:"font-bold",children:s.is_approved?e.jsx(c,{variant:"default",className:"bg-green-100 text-green-800",children:"Approved"}):s.is_pending_approval?e.jsx(c,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Pending"}):s.is_rejected?e.jsx(c,{variant:"destructive",className:"bg-red-100 text-red-800",children:"Rejected"}):e.jsx(c,{variant:"outline",children:"Unknown"})})]}),e.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"School Year:"}),e.jsx("div",{className:"text-sm font-bold",children:s.school_year})]})]})]})})},s.id))})]}),p.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Calculated Qualified Students (",p.length,")"]}),e.jsxs(m,{onClick:()=>{console.log("[Elementary Submit] Starting submission process..."),console.log("[Elementary Submit] Qualified students count:",p.length),console.log("[Elementary Submit] Current school year:",H),console.log("[Elementary Submit] Honor results count:",f.length);const s=p.filter(n=>!f.some(g=>g.student_id===n.student.id&&g.school_year===H)),a=p.length-s.length;if(console.log("[Elementary Submit] Total qualified students:",p.length),console.log("[Elementary Submit] Already submitted count:",a),console.log("[Elementary Submit] Students to submit count:",s.length),console.log("[Elementary Submit] Student names to submit:",s.map(n=>n.student.name)),a>0&&console.log("[Elementary Submit] Already submitted students:",p.filter(n=>f.some(r=>r.student_id===n.student.id&&r.school_year===H)).map(n=>n.student.name)),s.length===0){console.log("[Elementary Submit] All students already submitted - blocking submission"),D("All qualified students have already been submitted for approval.","warning");return}confirm(`Submit ${s.length} qualified student(s) for principal approval?`)?(console.log("[Elementary Submit] User confirmed. Sending data..."),console.log("[Elementary Submit] Submitting students:",s.map(n=>({id:n.student.id,name:n.student.name}))),ke.post(route("admin.academic.honors.elementary.generate-results"),{school_year:H},{onSuccess:n=>{console.log("[Elementary Submit] Success response:",n),D(`Successfully submitted ${s.length} student(s) for approval!`,"success")},onError:n=>{console.error("[Elementary Submit] Error response:",n),D("Failed to submit students for approval. Please try again.","error")}})):console.log("[Elementary Submit] User cancelled submission")},className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-4 w-4"}),"Submit for Approval"]})]}),e.jsx("div",{className:"grid gap-4",children:p.map((s,a)=>e.jsx("div",{onClick:()=>be(s),className:"border rounded-lg p-4 bg-white shadow-sm hover:shadow-md cursor-pointer transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",a+1]}),e.jsx("h4",{className:"font-semibold text-lg",children:s.student.name})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",className:"text-xs",children:s.student.student_number}),s.student.specific_year_level&&e.jsx(c,{variant:"secondary",className:"text-xs",children:(x==null?void 0:x[s.student.specific_year_level])||s.student.specific_year_level.replace("grade_","Grade ")}),s.student.section?e.jsx(c,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:W(s.student)}):e.jsx(c,{variant:"outline",className:"text-xs bg-gray-50 text-gray-500",children:"No Section"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Average Grade:"}),e.jsx("div",{className:"text-lg font-bold",children:s.average_grade})]}),e.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-yellow-700",children:"Min Grade:"}),e.jsx("div",{className:"text-lg font-bold",children:s.min_grade})]}),e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Honor:"}),e.jsx("div",{className:"font-bold",children:s.honor_type?e.jsx(c,{className:"bg-purple-100 text-purple-800 border-purple-200",children:s.honor_type.name}):e.jsx("span",{className:"text-gray-500",children:"N/A"})})]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx(m,{variant:"outline",size:"sm",children:"View Details"})})]})},s.student.id))},`students-${X}`)]})]})})]})]})})]}),t&&he&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[t.student.name," - Honor Details"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Student Number: ",t.student.student_number," | School Year: ",H,t.student.specific_year_level&&e.jsxs(e.Fragment,{children:[" | Grade: ",(x==null?void 0:x[t.student.specific_year_level])||t.student.specific_year_level.replace("grade_","Grade ")]}),t.student.section&&e.jsxs(e.Fragment,{children:[" | Section: ",t.student.section.name," (",t.student.section.code,")"]})]})]}),e.jsx(m,{variant:"outline",onClick:()=>{R(!1),Z(null)},children:"Close"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(w,{children:[e.jsx(S,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Honor Qualification Summary"]})}),e.jsx(k,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Average Grade"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.average_grade})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-green-700",children:"Min Grade Required"}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.min_grade})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700",children:"Honor Achieved"}),e.jsx("div",{className:"text-lg font-bold",children:t.honor_type?e.jsx(c,{className:"bg-purple-100 text-purple-800 border-purple-200",children:t.honor_type.name}):e.jsx("span",{className:"text-gray-500",children:"N/A"})})]})]})})]}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(C,{children:"Honor Criteria Requirements"})}),e.jsx(k,{children:e.jsx("div",{className:"space-y-3",children:M.filter(s=>{var a,n;return((a=s.honorType)==null?void 0:a.name)===((n=t.honor_type)==null?void 0:n.name)}).map(s=>{var a;return e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:((a=s.honorType)==null?void 0:a.name)||"Unknown Honor Type"}),e.jsx(c,{variant:s.min_grade<=t.average_grade?"default":"destructive",children:s.min_grade<=t.average_grade?"Qualified":"Not Qualified"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Minimum Grade Required:"})," ",s.min_grade]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Student's Average:"})," ",t.average_grade]})]})]},s.id)})})})]}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(C,{children:"Subject Grades Breakdown"})}),e.jsx(k,{children:(se=t.grades_breakdown)!=null&&se.subjects&&Object.keys(t.grades_breakdown.subjects).length>0?(()=>{const s=Object.values(t.grades_breakdown.subjects)[0],a=Object.keys(s).filter(o=>o!=="average"&&o!=="subject_name"&&o!=="subject_code"),n={Q1:1,Q2:2,Q3:3,Q4:4,F4:4},r=a.sort((o,v)=>(n[o]||999)-(n[v]||999)),g=o=>o==="F4"?"Q4":o;return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 p-3 text-left",children:"Subject"}),r.map(o=>e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:g(o)},o)),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Average"})]})}),e.jsx("tbody",{children:Object.entries(t.grades_breakdown.subjects).map(([o,v])=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:o}),r.map(K=>e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:v[K]?v[K]:"—"},K)),e.jsx("td",{className:"border border-gray-300 p-3 text-center font-bold text-blue-600",children:v.average?v.average.toFixed(2):"—"})]},o))})]})})})():e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{children:"No detailed grades breakdown available"})})})]}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(C,{children:"Quarter Averages"})}),e.jsx(k,{children:(ae=t.grades_breakdown)!=null&&ae.periods&&t.grades_breakdown.periods.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:t.grades_breakdown.periods.map(s=>{const a=s.period_code==="F4"?"Fourth Quarter":s.period;return e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.grade?s.grade.toFixed(2):"—"}),e.jsx("div",{className:"text-sm text-blue-600",children:a}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.count," subjects"]})]},s.period_code)})}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{children:"No quarter averages available"})})})]})]})]})})]},X)}export{gs as default};
